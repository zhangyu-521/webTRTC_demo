var fs = (r, i, o) =>
  new Promise((p, m) => {
    var S = (B) => {
        try {
          I(o.next(B));
        } catch (ee) {
          m(ee);
        }
      },
      O = (B) => {
        try {
          I(o.throw(B));
        } catch (ee) {
          m(ee);
        }
      },
      I = (B) => (B.done ? p(B.value) : Promise.resolve(B.value).then(S, O));
    I((o = o.apply(r, i)).next());
  });
function vt(r) {
  "@babel/helpers - typeof";
  return (
    (vt =
      typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
        ? function (i) {
            return typeof i;
          }
        : function (i) {
            return i &&
              typeof Symbol == "function" &&
              i.constructor === Symbol &&
              i !== Symbol.prototype
              ? "symbol"
              : typeof i;
          }),
    vt(r)
  );
}
function aq(r, i) {
  if (vt(r) != "object" || !r) return r;
  var o = r[Symbol.toPrimitive];
  if (o !== void 0) {
    var p = o.call(r, i || "default");
    if (vt(p) != "object") return p;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (i === "string" ? String : Number)(r);
}
function G4(r) {
  var i = aq(r, "string");
  return vt(i) == "symbol" ? i : i + "";
}
function lt(r, i, o) {
  return (
    (i = G4(i)) in r
      ? Object.defineProperty(r, i, {
          value: o,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (r[i] = o),
    r
  );
}
function K3(r, i, o, p, m, S, O) {
  try {
    var I = r[S](O),
      B = I.value;
  } catch (ee) {
    return void o(ee);
  }
  I.done ? i(B) : Promise.resolve(B).then(p, m);
}
function Wt(r) {
  return function () {
    var i = this,
      o = arguments;
    return new Promise(function (p, m) {
      var S = r.apply(i, o);
      function O(B) {
        K3(S, p, m, O, I, "next", B);
      }
      function I(B) {
        K3(S, p, m, O, I, "throw", B);
      }
      O(void 0);
    });
  };
}
var xb =
  typeof globalThis != "undefined"
    ? globalThis
    : typeof window != "undefined"
    ? window
    : typeof global != "undefined"
    ? global
    : typeof self != "undefined"
    ? self
    : {};
function bS(r) {
  return r && r.__esModule && Object.prototype.hasOwnProperty.call(r, "default")
    ? r.default
    : r;
}
var q4 = { exports: {} },
  K4 = { exports: {} };
(function (r) {
  function i(o) {
    "@babel/helpers - typeof";
    return (
      (r.exports = i =
        typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
          ? function (p) {
              return typeof p;
            }
          : function (p) {
              return p &&
                typeof Symbol == "function" &&
                p.constructor === Symbol &&
                p !== Symbol.prototype
                ? "symbol"
                : typeof p;
            }),
      (r.exports.__esModule = !0),
      (r.exports.default = r.exports),
      i(o)
    );
  }
  (r.exports = i), (r.exports.__esModule = !0), (r.exports.default = r.exports);
})(K4);
var oq = K4.exports;
(function (r) {
  var i = oq.default;
  function o() {
    /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
    (r.exports = o =
      function () {
        return m;
      }),
      (r.exports.__esModule = !0),
      (r.exports.default = r.exports);
    var p,
      m = {},
      S = Object.prototype,
      O = S.hasOwnProperty,
      I =
        Object.defineProperty ||
        function ($e, Ke, Re) {
          $e[Ke] = Re.value;
        },
      B = typeof Symbol == "function" ? Symbol : {},
      ee = B.iterator || "@@iterator",
      oe = B.asyncIterator || "@@asyncIterator",
      ie = B.toStringTag || "@@toStringTag";
    function be($e, Ke, Re) {
      return (
        Object.defineProperty($e, Ke, {
          value: Re,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        }),
        $e[Ke]
      );
    }
    try {
      be({}, "");
    } catch ($e) {
      be = function (Re, ge, je) {
        return (Re[ge] = je);
      };
    }
    function Ie($e, Ke, Re, ge) {
      var je = Ke && Ke.prototype instanceof Jt ? Ke : Jt,
        ve = Object.create(je.prototype),
        Y = new ct(ge || []);
      return (
        I(ve, "_invoke", {
          value: jt($e, Re, Y),
        }),
        ve
      );
    }
    function Ce($e, Ke, Re) {
      try {
        return {
          type: "normal",
          arg: $e.call(Ke, Re),
        };
      } catch (ge) {
        return {
          type: "throw",
          arg: ge,
        };
      }
    }
    m.wrap = Ie;
    var We = "suspendedStart",
      de = "suspendedYield",
      _t = "executing",
      It = "completed",
      Tt = {};
    function Jt() {}
    function yt() {}
    function Et() {}
    var Ze = {};
    be(Ze, ee, function () {
      return this;
    });
    var Vt = Object.getPrototypeOf,
      pt = Vt && Vt(Vt(Lt([])));
    pt && pt !== S && O.call(pt, ee) && (Ze = pt);
    var nt = (Et.prototype = Jt.prototype = Object.create(Ze));
    function Be($e) {
      ["next", "throw", "return"].forEach(function (Ke) {
        be($e, Ke, function (Re) {
          return this._invoke(Ke, Re);
        });
      });
    }
    function rt($e, Ke) {
      function Re(je, ve, Y, ce) {
        var he = Ce($e[je], $e, ve);
        if (he.type !== "throw") {
          var me = he.arg,
            Pe = me.value;
          return Pe && i(Pe) == "object" && O.call(Pe, "__await")
            ? Ke.resolve(Pe.__await).then(
                function (it) {
                  Re("next", it, Y, ce);
                },
                function (it) {
                  Re("throw", it, Y, ce);
                }
              )
            : Ke.resolve(Pe).then(
                function (it) {
                  (me.value = it), Y(me);
                },
                function (it) {
                  return Re("throw", it, Y, ce);
                }
              );
        }
        ce(he.arg);
      }
      var ge;
      I(this, "_invoke", {
        value: function (ve, Y) {
          function ce() {
            return new Ke(function (he, me) {
              Re(ve, Y, he, me);
            });
          }
          return (ge = ge ? ge.then(ce, ce) : ce());
        },
      });
    }
    function jt($e, Ke, Re) {
      var ge = We;
      return function (je, ve) {
        if (ge === _t) throw Error("Generator is already running");
        if (ge === It) {
          if (je === "throw") throw ve;
          return {
            value: p,
            done: !0,
          };
        }
        for (Re.method = je, Re.arg = ve; ; ) {
          var Y = Re.delegate;
          if (Y) {
            var ce = ot(Y, Re);
            if (ce) {
              if (ce === Tt) continue;
              return ce;
            }
          }
          if (Re.method === "next") Re.sent = Re._sent = Re.arg;
          else if (Re.method === "throw") {
            if (ge === We) throw ((ge = It), Re.arg);
            Re.dispatchException(Re.arg);
          } else Re.method === "return" && Re.abrupt("return", Re.arg);
          ge = _t;
          var he = Ce($e, Ke, Re);
          if (he.type === "normal") {
            if (((ge = Re.done ? It : de), he.arg === Tt)) continue;
            return {
              value: he.arg,
              done: Re.done,
            };
          }
          he.type === "throw" &&
            ((ge = It), (Re.method = "throw"), (Re.arg = he.arg));
        }
      };
    }
    function ot($e, Ke) {
      var Re = Ke.method,
        ge = $e.iterator[Re];
      if (ge === p)
        return (
          (Ke.delegate = null),
          (Re === "throw" &&
            $e.iterator.return &&
            ((Ke.method = "return"),
            (Ke.arg = p),
            ot($e, Ke),
            Ke.method === "throw")) ||
            (Re !== "return" &&
              ((Ke.method = "throw"),
              (Ke.arg = new TypeError(
                "The iterator does not provide a '" + Re + "' method"
              )))),
          Tt
        );
      var je = Ce(ge, $e.iterator, Ke.arg);
      if (je.type === "throw")
        return (
          (Ke.method = "throw"), (Ke.arg = je.arg), (Ke.delegate = null), Tt
        );
      var ve = je.arg;
      return ve
        ? ve.done
          ? ((Ke[$e.resultName] = ve.value),
            (Ke.next = $e.nextLoc),
            Ke.method !== "return" && ((Ke.method = "next"), (Ke.arg = p)),
            (Ke.delegate = null),
            Tt)
          : ve
        : ((Ke.method = "throw"),
          (Ke.arg = new TypeError("iterator result is not an object")),
          (Ke.delegate = null),
          Tt);
    }
    function zt($e) {
      var Ke = {
        tryLoc: $e[0],
      };
      1 in $e && (Ke.catchLoc = $e[1]),
        2 in $e && ((Ke.finallyLoc = $e[2]), (Ke.afterLoc = $e[3])),
        this.tryEntries.push(Ke);
    }
    function st($e) {
      var Ke = $e.completion || {};
      (Ke.type = "normal"), delete Ke.arg, ($e.completion = Ke);
    }
    function ct($e) {
      (this.tryEntries = [
        {
          tryLoc: "root",
        },
      ]),
        $e.forEach(zt, this),
        this.reset(!0);
    }
    function Lt($e) {
      if ($e || $e === "") {
        var Ke = $e[ee];
        if (Ke) return Ke.call($e);
        if (typeof $e.next == "function") return $e;
        if (!isNaN($e.length)) {
          var Re = -1,
            ge = function je() {
              for (; ++Re < $e.length; )
                if (O.call($e, Re))
                  return (je.value = $e[Re]), (je.done = !1), je;
              return (je.value = p), (je.done = !0), je;
            };
          return (ge.next = ge);
        }
      }
      throw new TypeError(i($e) + " is not iterable");
    }
    return (
      (yt.prototype = Et),
      I(nt, "constructor", {
        value: Et,
        configurable: !0,
      }),
      I(Et, "constructor", {
        value: yt,
        configurable: !0,
      }),
      (yt.displayName = be(Et, ie, "GeneratorFunction")),
      (m.isGeneratorFunction = function ($e) {
        var Ke = typeof $e == "function" && $e.constructor;
        return (
          !!Ke &&
          (Ke === yt || (Ke.displayName || Ke.name) === "GeneratorFunction")
        );
      }),
      (m.mark = function ($e) {
        return (
          Object.setPrototypeOf
            ? Object.setPrototypeOf($e, Et)
            : (($e.__proto__ = Et), be($e, ie, "GeneratorFunction")),
          ($e.prototype = Object.create(nt)),
          $e
        );
      }),
      (m.awrap = function ($e) {
        return {
          __await: $e,
        };
      }),
      Be(rt.prototype),
      be(rt.prototype, oe, function () {
        return this;
      }),
      (m.AsyncIterator = rt),
      (m.async = function ($e, Ke, Re, ge, je) {
        je === void 0 && (je = Promise);
        var ve = new rt(Ie($e, Ke, Re, ge), je);
        return m.isGeneratorFunction(Ke)
          ? ve
          : ve.next().then(function (Y) {
              return Y.done ? Y.value : ve.next();
            });
      }),
      Be(nt),
      be(nt, ie, "Generator"),
      be(nt, ee, function () {
        return this;
      }),
      be(nt, "toString", function () {
        return "[object Generator]";
      }),
      (m.keys = function ($e) {
        var Ke = Object($e),
          Re = [];
        for (var ge in Ke) Re.push(ge);
        return (
          Re.reverse(),
          function je() {
            for (; Re.length; ) {
              var ve = Re.pop();
              if (ve in Ke) return (je.value = ve), (je.done = !1), je;
            }
            return (je.done = !0), je;
          }
        );
      }),
      (m.values = Lt),
      (ct.prototype = {
        constructor: ct,
        reset: function (Ke) {
          if (
            ((this.prev = 0),
            (this.next = 0),
            (this.sent = this._sent = p),
            (this.done = !1),
            (this.delegate = null),
            (this.method = "next"),
            (this.arg = p),
            this.tryEntries.forEach(st),
            !Ke)
          )
            for (var Re in this)
              Re.charAt(0) === "t" &&
                O.call(this, Re) &&
                !isNaN(+Re.slice(1)) &&
                (this[Re] = p);
        },
        stop: function () {
          this.done = !0;
          var Ke = this.tryEntries[0].completion;
          if (Ke.type === "throw") throw Ke.arg;
          return this.rval;
        },
        dispatchException: function (Ke) {
          if (this.done) throw Ke;
          var Re = this;
          function ge(me, Pe) {
            return (
              (Y.type = "throw"),
              (Y.arg = Ke),
              (Re.next = me),
              Pe && ((Re.method = "next"), (Re.arg = p)),
              !!Pe
            );
          }
          for (var je = this.tryEntries.length - 1; je >= 0; --je) {
            var ve = this.tryEntries[je],
              Y = ve.completion;
            if (ve.tryLoc === "root") return ge("end");
            if (ve.tryLoc <= this.prev) {
              var ce = O.call(ve, "catchLoc"),
                he = O.call(ve, "finallyLoc");
              if (ce && he) {
                if (this.prev < ve.catchLoc) return ge(ve.catchLoc, !0);
                if (this.prev < ve.finallyLoc) return ge(ve.finallyLoc);
              } else if (ce) {
                if (this.prev < ve.catchLoc) return ge(ve.catchLoc, !0);
              } else {
                if (!he) throw Error("try statement without catch or finally");
                if (this.prev < ve.finallyLoc) return ge(ve.finallyLoc);
              }
            }
          }
        },
        abrupt: function (Ke, Re) {
          for (var ge = this.tryEntries.length - 1; ge >= 0; --ge) {
            var je = this.tryEntries[ge];
            if (
              je.tryLoc <= this.prev &&
              O.call(je, "finallyLoc") &&
              this.prev < je.finallyLoc
            ) {
              var ve = je;
              break;
            }
          }
          ve &&
            (Ke === "break" || Ke === "continue") &&
            ve.tryLoc <= Re &&
            Re <= ve.finallyLoc &&
            (ve = null);
          var Y = ve ? ve.completion : {};
          return (
            (Y.type = Ke),
            (Y.arg = Re),
            ve
              ? ((this.method = "next"), (this.next = ve.finallyLoc), Tt)
              : this.complete(Y)
          );
        },
        complete: function (Ke, Re) {
          if (Ke.type === "throw") throw Ke.arg;
          return (
            Ke.type === "break" || Ke.type === "continue"
              ? (this.next = Ke.arg)
              : Ke.type === "return"
              ? ((this.rval = this.arg = Ke.arg),
                (this.method = "return"),
                (this.next = "end"))
              : Ke.type === "normal" && Re && (this.next = Re),
            Tt
          );
        },
        finish: function (Ke) {
          for (var Re = this.tryEntries.length - 1; Re >= 0; --Re) {
            var ge = this.tryEntries[Re];
            if (ge.finallyLoc === Ke)
              return this.complete(ge.completion, ge.afterLoc), st(ge), Tt;
          }
        },
        catch: function (Ke) {
          for (var Re = this.tryEntries.length - 1; Re >= 0; --Re) {
            var ge = this.tryEntries[Re];
            if (ge.tryLoc === Ke) {
              var je = ge.completion;
              if (je.type === "throw") {
                var ve = je.arg;
                st(ge);
              }
              return ve;
            }
          }
          throw Error("illegal catch attempt");
        },
        delegateYield: function (Ke, Re, ge) {
          return (
            (this.delegate = {
              iterator: Lt(Ke),
              resultName: Re,
              nextLoc: ge,
            }),
            this.method === "next" && (this.arg = p),
            Tt
          );
        },
      }),
      m
    );
  }
  (r.exports = o), (r.exports.__esModule = !0), (r.exports.default = r.exports);
})(q4);
var sq = q4.exports,
  cm = sq(),
  uq = cm;
try {
  regeneratorRuntime = cm;
} catch (r) {
  (typeof globalThis == "undefined" ? "undefined" : vt(globalThis)) === "object"
    ? (globalThis.regeneratorRuntime = cm)
    : Function("r", "regeneratorRuntime = r")(cm);
}
const Je = /* @__PURE__ */ bS(uq);
function J4(r) {
  if (Array.isArray(r)) return r;
}
function cq(r, i) {
  var o =
    r == null
      ? null
      : (typeof Symbol != "undefined" && r[Symbol.iterator]) || r["@@iterator"];
  if (o != null) {
    var p,
      m,
      S,
      O,
      I = [],
      B = !0,
      ee = !1;
    try {
      if (((S = (o = o.call(r)).next), i === 0)) {
        if (Object(o) !== o) return;
        B = !1;
      } else
        for (
          ;
          !(B = (p = S.call(o)).done) && (I.push(p.value), I.length !== i);
          B = !0
        );
    } catch (oe) {
      (ee = !0), (m = oe);
    } finally {
      try {
        if (!B && o.return != null && ((O = o.return()), Object(O) !== O))
          return;
      } finally {
        if (ee) throw m;
      }
    }
    return I;
  }
}
function Jb(r, i) {
  (i == null || i > r.length) && (i = r.length);
  for (var o = 0, p = Array(i); o < i; o++) p[o] = r[o];
  return p;
}
function SS(r, i) {
  if (r) {
    if (typeof r == "string") return Jb(r, i);
    var o = {}.toString.call(r).slice(8, -1);
    return (
      o === "Object" && r.constructor && (o = r.constructor.name),
      o === "Map" || o === "Set"
        ? Array.from(r)
        : o === "Arguments" ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)
        ? Jb(r, i)
        : void 0
    );
  }
}
function $4() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function sa(r, i) {
  return J4(r) || cq(r, i) || SS(r, i) || $4();
}
function Y4(r, i) {
  return function () {
    return r.apply(i, arguments);
  };
}
var lq = Object.prototype.toString,
  wS = Object.getPrototypeOf,
  Dm = (function (r) {
    return function (i) {
      var o = lq.call(i);
      return r[o] || (r[o] = o.slice(8, -1).toLowerCase());
    };
  })(/* @__PURE__ */ Object.create(null)),
  ca = function (i) {
    return (
      (i = i.toLowerCase()),
      function (o) {
        return Dm(o) === i;
      }
    );
  },
  Nm = function (i) {
    return function (o) {
      return vt(o) === i;
    };
  },
  Il = Array.isArray,
  Fh = Nm("undefined");
function dq(r) {
  return (
    r !== null &&
    !Fh(r) &&
    r.constructor !== null &&
    !Fh(r.constructor) &&
    mi(r.constructor.isBuffer) &&
    r.constructor.isBuffer(r)
  );
}
var Z4 = ca("ArrayBuffer");
function hq(r) {
  var i;
  return (
    typeof ArrayBuffer != "undefined" && ArrayBuffer.isView
      ? (i = ArrayBuffer.isView(r))
      : (i = r && r.buffer && Z4(r.buffer)),
    i
  );
}
var fq = Nm("string"),
  mi = Nm("function"),
  Q4 = Nm("number"),
  Lm = function (i) {
    return i !== null && vt(i) === "object";
  },
  pq = function (i) {
    return i === !0 || i === !1;
  },
  lm = function (i) {
    if (Dm(i) !== "object") return !1;
    var o = wS(i);
    return (
      (o === null ||
        o === Object.prototype ||
        Object.getPrototypeOf(o) === null) &&
      !(Symbol.toStringTag in i) &&
      !(Symbol.iterator in i)
    );
  },
  vq = ca("Date"),
  mq = ca("File"),
  gq = ca("Blob"),
  _q = ca("FileList"),
  yq = function (i) {
    return Lm(i) && mi(i.pipe);
  },
  bq = function (i) {
    var o;
    return (
      i &&
      ((typeof FormData == "function" && i instanceof FormData) ||
        (mi(i.append) &&
          ((o = Dm(i)) === "formdata" || // detect form-data instance
            (o === "object" &&
              mi(i.toString) &&
              i.toString() === "[object FormData]"))))
    );
  },
  Sq = ca("URLSearchParams"),
  wq = ["ReadableStream", "Request", "Response", "Headers"].map(ca),
  Mm = sa(wq, 4),
  kq = Mm[0],
  Tq = Mm[1],
  Eq = Mm[2],
  Iq = Mm[3],
  Rq = function (i) {
    return i.trim
      ? i.trim()
      : i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
  };
function Wh(r, i) {
  var o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {},
    p = o.allOwnKeys,
    m = p === void 0 ? !1 : p;
  if (!(r === null || typeof r == "undefined")) {
    var S, O;
    if ((vt(r) !== "object" && (r = [r]), Il(r)))
      for (S = 0, O = r.length; S < O; S++) i.call(null, r[S], S, r);
    else {
      var I = m ? Object.getOwnPropertyNames(r) : Object.keys(r),
        B = I.length,
        ee;
      for (S = 0; S < B; S++) (ee = I[S]), i.call(null, r[ee], ee, r);
    }
  }
}
function X4(r, i) {
  i = i.toLowerCase();
  for (var o = Object.keys(r), p = o.length, m; p-- > 0; )
    if (((m = o[p]), i === m.toLowerCase())) return m;
  return null;
}
var Ou = (function () {
    return typeof globalThis != "undefined"
      ? globalThis
      : typeof self != "undefined"
      ? self
      : typeof window != "undefined"
      ? window
      : global;
  })(),
  ex = function (i) {
    return !Fh(i) && i !== Ou;
  };
function $b() {
  for (
    var r = (ex(this) && this) || {},
      i = r.caseless,
      o = {},
      p = function (I, B) {
        var ee = (i && X4(o, B)) || B;
        lm(o[ee]) && lm(I)
          ? (o[ee] = $b(o[ee], I))
          : lm(I)
          ? (o[ee] = $b({}, I))
          : Il(I)
          ? (o[ee] = I.slice())
          : (o[ee] = I);
      },
      m = 0,
      S = arguments.length;
    m < S;
    m++
  )
    arguments[m] && Wh(arguments[m], p);
  return o;
}
var Cq = function (i, o, p) {
    var m = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {},
      S = m.allOwnKeys;
    return (
      Wh(
        o,
        function (O, I) {
          p && mi(O) ? (i[I] = Y4(O, p)) : (i[I] = O);
        },
        {
          allOwnKeys: S,
        }
      ),
      i
    );
  },
  Aq = function (i) {
    return i.charCodeAt(0) === 65279 && (i = i.slice(1)), i;
  },
  xq = function (i, o, p, m) {
    (i.prototype = Object.create(o.prototype, m)),
      (i.prototype.constructor = i),
      Object.defineProperty(i, "super", {
        value: o.prototype,
      }),
      p && Object.assign(i.prototype, p);
  },
  Oq = function (i, o, p, m) {
    var S,
      O,
      I,
      B = {};
    if (((o = o || {}), i == null)) return o;
    do {
      for (S = Object.getOwnPropertyNames(i), O = S.length; O-- > 0; )
        (I = S[O]), (!m || m(I, i, o)) && !B[I] && ((o[I] = i[I]), (B[I] = !0));
      i = p !== !1 && wS(i);
    } while (i && (!p || p(i, o)) && i !== Object.prototype);
    return o;
  },
  Pq = function (i, o, p) {
    (i = String(i)),
      (p === void 0 || p > i.length) && (p = i.length),
      (p -= o.length);
    var m = i.indexOf(o, p);
    return m !== -1 && m === p;
  },
  Dq = function (i) {
    if (!i) return null;
    if (Il(i)) return i;
    var o = i.length;
    if (!Q4(o)) return null;
    for (var p = new Array(o); o-- > 0; ) p[o] = i[o];
    return p;
  },
  Nq = (function (r) {
    return function (i) {
      return r && i instanceof r;
    };
  })(typeof Uint8Array != "undefined" && wS(Uint8Array)),
  Lq = function (i, o) {
    for (
      var p = i && i[Symbol.iterator], m = p.call(i), S;
      (S = m.next()) && !S.done;

    ) {
      var O = S.value;
      o.call(i, O[0], O[1]);
    }
  },
  Mq = function (i, o) {
    for (var p, m = []; (p = i.exec(o)) !== null; ) m.push(p);
    return m;
  },
  Uq = ca("HTMLFormElement"),
  Vq = function (i) {
    return i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g, function (p, m, S) {
      return m.toUpperCase() + S;
    });
  },
  J3 = (function (r) {
    var i = r.hasOwnProperty;
    return function (o, p) {
      return i.call(o, p);
    };
  })(Object.prototype),
  Fq = ca("RegExp"),
  tx = function (i, o) {
    var p = Object.getOwnPropertyDescriptors(i),
      m = {};
    Wh(p, function (S, O) {
      var I;
      (I = o(S, O, i)) !== !1 && (m[O] = I || S);
    }),
      Object.defineProperties(i, m);
  },
  jq = function (i) {
    tx(i, function (o, p) {
      if (mi(i) && ["arguments", "caller", "callee"].indexOf(p) !== -1)
        return !1;
      var m = i[p];
      if (mi(m)) {
        if (((o.enumerable = !1), "writable" in o)) {
          o.writable = !1;
          return;
        }
        o.set ||
          (o.set = function () {
            throw Error("Can not rewrite read-only method '" + p + "'");
          });
      }
    });
  },
  Bq = function (i, o) {
    var p = {},
      m = function (O) {
        O.forEach(function (I) {
          p[I] = !0;
        });
      };
    return Il(i) ? m(i) : m(String(i).split(o)), p;
  },
  zq = function () {},
  Hq = function (i, o) {
    return i != null && Number.isFinite((i = +i)) ? i : o;
  },
  Ob = "abcdefghijklmnopqrstuvwxyz",
  $3 = "0123456789",
  nx = {
    DIGIT: $3,
    ALPHA: Ob,
    ALPHA_DIGIT: Ob + Ob.toUpperCase() + $3,
  },
  Wq = function () {
    for (
      var i =
          arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 16,
        o =
          arguments.length > 1 && arguments[1] !== void 0
            ? arguments[1]
            : nx.ALPHA_DIGIT,
        p = "",
        m = o.length;
      i--;

    )
      p += o[(Math.random() * m) | 0];
    return p;
  };
function Gq(r) {
  return !!(
    r &&
    mi(r.append) &&
    r[Symbol.toStringTag] === "FormData" &&
    r[Symbol.iterator]
  );
}
var qq = function (i) {
    var o = new Array(10),
      p = function (S, O) {
        if (Lm(S)) {
          if (o.indexOf(S) >= 0) return;
          if (!("toJSON" in S)) {
            o[O] = S;
            var I = Il(S) ? [] : {};
            return (
              Wh(S, function (B, ee) {
                var oe = p(B, O + 1);
                !Fh(oe) && (I[ee] = oe);
              }),
              (o[O] = void 0),
              I
            );
          }
        }
        return S;
      };
    return p(i, 0);
  },
  Kq = ca("AsyncFunction"),
  Jq = function (i) {
    return i && (Lm(i) || mi(i)) && mi(i.then) && mi(i.catch);
  },
  rx = (function (r, i) {
    return r
      ? setImmediate
      : i
      ? (function (o, p) {
          return (
            Ou.addEventListener(
              "message",
              function (m) {
                var S = m.source,
                  O = m.data;
                S === Ou && O === o && p.length && p.shift()();
              },
              !1
            ),
            function (m) {
              p.push(m), Ou.postMessage(o, "*");
            }
          );
        })("axios@".concat(Math.random()), [])
      : function (o) {
          return setTimeout(o);
        };
  })(typeof setImmediate == "function", mi(Ou.postMessage)),
  $q =
    typeof queueMicrotask != "undefined"
      ? queueMicrotask.bind(Ou)
      : (typeof process != "undefined" && process.nextTick) || rx;
const ze = {
  isArray: Il,
  isArrayBuffer: Z4,
  isBuffer: dq,
  isFormData: bq,
  isArrayBufferView: hq,
  isString: fq,
  isNumber: Q4,
  isBoolean: pq,
  isObject: Lm,
  isPlainObject: lm,
  isReadableStream: kq,
  isRequest: Tq,
  isResponse: Eq,
  isHeaders: Iq,
  isUndefined: Fh,
  isDate: vq,
  isFile: mq,
  isBlob: gq,
  isRegExp: Fq,
  isFunction: mi,
  isStream: yq,
  isURLSearchParams: Sq,
  isTypedArray: Nq,
  isFileList: _q,
  forEach: Wh,
  merge: $b,
  extend: Cq,
  trim: Rq,
  stripBOM: Aq,
  inherits: xq,
  toFlatObject: Oq,
  kindOf: Dm,
  kindOfTest: ca,
  endsWith: Pq,
  toArray: Dq,
  forEachEntry: Lq,
  matchAll: Mq,
  isHTMLForm: Uq,
  hasOwnProperty: J3,
  hasOwnProp: J3,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors: tx,
  freezeMethods: jq,
  toObjectSet: Bq,
  toCamelCase: Vq,
  noop: zq,
  toFiniteNumber: Hq,
  findKey: X4,
  global: Ou,
  isContextDefined: ex,
  ALPHABET: nx,
  generateString: Wq,
  isSpecCompliantForm: Gq,
  toJSONObject: qq,
  isAsyncFn: Kq,
  isThenable: Jq,
  setImmediate: rx,
  asap: $q,
};
function Ir(r, i) {
  if (!(r instanceof i))
    throw new TypeError("Cannot call a class as a function");
}
function Y3(r, i) {
  for (var o = 0; o < i.length; o++) {
    var p = i[o];
    (p.enumerable = p.enumerable || !1),
      (p.configurable = !0),
      "value" in p && (p.writable = !0),
      Object.defineProperty(r, G4(p.key), p);
  }
}
function Rr(r, i, o) {
  return (
    i && Y3(r.prototype, i),
    o && Y3(r, o),
    Object.defineProperty(r, "prototype", {
      writable: !1,
    }),
    r
  );
}
function an(r, i, o, p, m) {
  Error.call(this),
    Error.captureStackTrace
      ? Error.captureStackTrace(this, this.constructor)
      : (this.stack = new Error().stack),
    (this.message = r),
    (this.name = "AxiosError"),
    i && (this.code = i),
    o && (this.config = o),
    p && (this.request = p),
    m && ((this.response = m), (this.status = m.status ? m.status : null));
}
ze.inherits(an, Error, {
  toJSON: function () {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: ze.toJSONObject(this.config),
      code: this.code,
      status: this.status,
    };
  },
});
var ix = an.prototype,
  ax = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL",
  // eslint-disable-next-line func-names
].forEach(function (r) {
  ax[r] = {
    value: r,
  };
});
Object.defineProperties(an, ax);
Object.defineProperty(ix, "isAxiosError", {
  value: !0,
});
an.from = function (r, i, o, p, m, S) {
  var O = Object.create(ix);
  return (
    ze.toFlatObject(
      r,
      O,
      function (B) {
        return B !== Error.prototype;
      },
      function (I) {
        return I !== "isAxiosError";
      }
    ),
    an.call(O, r.message, i, o, p, m),
    (O.cause = r),
    (O.name = r.name),
    S && Object.assign(O, S),
    O
  );
};
const Yq = null;
function Yb(r) {
  return ze.isPlainObject(r) || ze.isArray(r);
}
function ox(r) {
  return ze.endsWith(r, "[]") ? r.slice(0, -2) : r;
}
function Z3(r, i, o) {
  return r
    ? r
        .concat(i)
        .map(function (m, S) {
          return (m = ox(m)), !o && S ? "[" + m + "]" : m;
        })
        .join(o ? "." : "")
    : i;
}
function Zq(r) {
  return ze.isArray(r) && !r.some(Yb);
}
var Qq = ze.toFlatObject(ze, {}, null, function (i) {
  return /^is[A-Z]/.test(i);
});
function Um(r, i, o) {
  if (!ze.isObject(r)) throw new TypeError("target must be an object");
  (i = i || new FormData()),
    (o = ze.toFlatObject(
      o,
      {
        metaTokens: !0,
        dots: !1,
        indexes: !1,
      },
      !1,
      function (We, de) {
        return !ze.isUndefined(de[We]);
      }
    ));
  var p = o.metaTokens,
    m = o.visitor || oe,
    S = o.dots,
    O = o.indexes,
    I = o.Blob || (typeof Blob != "undefined" && Blob),
    B = I && ze.isSpecCompliantForm(i);
  if (!ze.isFunction(m)) throw new TypeError("visitor must be a function");
  function ee(Ce) {
    if (Ce === null) return "";
    if (ze.isDate(Ce)) return Ce.toISOString();
    if (!B && ze.isBlob(Ce))
      throw new an("Blob is not supported. Use a Buffer instead.");
    return ze.isArrayBuffer(Ce) || ze.isTypedArray(Ce)
      ? B && typeof Blob == "function"
        ? new Blob([Ce])
        : Buffer.from(Ce)
      : Ce;
  }
  function oe(Ce, We, de) {
    var _t = Ce;
    if (Ce && !de && vt(Ce) === "object") {
      if (ze.endsWith(We, "{}"))
        (We = p ? We : We.slice(0, -2)), (Ce = JSON.stringify(Ce));
      else if (
        (ze.isArray(Ce) && Zq(Ce)) ||
        ((ze.isFileList(Ce) || ze.endsWith(We, "[]")) && (_t = ze.toArray(Ce)))
      )
        return (
          (We = ox(We)),
          _t.forEach(function (Tt, Jt) {
            !(ze.isUndefined(Tt) || Tt === null) &&
              i.append(
                // eslint-disable-next-line no-nested-ternary
                O === !0 ? Z3([We], Jt, S) : O === null ? We : We + "[]",
                ee(Tt)
              );
          }),
          !1
        );
    }
    return Yb(Ce) ? !0 : (i.append(Z3(de, We, S), ee(Ce)), !1);
  }
  var ie = [],
    be = Object.assign(Qq, {
      defaultVisitor: oe,
      convertValue: ee,
      isVisitable: Yb,
    });
  function Ie(Ce, We) {
    if (!ze.isUndefined(Ce)) {
      if (ie.indexOf(Ce) !== -1)
        throw Error("Circular reference detected in " + We.join("."));
      ie.push(Ce),
        ze.forEach(Ce, function (_t, It) {
          var Tt =
            !(ze.isUndefined(_t) || _t === null) &&
            m.call(i, _t, ze.isString(It) ? It.trim() : It, We, be);
          Tt === !0 && Ie(_t, We ? We.concat(It) : [It]);
        }),
        ie.pop();
    }
  }
  if (!ze.isObject(r)) throw new TypeError("data must be an object");
  return Ie(r), i;
}
function Q3(r) {
  var i = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0",
  };
  return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g, function (p) {
    return i[p];
  });
}
function kS(r, i) {
  (this._pairs = []), r && Um(r, this, i);
}
var sx = kS.prototype;
sx.append = function (i, o) {
  this._pairs.push([i, o]);
};
sx.toString = function (i) {
  var o = i
    ? function (p) {
        return i.call(this, p, Q3);
      }
    : Q3;
  return this._pairs
    .map(function (m) {
      return o(m[0]) + "=" + o(m[1]);
    }, "")
    .join("&");
};
function Xq(r) {
  return encodeURIComponent(r)
    .replace(/%3A/gi, ":")
    .replace(/%24/g, "$")
    .replace(/%2C/gi, ",")
    .replace(/%20/g, "+")
    .replace(/%5B/gi, "[")
    .replace(/%5D/gi, "]");
}
function ux(r, i, o) {
  if (!i) return r;
  var p = (o && o.encode) || Xq,
    m = o && o.serialize,
    S;
  if (
    (m
      ? (S = m(i, o))
      : (S = ze.isURLSearchParams(i) ? i.toString() : new kS(i, o).toString(p)),
    S)
  ) {
    var O = r.indexOf("#");
    O !== -1 && (r = r.slice(0, O)),
      (r += (r.indexOf("?") === -1 ? "?" : "&") + S);
  }
  return r;
}
var eK = /* @__PURE__ */ (function () {
  function r() {
    Ir(this, r), (this.handlers = []);
  }
  return Rr(r, [
    {
      key: "use",
      value: function (o, p, m) {
        return (
          this.handlers.push({
            fulfilled: o,
            rejected: p,
            synchronous: m ? m.synchronous : !1,
            runWhen: m ? m.runWhen : null,
          }),
          this.handlers.length - 1
        );
      },
      /**
       * Remove an interceptor from the stack
       *
       * @param {Number} id The ID that was returned by `use`
       *
       * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
       */
    },
    {
      key: "eject",
      value: function (o) {
        this.handlers[o] && (this.handlers[o] = null);
      },
      /**
       * Clear all interceptors from the stack
       *
       * @returns {void}
       */
    },
    {
      key: "clear",
      value: function () {
        this.handlers && (this.handlers = []);
      },
      /**
       * Iterate over all the registered interceptors
       *
       * This method is particularly useful for skipping over any
       * interceptors that may have become `null` calling `eject`.
       *
       * @param {Function} fn The function to call for each interceptor
       *
       * @returns {void}
       */
    },
    {
      key: "forEach",
      value: function (o) {
        ze.forEach(this.handlers, function (m) {
          m !== null && o(m);
        });
      },
    },
  ]);
})();
const X3 = eK,
  cx = {
    silentJSONParsing: !0,
    forcedJSONParsing: !0,
    clarifyTimeoutError: !1,
  },
  tK = typeof URLSearchParams != "undefined" ? URLSearchParams : kS,
  nK = typeof FormData != "undefined" ? FormData : null,
  rK = typeof Blob != "undefined" ? Blob : null,
  iK = {
    isBrowser: !0,
    classes: {
      URLSearchParams: tK,
      FormData: nK,
      Blob: rK,
    },
    protocols: ["http", "https", "file", "blob", "url", "data"],
  };
var TS = typeof window != "undefined" && typeof document != "undefined",
  Zb =
    ((typeof navigator == "undefined" ? "undefined" : vt(navigator)) ===
      "object" &&
      navigator) ||
    void 0,
  aK =
    TS &&
    (!Zb || ["ReactNative", "NativeScript", "NS"].indexOf(Zb.product) < 0),
  oK = (function () {
    return (
      typeof WorkerGlobalScope != "undefined" && // eslint-disable-next-line no-undef
      self instanceof WorkerGlobalScope &&
      typeof self.importScripts == "function"
    );
  })(),
  sK = (TS && window.location.href) || "http://localhost";
const uK = /* @__PURE__ */ Object.freeze(
  /* @__PURE__ */ Object.defineProperty(
    {
      __proto__: null,
      hasBrowserEnv: TS,
      hasStandardBrowserEnv: aK,
      hasStandardBrowserWebWorkerEnv: oK,
      navigator: Zb,
      origin: sK,
    },
    Symbol.toStringTag,
    { value: "Module" }
  )
);
function e4(r, i) {
  var o = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var p = Object.getOwnPropertySymbols(r);
    i &&
      (p = p.filter(function (m) {
        return Object.getOwnPropertyDescriptor(r, m).enumerable;
      })),
      o.push.apply(o, p);
  }
  return o;
}
function t4(r) {
  for (var i = 1; i < arguments.length; i++) {
    var o = arguments[i] != null ? arguments[i] : {};
    i % 2
      ? e4(Object(o), !0).forEach(function (p) {
          lt(r, p, o[p]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(o))
      : e4(Object(o)).forEach(function (p) {
          Object.defineProperty(r, p, Object.getOwnPropertyDescriptor(o, p));
        });
  }
  return r;
}
const ni = t4(t4({}, uK), iK);
function cK(r, i) {
  return Um(
    r,
    new ni.classes.URLSearchParams(),
    Object.assign(
      {
        visitor: function (p, m, S, O) {
          return ni.isNode && ze.isBuffer(p)
            ? (this.append(m, p.toString("base64")), !1)
            : O.defaultVisitor.apply(this, arguments);
        },
      },
      i
    )
  );
}
function lK(r) {
  return ze.matchAll(/\w+|\[(\w*)]/g, r).map(function (i) {
    return i[0] === "[]" ? "" : i[1] || i[0];
  });
}
function dK(r) {
  var i = {},
    o = Object.keys(r),
    p,
    m = o.length,
    S;
  for (p = 0; p < m; p++) (S = o[p]), (i[S] = r[S]);
  return i;
}
function lx(r) {
  function i(p, m, S, O) {
    var I = p[O++];
    if (I === "__proto__") return !0;
    var B = Number.isFinite(+I),
      ee = O >= p.length;
    if (((I = !I && ze.isArray(S) ? S.length : I), ee))
      return ze.hasOwnProp(S, I) ? (S[I] = [S[I], m]) : (S[I] = m), !B;
    (!S[I] || !ze.isObject(S[I])) && (S[I] = []);
    var oe = i(p, m, S[I], O);
    return oe && ze.isArray(S[I]) && (S[I] = dK(S[I])), !B;
  }
  if (ze.isFormData(r) && ze.isFunction(r.entries)) {
    var o = {};
    return (
      ze.forEachEntry(r, function (p, m) {
        i(lK(p), m, o, 0);
      }),
      o
    );
  }
  return null;
}
function hK(r, i, o) {
  if (ze.isString(r))
    try {
      return (i || JSON.parse)(r), ze.trim(r);
    } catch (p) {
      if (p.name !== "SyntaxError") throw p;
    }
  return (o || JSON.stringify)(r);
}
var ES = {
  transitional: cx,
  adapter: ["xhr", "http", "fetch"],
  transformRequest: [
    function (i, o) {
      var p = o.getContentType() || "",
        m = p.indexOf("application/json") > -1,
        S = ze.isObject(i);
      S && ze.isHTMLForm(i) && (i = new FormData(i));
      var O = ze.isFormData(i);
      if (O) return m ? JSON.stringify(lx(i)) : i;
      if (
        ze.isArrayBuffer(i) ||
        ze.isBuffer(i) ||
        ze.isStream(i) ||
        ze.isFile(i) ||
        ze.isBlob(i) ||
        ze.isReadableStream(i)
      )
        return i;
      if (ze.isArrayBufferView(i)) return i.buffer;
      if (ze.isURLSearchParams(i))
        return (
          o.setContentType(
            "application/x-www-form-urlencoded;charset=utf-8",
            !1
          ),
          i.toString()
        );
      var I;
      if (S) {
        if (p.indexOf("application/x-www-form-urlencoded") > -1)
          return cK(i, this.formSerializer).toString();
        if ((I = ze.isFileList(i)) || p.indexOf("multipart/form-data") > -1) {
          var B = this.env && this.env.FormData;
          return Um(
            I
              ? {
                  "files[]": i,
                }
              : i,
            B && new B(),
            this.formSerializer
          );
        }
      }
      return S || m ? (o.setContentType("application/json", !1), hK(i)) : i;
    },
  ],
  transformResponse: [
    function (i) {
      var o = this.transitional || ES.transitional,
        p = o && o.forcedJSONParsing,
        m = this.responseType === "json";
      if (ze.isResponse(i) || ze.isReadableStream(i)) return i;
      if (i && ze.isString(i) && ((p && !this.responseType) || m)) {
        var S = o && o.silentJSONParsing,
          O = !S && m;
        try {
          return JSON.parse(i);
        } catch (I) {
          if (O)
            throw I.name === "SyntaxError"
              ? an.from(I, an.ERR_BAD_RESPONSE, this, null, this.response)
              : I;
        }
      }
      return i;
    },
  ],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: ni.classes.FormData,
    Blob: ni.classes.Blob,
  },
  validateStatus: function (i) {
    return i >= 200 && i < 300;
  },
  headers: {
    common: {
      Accept: "application/json, text/plain, */*",
      "Content-Type": void 0,
    },
  },
};
ze.forEach(["delete", "get", "head", "post", "put", "patch"], function (r) {
  ES.headers[r] = {};
});
const IS = ES;
var fK = ze.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent",
]);
const pK = function (r) {
  var i = {},
    o,
    p,
    m;
  return (
    r &&
      r
        .split(
          `
`
        )
        .forEach(function (O) {
          (m = O.indexOf(":")),
            (o = O.substring(0, m).trim().toLowerCase()),
            (p = O.substring(m + 1).trim()),
            !(!o || (i[o] && fK[o])) &&
              (o === "set-cookie"
                ? i[o]
                  ? i[o].push(p)
                  : (i[o] = [p])
                : (i[o] = i[o] ? i[o] + ", " + p : p));
        }),
    i
  );
};
function vK(r, i) {
  var o =
    (typeof Symbol != "undefined" && r[Symbol.iterator]) || r["@@iterator"];
  if (!o) {
    if (
      Array.isArray(r) ||
      (o = mK(r)) ||
      (i && r && typeof r.length == "number")
    ) {
      o && (r = o);
      var p = 0,
        m = function () {};
      return {
        s: m,
        n: function () {
          return p >= r.length ? { done: !0 } : { done: !1, value: r[p++] };
        },
        e: function (ee) {
          throw ee;
        },
        f: m,
      };
    }
    throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
  }
  var S,
    O = !0,
    I = !1;
  return {
    s: function () {
      o = o.call(r);
    },
    n: function () {
      var ee = o.next();
      return (O = ee.done), ee;
    },
    e: function (ee) {
      (I = !0), (S = ee);
    },
    f: function () {
      try {
        O || o.return == null || o.return();
      } finally {
        if (I) throw S;
      }
    },
  };
}
function mK(r, i) {
  if (r) {
    if (typeof r == "string") return n4(r, i);
    var o = {}.toString.call(r).slice(8, -1);
    return (
      o === "Object" && r.constructor && (o = r.constructor.name),
      o === "Map" || o === "Set"
        ? Array.from(r)
        : o === "Arguments" ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)
        ? n4(r, i)
        : void 0
    );
  }
}
function n4(r, i) {
  (i == null || i > r.length) && (i = r.length);
  for (var o = 0, p = Array(i); o < i; o++) p[o] = r[o];
  return p;
}
var r4 = Symbol("internals");
function Ih(r) {
  return r && String(r).trim().toLowerCase();
}
function dm(r) {
  return r === !1 || r == null ? r : ze.isArray(r) ? r.map(dm) : String(r);
}
function gK(r) {
  for (
    var i = /* @__PURE__ */ Object.create(null),
      o = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,
      p;
    (p = o.exec(r));

  )
    i[p[1]] = p[2];
  return i;
}
var _K = function (i) {
  return /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());
};
function Pb(r, i, o, p, m) {
  if (ze.isFunction(p)) return p.call(this, i, o);
  if ((m && (i = o), !!ze.isString(i))) {
    if (ze.isString(p)) return i.indexOf(p) !== -1;
    if (ze.isRegExp(p)) return p.test(i);
  }
}
function yK(r) {
  return r
    .trim()
    .toLowerCase()
    .replace(/([a-z\d])(\w*)/g, function (i, o, p) {
      return o.toUpperCase() + p;
    });
}
function bK(r, i) {
  var o = ze.toCamelCase(" " + i);
  ["get", "set", "has"].forEach(function (p) {
    Object.defineProperty(r, p + o, {
      value: function (S, O, I) {
        return this[p].call(this, i, S, O, I);
      },
      configurable: !0,
    });
  });
}
var Vm = /* @__PURE__ */ (function () {
  function r(i) {
    Ir(this, r), i && this.set(i);
  }
  return Rr(
    r,
    [
      {
        key: "set",
        value: function (o, p, m) {
          var S = this;
          function O(Ie, Ce, We) {
            var de = Ih(Ce);
            if (!de) throw new Error("header name must be a non-empty string");
            var _t = ze.findKey(S, de);
            (!_t ||
              S[_t] === void 0 ||
              We === !0 ||
              (We === void 0 && S[_t] !== !1)) &&
              (S[_t || Ce] = dm(Ie));
          }
          var I = function (Ce, We) {
            return ze.forEach(Ce, function (de, _t) {
              return O(de, _t, We);
            });
          };
          if (ze.isPlainObject(o) || o instanceof this.constructor) I(o, p);
          else if (ze.isString(o) && (o = o.trim()) && !_K(o)) I(pK(o), p);
          else if (ze.isHeaders(o)) {
            var B = vK(o.entries()),
              ee;
            try {
              for (B.s(); !(ee = B.n()).done; ) {
                var oe = sa(ee.value, 2),
                  ie = oe[0],
                  be = oe[1];
                O(be, ie, m);
              }
            } catch (Ie) {
              B.e(Ie);
            } finally {
              B.f();
            }
          } else o != null && O(p, o, m);
          return this;
        },
      },
      {
        key: "get",
        value: function (o, p) {
          if (((o = Ih(o)), o)) {
            var m = ze.findKey(this, o);
            if (m) {
              var S = this[m];
              if (!p) return S;
              if (p === !0) return gK(S);
              if (ze.isFunction(p)) return p.call(this, S, m);
              if (ze.isRegExp(p)) return p.exec(S);
              throw new TypeError("parser must be boolean|regexp|function");
            }
          }
        },
      },
      {
        key: "has",
        value: function (o, p) {
          if (((o = Ih(o)), o)) {
            var m = ze.findKey(this, o);
            return !!(
              m &&
              this[m] !== void 0 &&
              (!p || Pb(this, this[m], m, p))
            );
          }
          return !1;
        },
      },
      {
        key: "delete",
        value: function (o, p) {
          var m = this,
            S = !1;
          function O(I) {
            if (((I = Ih(I)), I)) {
              var B = ze.findKey(m, I);
              B && (!p || Pb(m, m[B], B, p)) && (delete m[B], (S = !0));
            }
          }
          return ze.isArray(o) ? o.forEach(O) : O(o), S;
        },
      },
      {
        key: "clear",
        value: function (o) {
          for (var p = Object.keys(this), m = p.length, S = !1; m--; ) {
            var O = p[m];
            (!o || Pb(this, this[O], O, o, !0)) && (delete this[O], (S = !0));
          }
          return S;
        },
      },
      {
        key: "normalize",
        value: function (o) {
          var p = this,
            m = {};
          return (
            ze.forEach(this, function (S, O) {
              var I = ze.findKey(m, O);
              if (I) {
                (p[I] = dm(S)), delete p[O];
                return;
              }
              var B = o ? yK(O) : String(O).trim();
              B !== O && delete p[O], (p[B] = dm(S)), (m[B] = !0);
            }),
            this
          );
        },
      },
      {
        key: "concat",
        value: function () {
          for (var o, p = arguments.length, m = new Array(p), S = 0; S < p; S++)
            m[S] = arguments[S];
          return (o = this.constructor).concat.apply(o, [this].concat(m));
        },
      },
      {
        key: "toJSON",
        value: function (o) {
          var p = /* @__PURE__ */ Object.create(null);
          return (
            ze.forEach(this, function (m, S) {
              m != null &&
                m !== !1 &&
                (p[S] = o && ze.isArray(m) ? m.join(", ") : m);
            }),
            p
          );
        },
      },
      {
        key: Symbol.iterator,
        value: function () {
          return Object.entries(this.toJSON())[Symbol.iterator]();
        },
      },
      {
        key: "toString",
        value: function () {
          return Object.entries(this.toJSON()).map(function (o) {
            var p = sa(o, 2),
              m = p[0],
              S = p[1];
            return m + ": " + S;
          }).join(`
`);
        },
      },
      {
        key: Symbol.toStringTag,
        get: function () {
          return "AxiosHeaders";
        },
      },
    ],
    [
      {
        key: "from",
        value: function (o) {
          return o instanceof this ? o : new this(o);
        },
      },
      {
        key: "concat",
        value: function (o) {
          for (
            var p = new this(o),
              m = arguments.length,
              S = new Array(m > 1 ? m - 1 : 0),
              O = 1;
            O < m;
            O++
          )
            S[O - 1] = arguments[O];
          return (
            S.forEach(function (I) {
              return p.set(I);
            }),
            p
          );
        },
      },
      {
        key: "accessor",
        value: function (o) {
          var p =
              (this[r4] =
              this[r4] =
                {
                  accessors: {},
                }),
            m = p.accessors,
            S = this.prototype;
          function O(I) {
            var B = Ih(I);
            m[B] || (bK(S, I), (m[B] = !0));
          }
          return ze.isArray(o) ? o.forEach(O) : O(o), this;
        },
      },
    ]
  );
})();
Vm.accessor([
  "Content-Type",
  "Content-Length",
  "Accept",
  "Accept-Encoding",
  "User-Agent",
  "Authorization",
]);
ze.reduceDescriptors(Vm.prototype, function (r, i) {
  var o = r.value,
    p = i[0].toUpperCase() + i.slice(1);
  return {
    get: function () {
      return o;
    },
    set: function (S) {
      this[p] = S;
    },
  };
});
ze.freezeMethods(Vm);
const aa = Vm;
function Db(r, i) {
  var o = this || IS,
    p = i || o,
    m = aa.from(p.headers),
    S = p.data;
  return (
    ze.forEach(r, function (I) {
      S = I.call(o, S, m.normalize(), i ? i.status : void 0);
    }),
    m.normalize(),
    S
  );
}
function dx(r) {
  return !!(r && r.__CANCEL__);
}
function Rl(r, i, o) {
  an.call(this, r == null ? "canceled" : r, an.ERR_CANCELED, i, o),
    (this.name = "CanceledError");
}
ze.inherits(Rl, an, {
  __CANCEL__: !0,
});
function hx(r, i, o) {
  var p = o.config.validateStatus;
  !o.status || !p || p(o.status)
    ? r(o)
    : i(
        new an(
          "Request failed with status code " + o.status,
          [an.ERR_BAD_REQUEST, an.ERR_BAD_RESPONSE][
            Math.floor(o.status / 100) - 4
          ],
          o.config,
          o.request,
          o
        )
      );
}
function SK(r) {
  var i = /^([-+\w]{1,25})(:?\/\/|:)/.exec(r);
  return (i && i[1]) || "";
}
function wK(r, i) {
  r = r || 10;
  var o = new Array(r),
    p = new Array(r),
    m = 0,
    S = 0,
    O;
  return (
    (i = i !== void 0 ? i : 1e3),
    function (B) {
      var ee = Date.now(),
        oe = p[S];
      O || (O = ee), (o[m] = B), (p[m] = ee);
      for (var ie = S, be = 0; ie !== m; ) (be += o[ie++]), (ie = ie % r);
      if (((m = (m + 1) % r), m === S && (S = (S + 1) % r), !(ee - O < i))) {
        var Ie = oe && ee - oe;
        return Ie ? Math.round((be * 1e3) / Ie) : void 0;
      }
    }
  );
}
function kK(r, i) {
  var o = 0,
    p = 1e3 / i,
    m,
    S,
    O = function (oe) {
      var ie =
        arguments.length > 1 && arguments[1] !== void 0
          ? arguments[1]
          : Date.now();
      (o = ie),
        (m = null),
        S && (clearTimeout(S), (S = null)),
        r.apply(null, oe);
    },
    I = function () {
      for (
        var oe = Date.now(),
          ie = oe - o,
          be = arguments.length,
          Ie = new Array(be),
          Ce = 0;
        Ce < be;
        Ce++
      )
        Ie[Ce] = arguments[Ce];
      ie >= p
        ? O(Ie, oe)
        : ((m = Ie),
          S ||
            (S = setTimeout(function () {
              (S = null), O(m);
            }, p - ie)));
    },
    B = function () {
      return m && O(m);
    };
  return [I, B];
}
var ym = function (i, o) {
    var p = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 3,
      m = 0,
      S = wK(50, 250);
    return kK(function (O) {
      var I = O.loaded,
        B = O.lengthComputable ? O.total : void 0,
        ee = I - m,
        oe = S(ee),
        ie = I <= B;
      m = I;
      var be = lt(
        {
          loaded: I,
          total: B,
          progress: B ? I / B : void 0,
          bytes: ee,
          rate: oe || void 0,
          estimated: oe && B && ie ? (B - I) / oe : void 0,
          event: O,
          lengthComputable: B != null,
        },
        o ? "download" : "upload",
        !0
      );
      i(be);
    }, p);
  },
  i4 = function (i, o) {
    var p = i != null;
    return [
      function (m) {
        return o[0]({
          lengthComputable: p,
          total: i,
          loaded: m,
        });
      },
      o[1],
    ];
  },
  a4 = function (i) {
    return function () {
      for (var o = arguments.length, p = new Array(o), m = 0; m < o; m++)
        p[m] = arguments[m];
      return ze.asap(function () {
        return i.apply(void 0, p);
      });
    };
  };
function TK(r) {
  if (Array.isArray(r)) return Jb(r);
}
function fx(r) {
  if (
    (typeof Symbol != "undefined" && r[Symbol.iterator] != null) ||
    r["@@iterator"] != null
  )
    return Array.from(r);
}
function EK() {
  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function Mn(r) {
  return TK(r) || fx(r) || SS(r) || EK();
}
function IK(r) {
  return J4(r) || fx(r) || SS(r) || $4();
}
const RK = ni.hasStandardBrowserEnv
    ? // Standard browser envs have full support of the APIs needed to test
      // whether the request URL is of the same origin as current location.
      (function () {
        var i = ni.navigator && /(msie|trident)/i.test(ni.navigator.userAgent),
          o = document.createElement("a"),
          p;
        function m(S) {
          var O = S;
          return (
            i && (o.setAttribute("href", O), (O = o.href)),
            o.setAttribute("href", O),
            {
              href: o.href,
              protocol: o.protocol ? o.protocol.replace(/:$/, "") : "",
              host: o.host,
              search: o.search ? o.search.replace(/^\?/, "") : "",
              hash: o.hash ? o.hash.replace(/^#/, "") : "",
              hostname: o.hostname,
              port: o.port,
              pathname:
                o.pathname.charAt(0) === "/" ? o.pathname : "/" + o.pathname,
            }
          );
        }
        return (
          (p = m(window.location.href)),
          function (O) {
            var I = ze.isString(O) ? m(O) : O;
            return I.protocol === p.protocol && I.host === p.host;
          }
        );
      })()
    : // Non standard browser envs (web workers, react-native) lack needed support.
      (function () {
        return function () {
          return !0;
        };
      })(),
  CK = ni.hasStandardBrowserEnv
    ? // Standard browser envs support document.cookie
      {
        write: function (i, o, p, m, S, O) {
          var I = [i + "=" + encodeURIComponent(o)];
          ze.isNumber(p) && I.push("expires=" + new Date(p).toGMTString()),
            ze.isString(m) && I.push("path=" + m),
            ze.isString(S) && I.push("domain=" + S),
            O === !0 && I.push("secure"),
            (document.cookie = I.join("; "));
        },
        read: function (i) {
          var o = document.cookie.match(
            new RegExp("(^|;\\s*)(" + i + ")=([^;]*)")
          );
          return o ? decodeURIComponent(o[3]) : null;
        },
        remove: function (i) {
          this.write(i, "", Date.now() - 864e5);
        },
      }
    : // Non-standard browser env (web workers, react-native) lack needed support.
      {
        write: function () {},
        read: function () {
          return null;
        },
        remove: function () {},
      };
function AK(r) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(r);
}
function xK(r, i) {
  return i ? r.replace(/\/?\/$/, "") + "/" + i.replace(/^\/+/, "") : r;
}
function px(r, i) {
  return r && !AK(i) ? xK(r, i) : i;
}
function o4(r, i) {
  var o = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var p = Object.getOwnPropertySymbols(r);
    i &&
      (p = p.filter(function (m) {
        return Object.getOwnPropertyDescriptor(r, m).enumerable;
      })),
      o.push.apply(o, p);
  }
  return o;
}
function OK(r) {
  for (var i = 1; i < arguments.length; i++) {
    var o = arguments[i] != null ? arguments[i] : {};
    i % 2
      ? o4(Object(o), !0).forEach(function (p) {
          lt(r, p, o[p]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(o))
      : o4(Object(o)).forEach(function (p) {
          Object.defineProperty(r, p, Object.getOwnPropertyDescriptor(o, p));
        });
  }
  return r;
}
var s4 = function (i) {
  return i instanceof aa ? OK({}, i) : i;
};
function Lu(r, i) {
  i = i || {};
  var o = {};
  function p(ee, oe, ie) {
    return ze.isPlainObject(ee) && ze.isPlainObject(oe)
      ? ze.merge.call(
          {
            caseless: ie,
          },
          ee,
          oe
        )
      : ze.isPlainObject(oe)
      ? ze.merge({}, oe)
      : ze.isArray(oe)
      ? oe.slice()
      : oe;
  }
  function m(ee, oe, ie) {
    if (ze.isUndefined(oe)) {
      if (!ze.isUndefined(ee)) return p(void 0, ee, ie);
    } else return p(ee, oe, ie);
  }
  function S(ee, oe) {
    if (!ze.isUndefined(oe)) return p(void 0, oe);
  }
  function O(ee, oe) {
    if (ze.isUndefined(oe)) {
      if (!ze.isUndefined(ee)) return p(void 0, ee);
    } else return p(void 0, oe);
  }
  function I(ee, oe, ie) {
    if (ie in i) return p(ee, oe);
    if (ie in r) return p(void 0, ee);
  }
  var B = {
    url: S,
    method: S,
    data: S,
    baseURL: O,
    transformRequest: O,
    transformResponse: O,
    paramsSerializer: O,
    timeout: O,
    timeoutMessage: O,
    withCredentials: O,
    withXSRFToken: O,
    adapter: O,
    responseType: O,
    xsrfCookieName: O,
    xsrfHeaderName: O,
    onUploadProgress: O,
    onDownloadProgress: O,
    decompress: O,
    maxContentLength: O,
    maxBodyLength: O,
    beforeRedirect: O,
    transport: O,
    httpAgent: O,
    httpsAgent: O,
    cancelToken: O,
    socketPath: O,
    responseEncoding: O,
    validateStatus: I,
    headers: function (oe, ie) {
      return m(s4(oe), s4(ie), !0);
    },
  };
  return (
    ze.forEach(Object.keys(Object.assign({}, r, i)), function (oe) {
      var ie = B[oe] || m,
        be = ie(r[oe], i[oe], oe);
      (ze.isUndefined(be) && ie !== I) || (o[oe] = be);
    }),
    o
  );
}
const vx = function (r) {
  var i = Lu({}, r),
    o = i.data,
    p = i.withXSRFToken,
    m = i.xsrfHeaderName,
    S = i.xsrfCookieName,
    O = i.headers,
    I = i.auth;
  (i.headers = O = aa.from(O)),
    (i.url = ux(px(i.baseURL, i.url), r.params, r.paramsSerializer)),
    I &&
      O.set(
        "Authorization",
        "Basic " +
          btoa(
            (I.username || "") +
              ":" +
              (I.password ? unescape(encodeURIComponent(I.password)) : "")
          )
      );
  var B;
  if (ze.isFormData(o)) {
    if (ni.hasStandardBrowserEnv || ni.hasStandardBrowserWebWorkerEnv)
      O.setContentType(void 0);
    else if ((B = O.getContentType()) !== !1) {
      var ee = B
          ? B.split(";")
              .map(function (Ce) {
                return Ce.trim();
              })
              .filter(Boolean)
          : [],
        oe = IK(ee),
        ie = oe[0],
        be = oe.slice(1);
      O.setContentType([ie || "multipart/form-data"].concat(Mn(be)).join("; "));
    }
  }
  if (
    ni.hasStandardBrowserEnv &&
    (p && ze.isFunction(p) && (p = p(i)), p || (p !== !1 && RK(i.url)))
  ) {
    var Ie = m && S && CK.read(S);
    Ie && O.set(m, Ie);
  }
  return i;
};
var PK = typeof XMLHttpRequest != "undefined";
const DK =
  PK &&
  function (r) {
    return new Promise(function (o, p) {
      var m = vx(r),
        S = m.data,
        O = aa.from(m.headers).normalize(),
        I = m.responseType,
        B = m.onUploadProgress,
        ee = m.onDownloadProgress,
        oe,
        ie,
        be,
        Ie,
        Ce;
      function We() {
        Ie && Ie(),
          Ce && Ce(),
          m.cancelToken && m.cancelToken.unsubscribe(oe),
          m.signal && m.signal.removeEventListener("abort", oe);
      }
      var de = new XMLHttpRequest();
      de.open(m.method.toUpperCase(), m.url, !0), (de.timeout = m.timeout);
      function _t() {
        if (de) {
          var Ze = aa.from(
              "getAllResponseHeaders" in de && de.getAllResponseHeaders()
            ),
            Vt =
              !I || I === "text" || I === "json"
                ? de.responseText
                : de.response,
            pt = {
              data: Vt,
              status: de.status,
              statusText: de.statusText,
              headers: Ze,
              config: r,
              request: de,
            };
          hx(
            function (Be) {
              o(Be), We();
            },
            function (Be) {
              p(Be), We();
            },
            pt
          ),
            (de = null);
        }
      }
      if (
        ("onloadend" in de
          ? (de.onloadend = _t)
          : (de.onreadystatechange = function () {
              !de ||
                de.readyState !== 4 ||
                (de.status === 0 &&
                  !(de.responseURL && de.responseURL.indexOf("file:") === 0)) ||
                setTimeout(_t);
            }),
        (de.onabort = function () {
          de &&
            (p(new an("Request aborted", an.ECONNABORTED, r, de)), (de = null));
        }),
        (de.onerror = function () {
          p(new an("Network Error", an.ERR_NETWORK, r, de)), (de = null);
        }),
        (de.ontimeout = function () {
          var Vt = m.timeout
              ? "timeout of " + m.timeout + "ms exceeded"
              : "timeout exceeded",
            pt = m.transitional || cx;
          m.timeoutErrorMessage && (Vt = m.timeoutErrorMessage),
            p(
              new an(
                Vt,
                pt.clarifyTimeoutError ? an.ETIMEDOUT : an.ECONNABORTED,
                r,
                de
              )
            ),
            (de = null);
        }),
        S === void 0 && O.setContentType(null),
        "setRequestHeader" in de &&
          ze.forEach(O.toJSON(), function (Vt, pt) {
            de.setRequestHeader(pt, Vt);
          }),
        ze.isUndefined(m.withCredentials) ||
          (de.withCredentials = !!m.withCredentials),
        I && I !== "json" && (de.responseType = m.responseType),
        ee)
      ) {
        var It = ym(ee, !0),
          Tt = sa(It, 2);
        (be = Tt[0]), (Ce = Tt[1]), de.addEventListener("progress", be);
      }
      if (B && de.upload) {
        var Jt = ym(B),
          yt = sa(Jt, 2);
        (ie = yt[0]),
          (Ie = yt[1]),
          de.upload.addEventListener("progress", ie),
          de.upload.addEventListener("loadend", Ie);
      }
      (m.cancelToken || m.signal) &&
        ((oe = function (Vt) {
          de &&
            (p(!Vt || Vt.type ? new Rl(null, r, de) : Vt),
            de.abort(),
            (de = null));
        }),
        m.cancelToken && m.cancelToken.subscribe(oe),
        m.signal &&
          (m.signal.aborted ? oe() : m.signal.addEventListener("abort", oe)));
      var Et = SK(m.url);
      if (Et && ni.protocols.indexOf(Et) === -1) {
        p(new an("Unsupported protocol " + Et + ":", an.ERR_BAD_REQUEST, r));
        return;
      }
      de.send(S || null);
    });
  };
var NK = function (i, o) {
  var p = (i = i ? i.filter(Boolean) : []),
    m = p.length;
  if (o || m) {
    var S = new AbortController(),
      O,
      I = function (be) {
        if (!O) {
          (O = !0), ee();
          var Ie = be instanceof Error ? be : this.reason;
          S.abort(
            Ie instanceof an
              ? Ie
              : new Rl(Ie instanceof Error ? Ie.message : Ie)
          );
        }
      },
      B =
        o &&
        setTimeout(function () {
          (B = null),
            I(new an("timeout ".concat(o, " of ms exceeded"), an.ETIMEDOUT));
        }, o),
      ee = function () {
        i &&
          (B && clearTimeout(B),
          (B = null),
          i.forEach(function (be) {
            be.unsubscribe
              ? be.unsubscribe(I)
              : be.removeEventListener("abort", I);
          }),
          (i = null));
      };
    i.forEach(function (ie) {
      return ie.addEventListener("abort", I);
    });
    var oe = S.signal;
    return (
      (oe.unsubscribe = function () {
        return ze.asap(ee);
      }),
      oe
    );
  }
};
const LK = NK;
function RS(r, i) {
  (this.v = r), (this.k = i);
}
function mx(r) {
  return function () {
    return new Ph(r.apply(this, arguments));
  };
}
function Ph(r) {
  var i, o;
  function p(S, O) {
    try {
      var I = r[S](O),
        B = I.value,
        ee = B instanceof RS;
      Promise.resolve(ee ? B.v : B).then(
        function (oe) {
          if (ee) {
            var ie = S === "return" ? "return" : "next";
            if (!B.k || oe.done) return p(ie, oe);
            oe = r[ie](oe).value;
          }
          m(I.done ? "return" : "normal", oe);
        },
        function (oe) {
          p("throw", oe);
        }
      );
    } catch (oe) {
      m("throw", oe);
    }
  }
  function m(S, O) {
    switch (S) {
      case "return":
        i.resolve({
          value: O,
          done: !0,
        });
        break;
      case "throw":
        i.reject(O);
        break;
      default:
        i.resolve({
          value: O,
          done: !1,
        });
    }
    (i = i.next) ? p(i.key, i.arg) : (o = null);
  }
  (this._invoke = function (S, O) {
    return new Promise(function (I, B) {
      var ee = {
        key: S,
        arg: O,
        resolve: I,
        reject: B,
        next: null,
      };
      o ? (o = o.next = ee) : ((i = o = ee), p(S, O));
    });
  }),
    typeof r.return != "function" && (this.return = void 0);
}
(Ph.prototype[
  (typeof Symbol == "function" && Symbol.asyncIterator) || "@@asyncIterator"
] = function () {
  return this;
}),
  (Ph.prototype.next = function (r) {
    return this._invoke("next", r);
  }),
  (Ph.prototype.throw = function (r) {
    return this._invoke("throw", r);
  }),
  (Ph.prototype.return = function (r) {
    return this._invoke("return", r);
  });
function bm(r) {
  return new RS(r, 0);
}
function gx(r) {
  var i = {},
    o = !1;
  function p(m, S) {
    return (
      (o = !0),
      (S = new Promise(function (O) {
        O(r[m](S));
      })),
      {
        done: !1,
        value: new RS(S, 1),
      }
    );
  }
  return (
    (i[(typeof Symbol != "undefined" && Symbol.iterator) || "@@iterator"] =
      function () {
        return this;
      }),
    (i.next = function (m) {
      return o ? ((o = !1), m) : p("next", m);
    }),
    typeof r.throw == "function" &&
      (i.throw = function (m) {
        if (o) throw ((o = !1), m);
        return p("throw", m);
      }),
    typeof r.return == "function" &&
      (i.return = function (m) {
        return o ? ((o = !1), m) : p("return", m);
      }),
    i
  );
}
function Qb(r) {
  var i,
    o,
    p,
    m = 2;
  for (
    typeof Symbol != "undefined" &&
    ((o = Symbol.asyncIterator), (p = Symbol.iterator));
    m--;

  ) {
    if (o && (i = r[o]) != null) return i.call(r);
    if (p && (i = r[p]) != null) return new hm(i.call(r));
    (o = "@@asyncIterator"), (p = "@@iterator");
  }
  throw new TypeError("Object is not async iterable");
}
function hm(r) {
  function i(o) {
    if (Object(o) !== o)
      return Promise.reject(new TypeError(o + " is not an object."));
    var p = o.done;
    return Promise.resolve(o.value).then(function (m) {
      return { value: m, done: p };
    });
  }
  return (
    (hm = function (p) {
      (this.s = p), (this.n = p.next);
    }),
    (hm.prototype = {
      s: null,
      n: null,
      next: function () {
        return i(this.n.apply(this.s, arguments));
      },
      return: function (p) {
        var m = this.s.return;
        return m === void 0
          ? Promise.resolve({ value: p, done: !0 })
          : i(m.apply(this.s, arguments));
      },
      throw: function (p) {
        var m = this.s.return;
        return m === void 0 ? Promise.reject(p) : i(m.apply(this.s, arguments));
      },
    }),
    new hm(r)
  );
}
var MK = /* @__PURE__ */ Je.mark(function r(i, o) {
    var p, m, S;
    return Je.wrap(function (I) {
      for (;;)
        switch ((I.prev = I.next)) {
          case 0:
            if (((p = i.byteLength), !(!o || p < o))) {
              I.next = 5;
              break;
            }
            return (I.next = 4), i;
          case 4:
            return I.abrupt("return");
          case 5:
            m = 0;
          case 6:
            if (!(m < p)) {
              I.next = 13;
              break;
            }
            return (S = m + o), (I.next = 10), i.slice(m, S);
          case 10:
            (m = S), (I.next = 6);
            break;
          case 13:
          case "end":
            return I.stop();
        }
    }, r);
  }),
  UK = /* @__PURE__ */ (function () {
    var r = mx(
      /* @__PURE__ */ Je.mark(function i(o, p) {
        var m, S, O, I, B, ee;
        return Je.wrap(
          function (ie) {
            for (;;)
              switch ((ie.prev = ie.next)) {
                case 0:
                  (m = !1), (S = !1), (ie.prev = 2), (I = Qb(VK(o)));
                case 4:
                  return (ie.next = 6), bm(I.next());
                case 6:
                  if (!(m = !(B = ie.sent).done)) {
                    ie.next = 12;
                    break;
                  }
                  return (
                    (ee = B.value), ie.delegateYield(gx(Qb(MK(ee, p))), "t0", 9)
                  );
                case 9:
                  (m = !1), (ie.next = 4);
                  break;
                case 12:
                  ie.next = 18;
                  break;
                case 14:
                  (ie.prev = 14), (ie.t1 = ie.catch(2)), (S = !0), (O = ie.t1);
                case 18:
                  if (
                    ((ie.prev = 18), (ie.prev = 19), !(m && I.return != null))
                  ) {
                    ie.next = 23;
                    break;
                  }
                  return (ie.next = 23), bm(I.return());
                case 23:
                  if (((ie.prev = 23), !S)) {
                    ie.next = 26;
                    break;
                  }
                  throw O;
                case 26:
                  return ie.finish(23);
                case 27:
                  return ie.finish(18);
                case 28:
                case "end":
                  return ie.stop();
              }
          },
          i,
          null,
          [
            [2, 14, 18, 28],
            [19, , 23, 27],
          ]
        );
      })
    );
    return function (o, p) {
      return r.apply(this, arguments);
    };
  })(),
  VK = /* @__PURE__ */ (function () {
    var r = mx(
      /* @__PURE__ */ Je.mark(function i(o) {
        var p, m, S, O;
        return Je.wrap(
          function (B) {
            for (;;)
              switch ((B.prev = B.next)) {
                case 0:
                  if (!o[Symbol.asyncIterator]) {
                    B.next = 3;
                    break;
                  }
                  return B.delegateYield(gx(Qb(o)), "t0", 2);
                case 2:
                  return B.abrupt("return");
                case 3:
                  (p = o.getReader()), (B.prev = 4);
                case 5:
                  return (B.next = 7), bm(p.read());
                case 7:
                  if (((m = B.sent), (S = m.done), (O = m.value), !S)) {
                    B.next = 12;
                    break;
                  }
                  return B.abrupt("break", 16);
                case 12:
                  return (B.next = 14), O;
                case 14:
                  B.next = 5;
                  break;
                case 16:
                  return (B.prev = 16), (B.next = 19), bm(p.cancel());
                case 19:
                  return B.finish(16);
                case 20:
                case "end":
                  return B.stop();
              }
          },
          i,
          null,
          [[4, , 16, 20]]
        );
      })
    );
    return function (o) {
      return r.apply(this, arguments);
    };
  })(),
  u4 = function (i, o, p, m) {
    var S = UK(i, o),
      O = 0,
      I,
      B = function (oe) {
        I || ((I = !0), m && m(oe));
      };
    return new ReadableStream(
      {
        pull: function (oe) {
          return Wt(
            /* @__PURE__ */ Je.mark(function ie() {
              var be, Ie, Ce, We, de;
              return Je.wrap(
                function (It) {
                  for (;;)
                    switch ((It.prev = It.next)) {
                      case 0:
                        return (It.prev = 0), (It.next = 3), S.next();
                      case 3:
                        if (
                          ((be = It.sent), (Ie = be.done), (Ce = be.value), !Ie)
                        ) {
                          It.next = 10;
                          break;
                        }
                        return B(), oe.close(), It.abrupt("return");
                      case 10:
                        (We = Ce.byteLength),
                          p && ((de = O += We), p(de)),
                          oe.enqueue(new Uint8Array(Ce)),
                          (It.next = 19);
                        break;
                      case 15:
                        throw (
                          ((It.prev = 15),
                          (It.t0 = It.catch(0)),
                          B(It.t0),
                          It.t0)
                        );
                      case 19:
                      case "end":
                        return It.stop();
                    }
                },
                ie,
                null,
                [[0, 15]]
              );
            })
          )();
        },
        cancel: function (oe) {
          return B(oe), S.return();
        },
      },
      {
        highWaterMark: 2,
      }
    );
  };
function c4(r, i) {
  var o = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var p = Object.getOwnPropertySymbols(r);
    i &&
      (p = p.filter(function (m) {
        return Object.getOwnPropertyDescriptor(r, m).enumerable;
      })),
      o.push.apply(o, p);
  }
  return o;
}
function l4(r) {
  for (var i = 1; i < arguments.length; i++) {
    var o = arguments[i] != null ? arguments[i] : {};
    i % 2
      ? c4(Object(o), !0).forEach(function (p) {
          lt(r, p, o[p]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(o))
      : c4(Object(o)).forEach(function (p) {
          Object.defineProperty(r, p, Object.getOwnPropertyDescriptor(o, p));
        });
  }
  return r;
}
var Fm =
    typeof fetch == "function" &&
    typeof Request == "function" &&
    typeof Response == "function",
  _x = Fm && typeof ReadableStream == "function",
  FK =
    Fm &&
    (typeof TextEncoder == "function"
      ? (function (r) {
          return function (i) {
            return r.encode(i);
          };
        })(new TextEncoder())
      : /* @__PURE__ */ (function () {
          var r = Wt(
            /* @__PURE__ */ Je.mark(function i(o) {
              return Je.wrap(function (m) {
                for (;;)
                  switch ((m.prev = m.next)) {
                    case 0:
                      return (
                        (m.t0 = Uint8Array),
                        (m.next = 3),
                        new Response(o).arrayBuffer()
                      );
                    case 3:
                      return (
                        (m.t1 = m.sent), m.abrupt("return", new m.t0(m.t1))
                      );
                    case 5:
                    case "end":
                      return m.stop();
                  }
              }, i);
            })
          );
          return function (i) {
            return r.apply(this, arguments);
          };
        })()),
  yx = function (i) {
    try {
      for (
        var o = arguments.length, p = new Array(o > 1 ? o - 1 : 0), m = 1;
        m < o;
        m++
      )
        p[m - 1] = arguments[m];
      return !!i.apply(void 0, p);
    } catch (S) {
      return !1;
    }
  },
  jK =
    _x &&
    yx(function () {
      var r = !1,
        i = new Request(ni.origin, {
          body: new ReadableStream(),
          method: "POST",
          get duplex() {
            return (r = !0), "half";
          },
        }).headers.has("Content-Type");
      return r && !i;
    }),
  d4 = 64 * 1024,
  Xb =
    _x &&
    yx(function () {
      return ze.isReadableStream(new Response("").body);
    }),
  Sm = {
    stream:
      Xb &&
      function (r) {
        return r.body;
      },
  };
Fm &&
  (function (r) {
    ["text", "arrayBuffer", "blob", "formData", "stream"].forEach(function (i) {
      !Sm[i] &&
        (Sm[i] = ze.isFunction(r[i])
          ? function (o) {
              return o[i]();
            }
          : function (o, p) {
              throw new an(
                "Response type '".concat(i, "' is not supported"),
                an.ERR_NOT_SUPPORT,
                p
              );
            });
    });
  })(new Response());
var BK = /* @__PURE__ */ (function () {
    var r = Wt(
      /* @__PURE__ */ Je.mark(function i(o) {
        var p;
        return Je.wrap(function (S) {
          for (;;)
            switch ((S.prev = S.next)) {
              case 0:
                if (o != null) {
                  S.next = 2;
                  break;
                }
                return S.abrupt("return", 0);
              case 2:
                if (!ze.isBlob(o)) {
                  S.next = 4;
                  break;
                }
                return S.abrupt("return", o.size);
              case 4:
                if (!ze.isSpecCompliantForm(o)) {
                  S.next = 9;
                  break;
                }
                return (
                  (p = new Request(ni.origin, {
                    method: "POST",
                    body: o,
                  })),
                  (S.next = 8),
                  p.arrayBuffer()
                );
              case 8:
                return S.abrupt("return", S.sent.byteLength);
              case 9:
                if (!(ze.isArrayBufferView(o) || ze.isArrayBuffer(o))) {
                  S.next = 11;
                  break;
                }
                return S.abrupt("return", o.byteLength);
              case 11:
                if (
                  (ze.isURLSearchParams(o) && (o = o + ""), !ze.isString(o))
                ) {
                  S.next = 16;
                  break;
                }
                return (S.next = 15), FK(o);
              case 15:
                return S.abrupt("return", S.sent.byteLength);
              case 16:
              case "end":
                return S.stop();
            }
        }, i);
      })
    );
    return function (o) {
      return r.apply(this, arguments);
    };
  })(),
  zK = /* @__PURE__ */ (function () {
    var r = Wt(
      /* @__PURE__ */ Je.mark(function i(o, p) {
        var m;
        return Je.wrap(function (O) {
          for (;;)
            switch ((O.prev = O.next)) {
              case 0:
                return (
                  (m = ze.toFiniteNumber(o.getContentLength())),
                  O.abrupt("return", m == null ? BK(p) : m)
                );
              case 2:
              case "end":
                return O.stop();
            }
        }, i);
      })
    );
    return function (o, p) {
      return r.apply(this, arguments);
    };
  })();
const HK =
  Fm &&
  /* @__PURE__ */ (function () {
    var r = Wt(
      /* @__PURE__ */ Je.mark(function i(o) {
        var p,
          m,
          S,
          O,
          I,
          B,
          ee,
          oe,
          ie,
          be,
          Ie,
          Ce,
          We,
          de,
          _t,
          It,
          Tt,
          Jt,
          yt,
          Et,
          Ze,
          Vt,
          pt,
          nt,
          Be,
          rt,
          jt,
          ot,
          zt,
          st,
          ct,
          Lt,
          $e,
          Ke;
        return Je.wrap(
          function (ge) {
            for (;;)
              switch ((ge.prev = ge.next)) {
                case 0:
                  if (
                    ((p = vx(o)),
                    (m = p.url),
                    (S = p.method),
                    (O = p.data),
                    (I = p.signal),
                    (B = p.cancelToken),
                    (ee = p.timeout),
                    (oe = p.onDownloadProgress),
                    (ie = p.onUploadProgress),
                    (be = p.responseType),
                    (Ie = p.headers),
                    (Ce = p.withCredentials),
                    (We = Ce === void 0 ? "same-origin" : Ce),
                    (de = p.fetchOptions),
                    (be = be ? (be + "").toLowerCase() : "text"),
                    (_t = LK([I, B && B.toAbortSignal()], ee)),
                    (Tt =
                      _t &&
                      _t.unsubscribe &&
                      function () {
                        _t.unsubscribe();
                      }),
                    (ge.prev = 4),
                    (ge.t0 = ie && jK && S !== "get" && S !== "head"),
                    !ge.t0)
                  ) {
                    ge.next = 11;
                    break;
                  }
                  return (ge.next = 9), zK(Ie, O);
                case 9:
                  (ge.t1 = Jt = ge.sent), (ge.t0 = ge.t1 !== 0);
                case 11:
                  if (!ge.t0) {
                    ge.next = 15;
                    break;
                  }
                  (yt = new Request(m, {
                    method: "POST",
                    body: O,
                    duplex: "half",
                  })),
                    ze.isFormData(O) &&
                      (Et = yt.headers.get("content-type")) &&
                      Ie.setContentType(Et),
                    yt.body &&
                      ((Ze = i4(Jt, ym(a4(ie)))),
                      (Vt = sa(Ze, 2)),
                      (pt = Vt[0]),
                      (nt = Vt[1]),
                      (O = u4(yt.body, d4, pt, nt)));
                case 15:
                  return (
                    ze.isString(We) || (We = We ? "include" : "omit"),
                    (Be = "credentials" in Request.prototype),
                    (It = new Request(
                      m,
                      l4(
                        l4({}, de),
                        {},
                        {
                          signal: _t,
                          method: S.toUpperCase(),
                          headers: Ie.normalize().toJSON(),
                          body: O,
                          duplex: "half",
                          credentials: Be ? We : void 0,
                        }
                      )
                    )),
                    (ge.next = 20),
                    fetch(It)
                  );
                case 20:
                  return (
                    (rt = ge.sent),
                    (jt = Xb && (be === "stream" || be === "response")),
                    Xb &&
                      (oe || (jt && Tt)) &&
                      ((ot = {}),
                      ["status", "statusText", "headers"].forEach(function (
                        je
                      ) {
                        ot[je] = rt[je];
                      }),
                      (zt = ze.toFiniteNumber(
                        rt.headers.get("content-length")
                      )),
                      (st = (oe && i4(zt, ym(a4(oe), !0))) || []),
                      (ct = sa(st, 2)),
                      (Lt = ct[0]),
                      ($e = ct[1]),
                      (rt = new Response(
                        u4(rt.body, d4, Lt, function () {
                          $e && $e(), Tt && Tt();
                        }),
                        ot
                      ))),
                    (be = be || "text"),
                    (ge.next = 26),
                    Sm[ze.findKey(Sm, be) || "text"](rt, o)
                  );
                case 26:
                  return (
                    (Ke = ge.sent),
                    !jt && Tt && Tt(),
                    (ge.next = 30),
                    new Promise(function (je, ve) {
                      hx(je, ve, {
                        data: Ke,
                        headers: aa.from(rt.headers),
                        status: rt.status,
                        statusText: rt.statusText,
                        config: o,
                        request: It,
                      });
                    })
                  );
                case 30:
                  return ge.abrupt("return", ge.sent);
                case 33:
                  if (
                    ((ge.prev = 33),
                    (ge.t2 = ge.catch(4)),
                    Tt && Tt(),
                    !(
                      ge.t2 &&
                      ge.t2.name === "TypeError" &&
                      /fetch/i.test(ge.t2.message)
                    ))
                  ) {
                    ge.next = 38;
                    break;
                  }
                  throw Object.assign(
                    new an("Network Error", an.ERR_NETWORK, o, It),
                    {
                      cause: ge.t2.cause || ge.t2,
                    }
                  );
                case 38:
                  throw an.from(ge.t2, ge.t2 && ge.t2.code, o, It);
                case 39:
                case "end":
                  return ge.stop();
              }
          },
          i,
          null,
          [[4, 33]]
        );
      })
    );
    return function (i) {
      return r.apply(this, arguments);
    };
  })();
var eS = {
  http: Yq,
  xhr: DK,
  fetch: HK,
};
ze.forEach(eS, function (r, i) {
  if (r) {
    try {
      Object.defineProperty(r, "name", {
        value: i,
      });
    } catch (o) {}
    Object.defineProperty(r, "adapterName", {
      value: i,
    });
  }
});
var h4 = function (i) {
    return "- ".concat(i);
  },
  WK = function (i) {
    return ze.isFunction(i) || i === null || i === !1;
  };
const bx = {
  getAdapter: function (i) {
    i = ze.isArray(i) ? i : [i];
    for (var o = i, p = o.length, m, S, O = {}, I = 0; I < p; I++) {
      m = i[I];
      var B = void 0;
      if (
        ((S = m),
        !WK(m) && ((S = eS[(B = String(m)).toLowerCase()]), S === void 0))
      )
        throw new an("Unknown adapter '".concat(B, "'"));
      if (S) break;
      O[B || "#" + I] = S;
    }
    if (!S) {
      var ee = Object.entries(O).map(function (ie) {
          var be = sa(ie, 2),
            Ie = be[0],
            Ce = be[1];
          return (
            "adapter ".concat(Ie, " ") +
            (Ce === !1
              ? "is not supported by the environment"
              : "is not available in the build")
          );
        }),
        oe = p
          ? ee.length > 1
            ? `since :
` +
              ee.map(h4).join(`
`)
            : " " + h4(ee[0])
          : "as no adapter specified";
      throw new an(
        "There is no suitable adapter to dispatch the request " + oe,
        "ERR_NOT_SUPPORT"
      );
    }
    return S;
  },
  adapters: eS,
};
function Nb(r) {
  if (
    (r.cancelToken && r.cancelToken.throwIfRequested(),
    r.signal && r.signal.aborted)
  )
    throw new Rl(null, r);
}
function f4(r) {
  Nb(r),
    (r.headers = aa.from(r.headers)),
    (r.data = Db.call(r, r.transformRequest)),
    ["post", "put", "patch"].indexOf(r.method) !== -1 &&
      r.headers.setContentType("application/x-www-form-urlencoded", !1);
  var i = bx.getAdapter(r.adapter || IS.adapter);
  return i(r).then(
    function (p) {
      return (
        Nb(r),
        (p.data = Db.call(r, r.transformResponse, p)),
        (p.headers = aa.from(p.headers)),
        p
      );
    },
    function (p) {
      return (
        dx(p) ||
          (Nb(r),
          p &&
            p.response &&
            ((p.response.data = Db.call(r, r.transformResponse, p.response)),
            (p.response.headers = aa.from(p.response.headers)))),
        Promise.reject(p)
      );
    }
  );
}
var Sx = "1.7.7",
  CS = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach(
  function (r, i) {
    CS[r] = function (p) {
      return vt(p) === r || "a" + (i < 1 ? "n " : " ") + r;
    };
  }
);
var p4 = {};
CS.transitional = function (i, o, p) {
  function m(S, O) {
    return (
      "[Axios v" +
      Sx +
      "] Transitional option '" +
      S +
      "'" +
      O +
      (p ? ". " + p : "")
    );
  }
  return function (S, O, I) {
    if (i === !1)
      throw new an(
        m(O, " has been removed" + (o ? " in " + o : "")),
        an.ERR_DEPRECATED
      );
    return (
      o &&
        !p4[O] &&
        ((p4[O] = !0),
        console.warn(
          m(
            O,
            " has been deprecated since v" +
              o +
              " and will be removed in the near future"
          )
        )),
      i ? i(S, O, I) : !0
    );
  };
};
function GK(r, i, o) {
  if (vt(r) !== "object")
    throw new an("options must be an object", an.ERR_BAD_OPTION_VALUE);
  for (var p = Object.keys(r), m = p.length; m-- > 0; ) {
    var S = p[m],
      O = i[S];
    if (O) {
      var I = r[S],
        B = I === void 0 || O(I, S, r);
      if (B !== !0)
        throw new an("option " + S + " must be " + B, an.ERR_BAD_OPTION_VALUE);
      continue;
    }
    if (o !== !0) throw new an("Unknown option " + S, an.ERR_BAD_OPTION);
  }
}
const tS = {
  assertOptions: GK,
  validators: CS,
};
var ps = tS.validators,
  wm = /* @__PURE__ */ (function () {
    function r(i) {
      Ir(this, r),
        (this.defaults = i),
        (this.interceptors = {
          request: new X3(),
          response: new X3(),
        });
    }
    return Rr(r, [
      {
        key: "request",
        value: (function () {
          var i = Wt(
            /* @__PURE__ */ Je.mark(function p(m, S) {
              var O, I;
              return Je.wrap(
                function (ee) {
                  for (;;)
                    switch ((ee.prev = ee.next)) {
                      case 0:
                        return (
                          (ee.prev = 0), (ee.next = 3), this._request(m, S)
                        );
                      case 3:
                        return ee.abrupt("return", ee.sent);
                      case 6:
                        if (
                          ((ee.prev = 6),
                          (ee.t0 = ee.catch(0)),
                          ee.t0 instanceof Error)
                        ) {
                          Error.captureStackTrace
                            ? Error.captureStackTrace((O = {}))
                            : (O = new Error()),
                            (I = O.stack ? O.stack.replace(/^.+\n/, "") : "");
                          try {
                            ee.t0.stack
                              ? I &&
                                !String(ee.t0.stack).endsWith(
                                  I.replace(/^.+\n.+\n/, "")
                                ) &&
                                (ee.t0.stack +=
                                  `
` + I)
                              : (ee.t0.stack = I);
                          } catch (oe) {}
                        }
                        throw ee.t0;
                      case 10:
                      case "end":
                        return ee.stop();
                    }
                },
                p,
                this,
                [[0, 6]]
              );
            })
          );
          function o(p, m) {
            return i.apply(this, arguments);
          }
          return o;
        })(),
      },
      {
        key: "_request",
        value: function (o, p) {
          typeof o == "string" ? ((p = p || {}), (p.url = o)) : (p = o || {}),
            (p = Lu(this.defaults, p));
          var m = p,
            S = m.transitional,
            O = m.paramsSerializer,
            I = m.headers;
          S !== void 0 &&
            tS.assertOptions(
              S,
              {
                silentJSONParsing: ps.transitional(ps.boolean),
                forcedJSONParsing: ps.transitional(ps.boolean),
                clarifyTimeoutError: ps.transitional(ps.boolean),
              },
              !1
            ),
            O != null &&
              (ze.isFunction(O)
                ? (p.paramsSerializer = {
                    serialize: O,
                  })
                : tS.assertOptions(
                    O,
                    {
                      encode: ps.function,
                      serialize: ps.function,
                    },
                    !0
                  )),
            (p.method = (
              p.method ||
              this.defaults.method ||
              "get"
            ).toLowerCase());
          var B = I && ze.merge(I.common, I[p.method]);
          I &&
            ze.forEach(
              ["delete", "get", "head", "post", "put", "patch", "common"],
              function (Tt) {
                delete I[Tt];
              }
            ),
            (p.headers = aa.concat(B, I));
          var ee = [],
            oe = !0;
          this.interceptors.request.forEach(function (Jt) {
            (typeof Jt.runWhen == "function" && Jt.runWhen(p) === !1) ||
              ((oe = oe && Jt.synchronous),
              ee.unshift(Jt.fulfilled, Jt.rejected));
          });
          var ie = [];
          this.interceptors.response.forEach(function (Jt) {
            ie.push(Jt.fulfilled, Jt.rejected);
          });
          var be,
            Ie = 0,
            Ce;
          if (!oe) {
            var We = [f4.bind(this), void 0];
            for (
              We.unshift.apply(We, ee),
                We.push.apply(We, ie),
                Ce = We.length,
                be = Promise.resolve(p);
              Ie < Ce;

            )
              be = be.then(We[Ie++], We[Ie++]);
            return be;
          }
          Ce = ee.length;
          var de = p;
          for (Ie = 0; Ie < Ce; ) {
            var _t = ee[Ie++],
              It = ee[Ie++];
            try {
              de = _t(de);
            } catch (Tt) {
              It.call(this, Tt);
              break;
            }
          }
          try {
            be = f4.call(this, de);
          } catch (Tt) {
            return Promise.reject(Tt);
          }
          for (Ie = 0, Ce = ie.length; Ie < Ce; )
            be = be.then(ie[Ie++], ie[Ie++]);
          return be;
        },
      },
      {
        key: "getUri",
        value: function (o) {
          o = Lu(this.defaults, o);
          var p = px(o.baseURL, o.url);
          return ux(p, o.params, o.paramsSerializer);
        },
      },
    ]);
  })();
ze.forEach(["delete", "get", "head", "options"], function (i) {
  wm.prototype[i] = function (o, p) {
    return this.request(
      Lu(p || {}, {
        method: i,
        url: o,
        data: (p || {}).data,
      })
    );
  };
});
ze.forEach(["post", "put", "patch"], function (i) {
  function o(p) {
    return function (S, O, I) {
      return this.request(
        Lu(I || {}, {
          method: i,
          headers: p
            ? {
                "Content-Type": "multipart/form-data",
              }
            : {},
          url: S,
          data: O,
        })
      );
    };
  }
  (wm.prototype[i] = o()), (wm.prototype[i + "Form"] = o(!0));
});
const fm = wm;
var qK = /* @__PURE__ */ (function () {
  function r(i) {
    if ((Ir(this, r), typeof i != "function"))
      throw new TypeError("executor must be a function.");
    var o;
    this.promise = new Promise(function (S) {
      o = S;
    });
    var p = this;
    this.promise.then(function (m) {
      if (p._listeners) {
        for (var S = p._listeners.length; S-- > 0; ) p._listeners[S](m);
        p._listeners = null;
      }
    }),
      (this.promise.then = function (m) {
        var S,
          O = new Promise(function (I) {
            p.subscribe(I), (S = I);
          }).then(m);
        return (
          (O.cancel = function () {
            p.unsubscribe(S);
          }),
          O
        );
      }),
      i(function (S, O, I) {
        p.reason || ((p.reason = new Rl(S, O, I)), o(p.reason));
      });
  }
  return Rr(
    r,
    [
      {
        key: "throwIfRequested",
        value: function () {
          if (this.reason) throw this.reason;
        },
        /**
         * Subscribe to the cancel signal
         */
      },
      {
        key: "subscribe",
        value: function (o) {
          if (this.reason) {
            o(this.reason);
            return;
          }
          this._listeners ? this._listeners.push(o) : (this._listeners = [o]);
        },
        /**
         * Unsubscribe from the cancel signal
         */
      },
      {
        key: "unsubscribe",
        value: function (o) {
          if (this._listeners) {
            var p = this._listeners.indexOf(o);
            p !== -1 && this._listeners.splice(p, 1);
          }
        },
      },
      {
        key: "toAbortSignal",
        value: function () {
          var o = this,
            p = new AbortController(),
            m = function (O) {
              p.abort(O);
            };
          return (
            this.subscribe(m),
            (p.signal.unsubscribe = function () {
              return o.unsubscribe(m);
            }),
            p.signal
          );
        },
        /**
         * Returns an object that contains a new `CancelToken` and a function that, when called,
         * cancels the `CancelToken`.
         */
      },
    ],
    [
      {
        key: "source",
        value: function () {
          var o,
            p = new r(function (S) {
              o = S;
            });
          return {
            token: p,
            cancel: o,
          };
        },
      },
    ]
  );
})();
const KK = qK;
function JK(r) {
  return function (o) {
    return r.apply(null, o);
  };
}
function $K(r) {
  return ze.isObject(r) && r.isAxiosError === !0;
}
var nS = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511,
};
Object.entries(nS).forEach(function (r) {
  var i = sa(r, 2),
    o = i[0],
    p = i[1];
  nS[p] = o;
});
const YK = nS;
function wx(r) {
  var i = new fm(r),
    o = Y4(fm.prototype.request, i);
  return (
    ze.extend(o, fm.prototype, i, {
      allOwnKeys: !0,
    }),
    ze.extend(o, i, null, {
      allOwnKeys: !0,
    }),
    (o.create = function (m) {
      return wx(Lu(r, m));
    }),
    o
  );
}
var lr = wx(IS);
lr.Axios = fm;
lr.CanceledError = Rl;
lr.CancelToken = KK;
lr.isCancel = dx;
lr.VERSION = Sx;
lr.toFormData = Um;
lr.AxiosError = an;
lr.Cancel = lr.CanceledError;
lr.all = function (i) {
  return Promise.all(i);
};
lr.spread = JK;
lr.isAxiosError = $K;
lr.mergeConfig = Lu;
lr.AxiosHeaders = aa;
lr.formToJSON = function (r) {
  return lx(ze.isHTMLForm(r) ? new FormData(r) : r);
};
lr.getAdapter = bx.getAdapter;
lr.HttpStatusCode = YK;
lr.default = lr;
const Cr = lr;
Cr.Axios;
Cr.AxiosError;
Cr.CanceledError;
Cr.isCancel;
Cr.CancelToken;
Cr.VERSION;
Cr.all;
Cr.Cancel;
Cr.isAxiosError;
Cr.spread;
Cr.toFormData;
Cr.AxiosHeaders;
Cr.HttpStatusCode;
Cr.formToJSON;
Cr.getAdapter;
Cr.mergeConfig;
var AS = Cr.create({
  // baseURL: ({}).VITE_ABMESSAGE_URL, //待定
  timeout: 6e4,
  method: "POST",
});
AS.interceptors.request.use(
  function (r) {
    return (
      console.log(
        "<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<上送 ABMessage 报文>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"
      ),
      console.log(r.data),
      r
    );
  },
  function (r) {
    return Promise.reject(r);
  }
);
AS.interceptors.response.use(
  function (r) {
    return (
      console.log(
        "<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<接收 ABMessage 报文>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"
      ),
      console.log(r),
      r
    );
  },
  function (r) {
    return console.error(r), Promise.reject(r);
  }
);
function ZK(r, i) {
  return rS.apply(this, arguments);
}
function rS() {
  return (
    (rS = Wt(
      /* @__PURE__ */ Je.mark(function r(i, o) {
        var p;
        return Je.wrap(
          function (S) {
            for (;;)
              switch ((S.prev = S.next)) {
                case 0:
                  return (
                    (S.prev = 0),
                    (S.next = 3),
                    AS({
                      url: i,
                      data: o,
                      // 直接传递请求主体
                    })
                  );
                case 3:
                  return (p = S.sent), S.abrupt("return", p.data);
                case 7:
                  throw ((S.prev = 7), (S.t0 = S.catch(0)), S.t0);
                case 10:
                case "end":
                  return S.stop();
              }
          },
          r,
          null,
          [[0, 7]]
        );
      })
    )),
    rS.apply(this, arguments)
  );
}
function QK(r, i) {
  return iS.apply(this, arguments);
}
function iS() {
  return (
    (iS = Wt(
      /* @__PURE__ */ Je.mark(function r(i, o) {
        return Je.wrap(function (m) {
          for (;;)
            switch ((m.prev = m.next)) {
              case 0:
                return (m.next = 2), ZK(i, o);
              case 2:
                return m.abrupt("return", m.sent);
              case 3:
              case "end":
                return m.stop();
            }
        }, r);
      })
    )),
    iS.apply(this, arguments)
  );
}
function XK(r) {
  if (r === void 0)
    throw new ReferenceError(
      "this hasn't been initialised - super() hasn't been called"
    );
  return r;
}
function eJ(r, i) {
  if (i && (vt(i) == "object" || typeof i == "function")) return i;
  if (i !== void 0)
    throw new TypeError(
      "Derived constructors may only return object or undefined"
    );
  return XK(r);
}
function km(r) {
  return (
    (km = Object.setPrototypeOf
      ? Object.getPrototypeOf.bind()
      : function (i) {
          return i.__proto__ || Object.getPrototypeOf(i);
        }),
    km(r)
  );
}
function aS(r, i) {
  return (
    (aS = Object.setPrototypeOf
      ? Object.setPrototypeOf.bind()
      : function (o, p) {
          return (o.__proto__ = p), o;
        }),
    aS(r, i)
  );
}
function kx(r, i) {
  if (typeof i != "function" && i !== null)
    throw new TypeError("Super expression must either be null or a function");
  (r.prototype = Object.create(i && i.prototype, {
    constructor: {
      value: r,
      writable: !0,
      configurable: !0,
    },
  })),
    Object.defineProperty(r, "prototype", {
      writable: !1,
    }),
    i && aS(r, i);
}
var Lb;
function tJ(r, i) {
  var o =
    (typeof Symbol != "undefined" && r[Symbol.iterator]) || r["@@iterator"];
  if (!o) {
    if (
      Array.isArray(r) ||
      (o = nJ(r)) ||
      (i && r && typeof r.length == "number")
    ) {
      o && (r = o);
      var p = 0,
        m = function () {};
      return {
        s: m,
        n: function () {
          return p >= r.length ? { done: !0 } : { done: !1, value: r[p++] };
        },
        e: function (ee) {
          throw ee;
        },
        f: m,
      };
    }
    throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
  }
  var S,
    O = !0,
    I = !1;
  return {
    s: function () {
      o = o.call(r);
    },
    n: function () {
      var ee = o.next();
      return (O = ee.done), ee;
    },
    e: function (ee) {
      (I = !0), (S = ee);
    },
    f: function () {
      try {
        O || o.return == null || o.return();
      } finally {
        if (I) throw S;
      }
    },
  };
}
function nJ(r, i) {
  if (r) {
    if (typeof r == "string") return v4(r, i);
    var o = {}.toString.call(r).slice(8, -1);
    return (
      o === "Object" && r.constructor && (o = r.constructor.name),
      o === "Map" || o === "Set"
        ? Array.from(r)
        : o === "Arguments" ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)
        ? v4(r, i)
        : void 0
    );
  }
}
function v4(r, i) {
  (i == null || i > r.length) && (i = r.length);
  for (var o = 0, p = Array(i); o < i; o++) p[o] = r[o];
  return p;
}
/**
 * @vue/shared v3.5.13
 * (c) 2018-present Yuxi (Evan) You and Vue contributors
 * @license MIT
 **/
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function rJ(r) {
  var i = /* @__PURE__ */ Object.create(null),
    o = tJ(r.split(",")),
    p;
  try {
    for (o.s(); !(p = o.n()).done; ) {
      var m = p.value;
      i[m] = 1;
    }
  } catch (S) {
    o.e(S);
  } finally {
    o.f();
  }
  return function (S) {
    return S in i;
  };
}
var Li = process.env.NODE_ENV !== "production" ? Object.freeze({}) : {};
process.env.NODE_ENV !== "production" && Object.freeze([]);
var wl = function () {},
  iJ = function (i) {
    return (
      i.charCodeAt(0) === 111 &&
      i.charCodeAt(1) === 110 && // uppercase letter
      (i.charCodeAt(2) > 122 || i.charCodeAt(2) < 97)
    );
  },
  gi = Object.assign,
  aJ = function (i, o) {
    var p = i.indexOf(o);
    p > -1 && i.splice(p, 1);
  },
  oJ = Object.prototype.hasOwnProperty,
  ur = function (i, o) {
    return oJ.call(i, o);
  },
  qn = Array.isArray,
  kl = function (i) {
    return jm(i) === "[object Map]";
  },
  sJ = function (i) {
    return jm(i) === "[object Set]";
  },
  cr = function (i) {
    return typeof i == "function";
  },
  ua = function (i) {
    return typeof i == "string";
  },
  Gh = function (i) {
    return vt(i) === "symbol";
  },
  $r = function (i) {
    return i !== null && vt(i) === "object";
  },
  uJ = function (i) {
    return ($r(i) || cr(i)) && cr(i.then) && cr(i.catch);
  },
  cJ = Object.prototype.toString,
  jm = function (i) {
    return cJ.call(i);
  },
  Tx = function (i) {
    return jm(i).slice(8, -1);
  },
  lJ = function (i) {
    return jm(i) === "[object Object]";
  },
  xS = function (i) {
    return ua(i) && i !== "NaN" && i[0] !== "-" && "" + parseInt(i, 10) === i;
  },
  dJ = function (i) {
    var o = /* @__PURE__ */ Object.create(null);
    return function (p) {
      var m = o[p];
      return m || (o[p] = i(p));
    };
  },
  hJ = dJ(function (r) {
    return r.charAt(0).toUpperCase() + r.slice(1);
  }),
  Ss = function (i, o) {
    return !Object.is(i, o);
  },
  fJ = function (i, o, p) {
    var m = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
    Object.defineProperty(i, o, {
      configurable: !0,
      enumerable: !1,
      writable: m,
      value: p,
    });
  },
  m4,
  Bm = function () {
    return (
      m4 ||
      (m4 =
        typeof globalThis != "undefined"
          ? globalThis
          : typeof self != "undefined"
          ? self
          : typeof window != "undefined"
          ? window
          : typeof global != "undefined"
          ? global
          : {})
    );
  };
(Lb = {}),
  lt(
    lt(
      lt(
        lt(
          lt(
            lt(
              lt(lt(lt(lt(Lb, 1, "TEXT"), 2, "CLASS"), 4, "STYLE"), 8, "PROPS"),
              16,
              "FULL_PROPS"
            ),
            32,
            "NEED_HYDRATION"
          ),
          64,
          "STABLE_FRAGMENT"
        ),
        128,
        "KEYED_FRAGMENT"
      ),
      256,
      "UNKEYED_FRAGMENT"
    ),
    512,
    "NEED_PATCH"
  ),
  lt(
    lt(
      lt(lt(Lb, 1024, "DYNAMIC_SLOTS"), 2048, "DEV_ROOT_FRAGMENT"),
      -1,
      "HOISTED"
    ),
    -2,
    "BAIL"
  );
lt(lt(lt({}, 1, "STABLE"), 2, "DYNAMIC"), 3, "FORWARDED");
function OS(r) {
  if (qn(r)) {
    for (var i = {}, o = 0; o < r.length; o++) {
      var p = r[o],
        m = ua(p) ? gJ(p) : OS(p);
      if (m) for (var S in m) i[S] = m[S];
    }
    return i;
  } else if (ua(r) || $r(r)) return r;
}
var pJ = /;(?![^(]*\))/g,
  vJ = /:([^]+)/,
  mJ = /\/\*[^]*?\*\//g;
function gJ(r) {
  var i = {};
  return (
    r
      .replace(mJ, "")
      .split(pJ)
      .forEach(function (o) {
        if (o) {
          var p = o.split(vJ);
          p.length > 1 && (i[p[0].trim()] = p[1].trim());
        }
      }),
    i
  );
}
function PS(r) {
  var i = "";
  if (ua(r)) i = r;
  else if (qn(r))
    for (var o = 0; o < r.length; o++) {
      var p = PS(r[o]);
      p && (i += p + " ");
    }
  else if ($r(r)) for (var m in r) r[m] && (i += m + " ");
  return i.trim();
}
var Zv;
function Ex(r, i) {
  var o =
    (typeof Symbol != "undefined" && r[Symbol.iterator]) || r["@@iterator"];
  if (!o) {
    if (
      Array.isArray(r) ||
      (o = _J(r)) ||
      (i && r && typeof r.length == "number")
    ) {
      o && (r = o);
      var p = 0,
        m = function () {};
      return {
        s: m,
        n: function () {
          return p >= r.length ? { done: !0 } : { done: !1, value: r[p++] };
        },
        e: function (ee) {
          throw ee;
        },
        f: m,
      };
    }
    throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
  }
  var S,
    O = !0,
    I = !1;
  return {
    s: function () {
      o = o.call(r);
    },
    n: function () {
      var ee = o.next();
      return (O = ee.done), ee;
    },
    e: function (ee) {
      (I = !0), (S = ee);
    },
    f: function () {
      try {
        O || o.return == null || o.return();
      } finally {
        if (I) throw S;
      }
    },
  };
}
function _J(r, i) {
  if (r) {
    if (typeof r == "string") return g4(r, i);
    var o = {}.toString.call(r).slice(8, -1);
    return (
      o === "Object" && r.constructor && (o = r.constructor.name),
      o === "Map" || o === "Set"
        ? Array.from(r)
        : o === "Arguments" ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)
        ? g4(r, i)
        : void 0
    );
  }
}
function g4(r, i) {
  (i == null || i > r.length) && (i = r.length);
  for (var o = 0, p = Array(i); o < i; o++) p[o] = r[o];
  return p;
}
function Ix(r, i, o) {
  return (
    (i = km(i)),
    eJ(
      r,
      Rx() ? Reflect.construct(i, o || [], km(r).constructor) : i.apply(r, o)
    )
  );
}
function Rx() {
  try {
    var r = !Boolean.prototype.valueOf.call(
      Reflect.construct(Boolean, [], function () {})
    );
  } catch (i) {}
  return (Rx = function () {
    return !!r;
  })();
}
function Ui(r) {
  for (
    var i, o = arguments.length, p = new Array(o > 1 ? o - 1 : 0), m = 1;
    m < o;
    m++
  )
    p[m - 1] = arguments[m];
  (i = console).warn.apply(i, ["[Vue warn] ".concat(r)].concat(p));
}
var Kr,
  yJ = /* @__PURE__ */ (function () {
    function r() {
      var i =
        arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
      Ir(this, r),
        (this.detached = i),
        (this._active = !0),
        (this.effects = []),
        (this.cleanups = []),
        (this._isPaused = !1),
        (this.parent = Kr),
        !i &&
          Kr &&
          (this.index = (Kr.scopes || (Kr.scopes = [])).push(this) - 1);
    }
    return Rr(r, [
      {
        key: "active",
        get: function () {
          return this._active;
        },
      },
      {
        key: "pause",
        value: function () {
          if (this._active) {
            this._isPaused = !0;
            var o, p;
            if (this.scopes)
              for (o = 0, p = this.scopes.length; o < p; o++)
                this.scopes[o].pause();
            for (o = 0, p = this.effects.length; o < p; o++)
              this.effects[o].pause();
          }
        },
        /**
         * Resumes the effect scope, including all child scopes and effects.
         */
      },
      {
        key: "resume",
        value: function () {
          if (this._active && this._isPaused) {
            this._isPaused = !1;
            var o, p;
            if (this.scopes)
              for (o = 0, p = this.scopes.length; o < p; o++)
                this.scopes[o].resume();
            for (o = 0, p = this.effects.length; o < p; o++)
              this.effects[o].resume();
          }
        },
      },
      {
        key: "run",
        value: function (o) {
          if (this._active) {
            var p = Kr;
            try {
              return (Kr = this), o();
            } finally {
              Kr = p;
            }
          } else
            process.env.NODE_ENV !== "production" &&
              Ui("cannot run an inactive effect scope.");
        },
        /**
         * This should only be called on non-detached scopes
         * @internal
         */
      },
      {
        key: "on",
        value: function () {
          Kr = this;
        },
        /**
         * This should only be called on non-detached scopes
         * @internal
         */
      },
      {
        key: "off",
        value: function () {
          Kr = this.parent;
        },
      },
      {
        key: "stop",
        value: function (o) {
          if (this._active) {
            this._active = !1;
            var p, m;
            for (p = 0, m = this.effects.length; p < m; p++)
              this.effects[p].stop();
            for (
              this.effects.length = 0, p = 0, m = this.cleanups.length;
              p < m;
              p++
            )
              this.cleanups[p]();
            if (((this.cleanups.length = 0), this.scopes)) {
              for (p = 0, m = this.scopes.length; p < m; p++)
                this.scopes[p].stop(!0);
              this.scopes.length = 0;
            }
            if (!this.detached && this.parent && !o) {
              var S = this.parent.scopes.pop();
              S &&
                S !== this &&
                ((this.parent.scopes[this.index] = S), (S.index = this.index));
            }
            this.parent = void 0;
          }
        },
      },
    ]);
  })();
function Cx(r) {
  return new yJ(r);
}
function Ax() {
  return Kr;
}
function bJ(r) {
  var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
  Kr
    ? Kr.cleanups.push(r)
    : process.env.NODE_ENV !== "production" &&
      !i &&
      Ui(
        "onScopeDispose() is called when there is no active effect scope to be associated with."
      );
}
var xn,
  Mb = /* @__PURE__ */ new WeakSet(),
  SJ = /* @__PURE__ */ (function () {
    function r(i) {
      Ir(this, r),
        (this.fn = i),
        (this.deps = void 0),
        (this.depsTail = void 0),
        (this.flags = 5),
        (this.next = void 0),
        (this.cleanup = void 0),
        (this.scheduler = void 0),
        Kr && Kr.active && Kr.effects.push(this);
    }
    return Rr(r, [
      {
        key: "pause",
        value: function () {
          this.flags |= 64;
        },
      },
      {
        key: "resume",
        value: function () {
          this.flags & 64 &&
            ((this.flags &= -65),
            Mb.has(this) && (Mb.delete(this), this.trigger()));
        },
        /**
         * @internal
         */
      },
      {
        key: "notify",
        value: function () {
          (this.flags & 2 && !(this.flags & 32)) || this.flags & 8 || Ox(this);
        },
      },
      {
        key: "run",
        value: function () {
          if (!(this.flags & 1)) return this.fn();
          (this.flags |= 2), _4(this), Px(this);
          var o = xn,
            p = oa;
          (xn = this), (oa = !0);
          try {
            return this.fn();
          } finally {
            process.env.NODE_ENV !== "production" &&
              xn !== this &&
              Ui(
                "Active effect was not restored correctly - this is likely a Vue internal bug."
              ),
              Dx(this),
              (xn = o),
              (oa = p),
              (this.flags &= -3);
          }
        },
      },
      {
        key: "stop",
        value: function () {
          if (this.flags & 1) {
            for (var o = this.deps; o; o = o.nextDep) LS(o);
            (this.deps = this.depsTail = void 0),
              _4(this),
              this.onStop && this.onStop(),
              (this.flags &= -2);
          }
        },
      },
      {
        key: "trigger",
        value: function () {
          this.flags & 64
            ? Mb.add(this)
            : this.scheduler
            ? this.scheduler()
            : this.runIfDirty();
        },
        /**
         * @internal
         */
      },
      {
        key: "runIfDirty",
        value: function () {
          oS(this) && this.run();
        },
      },
      {
        key: "dirty",
        get: function () {
          return oS(this);
        },
      },
    ]);
  })(),
  xx = 0,
  Lh,
  Mh;
function Ox(r) {
  var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
  if (((r.flags |= 8), i)) {
    (r.next = Mh), (Mh = r);
    return;
  }
  (r.next = Lh), (Lh = r);
}
function DS() {
  xx++;
}
function NS() {
  if (!(--xx > 0)) {
    if (Mh) {
      var r = Mh;
      for (Mh = void 0; r; ) {
        var i = r.next;
        (r.next = void 0), (r.flags &= -9), (r = i);
      }
    }
    for (var o; Lh; ) {
      var p = Lh;
      for (Lh = void 0; p; ) {
        var m = p.next;
        if (((p.next = void 0), (p.flags &= -9), p.flags & 1))
          try {
            p.trigger();
          } catch (S) {
            o || (o = S);
          }
        p = m;
      }
    }
    if (o) throw o;
  }
}
function Px(r) {
  for (var i = r.deps; i; i = i.nextDep)
    (i.version = -1),
      (i.prevActiveLink = i.dep.activeLink),
      (i.dep.activeLink = i);
}
function Dx(r) {
  for (var i, o = r.depsTail, p = o; p; ) {
    var m = p.prevDep;
    p.version === -1 ? (p === o && (o = m), LS(p), wJ(p)) : (i = p),
      (p.dep.activeLink = p.prevActiveLink),
      (p.prevActiveLink = void 0),
      (p = m);
  }
  (r.deps = i), (r.depsTail = o);
}
function oS(r) {
  for (var i = r.deps; i; i = i.nextDep)
    if (
      i.dep.version !== i.version ||
      (i.dep.computed && (Nx(i.dep.computed) || i.dep.version !== i.version))
    )
      return !0;
  return !!r._dirty;
}
function Nx(r) {
  if (
    !(r.flags & 4 && !(r.flags & 16)) &&
    ((r.flags &= -17), r.globalVersion !== jh)
  ) {
    r.globalVersion = jh;
    var i = r.dep;
    if (((r.flags |= 2), i.version > 0 && !r.isSSR && r.deps && !oS(r))) {
      r.flags &= -3;
      return;
    }
    var o = xn,
      p = oa;
    (xn = r), (oa = !0);
    try {
      Px(r);
      var m = r.fn(r._value);
      (i.version === 0 || Ss(m, r._value)) && ((r._value = m), i.version++);
    } catch (S) {
      throw (i.version++, S);
    } finally {
      (xn = o), (oa = p), Dx(r), (r.flags &= -3);
    }
  }
}
function LS(r) {
  var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1,
    o = r.dep,
    p = r.prevSub,
    m = r.nextSub;
  if (
    (p && ((p.nextSub = m), (r.prevSub = void 0)),
    m && ((m.prevSub = p), (r.nextSub = void 0)),
    process.env.NODE_ENV !== "production" &&
      o.subsHead === r &&
      (o.subsHead = m),
    o.subs === r && ((o.subs = p), !p && o.computed))
  ) {
    o.computed.flags &= -5;
    for (var S = o.computed.deps; S; S = S.nextDep) LS(S, !0);
  }
  !i && !--o.sc && o.map && o.map.delete(o.key);
}
function wJ(r) {
  var i = r.prevDep,
    o = r.nextDep;
  i && ((i.nextDep = o), (r.prevDep = void 0)),
    o && ((o.prevDep = i), (r.nextDep = void 0));
}
var oa = !0,
  Lx = [];
function zm() {
  Lx.push(oa), (oa = !1);
}
function Hm() {
  var r = Lx.pop();
  oa = r === void 0 ? !0 : r;
}
function _4(r) {
  var i = r.cleanup;
  if (((r.cleanup = void 0), i)) {
    var o = xn;
    xn = void 0;
    try {
      i();
    } finally {
      xn = o;
    }
  }
}
var jh = 0,
  kJ = /* @__PURE__ */ Rr(function r(i, o) {
    Ir(this, r),
      (this.sub = i),
      (this.dep = o),
      (this.version = o.version),
      (this.nextDep =
        this.prevDep =
        this.nextSub =
        this.prevSub =
        this.prevActiveLink =
          void 0);
  }),
  MS = /* @__PURE__ */ (function () {
    function r(i) {
      Ir(this, r),
        (this.computed = i),
        (this.version = 0),
        (this.activeLink = void 0),
        (this.subs = void 0),
        (this.map = void 0),
        (this.key = void 0),
        (this.sc = 0),
        process.env.NODE_ENV !== "production" && (this.subsHead = void 0);
    }
    return Rr(r, [
      {
        key: "track",
        value: function (o) {
          if (!(!xn || !oa || xn === this.computed)) {
            var p = this.activeLink;
            if (p === void 0 || p.sub !== xn)
              (p = this.activeLink = new kJ(xn, this)),
                xn.deps
                  ? ((p.prevDep = xn.depsTail),
                    (xn.depsTail.nextDep = p),
                    (xn.depsTail = p))
                  : (xn.deps = xn.depsTail = p),
                Mx(p);
            else if (
              p.version === -1 &&
              ((p.version = this.version), p.nextDep)
            ) {
              var m = p.nextDep;
              (m.prevDep = p.prevDep),
                p.prevDep && (p.prevDep.nextDep = m),
                (p.prevDep = xn.depsTail),
                (p.nextDep = void 0),
                (xn.depsTail.nextDep = p),
                (xn.depsTail = p),
                xn.deps === p && (xn.deps = m);
            }
            return (
              process.env.NODE_ENV !== "production" &&
                xn.onTrack &&
                xn.onTrack(
                  gi(
                    {
                      effect: xn,
                    },
                    o
                  )
                ),
              p
            );
          }
        },
      },
      {
        key: "trigger",
        value: function (o) {
          this.version++, jh++, this.notify(o);
        },
      },
      {
        key: "notify",
        value: function (o) {
          DS();
          try {
            if (process.env.NODE_ENV !== "production")
              for (var p = this.subsHead; p; p = p.nextSub)
                p.sub.onTrigger &&
                  !(p.sub.flags & 8) &&
                  p.sub.onTrigger(
                    gi(
                      {
                        effect: p.sub,
                      },
                      o
                    )
                  );
            for (var m = this.subs; m; m = m.prevSub)
              m.sub.notify() && m.sub.dep.notify();
          } finally {
            NS();
          }
        },
      },
    ]);
  })();
function Mx(r) {
  if ((r.dep.sc++, r.sub.flags & 4)) {
    var i = r.dep.computed;
    if (i && !r.dep.subs) {
      i.flags |= 20;
      for (var o = i.deps; o; o = o.nextDep) Mx(o);
    }
    var p = r.dep.subs;
    p !== r && ((r.prevSub = p), p && (p.nextSub = r)),
      process.env.NODE_ENV !== "production" &&
        r.dep.subsHead === void 0 &&
        (r.dep.subsHead = r),
      (r.dep.subs = r);
  }
}
var Tm = /* @__PURE__ */ new WeakMap(),
  Pu = Symbol(process.env.NODE_ENV !== "production" ? "Object iterate" : ""),
  sS = Symbol(process.env.NODE_ENV !== "production" ? "Map keys iterate" : ""),
  Bh = Symbol(process.env.NODE_ENV !== "production" ? "Array iterate" : "");
function Sr(r, i, o) {
  if (oa && xn) {
    var p = Tm.get(r);
    p || Tm.set(r, (p = /* @__PURE__ */ new Map()));
    var m = p.get(o);
    m || (p.set(o, (m = new MS())), (m.map = p), (m.key = o)),
      process.env.NODE_ENV !== "production"
        ? m.track({
            target: r,
            type: i,
            key: o,
          })
        : m.track();
  }
}
function ms(r, i, o, p, m, S) {
  var O = Tm.get(r);
  if (!O) {
    jh++;
    return;
  }
  var I = function (be) {
    be &&
      (process.env.NODE_ENV !== "production"
        ? be.trigger({
            target: r,
            type: i,
            key: o,
            newValue: p,
            oldValue: m,
            oldTarget: S,
          })
        : be.trigger());
  };
  if ((DS(), i === "clear")) O.forEach(I);
  else {
    var B = qn(r),
      ee = B && xS(o);
    if (B && o === "length") {
      var oe = Number(p);
      O.forEach(function (ie, be) {
        (be === "length" || be === Bh || (!Gh(be) && be >= oe)) && I(ie);
      });
    } else
      switch (
        ((o !== void 0 || O.has(void 0)) && I(O.get(o)), ee && I(O.get(Bh)), i)
      ) {
        case "add":
          B ? ee && I(O.get("length")) : (I(O.get(Pu)), kl(r) && I(O.get(sS)));
          break;
        case "delete":
          B || (I(O.get(Pu)), kl(r) && I(O.get(sS)));
          break;
        case "set":
          kl(r) && I(O.get(Pu));
          break;
      }
  }
  NS();
}
function TJ(r, i) {
  var o = Tm.get(r);
  return o && o.get(i);
}
function pl(r) {
  var i = ln(r);
  return i === r ? i : (Sr(i, "iterate", Bh), ri(r) ? i : i.map(Jr));
}
function US(r) {
  return Sr((r = ln(r)), "iterate", Bh), r;
}
var EJ =
  ((Zv = {
    __proto__: null,
  }),
  lt(
    lt(
      lt(
        lt(
          lt(
            lt(
              lt(
                lt(
                  lt(
                    lt(Zv, Symbol.iterator, function () {
                      return Ub(this, Symbol.iterator, Jr);
                    }),
                    "concat",
                    function () {
                      for (
                        var i, o = arguments.length, p = new Array(o), m = 0;
                        m < o;
                        m++
                      )
                        p[m] = arguments[m];
                      return (i = pl(this)).concat.apply(
                        i,
                        Mn(
                          p.map(function (S) {
                            return qn(S) ? pl(S) : S;
                          })
                        )
                      );
                    }
                  ),
                  "entries",
                  function () {
                    return Ub(this, "entries", function (i) {
                      return (i[1] = Jr(i[1])), i;
                    });
                  }
                ),
                "every",
                function (i, o) {
                  return bo(this, "every", i, o, void 0, arguments);
                }
              ),
              "filter",
              function (i, o) {
                return bo(
                  this,
                  "filter",
                  i,
                  o,
                  function (p) {
                    return p.map(Jr);
                  },
                  arguments
                );
              }
            ),
            "find",
            function (i, o) {
              return bo(this, "find", i, o, Jr, arguments);
            }
          ),
          "findIndex",
          function (i, o) {
            return bo(this, "findIndex", i, o, void 0, arguments);
          }
        ),
        "findLast",
        function (i, o) {
          return bo(this, "findLast", i, o, Jr, arguments);
        }
      ),
      "findLastIndex",
      function (i, o) {
        return bo(this, "findLastIndex", i, o, void 0, arguments);
      }
    ),
    "forEach",
    function (i, o) {
      return bo(this, "forEach", i, o, void 0, arguments);
    }
  ),
  lt(
    lt(
      lt(
        lt(
          lt(
            lt(
              lt(
                lt(
                  lt(
                    lt(Zv, "includes", function () {
                      for (
                        var i = arguments.length, o = new Array(i), p = 0;
                        p < i;
                        p++
                      )
                        o[p] = arguments[p];
                      return Vb(this, "includes", o);
                    }),
                    "indexOf",
                    function () {
                      for (
                        var i = arguments.length, o = new Array(i), p = 0;
                        p < i;
                        p++
                      )
                        o[p] = arguments[p];
                      return Vb(this, "indexOf", o);
                    }
                  ),
                  "join",
                  function (i) {
                    return pl(this).join(i);
                  }
                ),
                "lastIndexOf",
                function () {
                  for (
                    var i = arguments.length, o = new Array(i), p = 0;
                    p < i;
                    p++
                  )
                    o[p] = arguments[p];
                  return Vb(this, "lastIndexOf", o);
                }
              ),
              "map",
              function (i, o) {
                return bo(this, "map", i, o, void 0, arguments);
              }
            ),
            "pop",
            function () {
              return Rh(this, "pop");
            }
          ),
          "push",
          function () {
            for (var i = arguments.length, o = new Array(i), p = 0; p < i; p++)
              o[p] = arguments[p];
            return Rh(this, "push", o);
          }
        ),
        "reduce",
        function (i) {
          for (
            var o = arguments.length, p = new Array(o > 1 ? o - 1 : 0), m = 1;
            m < o;
            m++
          )
            p[m - 1] = arguments[m];
          return y4(this, "reduce", i, p);
        }
      ),
      "reduceRight",
      function (i) {
        for (
          var o = arguments.length, p = new Array(o > 1 ? o - 1 : 0), m = 1;
          m < o;
          m++
        )
          p[m - 1] = arguments[m];
        return y4(this, "reduceRight", i, p);
      }
    ),
    "shift",
    function () {
      return Rh(this, "shift");
    }
  ),
  lt(
    lt(
      lt(
        lt(
          lt(
            lt(
              lt(Zv, "some", function (i, o) {
                return bo(this, "some", i, o, void 0, arguments);
              }),
              "splice",
              function () {
                for (
                  var i = arguments.length, o = new Array(i), p = 0;
                  p < i;
                  p++
                )
                  o[p] = arguments[p];
                return Rh(this, "splice", o);
              }
            ),
            "toReversed",
            function () {
              return pl(this).toReversed();
            }
          ),
          "toSorted",
          function (i) {
            return pl(this).toSorted(i);
          }
        ),
        "toSpliced",
        function () {
          var i;
          return (i = pl(this)).toSpliced.apply(i, arguments);
        }
      ),
      "unshift",
      function () {
        for (var i = arguments.length, o = new Array(i), p = 0; p < i; p++)
          o[p] = arguments[p];
        return Rh(this, "unshift", o);
      }
    ),
    "values",
    function () {
      return Ub(this, "values", Jr);
    }
  ));
function Ub(r, i, o) {
  var p = US(r),
    m = p[i]();
  return (
    p !== r &&
      !ri(r) &&
      ((m._next = m.next),
      (m.next = function () {
        var S = m._next();
        return S.value && (S.value = o(S.value)), S;
      })),
    m
  );
}
var IJ = Array.prototype;
function bo(r, i, o, p, m, S) {
  var O = US(r),
    I = O !== r && !ri(r),
    B = O[i];
  if (B !== IJ[i]) {
    var ee = B.apply(r, S);
    return I ? Jr(ee) : ee;
  }
  var oe = o;
  O !== r &&
    (I
      ? (oe = function (Ie, Ce) {
          return o.call(this, Jr(Ie), Ce, r);
        })
      : o.length > 2 &&
        (oe = function (Ie, Ce) {
          return o.call(this, Ie, Ce, r);
        }));
  var ie = B.call(O, oe, p);
  return I && m ? m(ie) : ie;
}
function y4(r, i, o, p) {
  var m = US(r),
    S = o;
  return (
    m !== r &&
      (ri(r)
        ? o.length > 3 &&
          (S = function (I, B, ee) {
            return o.call(this, I, B, ee, r);
          })
        : (S = function (I, B, ee) {
            return o.call(this, I, Jr(B), ee, r);
          })),
    m[i].apply(m, [S].concat(Mn(p)))
  );
}
function Vb(r, i, o) {
  var p = ln(r);
  Sr(p, "iterate", Bh);
  var m = p[i].apply(p, Mn(o));
  return (m === -1 || m === !1) && zh(o[0])
    ? ((o[0] = ln(o[0])), p[i].apply(p, Mn(o)))
    : m;
}
function Rh(r, i) {
  var o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];
  zm(), DS();
  var p = ln(r)[i].apply(r, o);
  return NS(), Hm(), p;
}
var RJ = /* @__PURE__ */ rJ("__proto__,__v_isRef,__isVue"),
  Ux = new Set(
    /* @__PURE__ */ Object.getOwnPropertyNames(Symbol)
      .filter(function (r) {
        return r !== "arguments" && r !== "caller";
      })
      .map(function (r) {
        return Symbol[r];
      })
      .filter(Gh)
  );
function CJ(r) {
  Gh(r) || (r = String(r));
  var i = ln(this);
  return Sr(i, "has", r), i.hasOwnProperty(r);
}
var Vx = /* @__PURE__ */ (function () {
    function r() {
      var i =
          arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1,
        o = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
      Ir(this, r), (this._isReadonly = i), (this._isShallow = o);
    }
    return Rr(r, [
      {
        key: "get",
        value: function (o, p, m) {
          if (p === "__v_skip") return o.__v_skip;
          var S = this._isReadonly,
            O = this._isShallow;
          if (p === "__v_isReactive") return !S;
          if (p === "__v_isReadonly") return S;
          if (p === "__v_isShallow") return O;
          if (p === "__v_raw")
            return m === (S ? (O ? zx : Bx) : O ? VJ : jx).get(o) || // receiver is not the reactive proxy, but has the same prototype
              // this means the receiver is a user proxy of the reactive proxy
              Object.getPrototypeOf(o) === Object.getPrototypeOf(m)
              ? o
              : void 0;
          var I = qn(o);
          if (!S) {
            var B;
            if (I && (B = EJ[p])) return B;
            if (p === "hasOwnProperty") return CJ;
          }
          var ee = Reflect.get(
            o,
            p,
            // if this is a proxy wrapping a ref, return methods using the raw ref
            // as receiver so that we don't have to call `toRaw` on the ref in all
            // its class methods
            rr(o) ? o : m
          );
          return (Gh(p) ? Ux.has(p) : RJ(p)) || (S || Sr(o, "get", p), O)
            ? ee
            : rr(ee)
            ? I && xS(p)
              ? ee
              : ee.value
            : $r(ee)
            ? S
              ? Hx(ee)
              : FS(ee)
            : ee;
        },
      },
    ]);
  })(),
  AJ = /* @__PURE__ */ (function (r) {
    function i() {
      var o =
        arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
      return Ir(this, i), Ix(this, i, [!1, o]);
    }
    return (
      kx(i, r),
      Rr(i, [
        {
          key: "set",
          value: function (p, m, S, O) {
            var I = p[m];
            if (!this._isShallow) {
              var B = Eo(I);
              if (
                (!ri(S) && !Eo(S) && ((I = ln(I)), (S = ln(S))),
                !qn(p) && rr(I) && !rr(S))
              )
                return B ? !1 : ((I.value = S), !0);
            }
            var ee = qn(p) && xS(m) ? Number(m) < p.length : ur(p, m),
              oe = Reflect.set(p, m, S, rr(p) ? p : O);
            return (
              p === ln(O) &&
                (ee ? Ss(S, I) && ms(p, "set", m, S, I) : ms(p, "add", m, S)),
              oe
            );
          },
        },
        {
          key: "deleteProperty",
          value: function (p, m) {
            var S = ur(p, m),
              O = p[m],
              I = Reflect.deleteProperty(p, m);
            return I && S && ms(p, "delete", m, void 0, O), I;
          },
        },
        {
          key: "has",
          value: function (p, m) {
            var S = Reflect.has(p, m);
            return (!Gh(m) || !Ux.has(m)) && Sr(p, "has", m), S;
          },
        },
        {
          key: "ownKeys",
          value: function (p) {
            return Sr(p, "iterate", qn(p) ? "length" : Pu), Reflect.ownKeys(p);
          },
        },
      ])
    );
  })(Vx),
  Fx = /* @__PURE__ */ (function (r) {
    function i() {
      var o =
        arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
      return Ir(this, i), Ix(this, i, [!0, o]);
    }
    return (
      kx(i, r),
      Rr(i, [
        {
          key: "set",
          value: function (p, m) {
            return (
              process.env.NODE_ENV !== "production" &&
                Ui(
                  'Set operation on key "'.concat(
                    String(m),
                    '" failed: target is readonly.'
                  ),
                  p
                ),
              !0
            );
          },
        },
        {
          key: "deleteProperty",
          value: function (p, m) {
            return (
              process.env.NODE_ENV !== "production" &&
                Ui(
                  'Delete operation on key "'.concat(
                    String(m),
                    '" failed: target is readonly.'
                  ),
                  p
                ),
              !0
            );
          },
        },
      ])
    );
  })(Vx),
  xJ = /* @__PURE__ */ new AJ(),
  OJ = /* @__PURE__ */ new Fx(),
  PJ = /* @__PURE__ */ new Fx(!0),
  uS = function (i) {
    return i;
  },
  Qv = function (i) {
    return Reflect.getPrototypeOf(i);
  };
function DJ(r, i, o) {
  return function () {
    var p = this.__v_raw,
      m = ln(p),
      S = kl(m),
      O = r === "entries" || (r === Symbol.iterator && S),
      I = r === "keys" && S,
      B = p[r].apply(p, arguments),
      ee = o ? uS : i ? cS : Jr;
    return (
      !i && Sr(m, "iterate", I ? sS : Pu),
      lt(
        {
          // iterator protocol
          next: function () {
            var ie = B.next(),
              be = ie.value,
              Ie = ie.done;
            return Ie
              ? {
                  value: be,
                  done: Ie,
                }
              : {
                  value: O ? [ee(be[0]), ee(be[1])] : ee(be),
                  done: Ie,
                };
          },
        },
        Symbol.iterator,
        function () {
          return this;
        }
      )
    );
  };
}
function Xv(r) {
  return function () {
    if (process.env.NODE_ENV !== "production") {
      var i =
        !(arguments.length <= 0) && arguments[0]
          ? 'on key "'.concat(
              arguments.length <= 0 ? void 0 : arguments[0],
              '" '
            )
          : "";
      Ui(
        ""
          .concat(hJ(r), " operation ")
          .concat(i, "failed: target is readonly."),
        ln(this)
      );
    }
    return r === "delete" ? !1 : r === "clear" ? void 0 : this;
  };
}
function NJ(r, i) {
  var o = {
    get: function (S) {
      var O = this.__v_raw,
        I = ln(O),
        B = ln(S);
      r || (Ss(S, B) && Sr(I, "get", S), Sr(I, "get", B));
      var ee = Qv(I),
        oe = ee.has,
        ie = i ? uS : r ? cS : Jr;
      if (oe.call(I, S)) return ie(O.get(S));
      if (oe.call(I, B)) return ie(O.get(B));
      O !== I && O.get(S);
    },
    get size() {
      var m = this.__v_raw;
      return !r && Sr(ln(m), "iterate", Pu), Reflect.get(m, "size", m);
    },
    has: function (S) {
      var O = this.__v_raw,
        I = ln(O),
        B = ln(S);
      return (
        r || (Ss(S, B) && Sr(I, "has", S), Sr(I, "has", B)),
        S === B ? O.has(S) : O.has(S) || O.has(B)
      );
    },
    forEach: function (S, O) {
      var I = this,
        B = I.__v_raw,
        ee = ln(B),
        oe = i ? uS : r ? cS : Jr;
      return (
        !r && Sr(ee, "iterate", Pu),
        B.forEach(function (ie, be) {
          return S.call(O, oe(ie), oe(be), I);
        })
      );
    },
  };
  gi(
    o,
    r
      ? {
          add: Xv("add"),
          set: Xv("set"),
          delete: Xv("delete"),
          clear: Xv("clear"),
        }
      : {
          add: function (S) {
            !i && !ri(S) && !Eo(S) && (S = ln(S));
            var O = ln(this),
              I = Qv(O),
              B = I.has.call(O, S);
            return B || (O.add(S), ms(O, "add", S, S)), this;
          },
          set: function (S, O) {
            !i && !ri(O) && !Eo(O) && (O = ln(O));
            var I = ln(this),
              B = Qv(I),
              ee = B.has,
              oe = B.get,
              ie = ee.call(I, S);
            ie
              ? process.env.NODE_ENV !== "production" && b4(I, ee, S)
              : ((S = ln(S)), (ie = ee.call(I, S)));
            var be = oe.call(I, S);
            return (
              I.set(S, O),
              ie ? Ss(O, be) && ms(I, "set", S, O, be) : ms(I, "add", S, O),
              this
            );
          },
          delete: function (S) {
            var O = ln(this),
              I = Qv(O),
              B = I.has,
              ee = I.get,
              oe = B.call(O, S);
            oe
              ? process.env.NODE_ENV !== "production" && b4(O, B, S)
              : ((S = ln(S)), (oe = B.call(O, S)));
            var ie = ee ? ee.call(O, S) : void 0,
              be = O.delete(S);
            return oe && ms(O, "delete", S, void 0, ie), be;
          },
          clear: function () {
            var S = ln(this),
              O = S.size !== 0,
              I =
                process.env.NODE_ENV !== "production"
                  ? kl(S)
                    ? new Map(S)
                    : new Set(S)
                  : void 0,
              B = S.clear();
            return O && ms(S, "clear", void 0, void 0, I), B;
          },
        }
  );
  var p = ["keys", "values", "entries", Symbol.iterator];
  return (
    p.forEach(function (m) {
      o[m] = DJ(m, r, i);
    }),
    o
  );
}
function VS(r, i) {
  var o = NJ(r, i);
  return function (p, m, S) {
    return m === "__v_isReactive"
      ? !r
      : m === "__v_isReadonly"
      ? r
      : m === "__v_raw"
      ? p
      : Reflect.get(ur(o, m) && m in p ? o : p, m, S);
  };
}
var LJ = {
    get: /* @__PURE__ */ VS(!1, !1),
  },
  MJ = {
    get: /* @__PURE__ */ VS(!0, !1),
  },
  UJ = {
    get: /* @__PURE__ */ VS(!0, !0),
  };
function b4(r, i, o) {
  var p = ln(o);
  if (p !== o && i.call(r, p)) {
    var m = Tx(r);
    Ui(
      "Reactive "
        .concat(
          m,
          " contains both the raw and reactive versions of the same object"
        )
        .concat(
          m === "Map" ? " as keys" : "",
          ", which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible."
        )
    );
  }
}
var jx = /* @__PURE__ */ new WeakMap(),
  VJ = /* @__PURE__ */ new WeakMap(),
  Bx = /* @__PURE__ */ new WeakMap(),
  zx = /* @__PURE__ */ new WeakMap();
function FJ(r) {
  switch (r) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function jJ(r) {
  return r.__v_skip || !Object.isExtensible(r) ? 0 : FJ(Tx(r));
}
function FS(r) {
  return Eo(r) ? r : jS(r, !1, xJ, LJ, jx);
}
function Hx(r) {
  return jS(r, !0, OJ, MJ, Bx);
}
function em(r) {
  return jS(r, !0, PJ, UJ, zx);
}
function jS(r, i, o, p, m) {
  if (!$r(r))
    return (
      process.env.NODE_ENV !== "production" &&
        Ui(
          "value cannot be made "
            .concat(i ? "readonly" : "reactive", ": ")
            .concat(String(r))
        ),
      r
    );
  if (r.__v_raw && !(i && r.__v_isReactive)) return r;
  var S = m.get(r);
  if (S) return S;
  var O = jJ(r);
  if (O === 0) return r;
  var I = new Proxy(r, O === 2 ? p : o);
  return m.set(r, I), I;
}
function ko(r) {
  return Eo(r) ? ko(r.__v_raw) : !!(r && r.__v_isReactive);
}
function Eo(r) {
  return !!(r && r.__v_isReadonly);
}
function ri(r) {
  return !!(r && r.__v_isShallow);
}
function zh(r) {
  return r ? !!r.__v_raw : !1;
}
function ln(r) {
  var i = r && r.__v_raw;
  return i ? ln(i) : r;
}
function _s(r) {
  return (
    !ur(r, "__v_skip") && Object.isExtensible(r) && fJ(r, "__v_skip", !0), r
  );
}
var Jr = function (i) {
    return $r(i) ? FS(i) : i;
  },
  cS = function (i) {
    return $r(i) ? Hx(i) : i;
  };
function rr(r) {
  return r ? r.__v_isRef === !0 : !1;
}
function To(r) {
  return BJ(r, !1);
}
function BJ(r, i) {
  return rr(r) ? r : new zJ(r, i);
}
var zJ = /* @__PURE__ */ (function () {
  function r(i, o) {
    Ir(this, r),
      (this.dep = new MS()),
      (this.__v_isRef = !0),
      (this.__v_isShallow = !1),
      (this._rawValue = o ? i : ln(i)),
      (this._value = o ? i : Jr(i)),
      (this.__v_isShallow = o);
  }
  return Rr(r, [
    {
      key: "value",
      get: function () {
        return (
          process.env.NODE_ENV !== "production"
            ? this.dep.track({
                target: this,
                type: "get",
                key: "value",
              })
            : this.dep.track(),
          this._value
        );
      },
      set: function (o) {
        var p = this._rawValue,
          m = this.__v_isShallow || ri(o) || Eo(o);
        (o = m ? o : ln(o)),
          Ss(o, p) &&
            ((this._rawValue = o),
            (this._value = m ? o : Jr(o)),
            process.env.NODE_ENV !== "production"
              ? this.dep.trigger({
                  target: this,
                  type: "set",
                  key: "value",
                  newValue: o,
                  oldValue: p,
                })
              : this.dep.trigger());
      },
    },
  ]);
})();
function Wx(r) {
  return rr(r) ? r.value : r;
}
var HJ = {
  get: function (i, o, p) {
    return o === "__v_raw" ? i : Wx(Reflect.get(i, o, p));
  },
  set: function (i, o, p, m) {
    var S = i[o];
    return rr(S) && !rr(p) ? ((S.value = p), !0) : Reflect.set(i, o, p, m);
  },
};
function WJ(r) {
  return ko(r) ? r : new Proxy(r, HJ);
}
function S4(r) {
  process.env.NODE_ENV !== "production" &&
    !zh(r) &&
    Ui("toRefs() expects a reactive object but received a plain one.");
  var i = qn(r) ? new Array(r.length) : {};
  for (var o in r) i[o] = Gx(r, o);
  return i;
}
var GJ = /* @__PURE__ */ (function () {
    function r(i, o, p) {
      Ir(this, r),
        (this._object = i),
        (this._key = o),
        (this._defaultValue = p),
        (this.__v_isRef = !0),
        (this._value = void 0);
    }
    return Rr(r, [
      {
        key: "value",
        get: function () {
          var o = this._object[this._key];
          return (this._value = o === void 0 ? this._defaultValue : o);
        },
        set: function (o) {
          this._object[this._key] = o;
        },
      },
      {
        key: "dep",
        get: function () {
          return TJ(ln(this._object), this._key);
        },
      },
    ]);
  })(),
  qJ = /* @__PURE__ */ (function () {
    function r(i) {
      Ir(this, r),
        (this._getter = i),
        (this.__v_isRef = !0),
        (this.__v_isReadonly = !0),
        (this._value = void 0);
    }
    return Rr(r, [
      {
        key: "value",
        get: function () {
          return (this._value = this._getter());
        },
      },
    ]);
  })();
function Fb(r, i, o) {
  return rr(r)
    ? r
    : cr(r)
    ? new qJ(r)
    : $r(r) && arguments.length > 1
    ? Gx(r, i, o)
    : To(r);
}
function Gx(r, i, o) {
  var p = r[i];
  return rr(p) ? p : new GJ(r, i, o);
}
var KJ = /* @__PURE__ */ (function () {
  function r(i, o, p) {
    Ir(this, r),
      (this.fn = i),
      (this.setter = o),
      (this._value = void 0),
      (this.dep = new MS(this)),
      (this.__v_isRef = !0),
      (this.deps = void 0),
      (this.depsTail = void 0),
      (this.flags = 16),
      (this.globalVersion = jh - 1),
      (this.next = void 0),
      (this.effect = this),
      (this.__v_isReadonly = !o),
      (this.isSSR = p);
  }
  return Rr(r, [
    {
      key: "notify",
      value: function () {
        if (
          ((this.flags |= 16),
          !(this.flags & 8) && // avoid infinite self recursion
            xn !== this)
        )
          return Ox(this, !0), !0;
        process.env.NODE_ENV;
      },
    },
    {
      key: "value",
      get: function () {
        var o =
          process.env.NODE_ENV !== "production"
            ? this.dep.track({
                target: this,
                type: "get",
                key: "value",
              })
            : this.dep.track();
        return Nx(this), o && (o.version = this.dep.version), this._value;
      },
      set: function (o) {
        this.setter
          ? this.setter(o)
          : process.env.NODE_ENV !== "production" &&
            Ui("Write operation failed: computed value is readonly");
      },
    },
  ]);
})();
function JJ(r, i) {
  var o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
    p,
    m;
  cr(r) ? (p = r) : ((p = r.get), (m = r.set));
  var S = new KJ(p, m, o);
  return (
    process.env.NODE_ENV !== "production" &&
      i &&
      !o &&
      ((S.onTrack = i.onTrack), (S.onTrigger = i.onTrigger)),
    S
  );
}
var tm = {},
  Em = /* @__PURE__ */ new WeakMap(),
  Au = void 0;
function $J(r) {
  var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1,
    o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Au;
  if (o) {
    var p = Em.get(o);
    p || Em.set(o, (p = [])), p.push(r);
  } else
    process.env.NODE_ENV !== "production" &&
      !i &&
      Ui(
        "onWatcherCleanup() was called when there was no active watcher to associate with."
      );
}
function YJ(r, i) {
  var o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Li,
    p = o.immediate,
    m = o.deep,
    S = o.once,
    O = o.scheduler,
    I = o.augmentJob,
    B = o.call,
    ee = function (pt) {
      (o.onWarn || Ui)(
        "Invalid watch source: ",
        pt,
        "A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types."
      );
    },
    oe = function (pt) {
      return m ? pt : ri(pt) || m === !1 || m === 0 ? gs(pt, 1) : gs(pt);
    },
    ie,
    be,
    Ie,
    Ce,
    We = !1,
    de = !1;
  if (
    (rr(r)
      ? ((be = function () {
          return r.value;
        }),
        (We = ri(r)))
      : ko(r)
      ? ((be = function () {
          return oe(r);
        }),
        (We = !0))
      : qn(r)
      ? ((de = !0),
        (We = r.some(function (Vt) {
          return ko(Vt) || ri(Vt);
        })),
        (be = function () {
          return r.map(function (pt) {
            if (rr(pt)) return pt.value;
            if (ko(pt)) return oe(pt);
            if (cr(pt)) return B ? B(pt, 2) : pt();
            process.env.NODE_ENV !== "production" && ee(pt);
          });
        }))
      : cr(r)
      ? i
        ? (be = B
            ? function () {
                return B(r, 2);
              }
            : r)
        : (be = function () {
            if (Ie) {
              zm();
              try {
                Ie();
              } finally {
                Hm();
              }
            }
            var pt = Au;
            Au = ie;
            try {
              return B ? B(r, 3, [Ce]) : r(Ce);
            } finally {
              Au = pt;
            }
          })
      : ((be = wl), process.env.NODE_ENV !== "production" && ee(r)),
    i && m)
  ) {
    var _t = be,
      It = m === !0 ? 1 / 0 : m;
    be = function () {
      return gs(_t(), It);
    };
  }
  var Tt = Ax(),
    Jt = function () {
      ie.stop(), Tt && Tt.active && aJ(Tt.effects, ie);
    };
  if (S && i) {
    var yt = i;
    i = function () {
      yt.apply(void 0, arguments), Jt();
    };
  }
  var Et = de ? new Array(r.length).fill(tm) : tm,
    Ze = function (pt) {
      if (!(!(ie.flags & 1) || (!ie.dirty && !pt)))
        if (i) {
          var nt = ie.run();
          if (
            m ||
            We ||
            (de
              ? nt.some(function (jt, ot) {
                  return Ss(jt, Et[ot]);
                })
              : Ss(nt, Et))
          ) {
            Ie && Ie();
            var Be = Au;
            Au = ie;
            try {
              var rt = [
                nt,
                // pass undefined as the old value when it's changed for the first time
                Et === tm ? void 0 : de && Et[0] === tm ? [] : Et,
                Ce,
              ];
              B
                ? B(i, 3, rt)
                : // @ts-expect-error
                  i.apply(void 0, rt),
                (Et = nt);
            } finally {
              Au = Be;
            }
          }
        } else ie.run();
    };
  return (
    I && I(Ze),
    (ie = new SJ(be)),
    (ie.scheduler = O
      ? function () {
          return O(Ze, !1);
        }
      : Ze),
    (Ce = function (pt) {
      return $J(pt, !1, ie);
    }),
    (Ie = ie.onStop =
      function () {
        var Vt = Em.get(ie);
        if (Vt) {
          if (B) B(Vt, 4);
          else {
            var pt = Ex(Vt),
              nt;
            try {
              for (pt.s(); !(nt = pt.n()).done; ) {
                var Be = nt.value;
                Be();
              }
            } catch (rt) {
              pt.e(rt);
            } finally {
              pt.f();
            }
          }
          Em.delete(ie);
        }
      }),
    process.env.NODE_ENV !== "production" &&
      ((ie.onTrack = o.onTrack), (ie.onTrigger = o.onTrigger)),
    i
      ? p
        ? Ze(!0)
        : (Et = ie.run())
      : O
      ? O(Ze.bind(null, !0), !0)
      : ie.run(),
    (Jt.pause = ie.pause.bind(ie)),
    (Jt.resume = ie.resume.bind(ie)),
    (Jt.stop = Jt),
    Jt
  );
}
function gs(r) {
  var i =
      arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1 / 0,
    o = arguments.length > 2 ? arguments[2] : void 0;
  if (
    i <= 0 ||
    !$r(r) ||
    r.__v_skip ||
    ((o = o || /* @__PURE__ */ new Set()), o.has(r))
  )
    return r;
  if ((o.add(r), i--, rr(r))) gs(r.value, i, o);
  else if (qn(r)) for (var p = 0; p < r.length; p++) gs(r[p], i, o);
  else if (sJ(r) || kl(r))
    r.forEach(function (B) {
      gs(B, i, o);
    });
  else if (lJ(r)) {
    for (var m in r) gs(r[m], i, o);
    var S = Ex(Object.getOwnPropertySymbols(r)),
      O;
    try {
      for (S.s(); !(O = S.n()).done; ) {
        var I = O.value;
        Object.prototype.propertyIsEnumerable.call(r, I) && gs(r[I], i, o);
      }
    } catch (B) {
      S.e(B);
    } finally {
      S.f();
    }
  }
  return r;
}
var Ch,
  Du = [];
function ZJ(r) {
  Du.push(r);
}
function QJ() {
  Du.pop();
}
var jb = !1;
function tr(r) {
  if (!jb) {
    (jb = !0), zm();
    for (
      var i = Du.length ? Du[Du.length - 1].component : null,
        o = i && i.appContext.config.warnHandler,
        p = XJ(),
        m = arguments.length,
        S = new Array(m > 1 ? m - 1 : 0),
        O = 1;
      O < m;
      O++
    )
      S[O - 1] = arguments[O];
    if (o)
      Wm(o, i, 11, [
        // eslint-disable-next-line no-restricted-syntax
        r +
          S.map(function (ee) {
            var oe, ie;
            return (ie = (oe = ee.toString) == null ? void 0 : oe.call(ee)) !=
              null
              ? ie
              : JSON.stringify(ee);
          }).join(""),
        i && i.proxy,
        p.map(function (ee) {
          var oe = ee.vnode;
          return "at <".concat(fO(i, oe.type), ">");
        }).join(`
`),
        p,
      ]);
    else {
      var I,
        B = ["[Vue warn]: ".concat(r)].concat(S);
      p.length &&
        B.push.apply(
          B,
          [
            `
`,
          ].concat(Mn(e$(p)))
        ),
        (I = console).warn.apply(I, Mn(B));
    }
    Hm(), (jb = !1);
  }
}
function XJ() {
  var r = Du[Du.length - 1];
  if (!r) return [];
  for (var i = []; r; ) {
    var o = i[0];
    o && o.vnode === r
      ? o.recurseCount++
      : i.push({
          vnode: r,
          recurseCount: 0,
        });
    var p = r.component && r.component.parent;
    r = p && p.vnode;
  }
  return i;
}
function e$(r) {
  var i = [];
  return (
    r.forEach(function (o, p) {
      i.push.apply(
        i,
        Mn(
          p === 0
            ? []
            : [
                `
`,
              ]
        ).concat(Mn(t$(o)))
      );
    }),
    i
  );
}
function t$(r) {
  var i = r.vnode,
    o = r.recurseCount,
    p = o > 0 ? "... (".concat(o, " recursive calls)") : "",
    m = i.component ? i.component.parent == null : !1,
    S = " at <".concat(fO(i.component, i.type, m)),
    O = ">" + p;
  return i.props ? [S].concat(Mn(n$(i.props)), [O]) : [S + O];
}
function n$(r) {
  var i = [],
    o = Object.keys(r);
  return (
    o.slice(0, 3).forEach(function (p) {
      i.push.apply(i, Mn(qx(p, r[p])));
    }),
    o.length > 3 && i.push(" ..."),
    i
  );
}
function qx(r, i, o) {
  return ua(i)
    ? ((i = JSON.stringify(i)), o ? i : ["".concat(r, "=").concat(i)])
    : typeof i == "number" || typeof i == "boolean" || i == null
    ? o
      ? i
      : ["".concat(r, "=").concat(i)]
    : rr(i)
    ? ((i = qx(r, ln(i.value), !0)), o ? i : ["".concat(r, "=Ref<"), i, ">"])
    : cr(i)
    ? ["".concat(r, "=fn").concat(i.name ? "<".concat(i.name, ">") : "")]
    : ((i = ln(i)), o ? i : ["".concat(r, "="), i]);
}
var Kx =
  ((Ch = {}),
  lt(
    lt(
      lt(
        lt(
          lt(
            lt(
              lt(
                lt(
                  lt(
                    lt(Ch, "sp", "serverPrefetch hook"),
                    "bc",
                    "beforeCreate hook"
                  ),
                  "c",
                  "created hook"
                ),
                "bm",
                "beforeMount hook"
              ),
              "m",
              "mounted hook"
            ),
            "bu",
            "beforeUpdate hook"
          ),
          "u",
          "updated"
        ),
        "bum",
        "beforeUnmount hook"
      ),
      "um",
      "unmounted hook"
    ),
    "a",
    "activated hook"
  ),
  lt(
    lt(
      lt(
        lt(
          lt(
            lt(
              lt(
                lt(
                  lt(
                    lt(Ch, "da", "deactivated hook"),
                    "ec",
                    "errorCaptured hook"
                  ),
                  "rtc",
                  "renderTracked hook"
                ),
                "rtg",
                "renderTriggered hook"
              ),
              0,
              "setup function"
            ),
            1,
            "render function"
          ),
          2,
          "watcher getter"
        ),
        3,
        "watcher callback"
      ),
      4,
      "watcher cleanup function"
    ),
    5,
    "native event handler"
  ),
  lt(
    lt(
      lt(
        lt(
          lt(
            lt(
              lt(
                lt(
                  lt(lt(Ch, 6, "component event handler"), 7, "vnode hook"),
                  8,
                  "directive hook"
                ),
                9,
                "transition hook"
              ),
              10,
              "app errorHandler"
            ),
            11,
            "app warnHandler"
          ),
          12,
          "ref function"
        ),
        13,
        "async component loader"
      ),
      14,
      "scheduler flush"
    ),
    15,
    "component update"
  ),
  lt(Ch, 16, "app unmount cleanup function"));
function Wm(r, i, o, p) {
  try {
    return p ? r.apply(void 0, Mn(p)) : r();
  } catch (m) {
    BS(m, i, o);
  }
}
function Jx(r, i, o, p) {
  if (cr(r)) {
    var m = Wm(r, i, o, p);
    return (
      m &&
        uJ(m) &&
        m.catch(function (I) {
          BS(I, i, o);
        }),
      m
    );
  }
  if (qn(r)) {
    for (var S = [], O = 0; O < r.length; O++) S.push(Jx(r[O], i, o, p));
    return S;
  } else
    process.env.NODE_ENV !== "production" &&
      tr(
        "Invalid value type passed to callWithAsyncErrorHandling(): ".concat(
          vt(r)
        )
      );
}
function BS(r, i, o) {
  var p = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !0,
    m = i ? i.vnode : null,
    S = (i && i.appContext.config) || Li,
    O = S.errorHandler,
    I = S.throwUnhandledErrorInProduction;
  if (i) {
    for (
      var B = i.parent,
        ee = i.proxy,
        oe =
          process.env.NODE_ENV !== "production"
            ? Kx[o]
            : "https://vuejs.org/error-reference/#runtime-".concat(o);
      B;

    ) {
      var ie = B.ec;
      if (ie) {
        for (var be = 0; be < ie.length; be++)
          if (ie[be](r, ee, oe) === !1) return;
      }
      B = B.parent;
    }
    if (O) {
      zm(), Wm(O, null, 10, [r, ee, oe]), Hm();
      return;
    }
  }
  r$(r, o, m, p, I);
}
function r$(r, i, o) {
  var p = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !0,
    m = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : !1;
  if (process.env.NODE_ENV !== "production") {
    var S = Kx[i];
    if (
      (o && ZJ(o),
      tr("Unhandled error".concat(S ? " during execution of ".concat(S) : "")),
      o && QJ(),
      p)
    )
      throw r;
    console.error(r);
  } else {
    if (m) throw r;
    console.error(r);
  }
}
var Mi = [],
  wo = -1,
  Nu = [],
  vs = null,
  _l = 0,
  $x = /* @__PURE__ */ Promise.resolve(),
  Im = null,
  i$ = 100;
function lS(r) {
  var i = Im || $x;
  return r ? i.then(this ? r.bind(this) : r) : i;
}
function a$(r) {
  for (var i = wo + 1, o = Mi.length; i < o; ) {
    var p = (i + o) >>> 1,
      m = Mi[p],
      S = Hh(m);
    S < r || (S === r && m.flags & 2) ? (i = p + 1) : (o = p);
  }
  return i;
}
function zS(r) {
  if (!(r.flags & 1)) {
    var i = Hh(r),
      o = Mi[Mi.length - 1];
    !o || // fast path when the job id is larger than the tail
    (!(r.flags & 2) && i >= Hh(o))
      ? Mi.push(r)
      : Mi.splice(a$(i), 0, r),
      (r.flags |= 1),
      Yx();
  }
}
function Yx() {
  Im || (Im = $x.then(Qx));
}
function Zx(r) {
  qn(r)
    ? Nu.push.apply(Nu, Mn(r))
    : vs && r.id === -1
    ? vs.splice(_l + 1, 0, r)
    : r.flags & 1 || (Nu.push(r), (r.flags |= 1)),
    Yx();
}
function o$(r) {
  if (Nu.length) {
    var i = Mn(new Set(Nu)).sort(function (m, S) {
      return Hh(m) - Hh(S);
    });
    if (((Nu.length = 0), vs)) {
      var o;
      (o = vs).push.apply(o, Mn(i));
      return;
    }
    for (
      vs = i,
        process.env.NODE_ENV !== "production" &&
          (r = r || /* @__PURE__ */ new Map()),
        _l = 0;
      _l < vs.length;
      _l++
    ) {
      var p = vs[_l];
      (process.env.NODE_ENV !== "production" && Xx(r, p)) ||
        (p.flags & 4 && (p.flags &= -2), p.flags & 8 || p(), (p.flags &= -2));
    }
    (vs = null), (_l = 0);
  }
}
var Hh = function (i) {
  return i.id == null ? (i.flags & 2 ? -1 : 1 / 0) : i.id;
};
function Qx(r) {
  process.env.NODE_ENV !== "production" && (r = r || /* @__PURE__ */ new Map());
  var i =
    process.env.NODE_ENV !== "production"
      ? function (m) {
          return Xx(r, m);
        }
      : wl;
  try {
    for (wo = 0; wo < Mi.length; wo++) {
      var o = Mi[wo];
      if (o && !(o.flags & 8)) {
        if (process.env.NODE_ENV !== "production" && i(o)) continue;
        o.flags & 4 && (o.flags &= -2),
          Wm(o, o.i, o.i ? 15 : 14),
          o.flags & 4 || (o.flags &= -2);
      }
    }
  } finally {
    for (; wo < Mi.length; wo++) {
      var p = Mi[wo];
      p && (p.flags &= -2);
    }
    (wo = -1),
      (Mi.length = 0),
      o$(r),
      (Im = null),
      (Mi.length || Nu.length) && Qx(r);
  }
}
function Xx(r, i) {
  var o = r.get(i) || 0;
  if (o > i$) {
    var p = i.i,
      m = p && hO(p.type);
    return (
      BS(
        "Maximum recursive updates exceeded".concat(
          m ? " in component <".concat(m, ">") : "",
          ". This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function."
        ),
        null,
        10
      ),
      !0
    );
  }
  return r.set(i, o + 1), !1;
}
var Bb = /* @__PURE__ */ new Map();
process.env.NODE_ENV !== "production" &&
  (Bm().__VUE_HMR_RUNTIME__ = {
    createRecord: zb(s$),
    rerender: zb(u$),
    reload: zb(c$),
  });
var Rm = /* @__PURE__ */ new Map();
function s$(r, i) {
  return Rm.has(r)
    ? !1
    : (Rm.set(r, {
        initialDef: Cm(i),
        instances: /* @__PURE__ */ new Set(),
      }),
      !0);
}
function Cm(r) {
  return pO(r) ? r.__vccOpts : r;
}
function u$(r, i) {
  var o = Rm.get(r);
  o &&
    ((o.initialDef.render = i),
    Mn(o.instances).forEach(function (p) {
      i && ((p.render = i), (Cm(p.type).render = i)),
        (p.renderCache = []),
        p.update();
    }));
}
function c$(r, i) {
  var o = Rm.get(r);
  if (o) {
    (i = Cm(i)), w4(o.initialDef, i);
    for (
      var p = Mn(o.instances),
        m = function () {
          var I = p[S],
            B = Cm(I.type),
            ee = Bb.get(B);
          ee ||
            (B !== o.initialDef && w4(B, i),
            Bb.set(B, (ee = /* @__PURE__ */ new Set()))),
            ee.add(I),
            I.appContext.propsCache.delete(I.type),
            I.appContext.emitsCache.delete(I.type),
            I.appContext.optionsCache.delete(I.type),
            I.ceReload
              ? (ee.add(I), I.ceReload(i.styles), ee.delete(I))
              : I.parent
              ? zS(function () {
                  I.parent.update(), ee.delete(I);
                })
              : I.appContext.reload
              ? I.appContext.reload()
              : typeof window != "undefined"
              ? window.location.reload()
              : console.warn(
                  "[HMR] Root or manually mounted instance modified. Full reload required."
                ),
            I.root.ce && I !== I.root && I.root.ce._removeChildStyle(B);
        },
        S = 0;
      S < p.length;
      S++
    )
      m();
    Zx(function () {
      Bb.clear();
    });
  }
}
function w4(r, i) {
  gi(r, i);
  for (var o in r) o !== "__file" && !(o in i) && delete r[o];
}
function zb(r) {
  return function (i, o) {
    try {
      return r(i, o);
    } catch (p) {
      console.error(p),
        console.warn(
          "[HMR] Something went wrong during Vue component hot-reload. Full reload required."
        );
    }
  };
}
var yl,
  nm = [];
function eO(r, i) {
  var o, p;
  if (((yl = r), yl))
    (yl.enabled = !0),
      nm.forEach(function (S) {
        var O,
          I = S.event,
          B = S.args;
        return (O = yl).emit.apply(O, [I].concat(Mn(B)));
      }),
      (nm = []);
  else if (
    // handle late devtools injection - only do this if we are in an actual
    // browser environment to avoid the timer handle stalling test runner exit
    // (#4815)
    typeof window != "undefined" && // some envs mock window but not fully
    window.HTMLElement && // also exclude jsdom
    // eslint-disable-next-line no-restricted-syntax
    !(
      (p = (o = window.navigator) == null ? void 0 : o.userAgent) != null &&
      p.includes("jsdom")
    )
  ) {
    var m = (i.__VUE_DEVTOOLS_HOOK_REPLAY__ =
      i.__VUE_DEVTOOLS_HOOK_REPLAY__ || []);
    m.push(function (S) {
      eO(S, i);
    }),
      setTimeout(function () {
        yl || ((i.__VUE_DEVTOOLS_HOOK_REPLAY__ = null), (nm = []));
      }, 3e3);
  } else nm = [];
}
var ia = null,
  l$ = null,
  d$ = function (i) {
    return i.__isTeleport;
  };
function tO(r, i) {
  r.shapeFlag & 6 && r.component
    ? ((r.transition = i), tO(r.component.subTree, i))
    : r.shapeFlag & 128
    ? ((r.ssContent.transition = i.clone(r.ssContent)),
      (r.ssFallback.transition = i.clone(r.ssFallback)))
    : (r.transition = i);
}
lt(
  lt(lt(lt(lt({}, 0, "text"), 1, "children"), 2, "class"), 3, "style"),
  4,
  "attribute"
);
Bm().requestIdleCallback;
Bm().cancelIdleCallback;
var h$ = Symbol.for("v-ndc"),
  dS = function (i) {
    return i ? (V$(i) ? F$(i) : dS(i.parent)) : null;
  },
  Uh =
    // Move PURE marker to new line to workaround compiler discarding it
    // due to type annotation
    /* @__PURE__ */ gi(/* @__PURE__ */ Object.create(null), {
      $: function (i) {
        return i;
      },
      $el: function (i) {
        return i.vnode.el;
      },
      $data: function (i) {
        return i.data;
      },
      $props: function (i) {
        return process.env.NODE_ENV !== "production" ? em(i.props) : i.props;
      },
      $attrs: function (i) {
        return process.env.NODE_ENV !== "production" ? em(i.attrs) : i.attrs;
      },
      $slots: function (i) {
        return process.env.NODE_ENV !== "production" ? em(i.slots) : i.slots;
      },
      $refs: function (i) {
        return process.env.NODE_ENV !== "production" ? em(i.refs) : i.refs;
      },
      $parent: function (i) {
        return dS(i.parent);
      },
      $root: function (i) {
        return dS(i.root);
      },
      $host: function (i) {
        return i.ce;
      },
      $emit: function (i) {
        return i.emit;
      },
      $options: function (i) {
        return v$(i);
      },
      $forceUpdate: function (i) {
        return (
          i.f ||
          (i.f = function () {
            zS(i.update);
          })
        );
      },
      $nextTick: function (i) {
        return i.n || (i.n = lS.bind(i.proxy));
      },
      $watch: function (i) {
        return T$.bind(i);
      },
    }),
  f$ = function (i) {
    return i === "_" || i === "$";
  },
  Hb = function (i, o) {
    return i !== Li && !i.__isScriptSetup && ur(i, o);
  },
  p$ = {
    get: function (i, o) {
      var p = i._;
      if (o === "__v_skip") return !0;
      var m = p.ctx,
        S = p.setupState,
        O = p.data,
        I = p.props,
        B = p.accessCache,
        ee = p.type,
        oe = p.appContext;
      if (process.env.NODE_ENV !== "production" && o === "__isVue") return !0;
      var ie;
      if (o[0] !== "$") {
        var be = B[o];
        if (be !== void 0)
          switch (be) {
            case 1:
              return S[o];
            case 2:
              return O[o];
            case 4:
              return m[o];
            case 3:
              return I[o];
          }
        else {
          if (Hb(S, o)) return (B[o] = 1), S[o];
          if (O !== Li && ur(O, o)) return (B[o] = 2), O[o];
          if (
            // only cache other properties when instance has declared (thus stable)
            // props
            (ie = p.propsOptions[0]) &&
            ur(ie, o)
          )
            return (B[o] = 3), I[o];
          if (m !== Li && ur(m, o)) return (B[o] = 4), m[o];
          B[o] = 0;
        }
      }
      var Ie = Uh[o],
        Ce,
        We;
      if (Ie)
        return (
          o === "$attrs"
            ? (Sr(p.attrs, "get", ""),
              process.env.NODE_ENV !== "production" && void 0)
            : process.env.NODE_ENV !== "production" &&
              o === "$slots" &&
              Sr(p, "get", o),
          Ie(p)
        );
      if (
        // css module (injected by vue-loader)
        (Ce = ee.__cssModules) &&
        (Ce = Ce[o])
      )
        return Ce;
      if (m !== Li && ur(m, o)) return (B[o] = 4), m[o];
      if (
        // global properties
        ((We = oe.config.globalProperties), ur(We, o))
      )
        return We[o];
      process.env.NODE_ENV !== "production" &&
        ia &&
        (!ua(o) || // #1091 avoid internal isRef/isVNode checks on component instance leading
          // to infinite warning loop
          o.indexOf("__v") !== 0) &&
        (O !== Li && f$(o[0]) && ur(O, o)
          ? tr(
              "Property ".concat(
                JSON.stringify(o),
                ' must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.'
              )
            )
          : p === ia &&
            tr(
              "Property ".concat(
                JSON.stringify(o),
                " was accessed during render but is not defined on instance."
              )
            ));
    },
    set: function (i, o, p) {
      var m = i._,
        S = m.data,
        O = m.setupState,
        I = m.ctx;
      return Hb(O, o)
        ? ((O[o] = p), !0)
        : process.env.NODE_ENV !== "production" && O.__isScriptSetup && ur(O, o)
        ? (tr(
            'Cannot mutate <script setup> binding "'.concat(
              o,
              '" from Options API.'
            )
          ),
          !1)
        : S !== Li && ur(S, o)
        ? ((S[o] = p), !0)
        : ur(m.props, o)
        ? (process.env.NODE_ENV !== "production" &&
            tr(
              'Attempting to mutate prop "'.concat(o, '". Props are readonly.')
            ),
          !1)
        : o[0] === "$" && o.slice(1) in m
        ? (process.env.NODE_ENV !== "production" &&
            tr(
              'Attempting to mutate public property "'.concat(
                o,
                '". Properties starting with $ are reserved and readonly.'
              )
            ),
          !1)
        : (process.env.NODE_ENV !== "production" &&
          o in m.appContext.config.globalProperties
            ? Object.defineProperty(I, o, {
                enumerable: !0,
                configurable: !0,
                value: p,
              })
            : (I[o] = p),
          !0);
    },
    has: function (i, o) {
      var p = i._,
        m = p.data,
        S = p.setupState,
        O = p.accessCache,
        I = p.ctx,
        B = p.appContext,
        ee = p.propsOptions,
        oe;
      return (
        !!O[o] ||
        (m !== Li && ur(m, o)) ||
        Hb(S, o) ||
        ((oe = ee[0]) && ur(oe, o)) ||
        ur(I, o) ||
        ur(Uh, o) ||
        ur(B.config.globalProperties, o)
      );
    },
    defineProperty: function (i, o, p) {
      return (
        p.get != null
          ? (i._.accessCache[o] = 0)
          : ur(p, "value") && this.set(i, o, p.value, null),
        Reflect.defineProperty(i, o, p)
      );
    },
  };
process.env.NODE_ENV !== "production" &&
  (p$.ownKeys = function (r) {
    return (
      tr(
        "Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."
      ),
      Reflect.ownKeys(r)
    );
  });
function k4(r) {
  return qn(r)
    ? r.reduce(function (i, o) {
        return (i[o] = null), i;
      }, {})
    : r;
}
function v$(r) {
  var i = r.type,
    o = i.mixins,
    p = i.extends,
    m = r.appContext,
    S = m.mixins,
    O = m.optionsCache,
    I = m.config.optionMergeStrategies,
    B = O.get(i),
    ee;
  return (
    B
      ? (ee = B)
      : !S.length && !o && !p
      ? (ee = i)
      : ((ee = {}),
        S.length &&
          S.forEach(function (oe) {
            return Am(ee, oe, I, !0);
          }),
        Am(ee, i, I)),
    $r(i) && O.set(i, ee),
    ee
  );
}
function Am(r, i, o) {
  var p = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1,
    m = i.mixins,
    S = i.extends;
  S && Am(r, S, o, !0),
    m &&
      m.forEach(function (B) {
        return Am(r, B, o, !0);
      });
  for (var O in i)
    if (p && O === "expose")
      process.env.NODE_ENV !== "production" &&
        tr(
          '"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.'
        );
    else {
      var I = m$[O] || (o && o[O]);
      r[O] = I ? I(r[O], i[O]) : i[O];
    }
  return r;
}
var m$ = {
  data: T4,
  props: I4,
  emits: I4,
  // objects
  methods: Dh,
  computed: Dh,
  // lifecycle
  beforeCreate: qr,
  created: qr,
  beforeMount: qr,
  mounted: qr,
  beforeUpdate: qr,
  updated: qr,
  beforeDestroy: qr,
  beforeUnmount: qr,
  destroyed: qr,
  unmounted: qr,
  activated: qr,
  deactivated: qr,
  errorCaptured: qr,
  serverPrefetch: qr,
  // assets
  components: Dh,
  directives: Dh,
  // watch
  watch: _$,
  // provide / inject
  provide: T4,
  inject: g$,
};
function T4(r, i) {
  return i
    ? r
      ? function () {
          return gi(
            cr(r) ? r.call(this, this) : r,
            cr(i) ? i.call(this, this) : i
          );
        }
      : i
    : r;
}
function g$(r, i) {
  return Dh(E4(r), E4(i));
}
function E4(r) {
  if (qn(r)) {
    for (var i = {}, o = 0; o < r.length; o++) i[r[o]] = r[o];
    return i;
  }
  return r;
}
function qr(r, i) {
  return r ? Mn(new Set([].concat(r, i))) : i;
}
function Dh(r, i) {
  return r ? gi(/* @__PURE__ */ Object.create(null), r, i) : i;
}
function I4(r, i) {
  return r
    ? qn(r) && qn(i)
      ? Mn(/* @__PURE__ */ new Set([].concat(Mn(r), Mn(i))))
      : gi(/* @__PURE__ */ Object.create(null), k4(r), k4(i != null ? i : {}))
    : i;
}
function _$(r, i) {
  if (!r) return i;
  if (!i) return r;
  var o = gi(/* @__PURE__ */ Object.create(null), r);
  for (var p in i) o[p] = qr(r[p], i[p]);
  return o;
}
var nO = null;
function rO(r, i) {
  var o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
    p = Cl || ia;
  if (p || nO) {
    var m = p
      ? p.parent == null
        ? p.vnode.appContext && p.vnode.appContext.provides
        : p.parent.provides
      : void 0;
    if (m && r in m) return m[r];
    if (arguments.length > 1) return o && cr(i) ? i.call(p && p.proxy) : i;
    process.env.NODE_ENV !== "production" &&
      tr('injection "'.concat(String(r), '" not found.'));
  } else
    process.env.NODE_ENV !== "production" &&
      tr("inject() can only be used inside setup() or functional components.");
}
function y$() {
  return !!(Cl || ia || nO);
}
var b$ = {},
  iO = function (i) {
    return Object.getPrototypeOf(i) === b$;
  },
  S$ = R$,
  w$ = Symbol.for("v-scx"),
  k$ = function () {
    {
      var i = rO(w$);
      return (
        i ||
          (process.env.NODE_ENV !== "production" &&
            tr(
              "Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."
            )),
        i
      );
    }
  };
function aO(r, i, o) {
  return (
    process.env.NODE_ENV !== "production" &&
      !cr(i) &&
      tr(
        "`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."
      ),
    oO(r, i, o)
  );
}
function oO(r, i) {
  var o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Li,
    p = o.immediate,
    m = o.deep,
    S = o.flush,
    O = o.once;
  process.env.NODE_ENV !== "production" &&
    !i &&
    (p !== void 0 &&
      tr(
        'watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'
      ),
    m !== void 0 &&
      tr(
        'watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'
      ),
    O !== void 0 &&
      tr(
        'watch() "once" option is only respected when using the watch(source, callback, options?) signature.'
      ));
  var I = gi({}, o);
  process.env.NODE_ENV !== "production" && (I.onWarn = tr);
  var B = (i && p) || (!i && S !== "post"),
    ee;
  if (Om) {
    if (S === "sync") {
      var oe = k$();
      ee = oe.__watcherHandles || (oe.__watcherHandles = []);
    } else if (!B) {
      var ie = function () {};
      return (ie.stop = wl), (ie.resume = wl), (ie.pause = wl), ie;
    }
  }
  var be = Cl;
  I.call = function (We, de, _t) {
    return Jx(We, be, de, _t);
  };
  var Ie = !1;
  S === "post"
    ? (I.scheduler = function (We) {
        S$(We, be && be.suspense);
      })
    : S !== "sync" &&
      ((Ie = !0),
      (I.scheduler = function (We, de) {
        de ? We() : zS(We);
      })),
    (I.augmentJob = function (We) {
      i && (We.flags |= 4),
        Ie && ((We.flags |= 2), be && ((We.id = be.uid), (We.i = be)));
    });
  var Ce = YJ(r, i, I);
  return Om && (ee ? ee.push(Ce) : B && Ce()), Ce;
}
function T$(r, i, o) {
  var p = this.proxy,
    m = ua(r)
      ? r.includes(".")
        ? E$(p, r)
        : function () {
            return p[r];
          }
      : r.bind(p, p),
    S;
  cr(i) ? (S = i) : ((S = i.handler), (o = i));
  var O = U$(this),
    I = oO(m, S.bind(p), o);
  return O(), I;
}
function E$(r, i) {
  var o = i.split(".");
  return function () {
    for (var p = r, m = 0; m < o.length && p; m++) p = p[o[m]];
    return p;
  };
}
var I$ = function (i) {
  return i.__isSuspense;
};
function R$(r, i) {
  if (i && i.pendingBranch)
    if (qn(r)) {
      var o;
      (o = i.effects).push.apply(o, Mn(r));
    } else i.effects.push(r);
  else Zx(r);
}
var sO = Symbol.for("v-fgt"),
  C$ = Symbol.for("v-txt"),
  A$ = Symbol.for("v-cmt"),
  bl = null;
function x$(r) {
  return r ? r.__v_isVNode === !0 : !1;
}
var O$ = function () {
    for (var i = arguments.length, o = new Array(i), p = 0; p < i; p++)
      o[p] = arguments[p];
    return cO.apply(void 0, Mn(o));
  },
  uO = function (i) {
    var o = i.key;
    return o != null ? o : null;
  },
  pm = function (i) {
    var o = i.ref,
      p = i.ref_key,
      m = i.ref_for;
    return (
      typeof o == "number" && (o = "" + o),
      o != null
        ? ua(o) || rr(o) || cr(o)
          ? {
              i: ia,
              r: o,
              k: p,
              f: !!m,
            }
          : o
        : null
    );
  };
function P$(r) {
  var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null,
    o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null,
    p = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0,
    m = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : null,
    S =
      arguments.length > 5 && arguments[5] !== void 0
        ? arguments[5]
        : r === sO
        ? 0
        : 1,
    O = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : !1,
    I = arguments.length > 7 && arguments[7] !== void 0 ? arguments[7] : !1,
    B = {
      __v_isVNode: !0,
      __v_skip: !0,
      type: r,
      props: i,
      key: i && uO(i),
      ref: i && pm(i),
      scopeId: l$,
      slotScopeIds: null,
      children: o,
      component: null,
      suspense: null,
      ssContent: null,
      ssFallback: null,
      dirs: null,
      transition: null,
      el: null,
      anchor: null,
      target: null,
      targetStart: null,
      targetAnchor: null,
      staticCount: 0,
      shapeFlag: S,
      patchFlag: p,
      dynamicProps: m,
      dynamicChildren: null,
      appContext: null,
      ctx: ia,
    };
  return (
    I
      ? (HS(B, o), S & 128 && r.normalize(B))
      : o && (B.shapeFlag |= ua(o) ? 8 : 16),
    process.env.NODE_ENV !== "production" &&
      B.key !== B.key &&
      tr("VNode created with invalid key (NaN). VNode type:", B.type), // avoid a block node from tracking itself
    !O && // has current parent block
      bl && // presence of a patch flag indicates this node needs patching on updates.
      // component nodes also should always be patched, because even if the
      // component doesn't need to update, it needs to persist the instance on to
      // the next vnode so that it can be properly unmounted later.
      (B.patchFlag > 0 || S & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the
      // vnode should not be considered dynamic due to handler caching.
      B.patchFlag !== 32 &&
      bl.push(B),
    B
  );
}
var D$ = process.env.NODE_ENV !== "production" ? O$ : cO;
function cO(r) {
  var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null,
    o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null,
    p = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0,
    m = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : null,
    S = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : !1;
  if (
    ((!r || r === h$) &&
      (process.env.NODE_ENV !== "production" &&
        !r &&
        tr("Invalid vnode type when creating vnode: ".concat(r, ".")),
      (r = A$)),
    x$(r))
  ) {
    var O = xm(
      r,
      i,
      !0
      /* mergeRef: true */
    );
    return (
      o && HS(O, o),
      !S && bl && (O.shapeFlag & 6 ? (bl[bl.indexOf(r)] = O) : bl.push(O)),
      (O.patchFlag = -2),
      O
    );
  }
  if ((pO(r) && (r = r.__vccOpts), i)) {
    i = N$(i);
    var I = i,
      B = I.class,
      ee = I.style;
    B && !ua(B) && (i.class = PS(B)),
      $r(ee) && (zh(ee) && !qn(ee) && (ee = gi({}, ee)), (i.style = OS(ee)));
  }
  var oe = ua(r) ? 1 : I$(r) ? 128 : d$(r) ? 64 : $r(r) ? 4 : cr(r) ? 2 : 0;
  return (
    process.env.NODE_ENV !== "production" &&
      oe & 4 &&
      zh(r) &&
      ((r = ln(r)),
      tr(
        "Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",
        `
Component that was made reactive: `,
        r
      )),
    P$(r, i, o, p, m, oe, S, !0)
  );
}
function N$(r) {
  return r ? (zh(r) || iO(r) ? gi({}, r) : r) : null;
}
function xm(r, i) {
  var o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
    p = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1,
    m = r.props,
    S = r.ref,
    O = r.patchFlag,
    I = r.children,
    B = r.transition,
    ee = i ? M$(m || {}, i) : m,
    oe = {
      __v_isVNode: !0,
      __v_skip: !0,
      type: r.type,
      props: ee,
      key: ee && uO(ee),
      ref:
        i && i.ref
          ? // #2078 in the case of <component :is="vnode" ref="extra"/>
            // if the vnode itself already has a ref, cloneVNode will need to merge
            // the refs so the single vnode can be set on multiple refs
            o && S
            ? qn(S)
              ? S.concat(pm(i))
              : [S, pm(i)]
            : pm(i)
          : S,
      scopeId: r.scopeId,
      slotScopeIds: r.slotScopeIds,
      children:
        process.env.NODE_ENV !== "production" && O === -1 && qn(I)
          ? I.map(lO)
          : I,
      target: r.target,
      targetStart: r.targetStart,
      targetAnchor: r.targetAnchor,
      staticCount: r.staticCount,
      shapeFlag: r.shapeFlag,
      // if the vnode is cloned with extra props, we can no longer assume its
      // existing patch flag to be reliable and need to add the FULL_PROPS flag.
      // note: preserve flag for fragments since they use the flag for children
      // fast paths only.
      patchFlag: i && r.type !== sO ? (O === -1 ? 16 : O | 16) : O,
      dynamicProps: r.dynamicProps,
      dynamicChildren: r.dynamicChildren,
      appContext: r.appContext,
      dirs: r.dirs,
      transition: B,
      // These should technically only be non-null on mounted VNodes. However,
      // they *should* be copied for kept-alive vnodes. So we just always copy
      // them since them being non-null during a mount doesn't affect the logic as
      // they will simply be overwritten.
      component: r.component,
      suspense: r.suspense,
      ssContent: r.ssContent && xm(r.ssContent),
      ssFallback: r.ssFallback && xm(r.ssFallback),
      el: r.el,
      anchor: r.anchor,
      ctx: r.ctx,
      ce: r.ce,
    };
  return B && p && tO(oe, B.clone(oe)), oe;
}
function lO(r) {
  var i = xm(r);
  return qn(r.children) && (i.children = r.children.map(lO)), i;
}
function L$() {
  var r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : " ",
    i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return D$(C$, null, r, i);
}
function HS(r, i) {
  var o = 0,
    p = r.shapeFlag;
  if (i == null) i = null;
  else if (qn(i)) o = 16;
  else if (vt(i) === "object")
    if (p & 65) {
      var m = i.default;
      m && (m._c && (m._d = !1), HS(r, m()), m._c && (m._d = !0));
      return;
    } else {
      o = 32;
      var S = i._;
      !S && !iO(i)
        ? (i._ctx = ia)
        : S === 3 &&
          ia &&
          (ia.slots._ === 1 ? (i._ = 1) : ((i._ = 2), (r.patchFlag |= 1024)));
    }
  else
    cr(i)
      ? ((i = {
          default: i,
          _ctx: ia,
        }),
        (o = 32))
      : ((i = String(i)), p & 64 ? ((o = 16), (i = [L$(i)])) : (o = 8));
  (r.children = i), (r.shapeFlag |= o);
}
function M$() {
  for (var r = {}, i = 0; i < arguments.length; i++) {
    var o = i < 0 || arguments.length <= i ? void 0 : arguments[i];
    for (var p in o)
      if (p === "class")
        r.class !== o.class && (r.class = PS([r.class, o.class]));
      else if (p === "style") r.style = OS([r.style, o.style]);
      else if (iJ(p)) {
        var m = r[p],
          S = o[p];
        S &&
          m !== S &&
          !(qn(m) && m.includes(S)) &&
          (r[p] = m ? [].concat(m, S) : S);
      } else p !== "" && (r[p] = o[p]);
  }
  return r;
}
var Cl = null,
  dO = function () {
    return Cl || ia;
  },
  hS;
{
  var R4 = Bm(),
    C4 = function (i, o) {
      var p;
      return (
        (p = R4[i]) || (p = R4[i] = []),
        p.push(o),
        function (m) {
          p.length > 1
            ? p.forEach(function (S) {
                return S(m);
              })
            : p[0](m);
        }
      );
    };
  (hS = C4("__VUE_INSTANCE_SETTERS__", function (r) {
    return (Cl = r);
  })),
    C4("__VUE_SSR_SETTERS__", function (r) {
      return (Om = r);
    });
}
var U$ = function (i) {
  var o = Cl;
  return (
    hS(i),
    i.scope.on(),
    function () {
      i.scope.off(), hS(o);
    }
  );
};
function V$(r) {
  return r.vnode.shapeFlag & 4;
}
var Om = !1;
process.env.NODE_ENV;
function F$(r) {
  return r.exposed
    ? r.exposeProxy ||
        (r.exposeProxy = new Proxy(WJ(_s(r.exposed)), {
          get: function (o, p) {
            if (p in o) return o[p];
            if (p in Uh) return Uh[p](r);
          },
          has: function (o, p) {
            return p in o || p in Uh;
          },
        }))
    : r.proxy;
}
var j$ = /(?:^|[-_])(\w)/g,
  B$ = function (i) {
    return i
      .replace(j$, function (o) {
        return o.toUpperCase();
      })
      .replace(/[-_]/g, "");
  };
function hO(r) {
  var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
  return cr(r) ? r.displayName || r.name : r.name || (i && r.__name);
}
function fO(r, i) {
  var o = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1,
    p = hO(i);
  if (!p && i.__file) {
    var m = i.__file.match(/([^/\\]+)\.\w+$/);
    m && (p = m[1]);
  }
  if (!p && r && r.parent) {
    var S = function (I) {
      for (var B in I) if (I[B] === i) return B;
    };
    p =
      S(r.components || r.parent.type.components) || S(r.appContext.components);
  }
  return p ? B$(p) : o ? "App" : "Anonymous";
}
function pO(r) {
  return cr(r) && "__vccOpts" in r;
}
var vO = function (i, o) {
  var p = JJ(i, o, Om);
  if (process.env.NODE_ENV !== "production") {
    var m = dO();
    m && m.appContext.config.warnRecursiveComputed && (p._warnRecursive = !0);
  }
  return p;
};
function z$() {
  if (process.env.NODE_ENV === "production" || typeof window == "undefined")
    return;
  var r = {
      style: "color:#3ba776",
    },
    i = {
      style: "color:#1677ff",
    },
    o = {
      style: "color:#f5222d",
    },
    p = {
      style: "color:#eb2f96",
    },
    m = {
      __vue_custom_formatter: !0,
      header: function (be) {
        return $r(be)
          ? be.__isVue
            ? ["div", r, "VueInstance"]
            : rr(be)
            ? [
                "div",
                {},
                ["span", r, oe(be)],
                "<",
                // avoid debugger accessing value affecting behavior
                I("_value" in be ? be._value : be),
                ">",
              ]
            : ko(be)
            ? [
                "div",
                {},
                ["span", r, ri(be) ? "ShallowReactive" : "Reactive"],
                "<",
                I(be),
                ">".concat(Eo(be) ? " (readonly)" : ""),
              ]
            : Eo(be)
            ? [
                "div",
                {},
                ["span", r, ri(be) ? "ShallowReadonly" : "Readonly"],
                "<",
                I(be),
                ">",
              ]
            : null
          : null;
      },
      hasBody: function (be) {
        return be && be.__isVue;
      },
      body: function (be) {
        if (be && be.__isVue) return ["div", {}].concat(Mn(S(be.$)));
      },
    };
  function S(ie) {
    var be = [];
    ie.type.props && ie.props && be.push(O("props", ln(ie.props))),
      ie.setupState !== Li && be.push(O("setup", ie.setupState)),
      ie.data !== Li && be.push(O("data", ln(ie.data)));
    var Ie = B(ie, "computed");
    Ie && be.push(O("computed", Ie));
    var Ce = B(ie, "inject");
    return (
      Ce && be.push(O("injected", Ce)),
      be.push([
        "div",
        {},
        [
          "span",
          {
            style: p.style + ";opacity:0.66",
          },
          "$ (internal): ",
        ],
        [
          "object",
          {
            object: ie,
          },
        ],
      ]),
      be
    );
  }
  function O(ie, be) {
    return (
      (be = gi({}, be)),
      Object.keys(be).length
        ? [
            "div",
            {
              style: "line-height:1.25em;margin-bottom:0.6em",
            },
            [
              "div",
              {
                style: "color:#476582",
              },
              ie,
            ],
            [
              "div",
              {
                style: "padding-left:1.25em",
              },
            ].concat(
              Mn(
                Object.keys(be).map(function (Ie) {
                  return ["div", {}, ["span", p, Ie + ": "], I(be[Ie], !1)];
                })
              )
            ),
          ]
        : ["span", {}]
    );
  }
  function I(ie) {
    var be =
      arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    return typeof ie == "number"
      ? ["span", i, ie]
      : typeof ie == "string"
      ? ["span", o, JSON.stringify(ie)]
      : typeof ie == "boolean"
      ? ["span", p, ie]
      : $r(ie)
      ? [
          "object",
          {
            object: be ? ln(ie) : ie,
          },
        ]
      : ["span", o, String(ie)];
  }
  function B(ie, be) {
    var Ie = ie.type;
    if (!cr(Ie)) {
      var Ce = {};
      for (var We in ie.ctx) ee(Ie, We, be) && (Ce[We] = ie.ctx[We]);
      return Ce;
    }
  }
  function ee(ie, be, Ie) {
    var Ce = ie[Ie];
    if (
      (qn(Ce) && Ce.includes(be)) ||
      ($r(Ce) && be in Ce) ||
      (ie.extends && ee(ie.extends, be, Ie)) ||
      (ie.mixins &&
        ie.mixins.some(function (We) {
          return ee(We, be, Ie);
        }))
    )
      return !0;
  }
  function oe(ie) {
    return ri(ie) ? "ShallowRef" : ie.effect ? "ComputedRef" : "Ref";
  }
  window.devtoolsFormatters
    ? window.devtoolsFormatters.push(m)
    : (window.devtoolsFormatters = [m]);
}
process.env.NODE_ENV;
process.env.NODE_ENV;
process.env.NODE_ENV;
/**
 * vue v3.5.13
 * (c) 2018-present Yuxi (Evan) You and Vue contributors
 * @license MIT
 **/
function H$() {
  z$();
}
process.env.NODE_ENV !== "production" && H$();
var mO = !1;
function rm(r, i, o) {
  return Array.isArray(r)
    ? ((r.length = Math.max(r.length, i)), r.splice(i, 1, o), o)
    : ((r[i] = o), o);
}
function Wb(r, i) {
  if (Array.isArray(r)) {
    r.splice(i, 1);
    return;
  }
  delete r[i];
}
function W$() {
  return gO().__VUE_DEVTOOLS_GLOBAL_HOOK__;
}
function gO() {
  return typeof navigator != "undefined" && typeof window != "undefined"
    ? window
    : typeof globalThis != "undefined"
    ? globalThis
    : {};
}
var G$ = typeof Proxy == "function",
  q$ = "devtools-plugin:setup",
  K$ = "plugin:settings:set",
  vl,
  fS;
function J$() {
  var r;
  return (
    vl !== void 0 ||
      (typeof window != "undefined" && window.performance
        ? ((vl = !0), (fS = window.performance))
        : typeof globalThis != "undefined" &&
          !((r = globalThis.perf_hooks) === null || r === void 0) &&
          r.performance
        ? ((vl = !0), (fS = globalThis.perf_hooks.performance))
        : (vl = !1)),
    vl
  );
}
function $$() {
  return J$() ? fS.now() : Date.now();
}
function A4(r, i) {
  var o =
    (typeof Symbol != "undefined" && r[Symbol.iterator]) || r["@@iterator"];
  if (!o) {
    if (
      Array.isArray(r) ||
      (o = Y$(r)) ||
      (i && r && typeof r.length == "number")
    ) {
      o && (r = o);
      var p = 0,
        m = function () {};
      return {
        s: m,
        n: function () {
          return p >= r.length ? { done: !0 } : { done: !1, value: r[p++] };
        },
        e: function (ee) {
          throw ee;
        },
        f: m,
      };
    }
    throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
  }
  var S,
    O = !0,
    I = !1;
  return {
    s: function () {
      o = o.call(r);
    },
    n: function () {
      var ee = o.next();
      return (O = ee.done), ee;
    },
    e: function (ee) {
      (I = !0), (S = ee);
    },
    f: function () {
      try {
        O || o.return == null || o.return();
      } finally {
        if (I) throw S;
      }
    },
  };
}
function Y$(r, i) {
  if (r) {
    if (typeof r == "string") return x4(r, i);
    var o = {}.toString.call(r).slice(8, -1);
    return (
      o === "Object" && r.constructor && (o = r.constructor.name),
      o === "Map" || o === "Set"
        ? Array.from(r)
        : o === "Arguments" ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)
        ? x4(r, i)
        : void 0
    );
  }
}
function x4(r, i) {
  (i == null || i > r.length) && (i = r.length);
  for (var o = 0, p = Array(i); o < i; o++) p[o] = r[o];
  return p;
}
var Z$ = /* @__PURE__ */ (function () {
  function r(i, o) {
    var p = this;
    Ir(this, r),
      (this.target = null),
      (this.targetQueue = []),
      (this.onQueue = []),
      (this.plugin = i),
      (this.hook = o);
    var m = {};
    if (i.settings)
      for (var S in i.settings) {
        var O = i.settings[S];
        m[S] = O.defaultValue;
      }
    var I = "__vue-devtools-plugin-settings__".concat(i.id),
      B = Object.assign({}, m);
    try {
      var ee = localStorage.getItem(I),
        oe = JSON.parse(ee);
      Object.assign(B, oe);
    } catch (ie) {}
    (this.fallbacks = {
      getSettings: function () {
        return B;
      },
      setSettings: function (be) {
        try {
          localStorage.setItem(I, JSON.stringify(be));
        } catch (Ie) {}
        B = be;
      },
      now: function () {
        return $$();
      },
    }),
      o &&
        o.on(K$, function (ie, be) {
          ie === p.plugin.id && p.fallbacks.setSettings(be);
        }),
      (this.proxiedOn = new Proxy(
        {},
        {
          get: function (be, Ie) {
            return p.target
              ? p.target.on[Ie]
              : function () {
                  for (
                    var Ce = arguments.length, We = new Array(Ce), de = 0;
                    de < Ce;
                    de++
                  )
                    We[de] = arguments[de];
                  p.onQueue.push({
                    method: Ie,
                    args: We,
                  });
                };
          },
        }
      )),
      (this.proxiedTarget = new Proxy(
        {},
        {
          get: function (be, Ie) {
            return p.target
              ? p.target[Ie]
              : Ie === "on"
              ? p.proxiedOn
              : Object.keys(p.fallbacks).includes(Ie)
              ? function () {
                  for (
                    var Ce, We = arguments.length, de = new Array(We), _t = 0;
                    _t < We;
                    _t++
                  )
                    de[_t] = arguments[_t];
                  return (
                    p.targetQueue.push({
                      method: Ie,
                      args: de,
                      resolve: function () {},
                    }),
                    (Ce = p.fallbacks)[Ie].apply(Ce, de)
                  );
                }
              : function () {
                  for (
                    var Ce = arguments.length, We = new Array(Ce), de = 0;
                    de < Ce;
                    de++
                  )
                    We[de] = arguments[de];
                  return new Promise(function (_t) {
                    p.targetQueue.push({
                      method: Ie,
                      args: We,
                      resolve: _t,
                    });
                  });
                };
          },
        }
      ));
  }
  return Rr(r, [
    {
      key: "setRealTarget",
      value: (function () {
        var i = Wt(
          /* @__PURE__ */ Je.mark(function p(m) {
            var S, O, I, B, ee, oe, ie, be;
            return Je.wrap(
              function (Ce) {
                for (;;)
                  switch ((Ce.prev = Ce.next)) {
                    case 0:
                      (this.target = m), (S = A4(this.onQueue));
                      try {
                        for (S.s(); !(O = S.n()).done; )
                          (B = O.value),
                            (I = this.target.on)[B.method].apply(I, Mn(B.args));
                      } catch (We) {
                        S.e(We);
                      } finally {
                        S.f();
                      }
                      (ee = A4(this.targetQueue)), (Ce.prev = 4), ee.s();
                    case 6:
                      if ((oe = ee.n()).done) {
                        Ce.next = 15;
                        break;
                      }
                      return (
                        (be = oe.value),
                        (Ce.t0 = be),
                        (Ce.next = 11),
                        (ie = this.target)[be.method].apply(ie, Mn(be.args))
                      );
                    case 11:
                      (Ce.t1 = Ce.sent), Ce.t0.resolve.call(Ce.t0, Ce.t1);
                    case 13:
                      Ce.next = 6;
                      break;
                    case 15:
                      Ce.next = 20;
                      break;
                    case 17:
                      (Ce.prev = 17), (Ce.t2 = Ce.catch(4)), ee.e(Ce.t2);
                    case 20:
                      return (Ce.prev = 20), ee.f(), Ce.finish(20);
                    case 23:
                    case "end":
                      return Ce.stop();
                  }
              },
              p,
              this,
              [[4, 17, 20, 23]]
            );
          })
        );
        function o(p) {
          return i.apply(this, arguments);
        }
        return o;
      })(),
    },
  ]);
})();
function _O(r, i) {
  var o = r,
    p = gO(),
    m = W$(),
    S = G$ && o.enableEarlyProxy;
  if (m && (p.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !S)) m.emit(q$, r, i);
  else {
    var O = S ? new Z$(o, m) : null,
      I = (p.__VUE_DEVTOOLS_PLUGINS__ = p.__VUE_DEVTOOLS_PLUGINS__ || []);
    I.push({
      pluginDescriptor: o,
      setupFn: i,
      proxy: O,
    }),
      O && i(O.proxiedTarget);
  }
}
/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */
let Nh;
const El = (r) => (Nh = r),
  yO =
    process.env.NODE_ENV !== "production"
      ? Symbol("pinia")
      : /* istanbul ignore next */
        Symbol();
function Mu(r) {
  return (
    r &&
    typeof r == "object" &&
    Object.prototype.toString.call(r) === "[object Object]" &&
    typeof r.toJSON != "function"
  );
}
var Ma;
(function (r) {
  (r.direct = "direct"),
    (r.patchObject = "patch object"),
    (r.patchFunction = "patch function");
})(Ma || (Ma = {}));
const Gm = typeof window != "undefined",
  Vh =
    (process.env.NODE_ENV !== "production" || !1) &&
    process.env.NODE_ENV !== "test" &&
    Gm,
  O4 = /* @__PURE__ */ (() =>
    typeof window == "object" && window.window === window
      ? window
      : typeof self == "object" && self.self === self
      ? self
      : typeof global == "object" && global.global === global
      ? global
      : typeof globalThis == "object"
      ? globalThis
      : { HTMLElement: null })();
function Q$(r, { autoBom: i = !1 } = {}) {
  return i &&
    /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(
      r.type
    )
    ? new Blob([String.fromCharCode(65279), r], { type: r.type })
    : r;
}
function WS(r, i, o) {
  const p = new XMLHttpRequest();
  p.open("GET", r),
    (p.responseType = "blob"),
    (p.onload = function () {
      wO(p.response, i, o);
    }),
    (p.onerror = function () {
      console.error("could not download file");
    }),
    p.send();
}
function bO(r) {
  const i = new XMLHttpRequest();
  i.open("HEAD", r, !1);
  try {
    i.send();
  } catch (o) {}
  return i.status >= 200 && i.status <= 299;
}
function vm(r) {
  try {
    r.dispatchEvent(new MouseEvent("click"));
  } catch (i) {
    const o = document.createEvent("MouseEvents");
    o.initMouseEvent(
      "click",
      !0,
      !0,
      window,
      0,
      0,
      0,
      80,
      20,
      !1,
      !1,
      !1,
      !1,
      0,
      null
    ),
      r.dispatchEvent(o);
  }
}
const mm = typeof navigator == "object" ? navigator : { userAgent: "" },
  SO = /* @__PURE__ */ (() =>
    /Macintosh/.test(mm.userAgent) &&
    /AppleWebKit/.test(mm.userAgent) &&
    !/Safari/.test(mm.userAgent))(),
  wO = Gm
    ? // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program
      typeof HTMLAnchorElement != "undefined" &&
      "download" in HTMLAnchorElement.prototype &&
      !SO
      ? X$
      : // Use msSaveOrOpenBlob as a second approach
      "msSaveOrOpenBlob" in mm
      ? eY
      : // Fallback to using FileReader and a popup
        tY
    : () => {};
function X$(r, i = "download", o) {
  const p = document.createElement("a");
  (p.download = i),
    (p.rel = "noopener"),
    typeof r == "string"
      ? ((p.href = r),
        p.origin !== location.origin
          ? bO(p.href)
            ? WS(r, i, o)
            : ((p.target = "_blank"), vm(p))
          : vm(p))
      : ((p.href = URL.createObjectURL(r)),
        setTimeout(function () {
          URL.revokeObjectURL(p.href);
        }, 4e4),
        setTimeout(function () {
          vm(p);
        }, 0));
}
function eY(r, i = "download", o) {
  if (typeof r == "string")
    if (bO(r)) WS(r, i, o);
    else {
      const p = document.createElement("a");
      (p.href = r),
        (p.target = "_blank"),
        setTimeout(function () {
          vm(p);
        });
    }
  else navigator.msSaveOrOpenBlob(Q$(r, o), i);
}
function tY(r, i, o, p) {
  if (
    ((p = p || open("", "_blank")),
    p && (p.document.title = p.document.body.innerText = "downloading..."),
    typeof r == "string")
  )
    return WS(r, i, o);
  const m = r.type === "application/octet-stream",
    S = /constructor/i.test(String(O4.HTMLElement)) || "safari" in O4,
    O = /CriOS\/[\d]+/.test(navigator.userAgent);
  if ((O || (m && S) || SO) && typeof FileReader != "undefined") {
    const I = new FileReader();
    (I.onloadend = function () {
      let B = I.result;
      if (typeof B != "string")
        throw ((p = null), new Error("Wrong reader.result type"));
      (B = O ? B : B.replace(/^data:[^;]*;/, "data:attachment/file;")),
        p ? (p.location.href = B) : location.assign(B),
        (p = null);
    }),
      I.readAsDataURL(r);
  } else {
    const I = URL.createObjectURL(r);
    p ? p.location.assign(I) : (location.href = I),
      (p = null),
      setTimeout(function () {
        URL.revokeObjectURL(I);
      }, 4e4);
  }
}
function br(r, i) {
  const o = "🍍 " + r;
  typeof __VUE_DEVTOOLS_TOAST__ == "function"
    ? __VUE_DEVTOOLS_TOAST__(o, i)
    : i === "error"
    ? console.error(o)
    : i === "warn"
    ? console.warn(o)
    : console.log(o);
}
function GS(r) {
  return "_a" in r && "install" in r;
}
function kO() {
  if (!("clipboard" in navigator))
    return br("Your browser doesn't support the Clipboard API", "error"), !0;
}
function TO(r) {
  return r instanceof Error &&
    r.message.toLowerCase().includes("document is not focused")
    ? (br(
        'You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',
        "warn"
      ),
      !0)
    : !1;
}
function nY(r) {
  return fs(this, null, function* () {
    if (!kO())
      try {
        yield navigator.clipboard.writeText(JSON.stringify(r.state.value)),
          br("Global state copied to clipboard.");
      } catch (i) {
        if (TO(i)) return;
        br(
          "Failed to serialize the state. Check the console for more details.",
          "error"
        ),
          console.error(i);
      }
  });
}
function rY(r) {
  return fs(this, null, function* () {
    if (!kO())
      try {
        EO(r, JSON.parse(yield navigator.clipboard.readText())),
          br("Global state pasted from clipboard.");
      } catch (i) {
        if (TO(i)) return;
        br(
          "Failed to deserialize the state from clipboard. Check the console for more details.",
          "error"
        ),
          console.error(i);
      }
  });
}
function iY(r) {
  return fs(this, null, function* () {
    try {
      wO(
        new Blob([JSON.stringify(r.state.value)], {
          type: "text/plain;charset=utf-8",
        }),
        "pinia-state.json"
      );
    } catch (i) {
      br(
        "Failed to export the state as JSON. Check the console for more details.",
        "error"
      ),
        console.error(i);
    }
  });
}
let So;
function aY() {
  So ||
    ((So = document.createElement("input")),
    (So.type = "file"),
    (So.accept = ".json"));
  function r() {
    return new Promise((i, o) => {
      (So.onchange = () =>
        fs(this, null, function* () {
          const p = So.files;
          if (!p) return i(null);
          const m = p.item(0);
          return i(m ? { text: yield m.text(), file: m } : null);
        })),
        (So.oncancel = () => i(null)),
        (So.onerror = o),
        So.click();
    });
  }
  return r;
}
function oY(r) {
  return fs(this, null, function* () {
    try {
      const o = yield aY()();
      if (!o) return;
      const { text: p, file: m } = o;
      EO(r, JSON.parse(p)), br(`Global state imported from "${m.name}".`);
    } catch (i) {
      br(
        "Failed to import the state from JSON. Check the console for more details.",
        "error"
      ),
        console.error(i);
    }
  });
}
function EO(r, i) {
  for (const o in i) {
    const p = r.state.value[o];
    p ? Object.assign(p, i[o]) : (r.state.value[o] = i[o]);
  }
}
function na(r) {
  return {
    _custom: {
      display: r,
    },
  };
}
const IO = "🍍 Pinia (root)",
  pS = "_root";
function sY(r) {
  return GS(r)
    ? {
        id: pS,
        label: IO,
      }
    : {
        id: r.$id,
        label: r.$id,
      };
}
function uY(r) {
  if (GS(r)) {
    const o = Array.from(r._s.keys()),
      p = r._s;
    return {
      state: o.map((S) => ({
        editable: !0,
        key: S,
        value: r.state.value[S],
      })),
      getters: o
        .filter((S) => p.get(S)._getters)
        .map((S) => {
          const O = p.get(S);
          return {
            editable: !1,
            key: S,
            value: O._getters.reduce((I, B) => ((I[B] = O[B]), I), {}),
          };
        }),
    };
  }
  const i = {
    state: Object.keys(r.$state).map((o) => ({
      editable: !0,
      key: o,
      value: r.$state[o],
    })),
  };
  return (
    r._getters &&
      r._getters.length &&
      (i.getters = r._getters.map((o) => ({
        editable: !1,
        key: o,
        value: r[o],
      }))),
    r._customProperties.size &&
      (i.customProperties = Array.from(r._customProperties).map((o) => ({
        editable: !0,
        key: o,
        value: r[o],
      }))),
    i
  );
}
function cY(r) {
  return r
    ? Array.isArray(r)
      ? r.reduce(
          (i, o) => (
            i.keys.push(o.key),
            i.operations.push(o.type),
            (i.oldValue[o.key] = o.oldValue),
            (i.newValue[o.key] = o.newValue),
            i
          ),
          {
            oldValue: {},
            keys: [],
            operations: [],
            newValue: {},
          }
        )
      : {
          operation: na(r.type),
          key: na(r.key),
          oldValue: r.oldValue,
          newValue: r.newValue,
        }
    : {};
}
function lY(r) {
  switch (r) {
    case Ma.direct:
      return "mutation";
    case Ma.patchFunction:
      return "$patch";
    case Ma.patchObject:
      return "$patch";
    default:
      return "unknown";
  }
}
let Sl = !0;
const gm = [],
  xu = "pinia:mutations",
  xr = "pinia",
  { assign: dY } = Object,
  Pm = (r) => "🍍 " + r;
function hY(r, i) {
  _O(
    {
      id: "dev.esm.pinia",
      label: "Pinia 🍍",
      logo: "https://pinia.vuejs.org/logo.svg",
      packageName: "pinia",
      homepage: "https://pinia.vuejs.org",
      componentStateTypes: gm,
      app: r,
    },
    (o) => {
      typeof o.now != "function" &&
        br(
          "You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."
        ),
        o.addTimelineLayer({
          id: xu,
          label: "Pinia 🍍",
          color: 15064968,
        }),
        o.addInspector({
          id: xr,
          label: "Pinia 🍍",
          icon: "storage",
          treeFilterPlaceholder: "Search stores",
          actions: [
            {
              icon: "content_copy",
              action: () => {
                nY(i);
              },
              tooltip: "Serialize and copy the state",
            },
            {
              icon: "content_paste",
              action: () =>
                fs(this, null, function* () {
                  yield rY(i),
                    o.sendInspectorTree(xr),
                    o.sendInspectorState(xr);
                }),
              tooltip: "Replace the state with the content of your clipboard",
            },
            {
              icon: "save",
              action: () => {
                iY(i);
              },
              tooltip: "Save the state as a JSON file",
            },
            {
              icon: "folder_open",
              action: () =>
                fs(this, null, function* () {
                  yield oY(i),
                    o.sendInspectorTree(xr),
                    o.sendInspectorState(xr);
                }),
              tooltip: "Import the state from a JSON file",
            },
          ],
          nodeActions: [
            {
              icon: "restore",
              tooltip: 'Reset the state (with "$reset")',
              action: (p) => {
                const m = i._s.get(p);
                m
                  ? typeof m.$reset != "function"
                    ? br(
                        `Cannot reset "${p}" store because it doesn't have a "$reset" method implemented.`,
                        "warn"
                      )
                    : (m.$reset(), br(`Store "${p}" reset.`))
                  : br(
                      `Cannot reset "${p}" store because it wasn't found.`,
                      "warn"
                    );
              },
            },
          ],
        }),
        o.on.inspectComponent((p, m) => {
          const S = p.componentInstance && p.componentInstance.proxy;
          if (S && S._pStores) {
            const O = p.componentInstance.proxy._pStores;
            Object.values(O).forEach((I) => {
              p.instanceData.state.push({
                type: Pm(I.$id),
                key: "state",
                editable: !0,
                value: I._isOptionsAPI
                  ? {
                      _custom: {
                        value: ln(I.$state),
                        actions: [
                          {
                            icon: "restore",
                            tooltip: "Reset the state of this store",
                            action: () => I.$reset(),
                          },
                        ],
                      },
                    }
                  : // NOTE: workaround to unwrap transferred refs
                    Object.keys(I.$state).reduce(
                      (B, ee) => ((B[ee] = I.$state[ee]), B),
                      {}
                    ),
              }),
                I._getters &&
                  I._getters.length &&
                  p.instanceData.state.push({
                    type: Pm(I.$id),
                    key: "getters",
                    editable: !1,
                    value: I._getters.reduce((B, ee) => {
                      try {
                        B[ee] = I[ee];
                      } catch (oe) {
                        B[ee] = oe;
                      }
                      return B;
                    }, {}),
                  });
            });
          }
        }),
        o.on.getInspectorTree((p) => {
          if (p.app === r && p.inspectorId === xr) {
            let m = [i];
            (m = m.concat(Array.from(i._s.values()))),
              (p.rootNodes = (
                p.filter
                  ? m.filter((S) =>
                      "$id" in S
                        ? S.$id.toLowerCase().includes(p.filter.toLowerCase())
                        : IO.toLowerCase().includes(p.filter.toLowerCase())
                    )
                  : m
              ).map(sY));
          }
        }),
        o.on.getInspectorState((p) => {
          if (p.app === r && p.inspectorId === xr) {
            const m = p.nodeId === pS ? i : i._s.get(p.nodeId);
            if (!m) return;
            m && (p.state = uY(m));
          }
        }),
        o.on.editInspectorState((p, m) => {
          if (p.app === r && p.inspectorId === xr) {
            const S = p.nodeId === pS ? i : i._s.get(p.nodeId);
            if (!S) return br(`store "${p.nodeId}" not found`, "error");
            const { path: O } = p;
            GS(S)
              ? O.unshift("state")
              : (O.length !== 1 ||
                  !S._customProperties.has(O[0]) ||
                  O[0] in S.$state) &&
                O.unshift("$state"),
              (Sl = !1),
              p.set(S, O, p.state.value),
              (Sl = !0);
          }
        }),
        o.on.editComponentState((p) => {
          if (p.type.startsWith("🍍")) {
            const m = p.type.replace(/^🍍\s*/, ""),
              S = i._s.get(m);
            if (!S) return br(`store "${m}" not found`, "error");
            const { path: O } = p;
            if (O[0] !== "state")
              return br(`Invalid path for store "${m}":
${O}
Only state can be modified.`);
            (O[0] = "$state"), (Sl = !1), p.set(S, O, p.state.value), (Sl = !0);
          }
        });
    }
  );
}
function fY(r, i) {
  gm.includes(Pm(i.$id)) || gm.push(Pm(i.$id)),
    _O(
      {
        id: "dev.esm.pinia",
        label: "Pinia 🍍",
        logo: "https://pinia.vuejs.org/logo.svg",
        packageName: "pinia",
        homepage: "https://pinia.vuejs.org",
        componentStateTypes: gm,
        app: r,
        settings: {
          logStoreChanges: {
            label: "Notify about new/deleted stores",
            type: "boolean",
            defaultValue: !0,
          },
          // useEmojis: {
          //   label: 'Use emojis in messages ⚡️',
          //   type: 'boolean',
          //   defaultValue: true,
          // },
        },
      },
      (o) => {
        const p = typeof o.now == "function" ? o.now.bind(o) : Date.now;
        i.$onAction(({ after: O, onError: I, name: B, args: ee }) => {
          const oe = RO++;
          o.addTimelineEvent({
            layerId: xu,
            event: {
              time: p(),
              title: "🛫 " + B,
              subtitle: "start",
              data: {
                store: na(i.$id),
                action: na(B),
                args: ee,
              },
              groupId: oe,
            },
          }),
            O((ie) => {
              (ys = void 0),
                o.addTimelineEvent({
                  layerId: xu,
                  event: {
                    time: p(),
                    title: "🛬 " + B,
                    subtitle: "end",
                    data: {
                      store: na(i.$id),
                      action: na(B),
                      args: ee,
                      result: ie,
                    },
                    groupId: oe,
                  },
                });
            }),
            I((ie) => {
              (ys = void 0),
                o.addTimelineEvent({
                  layerId: xu,
                  event: {
                    time: p(),
                    logType: "error",
                    title: "💥 " + B,
                    subtitle: "end",
                    data: {
                      store: na(i.$id),
                      action: na(B),
                      args: ee,
                      error: ie,
                    },
                    groupId: oe,
                  },
                });
            });
        }, !0),
          i._customProperties.forEach((O) => {
            aO(
              () => Wx(i[O]),
              (I, B) => {
                o.notifyComponentUpdate(),
                  o.sendInspectorState(xr),
                  Sl &&
                    o.addTimelineEvent({
                      layerId: xu,
                      event: {
                        time: p(),
                        title: "Change",
                        subtitle: O,
                        data: {
                          newValue: I,
                          oldValue: B,
                        },
                        groupId: ys,
                      },
                    });
              },
              { deep: !0 }
            );
          }),
          i.$subscribe(
            ({ events: O, type: I }, B) => {
              if ((o.notifyComponentUpdate(), o.sendInspectorState(xr), !Sl))
                return;
              const ee = {
                time: p(),
                title: lY(I),
                data: dY({ store: na(i.$id) }, cY(O)),
                groupId: ys,
              };
              I === Ma.patchFunction
                ? (ee.subtitle = "⤵️")
                : I === Ma.patchObject
                ? (ee.subtitle = "🧩")
                : O && !Array.isArray(O) && (ee.subtitle = O.type),
                O &&
                  (ee.data["rawEvent(s)"] = {
                    _custom: {
                      display: "DebuggerEvent",
                      type: "object",
                      tooltip: "raw DebuggerEvent[]",
                      value: O,
                    },
                  }),
                o.addTimelineEvent({
                  layerId: xu,
                  event: ee,
                });
            },
            { detached: !0, flush: "sync" }
          );
        const m = i._hotUpdate;
        i._hotUpdate = _s((O) => {
          m(O),
            o.addTimelineEvent({
              layerId: xu,
              event: {
                time: p(),
                title: "🔥 " + i.$id,
                subtitle: "HMR update",
                data: {
                  store: na(i.$id),
                  info: na("HMR update"),
                },
              },
            }),
            o.notifyComponentUpdate(),
            o.sendInspectorTree(xr),
            o.sendInspectorState(xr);
        });
        const { $dispose: S } = i;
        (i.$dispose = () => {
          S(),
            o.notifyComponentUpdate(),
            o.sendInspectorTree(xr),
            o.sendInspectorState(xr),
            o.getSettings().logStoreChanges &&
              br(`Disposed "${i.$id}" store 🗑`);
        }),
          o.notifyComponentUpdate(),
          o.sendInspectorTree(xr),
          o.sendInspectorState(xr),
          o.getSettings().logStoreChanges &&
            br(`"${i.$id}" store installed 🆕`);
      }
    );
}
let RO = 0,
  ys;
function P4(r, i, o) {
  const p = i.reduce((m, S) => ((m[S] = ln(r)[S]), m), {});
  for (const m in p)
    r[m] = function () {
      const S = RO,
        O = o
          ? new Proxy(r, {
              get(...B) {
                return (ys = S), Reflect.get(...B);
              },
              set(...B) {
                return (ys = S), Reflect.set(...B);
              },
            })
          : r;
      ys = S;
      const I = p[m].apply(O, arguments);
      return (ys = void 0), I;
    };
}
function pY({ app: r, store: i, options: o }) {
  if (i.$id.startsWith("__hot:")) return;
  (i._isOptionsAPI = !!o.state), P4(i, Object.keys(o.actions), i._isOptionsAPI);
  const p = i._hotUpdate;
  (ln(i)._hotUpdate = function (m) {
    p.apply(this, arguments),
      P4(i, Object.keys(m._hmrPayload.actions), !!i._isOptionsAPI);
  }),
    fY(
      r,
      // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?
      i
    );
}
function vY() {
  const r = Cx(!0),
    i = r.run(() => To({}));
  let o = [],
    p = [];
  const m = _s({
    install(S) {
      El(m),
        (m._a = S),
        S.provide(yO, m),
        (S.config.globalProperties.$pinia = m),
        Vh && hY(S, m),
        p.forEach((O) => o.push(O)),
        (p = []);
    },
    use(S) {
      return !this._a && !mO ? p.push(S) : o.push(S), this;
    },
    _p: o,
    // it's actually undefined here
    // @ts-expect-error
    _a: null,
    _e: r,
    _s: /* @__PURE__ */ new Map(),
    state: i,
  });
  return Vh && typeof Proxy != "undefined" && m.use(pY), m;
}
function CO(r, i) {
  for (const o in i) {
    const p = i[o];
    if (!(o in r)) continue;
    const m = r[o];
    Mu(m) && Mu(p) && !rr(p) && !ko(p) ? (r[o] = CO(m, p)) : (r[o] = p);
  }
  return r;
}
const AO = () => {};
function D4(r, i, o, p = AO) {
  r.push(i);
  const m = () => {
    const S = r.indexOf(i);
    S > -1 && (r.splice(S, 1), p());
  };
  return !o && Ax() && bJ(m), m;
}
function ml(r, ...i) {
  r.slice().forEach((o) => {
    o(...i);
  });
}
const mY = (r) => r();
function vS(r, i) {
  r instanceof Map && i instanceof Map && i.forEach((o, p) => r.set(p, o)),
    r instanceof Set && i instanceof Set && i.forEach(r.add, r);
  for (const o in i) {
    if (!i.hasOwnProperty(o)) continue;
    const p = i[o],
      m = r[o];
    Mu(m) && Mu(p) && r.hasOwnProperty(o) && !rr(p) && !ko(p)
      ? (r[o] = vS(m, p))
      : (r[o] = p);
  }
  return r;
}
const gY =
  process.env.NODE_ENV !== "production"
    ? Symbol("pinia:skipHydration")
    : /* istanbul ignore next */
      Symbol();
function _Y(r) {
  return !Mu(r) || !r.hasOwnProperty(gY);
}
const { assign: Ni } = Object;
function N4(r) {
  return !!(rr(r) && r.effect);
}
function L4(r, i, o, p) {
  const { state: m, actions: S, getters: O } = i,
    I = o.state.value[r];
  let B;
  function ee() {
    !I &&
      (process.env.NODE_ENV === "production" || !p) &&
      (o.state.value[r] = m ? m() : {});
    const oe =
      process.env.NODE_ENV !== "production" && p
        ? // use ref() to unwrap refs inside state TODO: check if this is still necessary
          S4(To(m ? m() : {}).value)
        : S4(o.state.value[r]);
    return Ni(
      oe,
      S,
      Object.keys(O || {}).reduce(
        (ie, be) => (
          process.env.NODE_ENV !== "production" &&
            be in oe &&
            console.warn(
              `[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${be}" in store "${r}".`
            ),
          (ie[be] = _s(
            vO(() => {
              El(o);
              const Ie = o._s.get(r);
              return O[be].call(Ie, Ie);
            })
          )),
          ie
        ),
        {}
      )
    );
  }
  return (B = mS(r, ee, i, o, p, !0)), B;
}
function mS(r, i, o = {}, p, m, S) {
  let O;
  const I = Ni({ actions: {} }, o);
  if (process.env.NODE_ENV !== "production" && !p._e.active)
    throw new Error("Pinia destroyed");
  const B = {
    deep: !0,
    // flush: 'post',
  };
  process.env.NODE_ENV !== "production" &&
    !mO &&
    (B.onTrigger = (nt) => {
      ee
        ? (Ie = nt)
        : ee == !1 &&
          !Ze._hotUpdating &&
          (Array.isArray(Ie)
            ? Ie.push(nt)
            : console.error(
                "🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."
              ));
    });
  let ee,
    oe,
    ie = [],
    be = [],
    Ie;
  const Ce = p.state.value[r];
  !S &&
    !Ce &&
    (process.env.NODE_ENV === "production" || !m) &&
    (p.state.value[r] = {});
  const We = To({});
  let de;
  function _t(nt) {
    let Be;
    (ee = oe = !1),
      process.env.NODE_ENV !== "production" && (Ie = []),
      typeof nt == "function"
        ? (nt(p.state.value[r]),
          (Be = {
            type: Ma.patchFunction,
            storeId: r,
            events: Ie,
          }))
        : (vS(p.state.value[r], nt),
          (Be = {
            type: Ma.patchObject,
            payload: nt,
            storeId: r,
            events: Ie,
          }));
    const rt = (de = Symbol());
    lS().then(() => {
      de === rt && (ee = !0);
    }),
      (oe = !0),
      ml(ie, Be, p.state.value[r]);
  }
  const It = S
    ? function () {
        const { state: Be } = o,
          rt = Be ? Be() : {};
        this.$patch((jt) => {
          Ni(jt, rt);
        });
      }
    : /* istanbul ignore next */
    process.env.NODE_ENV !== "production"
    ? () => {
        throw new Error(
          `🍍: Store "${r}" is built using the setup syntax and does not implement $reset().`
        );
      }
    : AO;
  function Tt() {
    O.stop(), (ie = []), (be = []), p._s.delete(r);
  }
  function Jt(nt, Be) {
    return function () {
      El(p);
      const rt = Array.from(arguments),
        jt = [],
        ot = [];
      function zt(Lt) {
        jt.push(Lt);
      }
      function st(Lt) {
        ot.push(Lt);
      }
      ml(be, {
        args: rt,
        name: nt,
        store: Ze,
        after: zt,
        onError: st,
      });
      let ct;
      try {
        ct = Be.apply(this && this.$id === r ? this : Ze, rt);
      } catch (Lt) {
        throw (ml(ot, Lt), Lt);
      }
      return ct instanceof Promise
        ? ct
            .then((Lt) => (ml(jt, Lt), Lt))
            .catch((Lt) => (ml(ot, Lt), Promise.reject(Lt)))
        : (ml(jt, ct), ct);
    };
  }
  const yt = /* @__PURE__ */ _s({
      actions: {},
      getters: {},
      state: [],
      hotState: We,
    }),
    Et = {
      _p: p,
      // _s: scope,
      $id: r,
      $onAction: D4.bind(null, be),
      $patch: _t,
      $reset: It,
      $subscribe(nt, Be = {}) {
        const rt = D4(ie, nt, Be.detached, () => jt()),
          jt = O.run(() =>
            aO(
              () => p.state.value[r],
              (ot) => {
                (Be.flush === "sync" ? oe : ee) &&
                  nt(
                    {
                      storeId: r,
                      type: Ma.direct,
                      events: Ie,
                    },
                    ot
                  );
              },
              Ni({}, B, Be)
            )
          );
        return rt;
      },
      $dispose: Tt,
    },
    Ze = FS(
      process.env.NODE_ENV !== "production" || Vh
        ? Ni(
            {
              _hmrPayload: yt,
              _customProperties: _s(/* @__PURE__ */ new Set()),
              // devtools custom properties
            },
            Et
            // must be added later
            // setupStore
          )
        : Et
    );
  p._s.set(r, Ze);
  const pt = ((p._a && p._a.runWithContext) || mY)(() =>
    p._e.run(() => (O = Cx()).run(i))
  );
  for (const nt in pt) {
    const Be = pt[nt];
    if ((rr(Be) && !N4(Be)) || ko(Be))
      process.env.NODE_ENV !== "production" && m
        ? rm(We.value, nt, Fb(pt, nt))
        : S ||
          (Ce && _Y(Be) && (rr(Be) ? (Be.value = Ce[nt]) : vS(Be, Ce[nt])),
          (p.state.value[r][nt] = Be)),
        process.env.NODE_ENV !== "production" && yt.state.push(nt);
    else if (typeof Be == "function") {
      const rt = process.env.NODE_ENV !== "production" && m ? Be : Jt(nt, Be);
      (pt[nt] = rt),
        process.env.NODE_ENV !== "production" && (yt.actions[nt] = Be),
        (I.actions[nt] = Be);
    } else
      process.env.NODE_ENV !== "production" &&
        N4(Be) &&
        ((yt.getters[nt] = S
          ? // @ts-expect-error
            o.getters[nt]
          : Be),
        Gm &&
          (
            pt._getters || // @ts-expect-error: same
            (pt._getters = _s([]))
          ).push(nt));
  }
  if (
    (Ni(Ze, pt),
    Ni(ln(Ze), pt),
    Object.defineProperty(Ze, "$state", {
      get: () =>
        process.env.NODE_ENV !== "production" && m
          ? We.value
          : p.state.value[r],
      set: (nt) => {
        if (process.env.NODE_ENV !== "production" && m)
          throw new Error("cannot set hotState");
        _t((Be) => {
          Ni(Be, nt);
        });
      },
    }),
    process.env.NODE_ENV !== "production" &&
      (Ze._hotUpdate = _s((nt) => {
        (Ze._hotUpdating = !0),
          nt._hmrPayload.state.forEach((Be) => {
            if (Be in Ze.$state) {
              const rt = nt.$state[Be],
                jt = Ze.$state[Be];
              typeof rt == "object" && Mu(rt) && Mu(jt)
                ? CO(rt, jt)
                : (nt.$state[Be] = jt);
            }
            rm(Ze, Be, Fb(nt.$state, Be));
          }),
          Object.keys(Ze.$state).forEach((Be) => {
            Be in nt.$state || Wb(Ze, Be);
          }),
          (ee = !1),
          (oe = !1),
          (p.state.value[r] = Fb(nt._hmrPayload, "hotState")),
          (oe = !0),
          lS().then(() => {
            ee = !0;
          });
        for (const Be in nt._hmrPayload.actions) {
          const rt = nt[Be];
          rm(Ze, Be, Jt(Be, rt));
        }
        for (const Be in nt._hmrPayload.getters) {
          const rt = nt._hmrPayload.getters[Be],
            jt = S
              ? // special handling of options api
                vO(() => (El(p), rt.call(Ze, Ze)))
              : rt;
          rm(Ze, Be, jt);
        }
        Object.keys(Ze._hmrPayload.getters).forEach((Be) => {
          Be in nt._hmrPayload.getters || Wb(Ze, Be);
        }),
          Object.keys(Ze._hmrPayload.actions).forEach((Be) => {
            Be in nt._hmrPayload.actions || Wb(Ze, Be);
          }),
          (Ze._hmrPayload = nt._hmrPayload),
          (Ze._getters = nt._getters),
          (Ze._hotUpdating = !1);
      })),
    Vh)
  ) {
    const nt = {
      writable: !0,
      configurable: !0,
      // avoid warning on devtools trying to display this property
      enumerable: !1,
    };
    ["_p", "_hmrPayload", "_getters", "_customProperties"].forEach((Be) => {
      Object.defineProperty(Ze, Be, Ni({ value: Ze[Be] }, nt));
    });
  }
  return (
    p._p.forEach((nt) => {
      if (Vh) {
        const Be = O.run(() =>
          nt({
            store: Ze,
            app: p._a,
            pinia: p,
            options: I,
          })
        );
        Object.keys(Be || {}).forEach((rt) => Ze._customProperties.add(rt)),
          Ni(Ze, Be);
      } else
        Ni(
          Ze,
          O.run(() =>
            nt({
              store: Ze,
              app: p._a,
              pinia: p,
              options: I,
            })
          )
        );
    }),
    process.env.NODE_ENV !== "production" &&
      Ze.$state &&
      typeof Ze.$state == "object" &&
      typeof Ze.$state.constructor == "function" &&
      !Ze.$state.constructor.toString().includes("[native code]") &&
      console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${Ze.$id}".`),
    Ce && S && o.hydrate && o.hydrate(Ze.$state, Ce),
    (ee = !0),
    (oe = !0),
    Ze
  );
}
function yY(r, i, o) {
  let p, m;
  const S = typeof i == "function";
  if (typeof r == "string") (p = r), (m = S ? o : i);
  else if (
    ((m = r),
    (p = r.id),
    process.env.NODE_ENV !== "production" && typeof p != "string")
  )
    throw new Error(
      '[🍍]: "defineStore()" must be passed a store id as its first argument.'
    );
  function O(I, B) {
    const ee = y$();
    if (
      ((I = // in test mode, ignore the argument provided as we can always retrieve a
        // pinia instance with getActivePinia()
        (process.env.NODE_ENV === "test" && Nh && Nh._testing ? null : I) ||
        (ee ? rO(yO, null) : null)),
      I && El(I),
      process.env.NODE_ENV !== "production" && !Nh)
    )
      throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?
See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.
This will fail in production.`);
    (I = Nh),
      I._s.has(p) ||
        (S ? mS(p, i, m, I) : L4(p, m, I),
        process.env.NODE_ENV !== "production" && (O._pinia = I));
    const oe = I._s.get(p);
    if (process.env.NODE_ENV !== "production" && B) {
      const ie = "__hot:" + p,
        be = S ? mS(ie, i, m, I, !0) : L4(ie, Ni({}, m), I, !0);
      B._hotUpdate(be), delete I.state.value[ie], I._s.delete(ie);
    }
    if (process.env.NODE_ENV !== "production" && Gm) {
      const ie = dO();
      if (
        ie &&
        ie.proxy && // avoid adding stores that are just built for hot module replacement
        !B
      ) {
        const be = ie.proxy,
          Ie = "_pStores" in be ? be._pStores : (be._pStores = {});
        Ie[p] = oe;
      }
    }
    return oe;
  }
  return (O.$id = p), O;
}
var La = yY("videoConfig", function () {
    var r = To(void 0),
      i = To(void 0),
      o = To(),
      p = function (I) {
        r.value = I;
      },
      m = function (I) {
        i.value = I;
      },
      S = function (I) {
        o.value = I;
      };
    return {
      videoConfig: r,
      websocketConfig: i,
      roomId: o,
      setVideoConfig: p,
      setWebsocketConfig: m,
      setRoomId: S,
    };
  }),
  bY = /* @__PURE__ */ (function () {
    var r = Wt(
      /* @__PURE__ */ Je.mark(function i() {
        var o, p, m, S, O, I, B;
        return Je.wrap(
          function (oe) {
            for (;;)
              switch ((oe.prev = oe.next)) {
                case 0:
                  if (
                    (console.log(La().websocketConfig, La().videoConfig),
                    !(!La().websocketConfig || !La().videoConfig))
                  ) {
                    oe.next = 4;
                    break;
                  }
                  return (
                    console.error("发送进入房间通知失败"),
                    oe.abrupt("return", !1)
                  );
                case 4:
                  if (
                    ((m =
                      (o = La().websocketConfig) === null || o === void 0
                        ? void 0
                        : o.ip),
                    (S =
                      (p = La().videoConfig) === null || p === void 0
                        ? void 0
                        : p.userId),
                    (O = La().roomId),
                    console.log(m, S, O),
                    !(!m || !S || !O))
                  ) {
                    oe.next = 10;
                    break;
                  }
                  return oe.abrupt("return", !1);
                case 10:
                  if (((I = SY(m)), I)) {
                    oe.next = 14;
                    break;
                  }
                  return (
                    console.error("无法获取有效的 ABMessage 通知 URL"),
                    oe.abrupt("return", !1)
                  );
                case 14:
                  return (
                    (oe.prev = 14),
                    (oe.next = 17),
                    QK(I, {
                      EventInfo: {
                        Role: 20,
                        UserId: S,
                        RoomId: String(O),
                        Reason: 0,
                      },
                      EventType: 103,
                    })
                  );
                case 17:
                  return (
                    (B = oe.sent),
                    console.log("[进房回调的结果]：", B),
                    oe.abrupt("return", !0)
                  );
                case 22:
                  (oe.prev = 22),
                    (oe.t0 = oe.catch(14)),
                    console.error("发送进房通知失败:", oe.t0);
                case 25:
                case "end":
                  return oe.stop();
              }
          },
          i,
          null,
          [[14, 22]]
        );
      })
    );
    return function () {
      return r.apply(this, arguments);
    };
  })(),
  SY = function (i) {
    i.endsWith("/websocket") && (i = i.slice(0, -10));
    var o = /(wss?|ws):\/\/([\w.-]+)(?::(\d+))?.*/,
      p = i.match(o);
    if (!p) {
      console.log("URL不是有效的WebSocket地址");
      return;
    }
    var m = i.startsWith("wss://") ? "wss" : "ws",
      S = i.split("/"),
      O = S.slice(2).join("/"),
      I = "";
    (m === "wss" || m === "ws") && (I = m === "wss" ? "https" : "http");
    var B = "".concat(I, "://").concat(O, "/enterOrLeaveRoomNotify");
    return console.log("[转换后的HTTP地址]", B), B;
  },
  bs = To({}),
  xO = function (i, o) {
    bs.value[i] || (bs.value[i] = []), bs.value[i].push(o);
  },
  OO = function (i, o) {
    bs.value[i] &&
      (o
        ? (bs.value[i] = bs.value[i].filter(function (p) {
            return p !== o;
          }))
        : delete bs.value[i]);
  },
  wY = function (i, o) {
    var p = function (S) {
      OO(i, p), o(S);
    };
    xO(i, p);
  },
  kY = function (i, o) {
    var p = bs.value[i];
    p &&
      p.forEach(function (m) {
        m(o);
      });
  },
  qh = function () {
    return {
      on: xO,
      off: OO,
      once: wY,
      emit: kY,
    };
  },
  PO = { exports: {} };
(function (r) {
  (function (i) {
    var o =
        (typeof window == "undefined" ? "undefined" : vt(window)) == "object" &&
        !!window.document,
      p = o ? window : Object;
    i(p, o), r.exports && (r.exports = p.Recorder);
  })(function (i, o) {
    var p = function () {},
      m = function (Y) {
        return typeof Y == "number";
      },
      S = function (Y) {
        return new zt(Y);
      },
      O = (S.LM = "2024-04-09 19:15"),
      I = "https://github.com/xiangyuecn/Recorder",
      B = "Recorder",
      ee = "getUserMedia",
      oe = "srcSampleRate",
      ie = "sampleRate",
      be = "bitRate",
      Ie = "catch",
      Ce = i[B];
    if (Ce && Ce.LM == O) {
      Ce.CLog(Ce.i18n.$T("K8zP::重复导入{1}", 0, B), 3);
      return;
    }
    (S.IsOpen = function () {
      var ve = S.Stream;
      if (ve) {
        var Y = (ve.getTracks && ve.getTracks()) || ve.audioTracks || [],
          ce = Y[0];
        if (ce) {
          var he = ce.readyState;
          return he == "live" || he == ce.LIVE;
        }
      }
      return !1;
    }),
      (S.BufferSize = 4096),
      (S.Destroy = function () {
        rt(B + " Destroy"), nt();
        for (var ve in We) We[ve]();
      });
    var We = {};
    (S.BindDestroy = function (ve, Y) {
      We[ve] = Y;
    }),
      (S.Support = function () {
        if (!o) return !1;
        var ve = navigator.mediaDevices || {};
        return (
          ve[ee] ||
            ((ve = navigator),
            ve[ee] ||
              (ve[ee] =
                ve.webkitGetUserMedia ||
                ve.mozGetUserMedia ||
                ve.msGetUserMedia)),
          !(!ve[ee] || ((S.Scope = ve), !S.GetContext()))
        );
      }),
      (S.GetContext = function (ve) {
        if (!o) return null;
        var Y = window.AudioContext;
        if ((Y || (Y = window.webkitAudioContext), !Y)) return null;
        var ce = S.Ctx;
        if (
          ((!ce || ce.state == "closed") &&
            ((ce = S.Ctx = new Y()),
            (S.NewCtxs = S.NewCtxs || []),
            S.BindDestroy("Ctx", function () {
              var he = S.Ctx;
              he && he.close && (de(he), (S.Ctx = 0));
              var me = S.NewCtxs;
              S.NewCtxs = [];
              for (var Pe = 0; Pe < me.length; Pe++) de(me[Pe]);
            })),
          ve && ce.close)
        )
          try {
            (ce = new Y()), S.NewCtxs.push(ce);
          } catch (he) {
            rt("GetContext tryNew Error", 1, he);
          }
        return ce;
      }),
      (S.CloseNewCtx = function (ve) {
        if (ve && ve != S.Ctx) {
          de(ve);
          for (
            var Y = S.NewCtxs || [], ce = Y.length, he = 0;
            he < Y.length;
            he++
          )
            if (Y[he] == ve) {
              Y.splice(he, 1);
              break;
            }
          rt(
            ge("mSxV::剩{1}个GetContext未close", 0, ce + "-1=" + Y.length),
            Y.length ? 3 : 0
          );
        }
      });
    var de = function (Y) {
        if (Y && Y.close) {
          Y._isC = 1;
          try {
            Y.close();
          } catch (ce) {
            rt("ctx close err", 1, ce);
          }
        }
      },
      _t = (S.ResumeCtx = function (ve, Y, ce, he) {
        var me = 0,
          Pe = 0,
          it = 0,
          Xe = 0,
          Pt = "EventListener",
          dt = "ResumeCtx ",
          Rt = function (Bt, at) {
            Pe && sn(),
              me || ((me = 1), Bt && he(Bt, Xe), at && ce(Xe)),
              at &&
                (!ve._LsSC &&
                  ve["add" + Pt] &&
                  ve["add" + Pt]("statechange", Sn),
                (ve._LsSC = 1),
                (it = 1));
          },
          sn = function (Bt) {
            if (!(Bt && Pe)) {
              Pe = Bt ? 1 : 0;
              for (
                var at = [
                    "focus",
                    "mousedown",
                    "mouseup",
                    "touchstart",
                    "touchend",
                  ],
                  He = 0;
                He < at.length;
                He++
              )
                window[(Bt ? "add" : "remove") + Pt](at[He], Sn, !0);
            }
          },
          Sn = function () {
            var Bt = ve.state,
              at = It(Bt);
            if (!me && !Y(at ? ++Xe : Xe)) return Rt();
            at
              ? (it && rt(dt + "sc " + Bt, 3),
                sn(1),
                ve
                  .resume()
                  .then(function () {
                    it && rt(dt + "sc " + ve.state), Rt(0, 1);
                  })
                  [Ie](function (He) {
                    rt(dt + "error", 1, He),
                      It(ve.state) || Rt(He.message || "error");
                  }))
              : Bt == "closed"
              ? (it && !ve._isC && rt(dt + "sc " + Bt, 1), Rt("ctx closed"))
              : Rt(0, 1);
          };
        Sn();
      }),
      It = (S.CtxSpEnd = function (ve) {
        return ve == "suspended" || ve == "interrupted";
      }),
      Tt = function (Y) {
        var ce = Y.state,
          he = "ctx.state=" + ce;
        return (
          It(ce) &&
            (he += ge(
              "nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）"
            )),
          he
        );
      },
      Jt = "ConnectEnableWebM";
    S[Jt] = !0;
    var yt = "ConnectEnableWorklet";
    S[yt] = !1;
    var Et = function (Y, ce) {
        var he = Y.BufferSize || S.BufferSize,
          me = Y.Stream,
          Pe = me._RC || me._c || S.GetContext(!0);
        me._c = Pe;
        var it = function (Dt) {
            var yn = (me._m = Pe.createMediaStreamSource(me)),
              Xt = Pe.destination,
              on = "createMediaStreamDestination";
            Pe[on] && (Xt = me._d = Pe[on]()), yn.connect(Dt), Dt.connect(Xt);
          },
          Xe,
          Pt,
          dt,
          Rt = "",
          sn = me._call,
          Sn = function (Dt) {
            for (var yn in sn) {
              for (
                var Xt = Dt.length, on = new Int16Array(Xt), Zt = 0, wn = 0;
                wn < Xt;
                wn++
              ) {
                var mn = Math.max(-1, Math.min(1, Dt[wn]));
                (mn = mn < 0 ? mn * 32768 : mn * 32767),
                  (on[wn] = mn),
                  (Zt += Math.abs(mn));
              }
              for (var Ft in sn) sn[Ft](on, Zt);
              return;
            }
          },
          Mt = "ScriptProcessor",
          Bt = "audioWorklet",
          at = B + " " + Bt,
          He = "RecProc",
          un = "MediaRecorder",
          pn = un + ".WebM.PCM",
          rn = Pe.createScriptProcessor || Pe.createJavaScriptNode,
          tn = ge(
            "ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",
            0,
            Bt
          ),
          St = function () {
            (Pt = me.isWorklet = !1),
              Vt(me),
              rt(
                ge("7TU0::Connect采用老的{1}，", 0, Mt) +
                  Re.get(
                    S[yt]
                      ? ge("JwCL::但已设置{1}尝试启用{2}", 2)
                      : ge("VGjB::可设置{1}尝试启用{2}", 2),
                    [B + "." + yt + "=true", Bt]
                  ) +
                  Rt +
                  tn,
                3
              );
            var Dt = (me._p = rn.call(Pe, he, 1, 1));
            it(Dt),
              (Dt.onaudioprocess = function (yn) {
                var Xt = yn.inputBuffer.getChannelData(0);
                Sn(Xt);
              });
          },
          cn = function () {
            (Xe = me.isWebM = !1), pt(me), (Pt = me.isWorklet = !rn || S[yt]);
            var Dt = window.AudioWorkletNode;
            if (!(Pt && Pe[Bt] && Dt)) {
              St();
              return;
            }
            var yn = function () {
                var Ft = function (nn) {
                    return nn
                      .toString()
                      .replace(/^function|DEL_/g, "")
                      .replace(/\$RA/g, at);
                  },
                  At = "class " + He + " extends AudioWorkletProcessor{";
                return (
                  (At +=
                    "constructor " +
                    Ft(function (Un) {
                      DEL_super(Un);
                      var nn = this,
                        _i = Un.processorOptions.bufferSize;
                      (nn.bufferSize = _i),
                        (nn.buffer = new Float32Array(_i * 2)),
                        (nn.pos = 0),
                        (nn.port.onmessage = function (Or) {
                          Or.data.kill &&
                            ((nn.kill = !0), $C.log("$RA kill call"));
                        }),
                        $C.log("$RA .ctor call", Un);
                    })),
                  (At +=
                    "process " +
                    Ft(function (Un, nn, _i) {
                      var Or = this,
                        la = Or.bufferSize,
                        Yn = Or.buffer,
                        nr = Or.pos;
                      if (((Un = (Un[0] || [])[0] || []), Un.length)) {
                        Yn.set(Un, nr), (nr += Un.length);
                        var zn = ~~(nr / la) * la;
                        if (zn) {
                          this.port.postMessage({
                            val: Yn.slice(0, zn),
                          });
                          var ii = Yn.subarray(zn, nr);
                          (Yn = new Float32Array(la * 2)),
                            Yn.set(ii),
                            (nr = ii.length),
                            (Or.buffer = Yn);
                        }
                        Or.pos = nr;
                      }
                      return !Or.kill;
                    })),
                  (At +=
                    '}try{registerProcessor("' +
                    He +
                    '", ' +
                    He +
                    ')}catch(e){$C.error("' +
                    at +
                    ' Reg Error",e)}'),
                  (At = At.replace(/\$C\./g, "console.")),
                  "data:text/javascript;base64," +
                    btoa(unescape(encodeURIComponent(At)))
                );
              },
              Xt = function () {
                return Pt && me._na;
              },
              on = (me._na = function () {
                dt !== "" &&
                  (clearTimeout(dt),
                  (dt = setTimeout(function () {
                    (dt = 0),
                      Xt() &&
                        (rt(
                          ge("MxX1::{1}未返回任何音频，恢复使用{2}", 0, Bt, Mt),
                          3
                        ),
                        rn && St());
                  }, 500)));
              }),
              Zt = function () {
                if (Xt()) {
                  var Ft = (me._n = new Dt(Pe, He, {
                    processorOptions: {
                      bufferSize: he,
                    },
                  }));
                  it(Ft),
                    (Ft.port.onmessage = function (At) {
                      dt && (clearTimeout(dt), (dt = "")),
                        Xt()
                          ? Sn(At.data.val)
                          : Pt || rt(ge("XUap::{1}多余回调", 0, Bt), 3);
                    }),
                    rt(
                      ge(
                        "yOta::Connect采用{1}，设置{2}可恢复老式{3}",
                        0,
                        Bt,
                        B + "." + yt + "=false",
                        Mt
                      ) +
                        Rt +
                        tn,
                      3
                    );
                }
              },
              wn = function () {
                if (Xt()) {
                  if (Pe[He]) {
                    Zt();
                    return;
                  }
                  var Ft = yn();
                  Pe[Bt].addModule(Ft)
                    .then(function (At) {
                      Xt() && ((Pe[He] = 1), Zt(), dt && on());
                    })
                    [Ie](function (At) {
                      rt(Bt + ".addModule Error", 1, At), Xt() && St();
                    });
                }
              };
            _t(
              Pe,
              function () {
                return Xt();
              },
              wn,
              wn
            );
          },
          Gt = function () {
            var Dt = window[un],
              yn = "ondataavailable",
              Xt = "audio/webm; codecs=pcm";
            Xe = me.isWebM = S[Jt];
            var on = Dt && yn in Dt.prototype && Dt.isTypeSupported(Xt);
            if (
              ((Rt = on ? "" : ge("VwPd::（此浏览器不支持{1}）", 0, pn)),
              !ce || !Xe || !on)
            ) {
              cn();
              return;
            }
            var Zt = function () {
              return Xe && me._ra;
            };
            me._ra = function () {
              dt !== "" &&
                (clearTimeout(dt),
                (dt = setTimeout(function () {
                  Zt() &&
                    (rt(
                      ge("vHnb::{1}未返回任何音频，降级使用{2}", 0, un, Bt),
                      3
                    ),
                    cn());
                }, 500)));
            };
            var wn = Object.assign(
                {
                  mimeType: Xt,
                },
                S.ConnectWebMOptions
              ),
              mn = (me._r = new Dt(me, wn)),
              Ft = (me._rd = {
                sampleRate: Pe[ie],
              });
            (mn[yn] = function (At) {
              var Un = new FileReader();
              (Un.onloadend = function () {
                if (Zt()) {
                  var nn = st(new Uint8Array(Un.result), Ft);
                  if (!nn) return;
                  if (nn == -1) {
                    cn();
                    return;
                  }
                  dt && (clearTimeout(dt), (dt = "")), Sn(nn);
                } else Xe || rt(ge("O9P7::{1}多余回调", 0, un), 3);
              }),
                Un.readAsArrayBuffer(At.data);
            }),
              mn.start(~~(he / 48)),
              rt(
                ge(
                  "LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",
                  0,
                  pn,
                  B + "." + Jt + "=false",
                  Bt,
                  Mt
                )
              );
          };
        Gt();
      },
      Ze = function (Y) {
        Y._na && Y._na(), Y._ra && Y._ra();
      },
      Vt = function (Y) {
        (Y._na = null),
          Y._n &&
            (Y._n.port.postMessage({
              kill: !0,
            }),
            Y._n.disconnect(),
            (Y._n = null));
      },
      pt = function (Y) {
        if (((Y._ra = null), Y._r)) {
          try {
            Y._r.stop();
          } catch (ce) {
            rt("mr stop err", 1, ce);
          }
          Y._r = null;
        }
      },
      nt = function (Y) {
        Y = Y || S;
        var ce = Y == S,
          he = Y.Stream;
        he &&
          (he._m && (he._m.disconnect(), (he._m = null)),
          !he._RC && he._c && S.CloseNewCtx(he._c),
          (he._RC = null),
          (he._c = null),
          he._d && (Be(he._d.stream), (he._d = null)),
          he._p && (he._p.disconnect(), (he._p.onaudioprocess = he._p = null)),
          Vt(he),
          pt(he),
          ce && Be(he)),
          (Y.Stream = 0);
      },
      Be = (S.StopS_ = function (ve) {
        for (
          var Y = (ve.getTracks && ve.getTracks()) || ve.audioTracks || [],
            ce = 0;
          ce < Y.length;
          ce++
        ) {
          var he = Y[ce];
          he.stop && he.stop();
        }
        ve.stop && ve.stop();
      });
    (S.SampleData = function (ve, Y, ce, he, me) {
      var Pe = "SampleData";
      he || (he = {});
      var it = he.index || 0,
        Xe = he.offset || 0,
        Pt = he.filter;
      if (
        (Pt &&
          Pt.fn &&
          Pt.sr != Y &&
          ((Pt = null),
          rt(ge("d48C::{1}的filter采样率变了，重设滤波", 0, Pe), 3)),
        !Pt)
      ) {
        var dt = ce > (Y * 3) / 4 ? 0 : ((ce / 2) * 3) / 4;
        Pt = {
          fn: dt ? S.IIRFilter(!0, Y, dt) : 0,
        };
      }
      Pt.sr = Y;
      var Rt = Pt.fn,
        sn = he.frameNext || [];
      me || (me = {});
      var Sn = me.frameSize || 1;
      me.frameType && (Sn = me.frameType == "mp3" ? 1152 : 1);
      var Mt = ve.length;
      it > Mt + 1 &&
        rt(ge("tlbC::{1}似乎传入了未重置chunk {2}", 0, Pe, it + ">" + Mt), 3);
      for (var Bt = 0, at = it; at < Mt; at++) Bt += ve[at].length;
      Bt = Math.max(0, Bt - Math.floor(Xe));
      var He = Y / ce;
      He > 1 ? (Bt = Math.floor(Bt / He)) : ((He = 1), (ce = Y)),
        (Bt += sn.length);
      for (var un = new Int16Array(Bt), pn = 0, at = 0; at < sn.length; at++)
        (un[pn] = sn[at]), pn++;
      for (; it < Mt; it++) {
        for (
          var rn = ve[it],
            at = Xe,
            tn = rn.length,
            St = Rt && Rt.Embed,
            cn = 0,
            Gt = 0,
            $t = 0,
            Dt = 0,
            yn = 0,
            Xt = 0;
          yn < tn;
          yn++, Xt++
        ) {
          if (
            (Xt < tn &&
              (St
                ? (($t = rn[Xt]),
                  (Dt =
                    St.b0 * $t +
                    St.b1 * St.x1 +
                    St.b0 * St.x2 -
                    St.a1 * St.y1 -
                    St.a2 * St.y2),
                  (St.x2 = St.x1),
                  (St.x1 = $t),
                  (St.y2 = St.y1),
                  (St.y1 = Dt))
                : (Dt = Rt ? Rt(rn[Xt]) : rn[Xt])),
            (cn = Gt),
            (Gt = Dt),
            Xt == 0)
          ) {
            yn--;
            continue;
          }
          var on = Math.floor(at);
          if (yn == on) {
            var Zt = Math.ceil(at),
              wn = at - on,
              mn = cn,
              Ft = Zt < tn ? Gt : mn,
              At = mn + (Ft - mn) * wn;
            At > 32767 ? (At = 32767) : At < -32768 && (At = -32768),
              (un[pn] = At),
              pn++,
              (at += He);
          }
        }
        Xe = Math.max(0, at - tn);
      }
      sn = null;
      var Un = un.length % Sn;
      if (Un > 0) {
        var nn = (un.length - Un) * 2;
        (sn = new Int16Array(un.buffer.slice(nn))),
          (un = new Int16Array(un.buffer.slice(0, nn)));
      }
      return {
        index: it,
        offset: Xe,
        filter: Pt,
        frameNext: sn,
        sampleRate: ce,
        data: un,
      };
    }),
      (S.IIRFilter = function (ve, Y, ce) {
        var he = (2 * Math.PI * ce) / Y,
          me = Math.sin(he),
          Pe = Math.cos(he),
          it = me / 2,
          Xe = 1 + it,
          Pt = (-2 * Pe) / Xe,
          dt = (1 - it) / Xe;
        if (ve)
          var Rt = (1 - Pe) / 2 / Xe,
            sn = (1 - Pe) / Xe;
        else
          var Rt = (1 + Pe) / 2 / Xe,
            sn = -(1 + Pe) / Xe;
        var Sn = 0,
          Mt = 0,
          Bt = 0,
          at = 0,
          He = 0,
          un = function (rn) {
            return (
              (Bt = Rt * rn + sn * Sn + Rt * Mt - Pt * at - dt * He),
              (Mt = Sn),
              (Sn = rn),
              (He = at),
              (at = Bt),
              Bt
            );
          };
        return (
          (un.Embed = {
            x1: 0,
            x2: 0,
            y1: 0,
            y2: 0,
            b0: Rt,
            b1: sn,
            a1: Pt,
            a2: dt,
          }),
          un
        );
      }),
      (S.PowerLevel = function (ve, Y) {
        var ce = ve / Y || 0,
          he;
        return (
          ce < 1251
            ? (he = Math.round((ce / 1250) * 10))
            : (he = Math.round(
                Math.min(
                  100,
                  Math.max(0, (1 + Math.log(ce / 1e4) / Math.log(10)) * 100)
                )
              )),
          he
        );
      }),
      (S.PowerDBFS = function (ve) {
        var Y = Math.max(0.1, ve || 0),
          ce = 32767;
        return (
          (Y = Math.min(Y, ce)),
          (Y = (20 * Math.log(Y / ce)) / Math.log(10)),
          Math.max(-100, Math.round(Y))
        );
      }),
      (S.CLog = function (ve, Y) {
        if (
          (typeof console == "undefined" ? "undefined" : vt(console)) ==
          "object"
        ) {
          var ce = /* @__PURE__ */ new Date(),
            he =
              ("0" + ce.getMinutes()).substr(-2) +
              ":" +
              ("0" + ce.getSeconds()).substr(-2) +
              "." +
              ("00" + ce.getMilliseconds()).substr(-3),
            me = this && this.envIn && this.envCheck && this.id,
            Pe = ["[" + he + " " + B + (me ? ":" + me : "") + "]" + ve],
            it = arguments,
            Xe = S.CLog,
            Pt = 2,
            dt = Xe.log || console.log;
          for (
            m(Y)
              ? (dt =
                  Y == 1
                    ? Xe.error || console.error
                    : Y == 3
                    ? Xe.warn || console.warn
                    : dt)
              : (Pt = 1);
            Pt < it.length;
            Pt++
          )
            Pe.push(it[Pt]);
          jt
            ? dt && dt("[IsLoser]" + Pe[0], Pe.length > 1 ? Pe : "")
            : dt.apply(console, Pe);
        }
      });
    var rt = function () {
        S.CLog.apply(this, arguments);
      },
      jt = !0;
    try {
      jt = !console.log.apply;
    } catch (ve) {}
    var ot = 0;
    function zt(ve) {
      var Y = this;
      (Y.id = ++ot), je();
      var ce = {
        type: "mp3",
        onProcess: p,
        //fn(buffers,powerLevel,bufferDuration,bufferSampleRate,newBufferIdx,asyncEnd) buffers=[[Int16,...],...]：缓冲的PCM数据，为从开始录音到现在的所有pcm片段；powerLevel：当前缓冲的音量级别0-100，bufferDuration：已缓冲时长，bufferSampleRate：缓冲使用的采样率（当type支持边录边转码(Worker)时，此采样率和设置的采样率相同，否则不一定相同）；newBufferIdx:本次回调新增的buffer起始索引；asyncEnd:fn() 如果onProcess是异步的(返回值为true时)，处理完成时需要调用此回调，如果不是异步的请忽略此参数，此方法回调时必须是真异步（不能真异步时需用setTimeout包裹）。onProcess返回值：如果返回true代表开启异步模式，在某些大量运算的场合异步是必须的，必须在异步处理完成时调用asyncEnd(不能真异步时需用setTimeout包裹)，在onProcess执行后新增的buffer会全部替换成空数组，因此本回调开头应立即将newBufferIdx到本次回调结尾位置的buffer全部保存到另外一个数组内，处理完成后写回buffers中本次回调的结尾位置。
        //*******高级设置******
        //,sourceStream:MediaStream Object
        //可选直接提供一个媒体流，从这个流中录制、实时处理音频数据（当前Recorder实例独享此流）；不提供时为普通的麦克风录音，由getUserMedia提供音频流（所有Recorder实例共享同一个流）
        //比如：audio、video标签dom节点的captureStream方法（实验特性，不同浏览器支持程度不高）返回的流；WebRTC中的remote流；自己创建的流等
        //注意：流内必须至少存在一条音轨(Audio Track)，比如audio标签必须等待到可以开始播放后才会有音轨，否则open会失败
        //,runningContext:AudioContext
        //可选提供一个state为running状态的AudioContext对象(ctx)；默认会在rec.open时自动创建一个新的ctx，无用户操作（触摸、点击等）时调用rec.open的ctx.state可能为suspended，会在rec.start时尝试进行ctx.resume，如果也无用户操作ctx.resume可能不会恢复成running状态（目前仅iOS上有此兼容性问题），导致无法去读取媒体流，这时请提前在用户操作时调用Recorder.GetContext(true)来得到一个running状态AudioContext（用完需调用CloseNewCtx(ctx)关闭）
        //,audioTrackSet:{ deviceId:"",groupId:"", autoGainControl:true, echoCancellation:true, noiseSuppression:true }
        //普通麦克风录音时getUserMedia方法的audio配置参数，比如指定设备id，回声消除、降噪开关；注意：提供的任何配置值都不一定会生效
        //由于麦克风是全局共享的，所以新配置后需要close掉以前的再重新open
        //更多参考: https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints
        //,disableEnvInFix:false 内部参数，禁用设备卡顿时音频输入丢失补偿功能
        //,takeoffEncodeChunk:NOOP //fn(chunkBytes) chunkBytes=[Uint8,...]：实时编码环境下接管编码器输出，当编码器实时编码出一块有效的二进制音频数据时实时回调此方法；参数为二进制的Uint8Array，就是编码出来的音频数据片段，所有的chunkBytes拼接在一起即为完整音频。本实现的想法最初由QQ2543775048提出
        //当提供此回调方法时，将接管编码器的数据输出，编码器内部将放弃存储生成的音频数据；如果当前编码器或环境不支持实时编码处理，将在open时直接走fail逻辑
        //因此提供此回调后调用stop方法将无法获得有效的音频数据，因为编码器内没有音频数据，因此stop时返回的blob将是一个字节长度为0的blob
        //大部分录音格式编码器都支持实时编码（边录边转码），比如mp3格式：会实时的将编码出来的mp3片段通过此方法回调，所有的chunkBytes拼接到一起即为完整的mp3，此种拼接的结果比mock方法实时生成的音质更加，因为天然避免了首尾的静默
        //不支持实时编码的录音格式不可以提供此回调（wav格式不支持，因为wav文件头中需要提供文件最终长度），提供了将在open时直接走fail逻辑
      };
      for (var he in ve) ce[he] = ve[he];
      Y.set = ce;
      var me = ce[be],
        Pe = ce[ie];
      ((me && !m(me)) || (Pe && !m(Pe))) &&
        Y.CLog(
          ge.G("IllegalArgs-1", [ge("VtS4::{1}和{2}必须是数值", 0, ie, be)]),
          1,
          ve
        ),
        (ce[be] = +me || 16),
        (ce[ie] = +Pe || 16e3),
        (Y.state = 0),
        (Y._S = 9),
        (Y.Sync = {
          O: 9,
          C: 9,
        });
    }
    (S.Sync = {
      /*open*/
      O: 9,
      /*close*/
      C: 9,
    }),
      (S.prototype = zt.prototype =
        {
          CLog: rt,
          _streamStore: function () {
            return this.set.sourceStream ? this : S;
          },
          _streamCtx: function () {
            var Y = this._streamStore().Stream;
            return Y && Y._c;
          },
          open: function (Y, ce) {
            var he = this,
              me = he.set,
              Pe = he._streamStore(),
              it = 0;
            Y = Y || p;
            var Xe = function (Gt, $t) {
              ($t = !!$t),
                he.CLog(
                  ge("5tWi::录音open失败：") + Gt + ",isUserNotAllow:" + $t,
                  1
                ),
                it && S.CloseNewCtx(it),
                ce && ce(Gt, $t);
            };
            he._streamTag = ee;
            var Pt = function () {
                he.CLog("open ok, id:" + he.id + " stream:" + he._streamTag),
                  Y(),
                  (he._SO = 0);
              },
              dt = Pe.Sync,
              Rt = ++dt.O,
              sn = dt.C;
            (he._O = he._O_ = Rt), (he._SO = he._S);
            var Sn = function () {
              if (sn != dt.C || !he._O) {
                var Gt = ge("dFm8::open被取消");
                return (
                  Rt == dt.O ? he.close() : (Gt = ge("VtJO::open被中断")),
                  Xe(Gt),
                  !0
                );
              }
            };
            if (!o) {
              Xe(
                ge.G("NonBrowser-1", ["open"]) +
                  ge("EMJq::，可尝试使用RecordApp解决方案") +
                  "(" +
                  I +
                  "/tree/master/app-support-sample)"
              );
              return;
            }
            var Mt = he.envCheck({
              envName: "H5",
              canProcess: !0,
            });
            if (Mt) {
              Xe(ge("A5bm::不能录音：") + Mt);
              return;
            }
            if (me.sourceStream) {
              if (((he._streamTag = "set.sourceStream"), !S.GetContext())) {
                Xe(ge("1iU7::不支持此浏览器从流中获取录音"));
                return;
              }
              nt(Pe);
              var Bt = (he.Stream = me.sourceStream);
              (Bt._RC = me.runningContext), (Bt._call = {});
              try {
                Et(Pe);
              } catch (cn) {
                nt(Pe), Xe(ge("BTW2::从流中打开录音失败：") + cn.message);
                return;
              }
              Pt();
              return;
            }
            var at = function (Gt, $t) {
              try {
                window.top.a;
              } catch (Dt) {
                Xe(
                  ge(
                    "Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",
                    0,
                    'allow="camera;microphone"'
                  )
                );
                return;
              }
              /Permission|Allow/i.test(Gt)
                ? Xe(ge("gyO5::用户拒绝了录音权限"), !0)
                : window.isSecureContext === !1
                ? Xe(ge("oWNo::浏览器禁止不安全页面录音，可开启https解决"))
                : /Found/i.test(Gt)
                ? Xe($t + ge("jBa9::，无可用麦克风"))
                : Xe($t);
            };
            if (S.IsOpen()) {
              Pt();
              return;
            }
            if (!S.Support()) {
              at("", ge("COxc::此浏览器不支持录音"));
              return;
            }
            var He = me.runningContext;
            He || (He = it = S.GetContext(!0));
            var un = function (Gt) {
                setTimeout(function () {
                  Gt._call = {};
                  var $t = S.Stream;
                  $t && (nt(), (Gt._call = $t._call)),
                    (S.Stream = Gt),
                    (Gt._c = He),
                    (Gt._RC = me.runningContext),
                    !Sn() &&
                      (S.IsOpen()
                        ? ($t && he.CLog(ge("upb8::发现同时多次调用open"), 1),
                          Et(Pe, 1),
                          Pt())
                        : Xe(ge("Q1GA::录音功能无效：无音频流")));
                }, 100);
              },
              pn = function (Gt) {
                var $t = Gt.name || Gt.message || Gt.code + ":" + Gt;
                he.CLog(ge("xEQR::请求录音权限错误"), 1, Gt),
                  at($t, ge("bDOG::无法录音：") + $t);
              },
              rn = me.audioTrackSet || {};
            rn[ie] = He[ie];
            var tn = {
              audio: rn,
            };
            try {
              var St = S.Scope[ee](tn, un, pn);
            } catch (cn) {
              he.CLog(ee, 3, cn),
                (tn = {
                  audio: !0,
                }),
                (St = S.Scope[ee](tn, un, pn));
            }
            he.CLog(
              ee +
                "(" +
                JSON.stringify(tn) +
                ") " +
                Tt(He) +
                ge(
                  "RiWe::，未配置noiseSuppression和echoCancellation时浏览器可能会自动打开降噪和回声消除，移动端可能会降低系统播放音量（关闭录音后可恢复），请参阅文档中audioTrackSet配置"
                ) +
                "(" +
                I +
                ") LM:" +
                O +
                " UA:" +
                navigator.userAgent
            ),
              St && St.then && St.then(un)[Ie](pn);
          },
          close: function (Y) {
            Y = Y || p;
            var ce = this,
              he = ce._streamStore();
            ce._stop();
            var me = " stream:" + ce._streamTag,
              Pe = he.Sync;
            if (((ce._O = 0), ce._O_ != Pe.O)) {
              ce.CLog(
                ge(
                  "hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）"
                ) + me,
                3
              ),
                Y();
              return;
            }
            Pe.C++, nt(he), ce.CLog("close," + me), Y();
          },
          mock: function (Y, ce) {
            var he = this;
            return (
              he._stop(),
              (he.isMock = 1),
              (he.mockEnvInfo = null),
              (he.buffers = [Y]),
              (he.recSize = Y.length),
              he._setSrcSR(ce),
              (he._streamTag = "mock"),
              he
            );
          },
          _setSrcSR: function (Y) {
            var ce = this,
              he = ce.set,
              me = he[ie];
            me > Y ? (he[ie] = Y) : (me = 0),
              (ce[oe] = Y),
              ce.CLog(
                oe +
                  ": " +
                  Y +
                  " set." +
                  ie +
                  ": " +
                  he[ie] +
                  (me ? " " + ge("UHvm::忽略") + ": " + me : ""),
                me ? 3 : 0
              );
          },
          envCheck: function (Y) {
            var ce,
              he = this,
              me = he.set,
              Pe = "CPU_BE";
            if (
              (!ce &&
                !S[Pe] &&
                typeof Int8Array == "function" &&
                !new Int8Array(new Int32Array([1]).buffer)[0] &&
                (je(Pe), (ce = ge("Essp::不支持{1}架构", 0, Pe))),
              !ce)
            ) {
              var it = me.type,
                Xe = he[it + "_envCheck"];
              me.takeoffEncodeChunk &&
                (Xe
                  ? Y.canProcess ||
                    (ce = ge("7uMV::{1}环境不支持实时处理", 0, Y.envName))
                  : (ce =
                      ge("2XBl::{1}类型不支持设置takeoffEncodeChunk", 0, it) +
                      (he[it] ? "" : ge("LG7e::(未加载编码器)")))),
                !ce && Xe && (ce = he[it + "_envCheck"](Y, me));
            }
            return ce || "";
          },
          envStart: function (Y, ce) {
            var he = this,
              me = he.set;
            if (
              ((he.isMock = Y ? 1 : 0),
              (he.mockEnvInfo = Y),
              (he.buffers = []),
              (he.recSize = 0),
              Y && (he._streamTag = "env$" + Y.envName),
              (he.state = 1),
              (he.envInLast = 0),
              (he.envInFirst = 0),
              (he.envInFix = 0),
              (he.envInFixTs = []),
              he._setSrcSR(ce),
              (he.engineCtx = 0),
              he[me.type + "_start"])
            ) {
              var Pe = (he.engineCtx = he[me.type + "_start"](me));
              Pe && ((Pe.pcmDatas = []), (Pe.pcmSize = 0));
            }
          },
          envResume: function () {
            this.envInFixTs = [];
          },
          envIn: function (Y, ce) {
            var he = this,
              me = he.set,
              Pe = he.engineCtx;
            if (he.state != 1) {
              he.state || he.CLog("envIn at state=0", 3);
              return;
            }
            var it = he[oe],
              Xe = Y.length,
              Pt = S.PowerLevel(ce, Xe),
              dt = he.buffers,
              Rt = dt.length;
            dt.push(Y);
            var sn = dt,
              Sn = Rt,
              Mt = Date.now(),
              Bt = Math.round((Xe / it) * 1e3);
            (he.envInLast = Mt),
              he.buffers.length == 1 && (he.envInFirst = Mt - Bt);
            var at = he.envInFixTs;
            at.splice(0, 0, {
              t: Mt,
              d: Bt,
            });
            for (var He = Mt, un = 0, pn = 0; pn < at.length; pn++) {
              var rn = at[pn];
              if (Mt - rn.t > 3e3) {
                at.length = pn;
                break;
              }
              (He = rn.t), (un += rn.d);
            }
            var tn = at[1],
              St = Mt - He,
              cn = St - un;
            if (cn > St / 3 && ((tn && St > 1e3) || at.length >= 6)) {
              var Gt = Mt - tn.t - Bt;
              if (Gt > Bt / 5) {
                var $t = !me.disableEnvInFix;
                if (
                  (he.CLog(
                    "[" +
                      Mt +
                      "]" +
                      Re.get(
                        ge($t ? "4Kfd::补偿{1}ms" : "bM5i::未补偿{1}ms", 1),
                        [Gt]
                      ),
                    3
                  ),
                  (he.envInFix += Gt),
                  $t)
                ) {
                  var Dt = new Int16Array((Gt * it) / 1e3);
                  (Xe += Dt.length), dt.push(Dt);
                }
              }
            }
            var yn = he.recSize,
              Xt = Xe,
              on = yn + Xt;
            if (((he.recSize = on), Pe)) {
              var Zt = S.SampleData(dt, it, me[ie], Pe.chunkInfo);
              (Pe.chunkInfo = Zt),
                (yn = Pe.pcmSize),
                (Xt = Zt.data.length),
                (on = yn + Xt),
                (Pe.pcmSize = on),
                (dt = Pe.pcmDatas),
                (Rt = dt.length),
                dt.push(Zt.data),
                (it = Zt[ie]);
            }
            var wn = Math.round((on / it) * 1e3),
              mn = dt.length,
              Ft = sn.length,
              At = function () {
                for (
                  var Yn = Un ? 0 : -Xt, nr = dt[0] == null, zn = Rt;
                  zn < mn;
                  zn++
                ) {
                  var ii = dt[zn];
                  ii == null
                    ? (nr = 1)
                    : ((Yn += ii.length),
                      Pe && ii.length && he[me.type + "_encode"](Pe, ii));
                }
                if (nr && Pe) {
                  var zn = Sn;
                  for (sn[0] && (zn = 0); zn < Ft; zn++) sn[zn] = null;
                }
                nr && ((Yn = Un ? Xt : 0), (dt[0] = null)),
                  Pe ? (Pe.pcmSize += Yn) : (he.recSize += Yn);
              },
              Un = 0,
              nn = "rec.set.onProcess";
            try {
              Un = me.onProcess(dt, Pt, wn, it, Rt, At);
            } catch (la) {
              console.error(
                nn + ge("gFUF::回调出错是不允许的，需保证不会抛异常"),
                la
              );
            }
            var _i = Date.now() - Mt;
            if (
              (_i > 10 &&
                he.envInFirst - Mt > 1e3 &&
                he.CLog(nn + ge("2ghS::低性能，耗时{1}ms", 0, _i), 3),
              Un === !0)
            ) {
              for (var Or = 0, pn = Rt; pn < mn; pn++)
                dt[pn] == null ? (Or = 1) : (dt[pn] = new Int16Array(0));
              Or
                ? he.CLog(ge("ufqH::未进入异步前不能清除buffers"), 3)
                : Pe
                ? (Pe.pcmSize -= Xt)
                : (he.recSize -= Xt);
            } else At();
          },
          start: function () {
            var Y = this,
              ce = 1;
            if (
              (Y.set.sourceStream
                ? Y.Stream || (ce = 0)
                : S.IsOpen() || (ce = 0),
              !ce)
            ) {
              Y.CLog(ge("6WmN::start失败：未open"), 1);
              return;
            }
            var he = Y._streamCtx();
            if (
              (Y.CLog(
                ge("kLDN::start 开始录音，") +
                  Tt(he) +
                  " stream:" +
                  Y._streamTag
              ),
              Y._stop(),
              Y.envStart(null, he[ie]),
              (Y.state = 3),
              Y._SO && Y._SO + 1 != Y._S)
            ) {
              Y.CLog(ge("Bp2y::start被中断"), 3);
              return;
            }
            Y._SO = 0;
            var me = function () {
                Y.state == 3 && ((Y.state = 1), Y.resume());
              },
              Pe = "AudioContext resume: ";
            _t(
              he,
              function (it) {
                return it && Y.CLog(Pe + "wait..."), Y.state == 3;
              },
              function (it) {
                it && Y.CLog(Pe + he.state), me();
              },
              function (it) {
                Y.CLog(Pe + he.state + ge("upkE::，可能无法录音：") + it, 1),
                  me();
              }
            );
          },
          pause: function () {
            var Y = this,
              ce = Y._streamStore().Stream;
            Y.state &&
              ((Y.state = 2), Y.CLog("pause"), ce && delete ce._call[Y.id]);
          },
          resume: function () {
            var Y = this,
              ce = Y._streamStore().Stream,
              he = "resume",
              me = he + "(wait ctx)";
            if (Y.state == 3) Y.CLog(me);
            else if (Y.state) {
              (Y.state = 1),
                Y.CLog(he),
                Y.envResume(),
                ce &&
                  ((ce._call[Y.id] = function (it, Xe) {
                    Y.state == 1 && Y.envIn(it, Xe);
                  }),
                  Ze(ce));
              var Pe = Y._streamCtx();
              Pe &&
                _t(
                  Pe,
                  function (it) {
                    return it && Y.CLog(me + "..."), Y.state == 1;
                  },
                  function (it) {
                    it && Y.CLog(me + Pe.state), Ze(ce);
                  },
                  function (it) {
                    Y.CLog(me + Pe.state + "[err]" + it, 1);
                  }
                );
            }
          },
          _stop: function (Y) {
            var ce = this,
              he = ce.set;
            ce.isMock || ce._S++,
              ce.state && (ce.pause(), (ce.state = 0)),
              !Y &&
                ce[he.type + "_stop"] &&
                (ce[he.type + "_stop"](ce.engineCtx), (ce.engineCtx = 0));
          },
          stop: function (Y, ce, he) {
            var me = this,
              Pe = me.set,
              it,
              Xe = me.envInLast - me.envInFirst,
              Pt = Xe && me.buffers.length;
            me.CLog(
              ge("Xq4s::stop 和start时差:") +
                (Xe
                  ? Xe +
                    "ms " +
                    ge("3CQP::补偿:") +
                    me.envInFix +
                    "ms envIn:" +
                    Pt +
                    " fps:" +
                    ((Pt / Xe) * 1e3).toFixed(1)
                  : "-") +
                " stream:" +
                me._streamTag +
                " (" +
                I +
                ") LM:" +
                O
            );
            var dt = function () {
                me._stop(), he && me.close();
              },
              Rt = function (tn) {
                me.CLog(ge("u8JG::结束录音失败：") + tn, 1), ce && ce(tn), dt();
              },
              sn = function (tn, St, cn) {
                var Gt = "blob",
                  $t = "arraybuffer",
                  Dt = "dataType",
                  yn = "DefaultDataType",
                  Xt = me[Dt] || S[yn] || Gt,
                  on = Dt + "=" + Xt,
                  Zt = tn instanceof ArrayBuffer,
                  wn = 0,
                  mn = Zt ? tn.byteLength : tn.size;
                if (
                  (Xt == $t
                    ? Zt || (wn = 1)
                    : Xt == Gt
                    ? typeof Blob != "function"
                      ? (wn =
                          ge.G("NonBrowser-1", [on]) +
                          ge(
                            "1skY::，请设置{1}",
                            0,
                            B + "." + yn + '="' + $t + '"'
                          ))
                      : (Zt &&
                          (tn = new Blob([tn], {
                            type: St,
                          })),
                        tn instanceof Blob || (wn = 1),
                        (St = tn.type || St))
                    : (wn = ge.G("NotSupport-1", [on])),
                  me.CLog(
                    ge(
                      "Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",
                      0,
                      Date.now() - it,
                      cn,
                      mn
                    ) +
                      " " +
                      on +
                      "," +
                      St
                  ),
                  wn)
                ) {
                  Rt(
                    wn != 1
                      ? wn
                      : ge("Vkbd::{1}编码器返回的不是{2}", 0, Pe.type, Xt) +
                          ", " +
                          on
                  );
                  return;
                }
                if (Pe.takeoffEncodeChunk)
                  me.CLog(
                    ge(
                      "QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"
                    ),
                    3
                  );
                else if (mn < Math.max(50, cn / 5)) {
                  Rt(ge("Sz2H::生成的{1}无效", 0, Pe.type));
                  return;
                }
                Y && Y(tn, cn, St), dt();
              };
            if (!me.isMock) {
              var Sn = me.state == 3;
              if (!me.state || Sn) {
                Rt(
                  ge("wf9t::未开始录音") +
                    (Sn
                      ? ge("Dl2c::，开始录音前无用户交互导致AudioContext未运行")
                      : "")
                );
                return;
              }
            }
            me._stop(!0);
            var Mt = me.recSize;
            if (!Mt) {
              Rt(ge("Ltz3::未采集到录音"));
              return;
            }
            if (!me[Pe.type]) {
              Rt(
                ge(
                  "xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",
                  0,
                  Pe.type,
                  B
                )
              );
              return;
            }
            if (me.isMock) {
              var Bt = me.envCheck(
                me.mockEnvInfo || {
                  envName: "mock",
                  canProcess: !1,
                }
              );
              if (Bt) {
                Rt(ge("AxOH::录音错误：") + Bt);
                return;
              }
            }
            var at = me.engineCtx;
            if (me[Pe.type + "_complete"] && at) {
              var pn = Math.round((at.pcmSize / Pe[ie]) * 1e3);
              (it = Date.now()),
                me[Pe.type + "_complete"](
                  at,
                  function (tn, St) {
                    sn(tn, St, pn);
                  },
                  Rt
                );
              return;
            }
            if (((it = Date.now()), !me.buffers[0])) {
              Rt(ge("xkKd::音频buffers被释放"));
              return;
            }
            var He = S.SampleData(me.buffers, me[oe], Pe[ie]);
            Pe[ie] = He[ie];
            var un = He.data,
              pn = Math.round((un.length / Pe[ie]) * 1e3);
            me.CLog(
              ge(
                "CxeT::采样:{1} 花:{2}ms",
                0,
                Mt + "->" + un.length,
                Date.now() - it
              )
            ),
              setTimeout(function () {
                (it = Date.now()),
                  me[Pe.type](
                    un,
                    function (rn, tn) {
                      sn(rn, tn, pn);
                    },
                    function (rn) {
                      Rt(rn);
                    }
                  );
              });
          },
        });
    var st = function (Y, ce) {
        ce.pos || ((ce.pos = [0]), (ce.tracks = {}), (ce.bytes = []));
        var he = ce.tracks,
          me = [ce.pos[0]],
          Pe = function () {
            ce.pos[0] = me[0];
          },
          it = ce.bytes.length,
          Xe = new Uint8Array(it + Y.length);
        if ((Xe.set(ce.bytes), Xe.set(Y, it), (ce.bytes = Xe), !ce._ht)) {
          if (($e(Xe, me), Ke(Xe, me), !ct($e(Xe, me), [24, 83, 128, 103])))
            return;
          for ($e(Xe, me); me[0] < Xe.length; ) {
            var Pt = $e(Xe, me),
              dt = Ke(Xe, me),
              Rt = [0],
              sn = 0;
            if (!dt) return;
            if (ct(Pt, [22, 84, 174, 107])) {
              for (; Rt[0] < dt.length; ) {
                var Sn = $e(dt, Rt),
                  Mt = Ke(dt, Rt),
                  Bt = [0],
                  at = {
                    channels: 0,
                    sampleRate: 0,
                  };
                if (ct(Sn, [174]))
                  for (; Bt[0] < Mt.length; ) {
                    var He = $e(Mt, Bt),
                      un = Ke(Mt, Bt),
                      pn = [0];
                    if (ct(He, [215])) {
                      var rn = Lt(un);
                      (at.number = rn), (he[rn] = at);
                    } else if (ct(He, [131])) {
                      var rn = Lt(un);
                      rn == 1
                        ? (at.type = "video")
                        : rn == 2
                        ? ((at.type = "audio"),
                          sn || (ce.track0 = at),
                          (at.idx = sn++))
                        : (at.type = "Type-" + rn);
                    } else if (ct(He, [134])) {
                      for (var tn = "", St = 0; St < un.length; St++)
                        tn += String.fromCharCode(un[St]);
                      at.codec = tn;
                    } else if (ct(He, [225]))
                      for (; pn[0] < un.length; ) {
                        var cn = $e(un, pn),
                          Gt = Ke(un, pn);
                        if (ct(cn, [181])) {
                          var rn = 0,
                            $t = new Uint8Array(Gt.reverse()).buffer;
                          Gt.length == 4
                            ? (rn = new Float32Array($t)[0])
                            : Gt.length == 8
                            ? (rn = new Float64Array($t)[0])
                            : rt("WebM Track !Float", 1, Gt),
                            (at[ie] = Math.round(rn));
                        } else
                          ct(cn, [98, 100])
                            ? (at.bitDepth = Lt(Gt))
                            : ct(cn, [159]) && (at.channels = Lt(Gt));
                      }
                  }
              }
              (ce._ht = 1), rt("WebM Tracks", he), Pe();
              break;
            }
          }
        }
        var Dt = ce.track0;
        if (Dt) {
          if (
            (Dt.bitDepth == 16 &&
              /FLOAT/i.test(Dt.codec) &&
              ((Dt.bitDepth = 32), rt("WebM 16->32 bit", 3)),
            Dt[ie] != ce[ie] ||
              Dt.bitDepth != 32 ||
              Dt.channels < 1 ||
              !/(\b|_)PCM\b/i.test(Dt.codec))
          )
            return (
              (ce.bytes = []),
              ce.bad || rt("WebM Track Unexpected", 3, ce),
              (ce.bad = 1),
              -1
            );
          for (var yn = [], Xt = 0; me[0] < Xe.length; ) {
            var Sn = $e(Xe, me),
              Mt = Ke(Xe, me);
            if (!Mt) break;
            if (ct(Sn, [163])) {
              var on = Mt[0] & 15,
                at = he[on];
              if (!at) rt("WebM !Track" + on, 1, he);
              else if (at.idx === 0) {
                for (
                  var Zt = new Uint8Array(Mt.length - 4), St = 4;
                  St < Mt.length;
                  St++
                )
                  Zt[St - 4] = Mt[St];
                yn.push(Zt), (Xt += Zt.length);
              }
            }
            Pe();
          }
          if (Xt) {
            var wn = new Uint8Array(Xe.length - ce.pos[0]);
            wn.set(Xe.subarray(ce.pos[0])), (ce.bytes = wn), (ce.pos[0] = 0);
            for (
              var Zt = new Uint8Array(Xt), St = 0, mn = 0;
              St < yn.length;
              St++
            )
              Zt.set(yn[St], mn), (mn += yn[St].length);
            var $t = new Float32Array(Zt.buffer);
            if (Dt.channels > 1) {
              for (var Ft = [], St = 0; St < $t.length; )
                Ft.push($t[St]), (St += Dt.channels);
              $t = new Float32Array(Ft);
            }
            return $t;
          }
        }
      },
      ct = function (Y, ce) {
        if (!Y || Y.length != ce.length) return !1;
        if (Y.length == 1) return Y[0] == ce[0];
        for (var he = 0; he < Y.length; he++) if (Y[he] != ce[he]) return !1;
        return !0;
      },
      Lt = function (Y) {
        for (var ce = "", he = 0; he < Y.length; he++) {
          var me = Y[he];
          ce += (me < 16 ? "0" : "") + me.toString(16);
        }
        return parseInt(ce, 16) || 0;
      },
      $e = function (Y, ce, he) {
        var me = ce[0];
        if (!(me >= Y.length)) {
          var Pe = Y[me],
            it = ("0000000" + Pe.toString(2)).substr(-8),
            Xe = /^(0*1)(\d*)$/.exec(it);
          if (Xe) {
            var Pt = Xe[1].length,
              dt = [];
            if (!(me + Pt > Y.length)) {
              for (var Rt = 0; Rt < Pt; Rt++) (dt[Rt] = Y[me]), me++;
              return (
                he && (dt[0] = parseInt(Xe[2] || "0", 2)), (ce[0] = me), dt
              );
            }
          }
        }
      },
      Ke = function (Y, ce) {
        var he = $e(Y, ce, 1);
        if (he) {
          var me = Lt(he),
            Pe = ce[0],
            it = [];
          if (me < 2147483647) {
            if (Pe + me > Y.length) return;
            for (var Xe = 0; Xe < me; Xe++) (it[Xe] = Y[Pe]), Pe++;
          }
          return (ce[0] = Pe), it;
        }
      },
      Re = (S.i18n = {
        lang: "zh-CN",
        alias: {
          "zh-CN": "zh",
          "en-US": "en",
        },
        locales: {},
        data: {},
        put: function (Y, ce) {
          var he = B + ".i18n.put: ",
            me = Y.overwrite;
          me = me == null || me;
          var Pe = Y.lang;
          if (((Pe = Re.alias[Pe] || Pe), !Pe))
            throw new Error(he + "set.lang?");
          var it = Re.locales[Pe];
          it || ((it = {}), (Re.locales[Pe] = it));
          for (var Xe = /^([\w\-]+):/, Pt, dt = 0; dt < ce.length; dt++) {
            var sn = ce[dt];
            if (((Pt = Xe.exec(sn)), !Pt)) {
              rt(he + "'key:'? " + sn, 3, Y);
              continue;
            }
            var Rt = Pt[1],
              sn = sn.substr(Rt.length + 1);
            (!me && it[Rt]) || (it[Rt] = sn);
          }
        },
        get: function () {
          return Re.v_G.apply(null, arguments);
        },
        v_G: function (Y, ce, he) {
          (ce = ce || []), (he = he || Re.lang), (he = Re.alias[he] || he);
          var me = Re.locales[he],
            Pe = (me && me[Y]) || "";
          return !Pe && he != "zh"
            ? he == "en"
              ? Re.v_G(Y, ce, "zh")
              : Re.v_G(Y, ce, "en")
            : ((Re.lastLang = he),
              Pe == "=Empty"
                ? ""
                : Pe.replace(/\{(\d+)(\!?)\}/g, function (it, Xe, Pt) {
                    return (
                      (Xe = +Xe || 0),
                      (it = ce[Xe - 1]),
                      (Xe < 1 || Xe > ce.length) &&
                        ((it = "{?}"),
                        rt("i18n[" + Y + "] no {" + Xe + "}: " + Pe, 3)),
                      Pt ? "" : it
                    );
                  }));
        },
        $T: function () {
          return Re.v_T.apply(null, arguments);
        },
        v_T: function () {
          for (
            var Y = arguments,
              ce = "",
              he = [],
              me = 0,
              Pe = B + ".i18n.$T:",
              it = /^([\w\-]*):/,
              Xe,
              Pt = 0;
            Pt < Y.length;
            Pt++
          ) {
            var dt = Y[Pt];
            if (Pt == 0) {
              if (((Xe = it.exec(dt)), (ce = Xe && Xe[1]), !ce))
                throw new Error(Pe + "0 'key:'?");
              dt = dt.substr(ce.length + 1);
            }
            if (me === -1) he.push(dt);
            else {
              if (me) throw new Error(Pe + " bad args");
              if (dt === 0) me = -1;
              else if (m(dt)) {
                if (dt < 1) throw new Error(Pe + " bad args");
                me = dt;
              } else {
                var Rt = Pt == 1 ? "en" : Pt ? "" : "zh";
                if (
                  ((Xe = it.exec(dt)),
                  Xe &&
                    ((Rt = Xe[1] || Rt), (dt = dt.substr(Xe[1].length + 1))),
                  !Xe || !Rt)
                )
                  throw new Error(Pe + Pt + " 'lang:'?");
                Re.put(
                  {
                    lang: Rt,
                    overwrite: !1,
                  },
                  [ce + ":" + dt]
                );
              }
            }
          }
          return ce ? (me > 0 ? ce : Re.v_G(ce, he)) : "";
        },
      }),
      ge = Re.$T;
    (ge.G = Re.get),
      ge("NonBrowser-1::非浏览器环境，不支持{1}", 1),
      ge("IllegalArgs-1::参数错误：{1}", 1),
      ge("NeedImport-2::调用{1}需要先导入{2}", 2),
      ge("NotSupport-1::不支持：{1}", 1),
      (S.TrafficImgUrl = "//ia.51.la/go1?id=20469973&pvFlag=1");
    var je = (S.Traffic = function (ve) {
      if (o) {
        ve = ve ? "/" + B + "/Report/" + ve : "";
        var Y = S.TrafficImgUrl;
        if (Y) {
          var ce = S.Traffic,
            he = /^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href) || [],
            me = he[1] || "http://file/",
            Pe = (he[0] || me) + ve;
          if (
            (Y.indexOf("//") == 0 &&
              (/^https:/i.test(Pe) ? (Y = "https:" + Y) : (Y = "http:" + Y)),
            ve && (Y = Y + "&cu=" + encodeURIComponent(me + ve)),
            !ce[Pe])
          ) {
            ce[Pe] = 1;
            var it = new Image();
            (it.src = Y),
              rt(
                "Traffic Analysis Image: " +
                  (ve || B + ".TrafficImgUrl=" + S.TrafficImgUrl)
              );
          }
        }
      }
    });
    Ce && (rt(ge("8HO5::覆盖导入{1}", 0, B), 1), Ce.Destroy()), (i[B] = S);
  });
})(PO);
var TY = PO.exports;
const Gb = /* @__PURE__ */ bS(TY);
(function (r) {
  var i =
      (typeof window == "undefined" ? "undefined" : vt(window)) == "object" &&
      !!window.document,
    o = i ? window : Object,
    p = o.Recorder,
    m = p.i18n;
  r(p, m, m.$T, i);
})(function (r, i, o, p) {
  r.prototype.enc_pcm = {
    stable: !0,
    fast: !0,
    getTestMsg: function () {
      return o(
        "fWsN::pcm为未封装的原始音频数据，pcm音频文件无法直接播放，可用Recorder.pcm2wav()转码成wav播放；支持位数8位、16位（填在比特率里面），采样率取值无限制"
      );
    },
  };
  var m = function (B) {
    var ee = B.bitRate,
      oe = ee == 8 ? 8 : 16;
    ee != oe &&
      r.CLog(o("uMUJ::PCM Info: 不支持{1}位，已更新成{2}位", 0, ee, oe), 3),
      (B.bitRate = oe);
  };
  r.prototype.pcm = function (I, B, ee) {
    var oe = this.set;
    m(oe);
    var ie = S(I, oe.bitRate);
    B(ie.buffer, "audio/pcm");
  };
  var S = function (B, ee) {
    if (ee == 8)
      for (var oe = B.length, ie = new Uint8Array(oe), be = 0; be < oe; be++) {
        var Ie = (B[be] >> 8) + 128;
        ie[be] = Ie;
      }
    else {
      B = new Int16Array(B);
      var ie = new Uint8Array(B.buffer);
    }
    return ie;
  };
  (r.pcm2wav = function (I, B, ee) {
    I.blob ||
      (I = {
        blob: I,
      });
    var oe = I.blob,
      ie = I.sampleRate || 16e3,
      be = I.bitRate || 16;
    if (
      ((!I.sampleRate || !I.bitRate) &&
        r.CLog(o("KmRz::pcm2wav必须提供sampleRate和bitRate"), 3),
      !r.prototype.wav)
    ) {
      ee(o.G("NeedImport-2", ["pcm2wav", "src/engine/wav.js"]));
      return;
    }
    var Ie = function (de, _t) {
      var It;
      if (be == 8) {
        var Tt = new Uint8Array(de);
        It = new Int16Array(Tt.length);
        for (var Jt = 0; Jt < Tt.length; Jt++) It[Jt] = (Tt[Jt] - 128) << 8;
      } else It = new Int16Array(de);
      var yt = r({
        type: "wav",
        sampleRate: ie,
        bitRate: be,
      });
      _t && (yt.dataType = "arraybuffer"),
        yt.mock(It, ie).stop(function (Et, Ze, Vt) {
          B(Et, Ze, Vt);
        }, ee);
    };
    if (oe instanceof ArrayBuffer) Ie(oe, 1);
    else {
      var Ce = new FileReader();
      (Ce.onloadend = function () {
        Ie(Ce.result);
      }),
        Ce.readAsArrayBuffer(oe);
    }
  }),
    (r.prototype.pcm_envCheck = function (I, B) {
      return "";
    }),
    (r.prototype.pcm_start = function (I) {
      return (
        m(I),
        {
          set: I,
          memory: new Uint8Array(5e5),
          mOffset: 0,
        }
      );
    });
  var O = function (B, ee) {
    var oe = ee.length;
    if (B.mOffset + oe > B.memory.length) {
      var ie = new Uint8Array(B.memory.length + Math.max(5e5, oe));
      ie.set(B.memory.subarray(0, B.mOffset)), (B.memory = ie);
    }
    B.memory.set(ee, B.mOffset), (B.mOffset += oe);
  };
  (r.prototype.pcm_stop = function (I) {
    I && I.memory && (I.memory = null);
  }),
    (r.prototype.pcm_encode = function (I, B) {
      if (I && I.memory) {
        var ee = I.set,
          oe = S(B, ee.bitRate);
        ee.takeoffEncodeChunk ? ee.takeoffEncodeChunk(oe) : O(I, oe);
      }
    }),
    (r.prototype.pcm_complete = function (I, B, ee, oe) {
      if (I && I.memory) {
        oe && this.pcm_stop(I);
        var ie = I.memory.buffer.slice(0, I.mOffset);
        B(ie, "audio/pcm");
      } else ee(o("sDkA::pcm编码器未start"));
    });
});
var DO = function (i) {
  return new Promise(function (o, p) {
    var m = new FileReader();
    (m.onloadend = function () {
      var S = m.result,
        O = S.split(/base64,/),
        I = sa(O, 2),
        B = I[1];
      B ? o(B) : p("Base64 转换失败");
    }),
      (m.onerror = function () {
        return p(m.error);
      }),
      m.readAsDataURL(i);
  });
};
function M4(r, i) {
  var o = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var p = Object.getOwnPropertySymbols(r);
    i &&
      (p = p.filter(function (m) {
        return Object.getOwnPropertyDescriptor(r, m).enumerable;
      })),
      o.push.apply(o, p);
  }
  return o;
}
function U4(r) {
  for (var i = 1; i < arguments.length; i++) {
    var o = arguments[i] != null ? arguments[i] : {};
    i % 2
      ? M4(Object(o), !0).forEach(function (p) {
          lt(r, p, o[p]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(o))
      : M4(Object(o)).forEach(function (p) {
          Object.defineProperty(r, p, Object.getOwnPropertyDescriptor(o, p));
        });
  }
  return r;
}
var Eu = {
    SAMPLING_RATE: 16e3,
    //pcm缓冲的采样率
    BIT_RATE: 16,
    RECORD_TYPE: "pcm",
    SEND_INTERVAL: 200,
    MIN_FINAL_DATA_LENGTH: 2e3,
  },
  EY = function () {
    var i = null,
      o = {
        lastProcessTime: 0,
        chunk: null,
        transferNumber: 0,
        maxTransferNumber: 0,
        encoderBusy: 0,
      },
      p = !1,
      m = !1,
      S = function () {
        if (i) {
          var ie = Date.now();
          ie - o.lastProcessTime < Eu.SEND_INTERVAL ||
            (O(!1), (o.lastProcessTime = ie));
        }
      },
      O = function (ie) {
        if (i) {
          var be = Gb.SampleData(
            i.buffers,
            i.srcSampleRate,
            Eu.SAMPLING_RATE,
            o.chunk,
            {
              frameType: ie ? "" : Eu.RECORD_TYPE,
            }
          );
          if (
            (p || I(be),
            (o.chunk = be),
            be.data.length === 0 ||
              (ie && be.data.length < Eu.MIN_FINAL_DATA_LENGTH))
          ) {
            B(null, ie);
            return;
          }
          B(
            new Blob([o.chunk.data], {
              type: "audio/pcm",
            }),
            ie
          );
        }
      },
      I = function (ie) {
        for (
          var be,
            Ie =
              ((be = o.chunk) === null || be === void 0 ? void 0 : be.index) ||
              0,
            Ce = Ie;
          Ce < ie.index;
          Ce++
        )
          i && (i.buffers[Ce] = null);
      },
      B = /* @__PURE__ */ (function () {
        var oe = Wt(
          /* @__PURE__ */ Je.mark(function ie(be, Ie) {
            var Ce;
            return Je.wrap(
              function (de) {
                for (;;)
                  switch ((de.prev = de.next)) {
                    case 0:
                      if (
                        ((o = U4(
                          U4({}, o),
                          {},
                          {
                            transferNumber: o.transferNumber + 1,
                            maxTransferNumber: Math.max(
                              o.maxTransferNumber,
                              o.transferNumber + 1
                            ),
                          }
                        )),
                        !be)
                      ) {
                        de.next = 14;
                        break;
                      }
                      if (((de.prev = 2), !m)) {
                        de.next = 8;
                        break;
                      }
                      return (de.next = 6), DO(be);
                    case 6:
                      (Ce = de.sent), console.log(Ce);
                    case 8:
                      console.log(be), (de.next = 14);
                      break;
                    case 11:
                      (de.prev = 11),
                        (de.t0 = de.catch(2)),
                        console.error("Data transfer error:", de.t0);
                    case 14:
                      Ie &&
                        console.log(
                          "Final packet transferred: No.".concat(
                            o.transferNumber
                          )
                        );
                    case 15:
                    case "end":
                      return de.stop();
                  }
              },
              ie,
              null,
              [[2, 11]]
            );
          })
        );
        return function (be, Ie) {
          return oe.apply(this, arguments);
        };
      })(),
      ee = function () {
        var ie;
        (o = {
          lastProcessTime: 0,
          chunk: null,
          transferNumber: 0,
          maxTransferNumber: 0,
          encoderBusy: 0,
        }),
          (p = !1),
          (ie = i) === null || ie === void 0 || ie.close();
      };
    return {
      initialize: function () {
        return Wt(
          /* @__PURE__ */ Je.mark(function ie() {
            return Je.wrap(function (Ie) {
              for (;;)
                switch ((Ie.prev = Ie.next)) {
                  case 0:
                    return Ie.abrupt(
                      "return",
                      new Promise(function (Ce, We) {
                        (i = new Gb({
                          type: Eu.RECORD_TYPE,
                          sampleRate: Eu.SAMPLING_RATE,
                          bitRate: Eu.BIT_RATE,
                          onProcess: S,
                        })),
                          i.open(
                            function () {
                              return Ce();
                            },
                            function (de, _t) {
                              return We(
                                new Error(
                                  ""
                                    .concat(de, " (User denied: ")
                                    .concat(_t, ")")
                                )
                              );
                            }
                          );
                      })
                    );
                  case 1:
                  case "end":
                    return Ie.stop();
                }
            }, ie);
          })
        )();
      },
      startRecording: function () {
        if (!i || !Gb.IsOpen()) throw new Error("Recorder not initialized");
        (o = {
          lastProcessTime: 0,
          chunk: null,
          transferNumber: 0,
          maxTransferNumber: 0,
          encoderBusy: 0,
        }),
          i.start();
      },
      getPcmData: function () {
        if (o.chunk)
          return new Blob([o.chunk.data], {
            type: "audio/pcm",
          });
      },
      stopRecording: function () {
        return Wt(
          /* @__PURE__ */ Je.mark(function ie() {
            return Je.wrap(function (Ie) {
              for (;;)
                switch ((Ie.prev = Ie.next)) {
                  case 0:
                    if (i) {
                      Ie.next = 2;
                      break;
                    }
                    throw new Error("Recorder not initialized");
                  case 2:
                    return Ie.abrupt(
                      "return",
                      new Promise(function (Ce, We) {
                        var de;
                        (de = i) === null ||
                          de === void 0 ||
                          de.stop(
                            function (_t) {
                              return (
                                ee(), console.log("结束了", _t), Ce(_t), _t
                              );
                            },
                            function (_t) {
                              ee(), We(new Error(_t));
                            }
                          );
                      })
                    );
                  case 3:
                  case "end":
                    return Ie.stop();
                }
            }, ie);
          })
        )();
      },
      updateIsSendBase64ToAsr: function (ie) {
        m = ie;
      },
      updateIsEntireSectionSending: function (ie) {
        p = ie;
      },
    };
  },
  Ah = EY(),
  IY = qh(),
  V4 = IY.emit,
  RY = /* @__PURE__ */ (function () {
    var r = Wt(
      /* @__PURE__ */ Je.mark(function i() {
        var o,
          p,
          m,
          S,
          O,
          I,
          B,
          ee,
          oe,
          ie,
          be,
          Ie,
          Ce,
          We,
          de,
          _t,
          It,
          Tt,
          Jt,
          yt,
          Et,
          Ze,
          Vt,
          pt,
          nt;
        return Je.wrap(
          function (rt) {
            for (;;)
              switch ((rt.prev = rt.next)) {
                case 0:
                  return (
                    (rt.prev = 0),
                    (rt.next = 3),
                    Promise.resolve().then(() => oZ)
                  );
                case 3:
                  if (((o = rt.sent), (p = o.useTRTCWebSDK), p)) {
                    rt.next = 7;
                    break;
                  }
                  throw new Error("Web SDK store is not initialized");
                case 7:
                  return (
                    (m = p()),
                    (S = /* @__PURE__ */ (function () {
                      var jt = Wt(
                        /* @__PURE__ */ Je.mark(function ot(zt) {
                          return Je.wrap(
                            function (ct) {
                              for (;;)
                                switch ((ct.prev = ct.next)) {
                                  case 0:
                                    return (
                                      (ct.prev = 0),
                                      La().setVideoConfig(zt),
                                      (ct.next = 4),
                                      m.createSDK(zt)
                                    );
                                  case 4:
                                    return ct.abrupt("return", !0);
                                  case 7:
                                    return (
                                      (ct.prev = 7),
                                      (ct.t0 = ct.catch(0)),
                                      console.error("TRTC初始化失败", ct.t0),
                                      ct.abrupt("return", !1)
                                    );
                                  case 11:
                                  case "end":
                                    return ct.stop();
                                }
                            },
                            ot,
                            null,
                            [[0, 7]]
                          );
                        })
                      );
                      return function (zt) {
                        return jt.apply(this, arguments);
                      };
                    })()),
                    (O = /* @__PURE__ */ (function () {
                      var jt = Wt(
                        /* @__PURE__ */ Je.mark(function ot(zt) {
                          return Je.wrap(
                            function (ct) {
                              for (;;)
                                switch ((ct.prev = ct.next)) {
                                  case 0:
                                    if (zt) {
                                      ct.next = 3;
                                      break;
                                    }
                                    return (
                                      console.error("请输入房间号"),
                                      ct.abrupt("return")
                                    );
                                  case 3:
                                    return (
                                      La().setRoomId(zt),
                                      (ct.prev = 4),
                                      (ct.next = 7),
                                      m.enterRoom(zt)
                                    );
                                  case 7:
                                    return (ct.next = 9), bY();
                                  case 9:
                                    V4("onEnterRoomEvent", {
                                      result: !0,
                                    }),
                                      (ct.next = 16);
                                    break;
                                  case 12:
                                    (ct.prev = 12),
                                      (ct.t0 = ct.catch(4)),
                                      V4("onEnterRoomEvent", {
                                        result: !1,
                                      }),
                                      console.error("进入房间失败", ct.t0);
                                  case 16:
                                  case "end":
                                    return ct.stop();
                                }
                            },
                            ot,
                            null,
                            [[4, 12]]
                          );
                        })
                      );
                      return function (zt) {
                        return jt.apply(this, arguments);
                      };
                    })()),
                    (I = /* @__PURE__ */ (function () {
                      var jt = Wt(
                        /* @__PURE__ */ Je.mark(function ot(zt) {
                          var st;
                          return Je.wrap(function (Lt) {
                            for (;;)
                              switch ((Lt.prev = Lt.next)) {
                                case 0:
                                  return (
                                    console.log("播放本地音视频流", zt),
                                    (st = zt.view),
                                    (Lt.next = 4),
                                    m.playLocalMedia({
                                      view: st,
                                    })
                                  );
                                case 4:
                                case "end":
                                  return Lt.stop();
                              }
                          }, ot);
                        })
                      );
                      return function (zt) {
                        return jt.apply(this, arguments);
                      };
                    })()),
                    (B = /* @__PURE__ */ (function () {
                      var jt = Wt(
                        /* @__PURE__ */ Je.mark(function ot(zt) {
                          var st;
                          return Je.wrap(function (Lt) {
                            for (;;)
                              switch ((Lt.prev = Lt.next)) {
                                case 0:
                                  return (
                                    (st = zt.view),
                                    (Lt.next = 3),
                                    m.playRemoteVideo({
                                      view: st,
                                    })
                                  );
                                case 3:
                                case "end":
                                  return Lt.stop();
                              }
                          }, ot);
                        })
                      );
                      return function (zt) {
                        return jt.apply(this, arguments);
                      };
                    })()),
                    (ee = /* @__PURE__ */ (function () {
                      var jt = Wt(
                        /* @__PURE__ */ Je.mark(function ot(zt) {
                          var st;
                          return Je.wrap(
                            function (Lt) {
                              for (;;)
                                switch ((Lt.prev = Lt.next)) {
                                  case 0:
                                    return (
                                      (st = zt.view),
                                      (Lt.prev = 1),
                                      (Lt.next = 4),
                                      m.playScreenVideo({
                                        view: st,
                                      })
                                    );
                                  case 4:
                                    Lt.next = 9;
                                    break;
                                  case 6:
                                    (Lt.prev = 6),
                                      (Lt.t0 = Lt.catch(1)),
                                      console.error("playScreenVideo", Lt.t0);
                                  case 9:
                                  case "end":
                                    return Lt.stop();
                                }
                            },
                            ot,
                            null,
                            [[1, 6]]
                          );
                        })
                      );
                      return function (zt) {
                        return jt.apply(this, arguments);
                      };
                    })()),
                    (oe = /* @__PURE__ */ (function () {
                      var jt = Wt(
                        /* @__PURE__ */ Je.mark(function ot() {
                          return Je.wrap(function (st) {
                            for (;;)
                              switch ((st.prev = st.next)) {
                                case 0:
                                  return (
                                    (st.next = 2),
                                    Ah.updateIsEntireSectionSending(!0)
                                  );
                                case 2:
                                  return (
                                    console.log("开始采集"),
                                    (st.next = 5),
                                    Ah.initialize()
                                  );
                                case 5:
                                  Ah.startRecording();
                                case 6:
                                case "end":
                                  return st.stop();
                              }
                          }, ot);
                        })
                      );
                      return function () {
                        return jt.apply(this, arguments);
                      };
                    })()),
                    (ie = /* @__PURE__ */ (function () {
                      var jt = Wt(
                        /* @__PURE__ */ Je.mark(function ot() {
                          var zt, st, ct;
                          return Je.wrap(function ($e) {
                            for (;;)
                              switch (($e.prev = $e.next)) {
                                case 0:
                                  return (
                                    console.log("结束采集"),
                                    ($e.next = 3),
                                    Ah.stopRecording()
                                  );
                                case 3:
                                  if (((zt = $e.sent), !zt)) {
                                    $e.next = 11;
                                    break;
                                  }
                                  return ($e.next = 7), Ie(zt);
                                case 7:
                                  return (
                                    (st = $e.sent),
                                    (ct = st.content),
                                    console.log(ct, "content"),
                                    $e.abrupt("return", ct)
                                  );
                                case 11:
                                  Ah.updateIsEntireSectionSending(!1);
                                case 12:
                                case "end":
                                  return $e.stop();
                              }
                          }, ot);
                        })
                      );
                      return function () {
                        return jt.apply(this, arguments);
                      };
                    })()),
                    (be = /\/([^/]+)$/),
                    (Ie = /* @__PURE__ */ (function () {
                      var jt = Wt(
                        /* @__PURE__ */ Je.mark(function ot(zt) {
                          var st, ct;
                          return Je.wrap(function ($e) {
                            for (;;)
                              switch (($e.prev = $e.next)) {
                                case 0:
                                  return (
                                    console.log("Generated audio blob:", {
                                      size: "".concat(
                                        (zt.size / 1024).toFixed(2),
                                        "KB"
                                      ),
                                      duration: zt.type,
                                      url: URL.createObjectURL(zt),
                                    }),
                                    ($e.next = 3),
                                    DO(zt)
                                  );
                                case 3:
                                  if (
                                    ((st = $e.sent),
                                    (ct = zt.type.match(be)),
                                    ct)
                                  ) {
                                    $e.next = 7;
                                    break;
                                  }
                                  throw new Error("Unsupported audio format");
                                case 7:
                                  return $e.abrupt("return", {
                                    type: ct[1],
                                    content: st,
                                  });
                                case 8:
                                case "end":
                                  return $e.stop();
                              }
                          }, ot);
                        })
                      );
                      return function (zt) {
                        return jt.apply(this, arguments);
                      };
                    })()),
                    (Ce = m.isSupportedWebRTC),
                    (We = m.stopLocalMedia),
                    (de = m.muteLocalAudio),
                    (_t = m.muteLocalVideo),
                    (It = m.switchCamera),
                    (Tt = m.checkCameraDevice),
                    (Jt = m.getVideoSnapshot),
                    (yt = m.leaveRoom),
                    (Et = m.destroySDK),
                    (Ze = m.stopRemoteVideo),
                    (Vt = m.stopPlayScreenVideo),
                    (pt = m.mixAudioStreams),
                    (nt = m.stopMixAudioStreams),
                    rt.abrupt("return", {
                      isSupportedWebRTC: Ce,
                      createSDK: S,
                      enterRoom: O,
                      playLocalMedia: I,
                      stopLocalMedia: We,
                      playRemoteVideo: B,
                      playScreenVideo: ee,
                      stopPlayScreenVideo: Vt,
                      muteLocalAudio: de,
                      muteLocalVideo: _t,
                      switchCamera: It,
                      checkCameraDevice: Tt,
                      getVideoSnapshot: Jt,
                      leaveRoom: yt,
                      destroySDK: Et,
                      startRecordAudioFrame: oe,
                      removeRecordAudioFrame: ie,
                      stopRemoteVideo: Ze,
                      mixAudioStreams: pt,
                      stopMixAudioStreams: nt,
                    })
                  );
                case 21:
                  throw (
                    ((rt.prev = 21),
                    (rt.t0 = rt.catch(0)),
                    console.error("初始化 TRTCWebSDK 失败:", rt.t0),
                    rt.t0)
                  );
                case 25:
                case "end":
                  return rt.stop();
              }
          },
          i,
          null,
          [[0, 21]]
        );
      })
    );
    return function () {
      return r.apply(this, arguments);
    };
  })();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var gS = function (i, o) {
  return (
    (gS =
      Object.setPrototypeOf ||
      ({
        __proto__: [],
      } instanceof Array &&
        function (p, m) {
          p.__proto__ = m;
        }) ||
      function (p, m) {
        for (var S in m) m.hasOwnProperty(S) && (p[S] = m[S]);
      }),
    gS(i, o)
  );
};
function NO(r, i) {
  gS(r, i);
  function o() {
    this.constructor = r;
  }
  r.prototype =
    i === null ? Object.create(i) : ((o.prototype = i.prototype), new o());
}
function CY(r) {
  var i = typeof Symbol == "function" && r[Symbol.iterator],
    o = 0;
  return i
    ? i.call(r)
    : {
        next: function () {
          return (
            r && o >= r.length && (r = void 0),
            {
              value: r && r[o++],
              done: !r,
            }
          );
        },
      };
}
function AY(r, i) {
  var o = typeof Symbol == "function" && r[Symbol.iterator];
  if (!o) return r;
  var p = o.call(r),
    m,
    S = [],
    O;
  try {
    for (; (i === void 0 || i-- > 0) && !(m = p.next()).done; ) S.push(m.value);
  } catch (I) {
    O = {
      error: I,
    };
  } finally {
    try {
      m && !m.done && (o = p.return) && o.call(p);
    } finally {
      if (O) throw O.error;
    }
  }
  return S;
}
function xY() {
  for (var r = [], i = 0; i < arguments.length; i++)
    r = r.concat(AY(arguments[i]));
  return r;
}
var LO =
    /** @class */
    (function () {
      function r(i, o) {
        (this.target = o), (this.type = i);
      }
      return r;
    })(),
  OY =
    /** @class */
    (function (r) {
      NO(i, r);
      function i(o, p) {
        var m = r.call(this, "error", p) || this;
        return (m.message = o.message), (m.error = o), m;
      }
      return i;
    })(LO),
  PY =
    /** @class */
    (function (r) {
      NO(i, r);
      function i(o, p, m) {
        o === void 0 && (o = 1e3), p === void 0 && (p = "");
        var S = r.call(this, "close", m) || this;
        return (S.wasClean = !0), (S.code = o), (S.reason = p), S;
      }
      return i;
    })(LO);
/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */
var DY = function () {
    if (typeof WebSocket != "undefined") return WebSocket;
  },
  NY = function (i) {
    return typeof i != "undefined" && !!i && i.CLOSING === 2;
  },
  Iu = {
    maxReconnectionDelay: 1e4,
    minReconnectionDelay: 1e3 + Math.random() * 4e3,
    minUptime: 5e3,
    reconnectionDelayGrowFactor: 1.3,
    connectionTimeout: 4e3,
    maxRetries: 1 / 0,
    maxEnqueuedMessages: 1 / 0,
    startClosed: !1,
    debug: !1,
  },
  LY =
    /** @class */
    (function () {
      function r(i, o, p) {
        var m = this;
        p === void 0 && (p = {}),
          (this._listeners = {
            error: [],
            message: [],
            open: [],
            close: [],
          }),
          (this._retryCount = -1),
          (this._shouldReconnect = !0),
          (this._connectLock = !1),
          (this._binaryType = "blob"),
          (this._closeCalled = !1),
          (this._messageQueue = []),
          (this.onclose = null),
          (this.onerror = null),
          (this.onmessage = null),
          (this.onopen = null),
          (this._handleOpen = function (S) {
            m._debug("open event");
            var O = m._options.minUptime,
              I = O === void 0 ? Iu.minUptime : O;
            clearTimeout(m._connectTimeout),
              (m._uptimeTimeout = setTimeout(function () {
                return m._acceptOpen();
              }, I)),
              (m._ws.binaryType = m._binaryType),
              m._messageQueue.forEach(function (B) {
                return m._ws.send(B);
              }),
              (m._messageQueue = []),
              m.onopen && m.onopen(S),
              m._listeners.open.forEach(function (B) {
                return m._callEventListener(S, B);
              });
          }),
          (this._handleMessage = function (S) {
            m._debug("message event"),
              m.onmessage && m.onmessage(S),
              m._listeners.message.forEach(function (O) {
                return m._callEventListener(S, O);
              });
          }),
          (this._handleError = function (S) {
            m._debug("error event", S.message),
              m._disconnect(
                void 0,
                S.message === "TIMEOUT" ? "timeout" : void 0
              ),
              m.onerror && m.onerror(S),
              m._debug("exec error listeners"),
              m._listeners.error.forEach(function (O) {
                return m._callEventListener(S, O);
              }),
              m._connect();
          }),
          (this._handleClose = function (S) {
            m._debug("close event"),
              m._clearTimeouts(),
              m._shouldReconnect && m._connect(),
              m.onclose && m.onclose(S),
              m._listeners.close.forEach(function (O) {
                return m._callEventListener(S, O);
              });
          }),
          (this._url = i),
          (this._protocols = o),
          (this._options = p),
          this._options.startClosed && (this._shouldReconnect = !1),
          this._connect();
      }
      return (
        Object.defineProperty(r, "CONNECTING", {
          get: function () {
            return 0;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r, "OPEN", {
          get: function () {
            return 1;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r, "CLOSING", {
          get: function () {
            return 2;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r, "CLOSED", {
          get: function () {
            return 3;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "CONNECTING", {
          get: function () {
            return r.CONNECTING;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "OPEN", {
          get: function () {
            return r.OPEN;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "CLOSING", {
          get: function () {
            return r.CLOSING;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "CLOSED", {
          get: function () {
            return r.CLOSED;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "binaryType", {
          get: function () {
            return this._ws ? this._ws.binaryType : this._binaryType;
          },
          set: function (o) {
            (this._binaryType = o), this._ws && (this._ws.binaryType = o);
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "retryCount", {
          /**
           * Returns the number or connection retries
           */
          get: function () {
            return Math.max(this._retryCount, 0);
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "bufferedAmount", {
          /**
           * The number of bytes of data that have been queued using calls to send() but not yet
           * transmitted to the network. This value resets to zero once all queued data has been sent.
           * This value does not reset to zero when the connection is closed; if you keep calling send(),
           * this will continue to climb. Read only
           */
          get: function () {
            var o = this._messageQueue.reduce(function (p, m) {
              return (
                typeof m == "string"
                  ? (p += m.length)
                  : m instanceof Blob
                  ? (p += m.size)
                  : (p += m.byteLength),
                p
              );
            }, 0);
            return o + (this._ws ? this._ws.bufferedAmount : 0);
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "extensions", {
          /**
           * The extensions selected by the server. This is currently only the empty string or a list of
           * extensions as negotiated by the connection
           */
          get: function () {
            return this._ws ? this._ws.extensions : "";
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "protocol", {
          /**
           * A string indicating the name of the sub-protocol the server selected;
           * this will be one of the strings specified in the protocols parameter when creating the
           * WebSocket object
           */
          get: function () {
            return this._ws ? this._ws.protocol : "";
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "readyState", {
          /**
           * The current state of the connection; this is one of the Ready state constants
           */
          get: function () {
            return this._ws
              ? this._ws.readyState
              : this._options.startClosed
              ? r.CLOSED
              : r.CONNECTING;
          },
          enumerable: !0,
          configurable: !0,
        }),
        Object.defineProperty(r.prototype, "url", {
          /**
           * The URL as resolved by the constructor
           */
          get: function () {
            return this._ws ? this._ws.url : "";
          },
          enumerable: !0,
          configurable: !0,
        }),
        (r.prototype.close = function (i, o) {
          if (
            (i === void 0 && (i = 1e3),
            (this._closeCalled = !0),
            (this._shouldReconnect = !1),
            this._clearTimeouts(),
            !this._ws)
          ) {
            this._debug("close enqueued: no ws instance");
            return;
          }
          if (this._ws.readyState === this.CLOSED) {
            this._debug("close: already closed");
            return;
          }
          this._ws.close(i, o);
        }),
        (r.prototype.reconnect = function (i, o) {
          (this._shouldReconnect = !0),
            (this._closeCalled = !1),
            (this._retryCount = -1),
            !this._ws || this._ws.readyState === this.CLOSED
              ? this._connect()
              : (this._disconnect(i, o), this._connect());
        }),
        (r.prototype.send = function (i) {
          if (this._ws && this._ws.readyState === this.OPEN)
            this._debug("send", i), this._ws.send(i);
          else {
            var o = this._options.maxEnqueuedMessages,
              p = o === void 0 ? Iu.maxEnqueuedMessages : o;
            this._messageQueue.length < p &&
              (this._debug("enqueue", i), this._messageQueue.push(i));
          }
        }),
        (r.prototype.addEventListener = function (i, o) {
          this._listeners[i] && this._listeners[i].push(o);
        }),
        (r.prototype.dispatchEvent = function (i) {
          var o,
            p,
            m = this._listeners[i.type];
          if (m)
            try {
              for (var S = CY(m), O = S.next(); !O.done; O = S.next()) {
                var I = O.value;
                this._callEventListener(i, I);
              }
            } catch (B) {
              o = {
                error: B,
              };
            } finally {
              try {
                O && !O.done && (p = S.return) && p.call(S);
              } finally {
                if (o) throw o.error;
              }
            }
          return !0;
        }),
        (r.prototype.removeEventListener = function (i, o) {
          this._listeners[i] &&
            (this._listeners[i] = this._listeners[i].filter(function (p) {
              return p !== o;
            }));
        }),
        (r.prototype._debug = function () {
          for (var i = [], o = 0; o < arguments.length; o++)
            i[o] = arguments[o];
          this._options.debug && console.log.apply(console, xY(["RWS>"], i));
        }),
        (r.prototype._getNextDelay = function () {
          var i = this._options,
            o = i.reconnectionDelayGrowFactor,
            p = o === void 0 ? Iu.reconnectionDelayGrowFactor : o,
            m = i.minReconnectionDelay,
            S = m === void 0 ? Iu.minReconnectionDelay : m,
            O = i.maxReconnectionDelay,
            I = O === void 0 ? Iu.maxReconnectionDelay : O,
            B = 0;
          return (
            this._retryCount > 0 &&
              ((B = S * Math.pow(p, this._retryCount - 1)), B > I && (B = I)),
            this._debug("next delay", B),
            B
          );
        }),
        (r.prototype._wait = function () {
          var i = this;
          return new Promise(function (o) {
            setTimeout(o, i._getNextDelay());
          });
        }),
        (r.prototype._getNextUrl = function (i) {
          if (typeof i == "string") return Promise.resolve(i);
          if (typeof i == "function") {
            var o = i();
            if (typeof o == "string") return Promise.resolve(o);
            if (o.then) return o;
          }
          throw Error("Invalid URL");
        }),
        (r.prototype._connect = function () {
          var i = this;
          if (!(this._connectLock || !this._shouldReconnect)) {
            this._connectLock = !0;
            var o = this._options,
              p = o.maxRetries,
              m = p === void 0 ? Iu.maxRetries : p,
              S = o.connectionTimeout,
              O = S === void 0 ? Iu.connectionTimeout : S,
              I = o.WebSocket,
              B = I === void 0 ? DY() : I;
            if (this._retryCount >= m) {
              this._debug("max retries reached", this._retryCount, ">=", m);
              return;
            }
            if (
              (this._retryCount++,
              this._debug("connect", this._retryCount),
              this._removeListeners(),
              !NY(B))
            )
              throw Error("No valid WebSocket class provided");
            this._wait()
              .then(function () {
                return i._getNextUrl(i._url);
              })
              .then(function (ee) {
                i._closeCalled ||
                  (i._debug("connect", {
                    url: ee,
                    protocols: i._protocols,
                  }),
                  (i._ws = i._protocols ? new B(ee, i._protocols) : new B(ee)),
                  (i._ws.binaryType = i._binaryType),
                  (i._connectLock = !1),
                  i._addListeners(),
                  (i._connectTimeout = setTimeout(function () {
                    return i._handleTimeout();
                  }, O)));
              });
          }
        }),
        (r.prototype._handleTimeout = function () {
          this._debug("timeout event"),
            this._handleError(new OY(Error("TIMEOUT"), this));
        }),
        (r.prototype._disconnect = function (i, o) {
          if ((i === void 0 && (i = 1e3), this._clearTimeouts(), !!this._ws)) {
            this._removeListeners();
            try {
              this._ws.close(i, o), this._handleClose(new PY(i, o, this));
            } catch (p) {}
          }
        }),
        (r.prototype._acceptOpen = function () {
          this._debug("accept open"), (this._retryCount = 0);
        }),
        (r.prototype._callEventListener = function (i, o) {
          "handleEvent" in o ? o.handleEvent(i) : o(i);
        }),
        (r.prototype._removeListeners = function () {
          this._ws &&
            (this._debug("removeListeners"),
            this._ws.removeEventListener("open", this._handleOpen),
            this._ws.removeEventListener("close", this._handleClose),
            this._ws.removeEventListener("message", this._handleMessage),
            this._ws.removeEventListener("error", this._handleError));
        }),
        (r.prototype._addListeners = function () {
          this._ws &&
            (this._debug("addListeners"),
            this._ws.addEventListener("open", this._handleOpen),
            this._ws.addEventListener("close", this._handleClose),
            this._ws.addEventListener("message", this._handleMessage),
            this._ws.addEventListener("error", this._handleError));
        }),
        (r.prototype._clearTimeouts = function () {
          clearTimeout(this._connectTimeout), clearTimeout(this._uptimeTimeout);
        }),
        r
      );
    })(),
  MY = qh(),
  qb = MY.emit,
  Ru = {},
  F4 = {
    ABMessage: {
      interval: 1e4,
      message: "heartbeat",
    },
  },
  im = {
    ABMessage: void 0,
  },
  qS = function () {
    var i = /* @__PURE__ */ (function () {
        var S = Wt(
          /* @__PURE__ */ Je.mark(function O(I, B, ee) {
            return Je.wrap(function (ie) {
              for (;;)
                switch ((ie.prev = ie.next)) {
                  case 0:
                    return ie.abrupt(
                      "return",
                      new Promise(function (be, Ie) {
                        var Ce = Ru[I];
                        Ce && (clearInterval(im[I]), Ce.close());
                        var We = new LY(B);
                        (Ru[I] = We),
                          (We.onopen = function (de) {
                            console.log(
                              "WebSocket (".concat(I, ") 已开启!"),
                              "".concat(de.target.url)
                            ),
                              o(I),
                              be(void 0),
                              qb("connectionOpened", de);
                          }),
                          (We.onmessage = function (de) {
                            var _t = de.data;
                            console.log("收到 (".concat(I, ") 的消息:"), _t);
                            try {
                              var It = JSON.parse(_t);
                              ee(It),
                                I === "ABMessage" &&
                                  m(
                                    "ABMessage",
                                    JSON.stringify({
                                      type: "ack",
                                      msgId: It.msgId,
                                    })
                                  );
                            } catch (Tt) {}
                          }),
                          (We.onclose = function (de) {
                            console.log(
                              "WebSocket (".concat(I, ") 已关闭!"),
                              "".concat(de.code, ":").concat(de.reason)
                            ),
                              qb("connectionClosed", de),
                              Ie(de);
                          }),
                          (We.onerror = function (de) {
                            console.error(
                              "WebSocket (".concat(I, ") 发生错误!"),
                              de
                            ),
                              qb("connectionError", de),
                              Ie(de);
                          });
                      })
                    );
                  case 1:
                  case "end":
                    return ie.stop();
                }
            }, O);
          })
        );
        return function (I, B, ee) {
          return S.apply(this, arguments);
        };
      })(),
      o = function (O) {
        var I;
        clearTimeout(im[O]),
          (im[O] = setInterval(
            function () {
              var B, ee;
              (B = Ru[O]) === null ||
                B === void 0 ||
                B.send(
                  ((ee = F4[O]) === null || ee === void 0
                    ? void 0
                    : ee.message) || "heartbeat"
                );
            },
            (I = F4[O]) === null || I === void 0 ? void 0 : I.interval
          ));
      },
      p = function (O) {
        clearTimeout(im[O]);
        var I = Ru[O];
        I && (I.close(), delete Ru[O]);
      },
      m = function (O, I) {
        var B = Ru[O];
        B && (console.log("向 (".concat(O, ") 发送消息:"), I), B.send(I));
      };
    return {
      sockets: Ru,
      connect: i,
      disconnect: p,
      sendMessage: m,
    };
  },
  UY = qh(),
  xh = UY.emit,
  VY = function (i) {
    console.log("ABMessage 消息：", i);
    try {
      switch (i.type) {
        case "oidRegister":
          FY(i);
          break;
        case "wspush":
          jY(i);
          break;
        default:
          break;
      }
    } catch (o) {
      console.error("ABMessage 消息处理失败：", o);
    }
  },
  FY = function (i) {
    "code" in i.data
      ? console.log("用户注册失败：", i.data.code + " " + i.data.msg)
      : console.log(
          "用户注册成功：",
          i.data.childOidName + " " + i.data.parentIp
        );
  },
  jY = function (i) {
    var o = JSON.parse(i.data);
    switch (o.commandType) {
      case "show_video":
        xh("showVideoEvent", o);
        break;
      case "stop_video":
        xh("stopVideoEvent", o);
        break;
      case "putScreen":
        xh("putScreenEvent", o);
        break;
      case "stopPutScreen":
        xh("stopPutScreenEvent", o);
        break;
      default:
        xh("businessEvent", o);
        break;
    }
  },
  BY = /* @__PURE__ */ (function () {
    var r = Wt(
      /* @__PURE__ */ Je.mark(function i(o) {
        var p, m, S;
        return Je.wrap(function (I) {
          for (;;)
            switch ((I.prev = I.next)) {
              case 0:
                if ((La().setWebsocketConfig(o), !(!o.ip || !o.userId))) {
                  I.next = 4;
                  break;
                }
                return (
                  console.error("请输入正确的长链接的参数"),
                  I.abrupt("return", !1)
                );
              case 4:
                return (
                  (p = qS()),
                  (m = p.connect),
                  (S = p.sendMessage),
                  (I.next = 7),
                  m("ABMessage", o.ip, VY)
                );
              case 7:
                S(
                  "ABMessage",
                  JSON.stringify({
                    type: "oidRegister",
                    id: o.userId,
                  })
                );
              case 8:
              case "end":
                return I.stop();
            }
        }, i);
      })
    );
    return function (o) {
      return r.apply(this, arguments);
    };
  })(),
  zY = /* @__PURE__ */ (function () {
    var r = Wt(
      /* @__PURE__ */ Je.mark(function i() {
        var o, p;
        return Je.wrap(function (S) {
          for (;;)
            switch ((S.prev = S.next)) {
              case 0:
                return (
                  (o = qS()), (p = o.disconnect), (S.next = 3), p("ABMessage")
                );
              case 3:
              case "end":
                return S.stop();
            }
        }, i);
      })
    );
    return function () {
      return r.apply(this, arguments);
    };
  })(),
  HY = /* @__PURE__ */ (function () {
    var r = Wt(
      /* @__PURE__ */ Je.mark(function i(o) {
        var p, m;
        return Je.wrap(function (O) {
          for (;;)
            switch ((O.prev = O.next)) {
              case 0:
                (p = qS()),
                  (m = p.sendMessage),
                  m("ABMessage", JSON.stringify(o));
              case 2:
              case "end":
                return O.stop();
            }
        }, i);
      })
    );
    return function (o) {
      return r.apply(this, arguments);
    };
  })(),
  Tl = null;
function WY() {
  Tl || ((Tl = vY()), El(Tl));
}
function GY() {
  if ((Tl || WY(), !Tl)) throw new Error("Pinia 初始化失败");
  return Tl;
}
function j4(r, i) {
  var o = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var p = Object.getOwnPropertySymbols(r);
    i &&
      (p = p.filter(function (m) {
        return Object.getOwnPropertyDescriptor(r, m).enumerable;
      })),
      o.push.apply(o, p);
  }
  return o;
}
function B4(r) {
  for (var i = 1; i < arguments.length; i++) {
    var o = arguments[i] != null ? arguments[i] : {};
    i % 2
      ? j4(Object(o), !0).forEach(function (p) {
          lt(r, p, o[p]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(o))
      : j4(Object(o)).forEach(function (p) {
          Object.defineProperty(r, p, Object.getOwnPropertyDescriptor(o, p));
        });
  }
  return r;
}
GY();
var qm = qh(),
  qY = qm.on,
  KY = qm.off,
  JY = qm.emit,
  $Y = qm.once,
  ra = null,
  Kb = null;
function YY() {
  return _S.apply(this, arguments);
}
function _S() {
  return (
    (_S = Wt(
      /* @__PURE__ */ Je.mark(function r() {
        return Je.wrap(function (o) {
          for (;;)
            switch ((o.prev = o.next)) {
              case 0:
                if (!ra) {
                  o.next = 2;
                  break;
                }
                return o.abrupt("return");
              case 2:
                return (
                  Kb ||
                    (Kb = Wt(
                      /* @__PURE__ */ Je.mark(function p() {
                        var m;
                        return Je.wrap(function (O) {
                          for (;;)
                            switch ((O.prev = O.next)) {
                              case 0:
                                return (O.next = 2), RY();
                              case 2:
                                (m = O.sent),
                                  (ra = B4(
                                    B4({}, m),
                                    {},
                                    {
                                      // 媒体控制方法
                                      on: qY,
                                      off: KY,
                                      emit: JY,
                                      once: $Y,
                                      initABMessage: BY,
                                      closeABMessage: zY,
                                      sendMessage: HY,
                                    }
                                  ));
                              case 4:
                              case "end":
                                return O.stop();
                            }
                        }, p);
                      })
                    )()),
                  (o.next = 5),
                  Kb
                );
              case 5:
              case "end":
                return o.stop();
            }
        }, r);
      })
    )),
    _S.apply(this, arguments)
  );
}
function am() {
  return yS.apply(this, arguments);
}
function yS() {
  return (
    (yS = Wt(
      /* @__PURE__ */ Je.mark(function r() {
        return Je.wrap(function (o) {
          for (;;)
            switch ((o.prev = o.next)) {
              case 0:
                if (ra) {
                  o.next = 5;
                  break;
                }
                return (o.next = 3), YY();
              case 3:
                if (ra) {
                  o.next = 5;
                  break;
                }
                throw new Error("TRTCWebSDK 初始化失败");
              case 5:
              case "end":
                return o.stop();
            }
        }, r);
      })
    )),
    yS.apply(this, arguments)
  );
}
var ZY = [
    "initABMessage",
    "closeABMessage",
    "sendMessage",
    "enterRoom",
    "playLocalMedia",
    "playRemoteVideo",
    "stopRemoteVideo",
    "playScreenVideo",
    "stopPlayScreenVideo",
    "createSDK",
    "startRecordAudioFrame",
    "removeRecordAudioFrame",
    // "playSpeakerAudio",
    // "mixVideoStreams",
    // "stopMixVideoStreams",
    "mixAudioStreams",
    "stopMixAudioStreams",
    "isSupportedWebRTC",
    "stopLocalMedia",
    "muteLocalAudio",
    "muteLocalVideo",
    "switchCamera",
    "checkCameraDevice",
    "getVideoSnapshot",
    "leaveRoom",
    "destroySDK",
    "on",
    "off",
    "emit",
    "once",
    // 'test',
  ],
  om = {};
ZY.forEach(function (r) {
  r === "createSDK"
    ? (om[r] = /* @__PURE__ */ (function () {
        var i = Wt(
          /* @__PURE__ */ Je.mark(function o(p) {
            var m;
            return Je.wrap(function (O) {
              for (;;)
                switch ((O.prev = O.next)) {
                  case 0:
                    return (O.next = 2), am();
                  case 2:
                    if (!((m = ra) !== null && m !== void 0 && m.createSDK)) {
                      O.next = 8;
                      break;
                    }
                    return (O.next = 5), ra.createSDK(p);
                  case 5:
                    return O.abrupt("return", O.sent);
                  case 8:
                    throw new Error("方法 ".concat(r, " 不存在于 TRTCWebSDK"));
                  case 9:
                  case "end":
                    return O.stop();
                }
            }, o);
          })
        );
        return function (o) {
          return i.apply(this, arguments);
        };
      })())
    : r === "checkCameraDevice"
    ? (om[r] = /* @__PURE__ */ Wt(
        /* @__PURE__ */ Je.mark(function i() {
          var o;
          return Je.wrap(function (m) {
            for (;;)
              switch ((m.prev = m.next)) {
                case 0:
                  return (m.next = 2), am();
                case 2:
                  if (
                    !((o = ra) !== null && o !== void 0 && o.checkCameraDevice)
                  ) {
                    m.next = 8;
                    break;
                  }
                  return (m.next = 5), ra.checkCameraDevice();
                case 5:
                  return m.abrupt("return", m.sent);
                case 8:
                  throw new Error("方法 ".concat(r, " 不存在于 TRTCWebSDK"));
                case 9:
                case "end":
                  return m.stop();
              }
          }, i);
        })
      ))
    : r === "isSupportedWebRTC"
    ? (om[r] = /* @__PURE__ */ Wt(
        /* @__PURE__ */ Je.mark(function i() {
          var o;
          return Je.wrap(function (m) {
            for (;;)
              switch ((m.prev = m.next)) {
                case 0:
                  return (m.next = 2), am();
                case 2:
                  if (
                    !((o = ra) !== null && o !== void 0 && o.isSupportedWebRTC)
                  ) {
                    m.next = 8;
                    break;
                  }
                  return (m.next = 5), ra.isSupportedWebRTC();
                case 5:
                  return m.abrupt("return", m.sent);
                case 8:
                  throw new Error("方法 ".concat(r, " 不存在于 TRTCWebSDK"));
                case 9:
                case "end":
                  return m.stop();
              }
          }, i);
        })
      ))
    : (om[r] = /* @__PURE__ */ Wt(
        /* @__PURE__ */ Je.mark(function i() {
          var o,
            p,
            m = arguments;
          return Je.wrap(function (O) {
            for (;;)
              switch ((O.prev = O.next)) {
                case 0:
                  return (O.next = 2), am();
                case 2:
                  if (
                    ((p = (o = ra) === null || o === void 0 ? void 0 : o[r]),
                    typeof p != "function")
                  ) {
                    O.next = 7;
                    break;
                  }
                  return O.abrupt("return", p.apply(void 0, m));
                case 7:
                  throw new Error("方法 ".concat(r, " 不存在于 TRTCWebSDK"));
                case 8:
                case "end":
                  return O.stop();
              }
          }, i);
        })
      ));
});
var MO = { exports: {} };
(function (r, i) {
  (function (o, p) {
    r.exports = p();
  })(xb, function () {
    function o(u, e) {
      var n = Object.keys(u);
      if (Object.getOwnPropertySymbols) {
        var a = Object.getOwnPropertySymbols(u);
        e &&
          (a = a.filter(function (c) {
            return Object.getOwnPropertyDescriptor(u, c).enumerable;
          })),
          n.push.apply(n, a);
      }
      return n;
    }
    function p(u) {
      for (var e = 1; e < arguments.length; e++) {
        var n = arguments[e] != null ? arguments[e] : {};
        e % 2
          ? o(Object(n), !0).forEach(function (a) {
              ie(u, a, n[a]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(u, Object.getOwnPropertyDescriptors(n))
          : o(Object(n)).forEach(function (a) {
              Object.defineProperty(
                u,
                a,
                Object.getOwnPropertyDescriptor(n, a)
              );
            });
      }
      return u;
    }
    function m() {
      m = function () {
        return u;
      };
      var u = {},
        e = Object.prototype,
        n = e.hasOwnProperty,
        a = typeof Symbol == "function" ? Symbol : {},
        c = a.iterator || "@@iterator",
        s = a.asyncIterator || "@@asyncIterator",
        l = a.toStringTag || "@@toStringTag";
      function h(G, ne, H) {
        return (
          Object.defineProperty(G, ne, {
            value: H,
            enumerable: !0,
            configurable: !0,
            writable: !0,
          }),
          G[ne]
        );
      }
      try {
        h({}, "");
      } catch (G) {
        h = function (H, R, w) {
          return (H[R] = w);
        };
      }
      function v(G, ne, H, R) {
        var w = ne && ne.prototype instanceof b ? ne : b,
          q = Object.create(w.prototype),
          J = new D(R || []);
        return (
          (q._invoke = (function (re, pe, ye) {
            var Ne = "suspendedStart";
            return function (Ve, Kt) {
              if (Ne === "executing")
                throw new Error("Generator is already running");
              if (Ne === "completed") {
                if (Ve === "throw") throw Kt;
                return W();
              }
              for (ye.method = Ve, ye.arg = Kt; ; ) {
                var Ht = ye.delegate;
                if (Ht) {
                  var Qt = $(Ht, ye);
                  if (Qt) {
                    if (Qt === _) continue;
                    return Qt;
                  }
                }
                if (ye.method === "next") ye.sent = ye._sent = ye.arg;
                else if (ye.method === "throw") {
                  if (Ne === "suspendedStart")
                    throw ((Ne = "completed"), ye.arg);
                  ye.dispatchException(ye.arg);
                } else ye.method === "return" && ye.abrupt("return", ye.arg);
                Ne = "executing";
                var bn = g(re, pe, ye);
                if (bn.type === "normal") {
                  if (
                    ((Ne = ye.done ? "completed" : "suspendedYield"),
                    bn.arg === _)
                  )
                    continue;
                  return { value: bn.arg, done: ye.done };
                }
                bn.type === "throw" &&
                  ((Ne = "completed"),
                  (ye.method = "throw"),
                  (ye.arg = bn.arg));
              }
            };
          })(G, H, J)),
          q
        );
      }
      function g(G, ne, H) {
        try {
          return { type: "normal", arg: G.call(ne, H) };
        } catch (R) {
          return { type: "throw", arg: R };
        }
      }
      u.wrap = v;
      var _ = {};
      function b() {}
      function C() {}
      function N() {}
      var z = {};
      h(z, c, function () {
        return this;
      });
      var F = Object.getPrototypeOf,
        U = F && F(F(M([])));
      U && U !== e && n.call(U, c) && (z = U);
      var E = (N.prototype = b.prototype = Object.create(z));
      function A(G) {
        ["next", "throw", "return"].forEach(function (ne) {
          h(G, ne, function (H) {
            return this._invoke(ne, H);
          });
        });
      }
      function L(G, ne) {
        function H(w, q, J, re) {
          var pe = g(G[w], G, q);
          if (pe.type !== "throw") {
            var ye = pe.arg,
              Ne = ye.value;
            return Ne && vt(Ne) == "object" && n.call(Ne, "__await")
              ? ne.resolve(Ne.__await).then(
                  function (Ve) {
                    H("next", Ve, J, re);
                  },
                  function (Ve) {
                    H("throw", Ve, J, re);
                  }
                )
              : ne.resolve(Ne).then(
                  function (Ve) {
                    (ye.value = Ve), J(ye);
                  },
                  function (Ve) {
                    return H("throw", Ve, J, re);
                  }
                );
          }
          re(pe.arg);
        }
        var R;
        this._invoke = function (w, q) {
          function J() {
            return new ne(function (re, pe) {
              H(w, q, re, pe);
            });
          }
          return (R = R ? R.then(J, J) : J());
        };
      }
      function $(G, ne) {
        var H = G.iterator[ne.method];
        if (H === void 0) {
          if (((ne.delegate = null), ne.method === "throw")) {
            if (
              G.iterator.return &&
              ((ne.method = "return"),
              (ne.arg = void 0),
              $(G, ne),
              ne.method === "throw")
            )
              return _;
            (ne.method = "throw"),
              (ne.arg = new TypeError(
                "The iterator does not provide a 'throw' method"
              ));
          }
          return _;
        }
        var R = g(H, G.iterator, ne.arg);
        if (R.type === "throw")
          return (
            (ne.method = "throw"), (ne.arg = R.arg), (ne.delegate = null), _
          );
        var w = R.arg;
        return w
          ? w.done
            ? ((ne[G.resultName] = w.value),
              (ne.next = G.nextLoc),
              ne.method !== "return" &&
                ((ne.method = "next"), (ne.arg = void 0)),
              (ne.delegate = null),
              _)
            : w
          : ((ne.method = "throw"),
            (ne.arg = new TypeError("iterator result is not an object")),
            (ne.delegate = null),
            _);
      }
      function te(G) {
        var ne = { tryLoc: G[0] };
        1 in G && (ne.catchLoc = G[1]),
          2 in G && ((ne.finallyLoc = G[2]), (ne.afterLoc = G[3])),
          this.tryEntries.push(ne);
      }
      function X(G) {
        var ne = G.completion || {};
        (ne.type = "normal"), delete ne.arg, (G.completion = ne);
      }
      function D(G) {
        (this.tryEntries = [{ tryLoc: "root" }]),
          G.forEach(te, this),
          this.reset(!0);
      }
      function M(G) {
        if (G) {
          var ne = G[c];
          if (ne) return ne.call(G);
          if (typeof G.next == "function") return G;
          if (!isNaN(G.length)) {
            var H = -1,
              R = function w() {
                for (; ++H < G.length; )
                  if (n.call(G, H)) return (w.value = G[H]), (w.done = !1), w;
                return (w.value = void 0), (w.done = !0), w;
              };
            return (R.next = R);
          }
        }
        return { next: W };
      }
      function W() {
        return { value: void 0, done: !0 };
      }
      return (
        (C.prototype = N),
        h(E, "constructor", N),
        h(N, "constructor", C),
        (C.displayName = h(N, l, "GeneratorFunction")),
        (u.isGeneratorFunction = function (G) {
          var ne = typeof G == "function" && G.constructor;
          return (
            !!ne &&
            (ne === C || (ne.displayName || ne.name) === "GeneratorFunction")
          );
        }),
        (u.mark = function (G) {
          return (
            Object.setPrototypeOf
              ? Object.setPrototypeOf(G, N)
              : ((G.__proto__ = N), h(G, l, "GeneratorFunction")),
            (G.prototype = Object.create(E)),
            G
          );
        }),
        (u.awrap = function (G) {
          return { __await: G };
        }),
        A(L.prototype),
        h(L.prototype, s, function () {
          return this;
        }),
        (u.AsyncIterator = L),
        (u.async = function (G, ne, H, R, w) {
          w === void 0 && (w = Promise);
          var q = new L(v(G, ne, H, R), w);
          return u.isGeneratorFunction(ne)
            ? q
            : q.next().then(function (J) {
                return J.done ? J.value : q.next();
              });
        }),
        A(E),
        h(E, l, "Generator"),
        h(E, c, function () {
          return this;
        }),
        h(E, "toString", function () {
          return "[object Generator]";
        }),
        (u.keys = function (G) {
          var ne = [];
          for (var H in G) ne.push(H);
          return (
            ne.reverse(),
            function R() {
              for (; ne.length; ) {
                var w = ne.pop();
                if (w in G) return (R.value = w), (R.done = !1), R;
              }
              return (R.done = !0), R;
            }
          );
        }),
        (u.values = M),
        (D.prototype = {
          constructor: D,
          reset: function (ne) {
            if (
              ((this.prev = 0),
              (this.next = 0),
              (this.sent = this._sent = void 0),
              (this.done = !1),
              (this.delegate = null),
              (this.method = "next"),
              (this.arg = void 0),
              this.tryEntries.forEach(X),
              !ne)
            )
              for (var H in this)
                H.charAt(0) === "t" &&
                  n.call(this, H) &&
                  !isNaN(+H.slice(1)) &&
                  (this[H] = void 0);
          },
          stop: function () {
            this.done = !0;
            var ne = this.tryEntries[0].completion;
            if (ne.type === "throw") throw ne.arg;
            return this.rval;
          },
          dispatchException: function (ne) {
            if (this.done) throw ne;
            var H = this;
            function R(ye, Ne) {
              return (
                (J.type = "throw"),
                (J.arg = ne),
                (H.next = ye),
                Ne && ((H.method = "next"), (H.arg = void 0)),
                !!Ne
              );
            }
            for (var w = this.tryEntries.length - 1; w >= 0; --w) {
              var q = this.tryEntries[w],
                J = q.completion;
              if (q.tryLoc === "root") return R("end");
              if (q.tryLoc <= this.prev) {
                var re = n.call(q, "catchLoc"),
                  pe = n.call(q, "finallyLoc");
                if (re && pe) {
                  if (this.prev < q.catchLoc) return R(q.catchLoc, !0);
                  if (this.prev < q.finallyLoc) return R(q.finallyLoc);
                } else if (re) {
                  if (this.prev < q.catchLoc) return R(q.catchLoc, !0);
                } else {
                  if (!pe)
                    throw new Error("try statement without catch or finally");
                  if (this.prev < q.finallyLoc) return R(q.finallyLoc);
                }
              }
            }
          },
          abrupt: function (ne, H) {
            for (var R = this.tryEntries.length - 1; R >= 0; --R) {
              var w = this.tryEntries[R];
              if (
                w.tryLoc <= this.prev &&
                n.call(w, "finallyLoc") &&
                this.prev < w.finallyLoc
              ) {
                var q = w;
                break;
              }
            }
            q &&
              (ne === "break" || ne === "continue") &&
              q.tryLoc <= H &&
              H <= q.finallyLoc &&
              (q = null);
            var J = q ? q.completion : {};
            return (
              (J.type = ne),
              (J.arg = H),
              q
                ? ((this.method = "next"), (this.next = q.finallyLoc), _)
                : this.complete(J)
            );
          },
          complete: function (ne, H) {
            if (ne.type === "throw") throw ne.arg;
            return (
              ne.type === "break" || ne.type === "continue"
                ? (this.next = ne.arg)
                : ne.type === "return"
                ? ((this.rval = this.arg = ne.arg),
                  (this.method = "return"),
                  (this.next = "end"))
                : ne.type === "normal" && H && (this.next = H),
              _
            );
          },
          finish: function (ne) {
            for (var H = this.tryEntries.length - 1; H >= 0; --H) {
              var R = this.tryEntries[H];
              if (R.finallyLoc === ne)
                return this.complete(R.completion, R.afterLoc), X(R), _;
            }
          },
          catch: function (ne) {
            for (var H = this.tryEntries.length - 1; H >= 0; --H) {
              var R = this.tryEntries[H];
              if (R.tryLoc === ne) {
                var w = R.completion;
                if (w.type === "throw") {
                  var q = w.arg;
                  X(R);
                }
                return q;
              }
            }
            throw new Error("illegal catch attempt");
          },
          delegateYield: function (ne, H, R) {
            return (
              (this.delegate = { iterator: M(ne), resultName: H, nextLoc: R }),
              this.method === "next" && (this.arg = void 0),
              _
            );
          },
        }),
        u
      );
    }
    function S(u) {
      return (
        (S =
          typeof Symbol == "function" && vt(Symbol.iterator) == "symbol"
            ? function (e) {
                return vt(e);
              }
            : function (e) {
                return e &&
                  typeof Symbol == "function" &&
                  e.constructor === Symbol &&
                  e !== Symbol.prototype
                  ? "symbol"
                  : vt(e);
              }),
        S(u)
      );
    }
    function O(u, e, n, a, c, s, l) {
      try {
        var h = u[s](l),
          v = h.value;
      } catch (g) {
        return void n(g);
      }
      h.done ? e(v) : Promise.resolve(v).then(a, c);
    }
    function I(u) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (a, c) {
          var s = u.apply(e, n);
          function l(v) {
            O(s, a, c, l, h, "next", v);
          }
          function h(v) {
            O(s, a, c, l, h, "throw", v);
          }
          l(void 0);
        });
      };
    }
    function B(u, e) {
      if (!(u instanceof e))
        throw new TypeError("Cannot call a class as a function");
    }
    function ee(u, e) {
      for (var n = 0; n < e.length; n++) {
        var a = e[n];
        (a.enumerable = a.enumerable || !1),
          (a.configurable = !0),
          "value" in a && (a.writable = !0),
          Object.defineProperty(u, a.key, a);
      }
    }
    function oe(u, e, n) {
      return (
        e && ee(u.prototype, e),
        n && ee(u, n),
        Object.defineProperty(u, "prototype", { writable: !1 }),
        u
      );
    }
    function ie(u, e, n) {
      return (
        e in u
          ? Object.defineProperty(u, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (u[e] = n),
        u
      );
    }
    function be(u, e) {
      if (typeof e != "function" && e !== null)
        throw new TypeError(
          "Super expression must either be null or a function"
        );
      (u.prototype = Object.create(e && e.prototype, {
        constructor: { value: u, writable: !0, configurable: !0 },
      })),
        Object.defineProperty(u, "prototype", { writable: !1 }),
        e && Ce(u, e);
    }
    function Ie(u) {
      return (
        (Ie = Object.setPrototypeOf
          ? Object.getPrototypeOf.bind()
          : function (e) {
              return e.__proto__ || Object.getPrototypeOf(e);
            }),
        Ie(u)
      );
    }
    function Ce(u, e) {
      return (
        (Ce = Object.setPrototypeOf
          ? Object.setPrototypeOf.bind()
          : function (n, a) {
              return (n.__proto__ = a), n;
            }),
        Ce(u, e)
      );
    }
    function We() {
      if (
        typeof Reflect == "undefined" ||
        !Reflect.construct ||
        Reflect.construct.sham
      )
        return !1;
      if (typeof Proxy == "function") return !0;
      try {
        return (
          Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          ),
          !0
        );
      } catch (u) {
        return !1;
      }
    }
    function de(u, e, n) {
      return (
        (de = We()
          ? Reflect.construct.bind()
          : function (a, c, s) {
              var l = [null];
              l.push.apply(l, c);
              var h = new (Function.bind.apply(a, l))();
              return s && Ce(h, s.prototype), h;
            }),
        de.apply(null, arguments)
      );
    }
    function _t(u) {
      var e = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
      return (
        (_t = function (a) {
          if (
            a === null ||
            ((c = a), Function.toString.call(c).indexOf("[native code]") === -1)
          )
            return a;
          var c;
          if (typeof a != "function")
            throw new TypeError(
              "Super expression must either be null or a function"
            );
          if (e !== void 0) {
            if (e.has(a)) return e.get(a);
            e.set(a, s);
          }
          function s() {
            return de(a, arguments, Ie(this).constructor);
          }
          return (
            (s.prototype = Object.create(a.prototype, {
              constructor: {
                value: s,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
            Ce(s, a)
          );
        }),
        _t(u)
      );
    }
    function It(u, e) {
      if (e && (vt(e) == "object" || typeof e == "function")) return e;
      if (e !== void 0)
        throw new TypeError(
          "Derived constructors may only return object or undefined"
        );
      return (function (n) {
        if (n === void 0)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called"
          );
        return n;
      })(u);
    }
    function Tt(u) {
      var e = We();
      return function () {
        var n,
          a = Ie(u);
        if (e) {
          var c = Ie(this).constructor;
          n = Reflect.construct(a, arguments, c);
        } else n = a.apply(this, arguments);
        return It(this, n);
      };
    }
    function Jt(u, e) {
      for (
        ;
        !Object.prototype.hasOwnProperty.call(u, e) && (u = Ie(u)) !== null;

      );
      return u;
    }
    function yt() {
      return (
        (yt =
          typeof Reflect != "undefined" && Reflect.get
            ? Reflect.get.bind()
            : function (u, e, n) {
                var a = Jt(u, e);
                if (a) {
                  var c = Object.getOwnPropertyDescriptor(a, e);
                  return c.get
                    ? c.get.call(arguments.length < 3 ? u : n)
                    : c.value;
                }
              }),
        yt.apply(this, arguments)
      );
    }
    function Et(u, e) {
      return (
        (function (n) {
          if (Array.isArray(n)) return n;
        })(u) ||
        (function (n, a) {
          var c =
            n == null
              ? null
              : (typeof Symbol != "undefined" && n[Symbol.iterator]) ||
                n["@@iterator"];
          if (c != null) {
            var s,
              l,
              h = [],
              v = !0,
              g = !1;
            try {
              for (
                c = c.call(n);
                !(v = (s = c.next()).done) &&
                (h.push(s.value), !a || h.length !== a);
                v = !0
              );
            } catch (_) {
              (g = !0), (l = _);
            } finally {
              try {
                v || c.return == null || c.return();
              } finally {
                if (g) throw l;
              }
            }
            return h;
          }
        })(u, e) ||
        Vt(u, e) ||
        (function () {
          throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
        })()
      );
    }
    function Ze(u) {
      return (
        (function (e) {
          if (Array.isArray(e)) return pt(e);
        })(u) ||
        (function (e) {
          if (
            (typeof Symbol != "undefined" && e[Symbol.iterator] != null) ||
            e["@@iterator"] != null
          )
            return Array.from(e);
        })(u) ||
        Vt(u) ||
        (function () {
          throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
        })()
      );
    }
    function Vt(u, e) {
      if (u) {
        if (typeof u == "string") return pt(u, e);
        var n = Object.prototype.toString.call(u).slice(8, -1);
        return (
          n === "Object" && u.constructor && (n = u.constructor.name),
          n === "Map" || n === "Set"
            ? Array.from(u)
            : n === "Arguments" ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? pt(u, e)
            : void 0
        );
      }
    }
    function pt(u, e) {
      (e == null || e > u.length) && (e = u.length);
      for (var n = 0, a = new Array(e); n < e; n++) a[n] = u[n];
      return a;
    }
    function nt(u, e) {
      var n =
        (typeof Symbol != "undefined" && u[Symbol.iterator]) || u["@@iterator"];
      if (!n) {
        if (
          Array.isArray(u) ||
          (n = Vt(u)) ||
          (e && u && typeof u.length == "number")
        ) {
          n && (u = n);
          var a = 0,
            c = function () {};
          return {
            s: c,
            n: function () {
              return a >= u.length ? { done: !0 } : { done: !1, value: u[a++] };
            },
            e: function (g) {
              throw g;
            },
            f: c,
          };
        }
        throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
      }
      var s,
        l = !0,
        h = !1;
      return {
        s: function () {
          n = n.call(u);
        },
        n: function () {
          var g = n.next();
          return (l = g.done), g;
        },
        e: function (g) {
          (h = !0), (s = g);
        },
        f: function () {
          try {
            l || n.return == null || n.return();
          } finally {
            if (h) throw s;
          }
        },
      };
    }
    function Be(u, e, n, a, c) {
      var s = {};
      return (
        Object.keys(a).forEach(function (l) {
          s[l] = a[l];
        }),
        (s.enumerable = !!s.enumerable),
        (s.configurable = !!s.configurable),
        ("value" in s || s.initializer) && (s.writable = !0),
        (s = n
          .slice()
          .reverse()
          .reduce(function (l, h) {
            return h(u, e, l) || l;
          }, s)),
        c &&
          s.initializer !== void 0 &&
          ((s.value = s.initializer ? s.initializer.call(c) : void 0),
          (s.initializer = void 0)),
        s.initializer === void 0 &&
          (Object.defineProperty(u, e, s), (s = null)),
        s
      );
    }
    var rt =
        typeof globalThis != "undefined"
          ? globalThis
          : typeof window != "undefined"
          ? window
          : typeof xb != "undefined"
          ? xb
          : typeof self != "undefined"
          ? self
          : {},
      jt = function (e) {
        return e && e.Math == Math && e;
      },
      ot =
        jt(
          (typeof globalThis == "undefined" ? "undefined" : vt(globalThis)) ==
            "object" && globalThis
        ) ||
        jt(
          (typeof window == "undefined" ? "undefined" : vt(window)) ==
            "object" && window
        ) ||
        jt(
          (typeof self == "undefined" ? "undefined" : vt(self)) == "object" &&
            self
        ) ||
        jt(vt(rt) == "object" && rt) ||
        (function () {
          return this;
        })() ||
        Function("return this")(),
      zt = {},
      st = function (e) {
        try {
          return !!e();
        } catch (n) {
          return !0;
        }
      },
      ct = !st(function () {
        return (
          Object.defineProperty({}, 1, {
            get: function () {
              return 7;
            },
          })[1] != 7
        );
      }),
      Lt = !st(function () {
        var u = function () {}.bind();
        return typeof u != "function" || u.hasOwnProperty("prototype");
      }),
      $e = Lt,
      Ke = Function.prototype.call,
      Re = $e
        ? Ke.bind(Ke)
        : function () {
            return Ke.apply(Ke, arguments);
          },
      ge = {},
      je = {}.propertyIsEnumerable,
      ve = Object.getOwnPropertyDescriptor,
      Y = ve && !je.call({ 1: 2 }, 1);
    ge.f = Y
      ? function (u) {
          var e = ve(this, u);
          return !!e && e.enumerable;
        }
      : je;
    var ce,
      he,
      me = function (e, n) {
        return {
          enumerable: !(1 & e),
          configurable: !(2 & e),
          writable: !(4 & e),
          value: n,
        };
      },
      Pe = Lt,
      it = Function.prototype,
      Xe = it.call,
      Pt = Pe && it.bind.bind(Xe, Xe),
      dt = function (e) {
        return Pe
          ? Pt(e)
          : function () {
              return Xe.apply(e, arguments);
            };
      },
      Rt = dt,
      sn = Rt({}.toString),
      Sn = Rt("".slice),
      Mt = function (e) {
        return Sn(sn(e), 8, -1);
      },
      Bt = Mt,
      at = dt,
      He = function (e) {
        if (Bt(e) === "Function") return at(e);
      },
      un = st,
      pn = Mt,
      rn = Object,
      tn = He("".split),
      St = un(function () {
        return !rn("z").propertyIsEnumerable(0);
      })
        ? function (u) {
            return pn(u) == "String" ? tn(u, "") : rn(u);
          }
        : rn,
      cn = function (e) {
        return e == null;
      },
      Gt = cn,
      $t = TypeError,
      Dt = function (e) {
        if (Gt(e)) throw $t("Can't call method on " + e);
        return e;
      },
      yn = St,
      Xt = Dt,
      on = function (e) {
        return yn(Xt(e));
      },
      Zt =
        (typeof document == "undefined" ? "undefined" : vt(document)) ==
          "object" && document.all,
      wn = { all: Zt, IS_HTMLDDA: Zt === void 0 && Zt !== void 0 },
      mn = wn.all,
      Ft = wn.IS_HTMLDDA
        ? function (u) {
            return typeof u == "function" || u === mn;
          }
        : function (u) {
            return typeof u == "function";
          },
      At = Ft,
      Un = wn.all,
      nn = wn.IS_HTMLDDA
        ? function (u) {
            return vt(u) == "object" ? u !== null : At(u) || u === Un;
          }
        : function (u) {
            return vt(u) == "object" ? u !== null : At(u);
          },
      _i = ot,
      Or = Ft,
      la = function (e) {
        return Or(e) ? e : void 0;
      },
      Yn = function (e, n) {
        return arguments.length < 2 ? la(_i[e]) : _i[e] && _i[e][n];
      },
      nr = He({}.isPrototypeOf),
      zn = Yn("navigator", "userAgent") || "",
      ii = ot,
      Ua = zn,
      wr = ii.process,
      Kh = ii.Deno,
      Jh = (wr && wr.versions) || (Kh && Kh.version),
      Al = Jh && Jh.v8;
    Al &&
      (he = (ce = Al.split("."))[0] > 0 && ce[0] < 4 ? 1 : +(ce[0] + ce[1])),
      !he &&
        Ua &&
        (!(ce = Ua.match(/Edge\/(\d+)/)) || ce[1] >= 74) &&
        (ce = Ua.match(/Chrome\/(\d+)/)) &&
        (he = +ce[1]);
    var da = he,
      ws = da,
      ha = st,
      $h =
        !!Object.getOwnPropertySymbols &&
        !ha(function () {
          var u = Symbol();
          return (
            !String(u) ||
            !(Object(u) instanceof Symbol) ||
            (!Symbol.sham && ws && ws < 41)
          );
        }),
      Yh = $h && !Symbol.sham && vt(Symbol.iterator) == "symbol",
      Uu = Yn,
      xl = Ft,
      Ol = nr,
      Zh = Object,
      Io = Yh
        ? function (u) {
            return vt(u) == "symbol";
          }
        : function (u) {
            var e = Uu("Symbol");
            return xl(e) && Ol(e.prototype, Zh(u));
          },
      Pl = String,
      Pr = function (e) {
        try {
          return Pl(e);
        } catch (n) {
          return "Object";
        }
      },
      Dl = Ft,
      ks = Pr,
      Qh = TypeError,
      Dr = function (e) {
        if (Dl(e)) return e;
        throw Qh(ks(e) + " is not a function");
      },
      Nl = Dr,
      Ll = cn,
      Va = function (e, n) {
        var a = e[n];
        return Ll(a) ? void 0 : Nl(a);
      },
      Vi = Re,
      Ml = Ft,
      Fa = nn,
      Km = TypeError,
      Vu = { exports: {} },
      Xh = ot,
      Tn = Object.defineProperty,
      Fu = function (e, n) {
        try {
          Tn(Xh, e, { value: n, configurable: !0, writable: !0 });
        } catch (a) {
          Xh[e] = n;
        }
        return n;
      },
      Kn = Fu,
      Ul = "__core-js_shared__",
      ju = ot[Ul] || Kn(Ul, {}),
      Vl = ju;
    (Vu.exports = function (u, e) {
      return Vl[u] || (Vl[u] = e !== void 0 ? e : {});
    })("versions", []).push({
      version: "3.25.5",
      mode: "global",
      copyright: "© 2014-2022 Denis Pushkarev (zloirock.ru)",
      license: "https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",
      source: "https://github.com/zloirock/core-js",
    });
    var Bu = Dt,
      ef = Object,
      mr = function (e) {
        return ef(Bu(e));
      },
      Jm = mr,
      $m = He({}.hasOwnProperty),
      Jn =
        Object.hasOwn ||
        function (u, e) {
          return $m(Jm(u), e);
        },
      tf = He,
      Fl = 0,
      Ym = Math.random(),
      nf = tf((1).toString),
      zu = function (e) {
        return "Symbol(" + (e === void 0 ? "" : e) + ")_" + nf(++Fl + Ym, 36);
      },
      Zm = ot,
      jl = Vu.exports,
      dr = Jn,
      Bl = zu,
      zl = $h,
      Hl = Yh,
      Ro = jl("wks"),
      fa = Zm.Symbol,
      Wl = fa && fa.for,
      rf = Hl ? fa : (fa && fa.withoutSetter) || Bl,
      In = function (e) {
        if (!dr(Ro, e) || (!zl && typeof Ro[e] != "string")) {
          var n = "Symbol." + e;
          zl && dr(fa, e)
            ? (Ro[e] = fa[e])
            : (Ro[e] = Hl && Wl ? Wl(n) : rf(n));
        }
        return Ro[e];
      },
      Gl = Re,
      Hu = nn,
      Nr = Io,
      Qm = Va,
      Xm = function (e, n) {
        var a, c;
        if (
          (n === "string" && Ml((a = e.toString)) && !Fa((c = Vi(a, e)))) ||
          (Ml((a = e.valueOf)) && !Fa((c = Vi(a, e)))) ||
          (n !== "string" && Ml((a = e.toString)) && !Fa((c = Vi(a, e))))
        )
          return c;
        throw Km("Can't convert object to primitive value");
      },
      eg = TypeError,
      Yr = In("toPrimitive"),
      Ts = function (e, n) {
        if (!Hu(e) || Nr(e)) return e;
        var a,
          c = Qm(e, Yr);
        if (c) {
          if (
            (n === void 0 && (n = "default"),
            (a = Gl(c, e, n)),
            !Hu(a) || Nr(a))
          )
            return a;
          throw eg("Can't convert object to primitive value");
        }
        return n === void 0 && (n = "number"), Xm(e, n);
      },
      Es = Ts,
      Fi = Io,
      Is = function (e) {
        var n = Es(e, "string");
        return Fi(n) ? n : n + "";
      },
      af = nn,
      ai = ot.document,
      Wu = af(ai) && af(ai.createElement),
      kr = function (e) {
        return Wu ? ai.createElement(e) : {};
      },
      Gu = kr,
      of =
        !ct &&
        !st(function () {
          return (
            Object.defineProperty(Gu("div"), "a", {
              get: function () {
                return 7;
              },
            }).a != 7
          );
        }),
      sf = ct,
      uf = Re,
      tg = ge,
      Co = me,
      ng = on,
      cf = Is,
      rg = Jn,
      ql = of,
      Ao = Object.getOwnPropertyDescriptor;
    zt.f = sf
      ? Ao
      : function (u, e) {
          if (((u = ng(u)), (e = cf(e)), ql))
            try {
              return Ao(u, e);
            } catch (n) {}
          if (rg(u, e)) return Co(!uf(tg.f, u, e), u[e]);
        };
    var Hn = {},
      ja =
        ct &&
        st(function () {
          return (
            Object.defineProperty(function () {}, "prototype", {
              value: 42,
              writable: !1,
            }).prototype != 42
          );
        }),
      Kl = nn,
      lf = String,
      Ba = TypeError,
      Wn = function (e) {
        if (Kl(e)) return e;
        throw Ba(lf(e) + " is not an object");
      },
      ig = ct,
      Jl = of,
      df = ja,
      Rs = Wn,
      $l = Is,
      Yl = TypeError,
      xo = Object.defineProperty,
      ag = Object.getOwnPropertyDescriptor,
      hf = "enumerable",
      ji = "configurable",
      Cs = "writable";
    Hn.f = ig
      ? df
        ? function (u, e, n) {
            if (
              (Rs(u),
              (e = $l(e)),
              Rs(n),
              typeof u == "function" &&
                e === "prototype" &&
                "value" in n &&
                Cs in n &&
                !n.writable)
            ) {
              var a = ag(u, e);
              a &&
                a.writable &&
                ((u[e] = n.value),
                (n = {
                  configurable: ji in n ? n.configurable : a.configurable,
                  enumerable: hf in n ? n.enumerable : a.enumerable,
                  writable: !1,
                }));
            }
            return xo(u, e, n);
          }
        : xo
      : function (u, e, n) {
          if ((Rs(u), (e = $l(e)), Rs(n), Jl))
            try {
              return xo(u, e, n);
            } catch (a) {}
          if ("get" in n || "set" in n) throw Yl("Accessors not supported");
          return "value" in n && (u[e] = n.value), u;
        };
    var As = Hn,
      xs = me,
      Zr = ct
        ? function (u, e, n) {
            return As.f(u, e, xs(1, n));
          }
        : function (u, e, n) {
            return (u[e] = n), u;
          },
      qu = { exports: {} },
      Ku = ct,
      ff = Jn,
      Os = Function.prototype,
      Zl = Ku && Object.getOwnPropertyDescriptor,
      Ps = ff(Os, "name"),
      pa = {
        EXISTS: Ps,
        PROPER: Ps && function () {}.name === "something",
        CONFIGURABLE: Ps && (!Ku || (Ku && Zl(Os, "name").configurable)),
      },
      Ds = Ft,
      gr = ju,
      yi = He(Function.toString);
    Ds(gr.inspectSource) ||
      (gr.inspectSource = function (u) {
        return yi(u);
      });
    var Ns,
      Oo,
      Ls,
      Ju = gr.inspectSource,
      pf = Ft,
      $u = ot.WeakMap,
      Ql = pf($u) && /native code/.test(String($u)),
      Xl = Vu.exports,
      vf = zu,
      ed = Xl("keys"),
      Yu = function (e) {
        return ed[e] || (ed[e] = vf(e));
      },
      Zu = {},
      mf = Ql,
      gf = ot,
      og = nn,
      va = Zr,
      Ms = Jn,
      td = ju,
      ar = Yu,
      Po = Zu,
      ma = "Object already initialized",
      nd = gf.TypeError,
      sg = gf.WeakMap;
    if (mf || td.state) {
      var hr = td.state || (td.state = new sg());
      (hr.get = hr.get),
        (hr.has = hr.has),
        (hr.set = hr.set),
        (Ns = function (e, n) {
          if (hr.has(e)) throw nd(ma);
          return (n.facade = e), hr.set(e, n), n;
        }),
        (Oo = function (e) {
          return hr.get(e) || {};
        }),
        (Ls = function (e) {
          return hr.has(e);
        });
    } else {
      var za = ar("state");
      (Po[za] = !0),
        (Ns = function (e, n) {
          if (Ms(e, za)) throw nd(ma);
          return (n.facade = e), va(e, za, n), n;
        }),
        (Oo = function (e) {
          return Ms(e, za) ? e[za] : {};
        }),
        (Ls = function (e) {
          return Ms(e, za);
        });
    }
    var On = {
        set: Ns,
        get: Oo,
        has: Ls,
        enforce: function (e) {
          return Ls(e) ? Oo(e) : Ns(e, {});
        },
        getterFor: function (e) {
          return function (n) {
            var a;
            if (!og(n) || (a = Oo(n)).type !== e)
              throw nd("Incompatible receiver, " + e + " required");
            return a;
          };
        },
      },
      _f = st,
      Ha = Ft,
      Qu = Jn,
      Us = ct,
      ug = pa.CONFIGURABLE,
      cg = Ju,
      Xu = On.enforce,
      lg = On.get,
      ec = Object.defineProperty,
      dg =
        Us &&
        !_f(function () {
          return ec(function () {}, "length", { value: 8 }).length !== 8;
        }),
      rd = String(String).split("String"),
      hg = (qu.exports = function (u, e, n) {
        String(e).slice(0, 7) === "Symbol(" &&
          (e = "[" + String(e).replace(/^Symbol\(([^)]*)\)/, "$1") + "]"),
          n && n.getter && (e = "get " + e),
          n && n.setter && (e = "set " + e),
          (!Qu(u, "name") || (ug && u.name !== e)) &&
            (Us ? ec(u, "name", { value: e, configurable: !0 }) : (u.name = e)),
          dg &&
            n &&
            Qu(n, "arity") &&
            u.length !== n.arity &&
            ec(u, "length", { value: n.arity });
        try {
          n && Qu(n, "constructor") && n.constructor
            ? Us && ec(u, "prototype", { writable: !1 })
            : u.prototype && (u.prototype = void 0);
        } catch (c) {}
        var a = Xu(u);
        return (
          Qu(a, "source") ||
            (a.source = rd.join(typeof e == "string" ? e : "")),
          u
        );
      });
    Function.prototype.toString = hg(function () {
      return (Ha(this) && lg(this).source) || cg(this);
    }, "toString");
    var id = Ft,
      fg = Hn,
      pg = qu.exports,
      vg = Fu,
      fr = function (e, n, a, c) {
        c || (c = {});
        var s = c.enumerable,
          l = c.name !== void 0 ? c.name : n;
        if ((id(a) && pg(a, l, c), c.global)) s ? (e[n] = a) : vg(n, a);
        else {
          try {
            c.unsafe ? e[n] && (s = !0) : delete e[n];
          } catch (h) {}
          s
            ? (e[n] = a)
            : fg.f(e, n, {
                value: a,
                enumerable: !1,
                configurable: !c.nonConfigurable,
                writable: !c.nonWritable,
              });
        }
        return e;
      },
      dn = {},
      ga = Math.ceil,
      oi = Math.floor,
      mg =
        Math.trunc ||
        function (u) {
          var e = +u;
          return (e > 0 ? oi : ga)(e);
        },
      Lr = function (e) {
        var n = +e;
        return n != n || n === 0 ? 0 : mg(n);
      },
      ad = Lr,
      tc = Math.max,
      nc = Math.min,
      si = function (e, n) {
        var a = ad(e);
        return a < 0 ? tc(a + n, 0) : nc(a, n);
      },
      Wa = Lr,
      Vs = Math.min,
      Pn = function (e) {
        return e > 0 ? Vs(Wa(e), 9007199254740991) : 0;
      },
      Fs = Pn,
      Zn = function (e) {
        return Fs(e.length);
      },
      Do = on,
      gg = si,
      _a = Zn,
      od = function (e) {
        return function (n, a, c) {
          var s,
            l = Do(n),
            h = _a(l),
            v = gg(c, h);
          if (e && a != a) {
            for (; h > v; ) if ((s = l[v++]) != s) return !0;
          } else
            for (; h > v; v++)
              if ((e || v in l) && l[v] === a) return e || v || 0;
          return !e && -1;
        };
      },
      ui = { includes: od(!0), indexOf: od(!1) },
      bi = Jn,
      pr = on,
      gn = ui.indexOf,
      js = Zu,
      sd = He([].push),
      No = function (e, n) {
        var a,
          c = pr(e),
          s = 0,
          l = [];
        for (a in c) !bi(js, a) && bi(c, a) && sd(l, a);
        for (; n.length > s; ) bi(c, (a = n[s++])) && (~gn(l, a) || sd(l, a));
        return l;
      },
      Bs = [
        "constructor",
        "hasOwnProperty",
        "isPrototypeOf",
        "propertyIsEnumerable",
        "toLocaleString",
        "toString",
        "valueOf",
      ],
      Lo = No,
      Si = Bs.concat("length", "prototype");
    dn.f =
      Object.getOwnPropertyNames ||
      function (u) {
        return Lo(u, Si);
      };
    var ud = {};
    ud.f = Object.getOwnPropertySymbols;
    var yf = Yn,
      _g = dn,
      rc = ud,
      yg = Wn,
      bg = He([].concat),
      Mo =
        yf("Reflect", "ownKeys") ||
        function (u) {
          var e = _g.f(yg(u)),
            n = rc.f;
          return n ? bg(e, n(u)) : e;
        },
      cd = Jn,
      bf = Mo,
      Sf = zt,
      ld = Hn,
      wf = st,
      Sg = Ft,
      wg = /#|\.prototype\./,
      zs = function (e, n) {
        var a = Hs[kg(e)];
        return a == kf || (a != Tg && (Sg(n) ? wf(n) : !!n));
      },
      kg = (zs.normalize = function (u) {
        return String(u).replace(wg, ".").toLowerCase();
      }),
      Hs = (zs.data = {}),
      Tg = (zs.NATIVE = "N"),
      kf = (zs.POLYFILL = "P"),
      Uo = zs,
      ic = ot,
      Eg = zt.f,
      ac = Zr,
      oc = fr,
      Ig = Fu,
      Rg = function (e, n, a) {
        for (var c = bf(n), s = ld.f, l = Sf.f, h = 0; h < c.length; h++) {
          var v = c[h];
          cd(e, v) || (a && cd(a, v)) || s(e, v, l(n, v));
        }
      },
      ya = Uo,
      Ut = function (e, n) {
        var a,
          c,
          s,
          l,
          h,
          v = e.target,
          g = e.global,
          _ = e.stat;
        if ((a = g ? ic : _ ? ic[v] || Ig(v, {}) : (ic[v] || {}).prototype))
          for (c in n) {
            if (
              ((l = n[c]),
              (s = e.dontCallGetSet ? (h = Eg(a, c)) && h.value : a[c]),
              !ya(g ? c : v + (_ ? "." : "#") + c, e.forced) && s !== void 0)
            ) {
              if (vt(l) == vt(s)) continue;
              Rg(l, s);
            }
            (e.sham || (s && s.sham)) && ac(l, "sham", !0), oc(a, c, l, e);
          }
      },
      Cg = Ut,
      Ag = st,
      Tf = on,
      dd = zt.f,
      hd = ct,
      Ef = Ag(function () {
        dd(1);
      });
    function sc(u) {
      throw new Error(
        'Could not dynamically require "' +
          u +
          '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.'
      );
    }
    Cg(
      { target: "Object", stat: !0, forced: !hd || Ef, sham: !hd },
      {
        getOwnPropertyDescriptor: function (e, n) {
          return dd(Tf(e), n);
        },
      }
    ),
      (function (u, e) {
        u.exports = (function () {
          function n(a, c, s) {
            function l(g, _) {
              if (!c[g]) {
                if (!a[g]) {
                  if (!_ && sc) return sc(g);
                  if (h) return h(g, !0);
                  var b = new Error("Cannot find module '" + g + "'");
                  throw ((b.code = "MODULE_NOT_FOUND"), b);
                }
                var C = (c[g] = { exports: {} });
                a[g][0].call(
                  C.exports,
                  function (N) {
                    return l(a[g][1][N] || N);
                  },
                  C,
                  C.exports,
                  n,
                  a,
                  c,
                  s
                );
              }
              return c[g].exports;
            }
            for (var h = sc, v = 0; v < s.length; v++) l(s[v]);
            return l;
          }
          return n;
        })()(
          {
            1: [
              function (n, a, c) {
                var s = (0, n("./adapter_factory.js").adapterFactory)({
                  window: typeof window == "undefined" ? void 0 : window,
                });
                a.exports = s;
              },
              { "./adapter_factory.js": 2 },
            ],
            2: [
              function (n, a, c) {
                function s(F) {
                  return (
                    (s =
                      typeof Symbol == "function" &&
                      vt(Symbol.iterator) == "symbol"
                        ? function (U) {
                            return vt(U);
                          }
                        : function (U) {
                            return U &&
                              typeof Symbol == "function" &&
                              U.constructor === Symbol &&
                              U !== Symbol.prototype
                              ? "symbol"
                              : vt(U);
                          }),
                    s(F)
                  );
                }
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.adapterFactory = z);
                var l = N(n("./utils")),
                  h = N(n("./chrome/chrome_shim")),
                  v = N(n("./firefox/firefox_shim")),
                  g = N(n("./safari/safari_shim")),
                  _ = N(n("./common_shim")),
                  b = N(n("sdp"));
                function C(F) {
                  if (typeof WeakMap != "function") return null;
                  var U = /* @__PURE__ */ new WeakMap(),
                    E = /* @__PURE__ */ new WeakMap();
                  return (C = function (L) {
                    return L ? E : U;
                  })(F);
                }
                function N(F, U) {
                  if (!U && F && F.__esModule) return F;
                  if (
                    F === null ||
                    (s(F) !== "object" && typeof F != "function")
                  )
                    return { default: F };
                  var E = C(U);
                  if (E && E.has(F)) return E.get(F);
                  var A = {},
                    L =
                      Object.defineProperty && Object.getOwnPropertyDescriptor;
                  for (var $ in F)
                    if (
                      $ !== "default" &&
                      Object.prototype.hasOwnProperty.call(F, $)
                    ) {
                      var te = L ? Object.getOwnPropertyDescriptor(F, $) : null;
                      te && (te.get || te.set)
                        ? Object.defineProperty(A, $, te)
                        : (A[$] = F[$]);
                    }
                  return (A.default = F), E && E.set(F, A), A;
                }
                function z() {
                  var F = (
                      arguments.length > 0 && arguments[0] !== void 0
                        ? arguments[0]
                        : {}
                    ).window,
                    U =
                      arguments.length > 1 && arguments[1] !== void 0
                        ? arguments[1]
                        : { shimChrome: !0, shimFirefox: !0, shimSafari: !0 },
                    E = l.log,
                    A = l.detectBrowser(F),
                    L = {
                      browserDetails: A,
                      commonShim: _,
                      extractVersion: l.extractVersion,
                      disableLog: l.disableLog,
                      disableWarnings: l.disableWarnings,
                      sdp: b,
                    };
                  switch (A.browser) {
                    case "chrome":
                      if (!h || !h.shimPeerConnection || !U.shimChrome)
                        return (
                          E(
                            "Chrome shim is not included in this adapter release."
                          ),
                          L
                        );
                      if (A.version === null)
                        return (
                          E(
                            "Chrome shim can not determine version, not shimming."
                          ),
                          L
                        );
                      E("adapter.js shimming chrome."),
                        (L.browserShim = h),
                        _.shimAddIceCandidateNullOrEmpty(F, A),
                        _.shimParameterlessSetLocalDescription(F, A),
                        h.shimGetUserMedia(F, A),
                        h.shimMediaStream(F, A),
                        h.shimPeerConnection(F, A),
                        h.shimOnTrack(F, A),
                        h.shimAddTrackRemoveTrack(F, A),
                        h.shimGetSendersWithDtmf(F, A),
                        h.shimGetStats(F, A),
                        h.shimSenderReceiverGetStats(F, A),
                        h.fixNegotiationNeeded(F, A),
                        _.shimRTCIceCandidate(F, A),
                        _.shimRTCIceCandidateRelayProtocol(F, A),
                        _.shimConnectionState(F, A),
                        _.shimMaxMessageSize(F, A),
                        _.shimSendThrowTypeError(F, A),
                        _.removeExtmapAllowMixed(F, A);
                      break;
                    case "firefox":
                      if (!v || !v.shimPeerConnection || !U.shimFirefox)
                        return (
                          E(
                            "Firefox shim is not included in this adapter release."
                          ),
                          L
                        );
                      E("adapter.js shimming firefox."),
                        (L.browserShim = v),
                        _.shimAddIceCandidateNullOrEmpty(F, A),
                        _.shimParameterlessSetLocalDescription(F, A),
                        v.shimGetUserMedia(F, A),
                        v.shimPeerConnection(F, A),
                        v.shimOnTrack(F, A),
                        v.shimRemoveStream(F, A),
                        v.shimSenderGetStats(F, A),
                        v.shimReceiverGetStats(F, A),
                        v.shimRTCDataChannel(F, A),
                        v.shimAddTransceiver(F, A),
                        v.shimGetParameters(F, A),
                        v.shimCreateOffer(F, A),
                        v.shimCreateAnswer(F, A),
                        _.shimRTCIceCandidate(F, A),
                        _.shimConnectionState(F, A),
                        _.shimMaxMessageSize(F, A),
                        _.shimSendThrowTypeError(F, A);
                      break;
                    case "safari":
                      if (!g || !U.shimSafari)
                        return (
                          E(
                            "Safari shim is not included in this adapter release."
                          ),
                          L
                        );
                      E("adapter.js shimming safari."),
                        (L.browserShim = g),
                        _.shimAddIceCandidateNullOrEmpty(F, A),
                        _.shimParameterlessSetLocalDescription(F, A),
                        g.shimRTCIceServerUrls(F, A),
                        g.shimCreateOfferLegacy(F, A),
                        g.shimCallbacksAPI(F, A),
                        g.shimLocalStreamsAPI(F, A),
                        g.shimRemoteStreamsAPI(F, A),
                        g.shimTrackEventTransceiver(F, A),
                        g.shimGetUserMedia(F, A),
                        g.shimAudioContext(F, A),
                        _.shimRTCIceCandidate(F, A),
                        _.shimRTCIceCandidateRelayProtocol(F, A),
                        _.shimMaxMessageSize(F, A),
                        _.shimSendThrowTypeError(F, A),
                        _.removeExtmapAllowMixed(F, A);
                      break;
                    default:
                      E("Unsupported browser!");
                  }
                  return L;
                }
              },
              {
                "./chrome/chrome_shim": 3,
                "./common_shim": 6,
                "./firefox/firefox_shim": 7,
                "./safari/safari_shim": 10,
                "./utils": 11,
                sdp: 12,
              },
            ],
            3: [
              function (n, a, c) {
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.fixNegotiationNeeded = X),
                  (c.shimAddTrackRemoveTrack = $),
                  (c.shimAddTrackRemoveTrackWithNative = L),
                  Object.defineProperty(c, "shimGetDisplayMedia", {
                    enumerable: !0,
                    get: function () {
                      return h.shimGetDisplayMedia;
                    },
                  }),
                  (c.shimGetSendersWithDtmf = U),
                  (c.shimGetStats = E),
                  Object.defineProperty(c, "shimGetUserMedia", {
                    enumerable: !0,
                    get: function () {
                      return l.shimGetUserMedia;
                    },
                  }),
                  (c.shimMediaStream = z),
                  (c.shimOnTrack = F),
                  (c.shimPeerConnection = te),
                  (c.shimSenderReceiverGetStats = A);
                var s = g(n("../utils.js")),
                  l = n("./getusermedia"),
                  h = n("./getdisplaymedia");
                function v(D) {
                  if (typeof WeakMap != "function") return null;
                  var M = /* @__PURE__ */ new WeakMap(),
                    W = /* @__PURE__ */ new WeakMap();
                  return (v = function (ne) {
                    return ne ? W : M;
                  })(D);
                }
                function g(D, M) {
                  if (!M && D && D.__esModule) return D;
                  if (
                    D === null ||
                    (N(D) !== "object" && typeof D != "function")
                  )
                    return { default: D };
                  var W = v(M);
                  if (W && W.has(D)) return W.get(D);
                  var G = {},
                    ne =
                      Object.defineProperty && Object.getOwnPropertyDescriptor;
                  for (var H in D)
                    if (
                      H !== "default" &&
                      Object.prototype.hasOwnProperty.call(D, H)
                    ) {
                      var R = ne ? Object.getOwnPropertyDescriptor(D, H) : null;
                      R && (R.get || R.set)
                        ? Object.defineProperty(G, H, R)
                        : (G[H] = D[H]);
                    }
                  return (G.default = D), W && W.set(D, G), G;
                }
                function _(D, M, W) {
                  return (
                    (M = b(M)) in D
                      ? Object.defineProperty(D, M, {
                          value: W,
                          enumerable: !0,
                          configurable: !0,
                          writable: !0,
                        })
                      : (D[M] = W),
                    D
                  );
                }
                function b(D) {
                  var M = C(D, "string");
                  return N(M) === "symbol" ? M : String(M);
                }
                function C(D, M) {
                  if (N(D) !== "object" || D === null) return D;
                  var W = D[Symbol.toPrimitive];
                  if (W !== void 0) {
                    var G = W.call(D, M || "default");
                    if (N(G) !== "object") return G;
                    throw new TypeError(
                      "@@toPrimitive must return a primitive value."
                    );
                  }
                  return (M === "string" ? String : Number)(D);
                }
                function N(D) {
                  return (
                    (N =
                      typeof Symbol == "function" &&
                      vt(Symbol.iterator) == "symbol"
                        ? function (M) {
                            return vt(M);
                          }
                        : function (M) {
                            return M &&
                              typeof Symbol == "function" &&
                              M.constructor === Symbol &&
                              M !== Symbol.prototype
                              ? "symbol"
                              : vt(M);
                          }),
                    N(D)
                  );
                }
                function z(D) {
                  D.MediaStream = D.MediaStream || D.webkitMediaStream;
                }
                function F(D) {
                  if (
                    N(D) === "object" &&
                    D.RTCPeerConnection &&
                    !("ontrack" in D.RTCPeerConnection.prototype)
                  ) {
                    Object.defineProperty(
                      D.RTCPeerConnection.prototype,
                      "ontrack",
                      {
                        get: function () {
                          return this._ontrack;
                        },
                        set: function (G) {
                          this._ontrack &&
                            this.removeEventListener("track", this._ontrack),
                            this.addEventListener("track", (this._ontrack = G));
                        },
                        enumerable: !0,
                        configurable: !0,
                      }
                    );
                    var M = D.RTCPeerConnection.prototype.setRemoteDescription;
                    D.RTCPeerConnection.prototype.setRemoteDescription =
                      function () {
                        var W = this;
                        return (
                          this._ontrackpoly ||
                            ((this._ontrackpoly = function (G) {
                              G.stream.addEventListener(
                                "addtrack",
                                function (ne) {
                                  var H;
                                  H = D.RTCPeerConnection.prototype.getReceivers
                                    ? W.getReceivers().find(function (w) {
                                        return (
                                          w.track && w.track.id === ne.track.id
                                        );
                                      })
                                    : { track: ne.track };
                                  var R = new Event("track");
                                  (R.track = ne.track),
                                    (R.receiver = H),
                                    (R.transceiver = { receiver: H }),
                                    (R.streams = [G.stream]),
                                    W.dispatchEvent(R);
                                }
                              ),
                                G.stream.getTracks().forEach(function (ne) {
                                  var H;
                                  H = D.RTCPeerConnection.prototype.getReceivers
                                    ? W.getReceivers().find(function (w) {
                                        return w.track && w.track.id === ne.id;
                                      })
                                    : { track: ne };
                                  var R = new Event("track");
                                  (R.track = ne),
                                    (R.receiver = H),
                                    (R.transceiver = { receiver: H }),
                                    (R.streams = [G.stream]),
                                    W.dispatchEvent(R);
                                });
                            }),
                            this.addEventListener(
                              "addstream",
                              this._ontrackpoly
                            )),
                          M.apply(this, arguments)
                        );
                      };
                  } else
                    s.wrapPeerConnectionEvent(D, "track", function (W) {
                      return (
                        W.transceiver ||
                          Object.defineProperty(W, "transceiver", {
                            value: { receiver: W.receiver },
                          }),
                        W
                      );
                    });
                }
                function U(D) {
                  if (
                    N(D) === "object" &&
                    D.RTCPeerConnection &&
                    !("getSenders" in D.RTCPeerConnection.prototype) &&
                    "createDTMFSender" in D.RTCPeerConnection.prototype
                  ) {
                    var M = function (q, J) {
                      return {
                        track: J,
                        get dtmf() {
                          return (
                            this._dtmf === void 0 &&
                              (J.kind === "audio"
                                ? (this._dtmf = q.createDTMFSender(J))
                                : (this._dtmf = null)),
                            this._dtmf
                          );
                        },
                        _pc: q,
                      };
                    };
                    if (!D.RTCPeerConnection.prototype.getSenders) {
                      D.RTCPeerConnection.prototype.getSenders = function () {
                        return (
                          (this._senders = this._senders || []),
                          this._senders.slice()
                        );
                      };
                      var W = D.RTCPeerConnection.prototype.addTrack;
                      D.RTCPeerConnection.prototype.addTrack = function (w, q) {
                        var J = W.apply(this, arguments);
                        return (
                          J || ((J = M(this, w)), this._senders.push(J)), J
                        );
                      };
                      var G = D.RTCPeerConnection.prototype.removeTrack;
                      D.RTCPeerConnection.prototype.removeTrack = function (w) {
                        G.apply(this, arguments);
                        var q = this._senders.indexOf(w);
                        q !== -1 && this._senders.splice(q, 1);
                      };
                    }
                    var ne = D.RTCPeerConnection.prototype.addStream;
                    D.RTCPeerConnection.prototype.addStream = function (w) {
                      var q = this;
                      (this._senders = this._senders || []),
                        ne.apply(this, [w]),
                        w.getTracks().forEach(function (J) {
                          q._senders.push(M(q, J));
                        });
                    };
                    var H = D.RTCPeerConnection.prototype.removeStream;
                    D.RTCPeerConnection.prototype.removeStream = function (w) {
                      var q = this;
                      (this._senders = this._senders || []),
                        H.apply(this, [w]),
                        w.getTracks().forEach(function (J) {
                          var re = q._senders.find(function (pe) {
                            return pe.track === J;
                          });
                          re && q._senders.splice(q._senders.indexOf(re), 1);
                        });
                    };
                  } else if (
                    N(D) === "object" &&
                    D.RTCPeerConnection &&
                    "getSenders" in D.RTCPeerConnection.prototype &&
                    "createDTMFSender" in D.RTCPeerConnection.prototype &&
                    D.RTCRtpSender &&
                    !("dtmf" in D.RTCRtpSender.prototype)
                  ) {
                    var R = D.RTCPeerConnection.prototype.getSenders;
                    (D.RTCPeerConnection.prototype.getSenders = function () {
                      var w = this,
                        q = R.apply(this, []);
                      return (
                        q.forEach(function (J) {
                          return (J._pc = w);
                        }),
                        q
                      );
                    }),
                      Object.defineProperty(D.RTCRtpSender.prototype, "dtmf", {
                        get: function () {
                          return (
                            this._dtmf === void 0 &&
                              (this.track.kind === "audio"
                                ? (this._dtmf = this._pc.createDTMFSender(
                                    this.track
                                  ))
                                : (this._dtmf = null)),
                            this._dtmf
                          );
                        },
                      });
                  }
                }
                function E(D) {
                  if (D.RTCPeerConnection) {
                    var M = D.RTCPeerConnection.prototype.getStats;
                    D.RTCPeerConnection.prototype.getStats = function () {
                      var W = this,
                        G = Array.prototype.slice.call(arguments),
                        ne = G[0],
                        H = G[1],
                        R = G[2];
                      if (arguments.length > 0 && typeof ne == "function")
                        return M.apply(this, arguments);
                      if (
                        M.length === 0 &&
                        (arguments.length === 0 || typeof ne != "function")
                      )
                        return M.apply(this, []);
                      var w = function (pe) {
                          var ye = {};
                          return (
                            pe.result().forEach(function (Ne) {
                              var Ve = {
                                id: Ne.id,
                                timestamp: Ne.timestamp,
                                type:
                                  {
                                    localcandidate: "local-candidate",
                                    remotecandidate: "remote-candidate",
                                  }[Ne.type] || Ne.type,
                              };
                              Ne.names().forEach(function (Kt) {
                                Ve[Kt] = Ne.stat(Kt);
                              }),
                                (ye[Ve.id] = Ve);
                            }),
                            ye
                          );
                        },
                        q = function (pe) {
                          return new Map(
                            Object.keys(pe).map(function (ye) {
                              return [ye, pe[ye]];
                            })
                          );
                        };
                      if (arguments.length >= 2) {
                        var J = function (pe) {
                          H(q(w(pe)));
                        };
                        return M.apply(this, [J, ne]);
                      }
                      return new Promise(function (re, pe) {
                        M.apply(W, [
                          function (ye) {
                            re(q(w(ye)));
                          },
                          pe,
                        ]);
                      }).then(H, R);
                    };
                  }
                }
                function A(D) {
                  if (
                    N(D) === "object" &&
                    D.RTCPeerConnection &&
                    D.RTCRtpSender &&
                    D.RTCRtpReceiver
                  ) {
                    if (!("getStats" in D.RTCRtpSender.prototype)) {
                      var M = D.RTCPeerConnection.prototype.getSenders;
                      M &&
                        (D.RTCPeerConnection.prototype.getSenders =
                          function () {
                            var H = this,
                              R = M.apply(this, []);
                            return (
                              R.forEach(function (w) {
                                return (w._pc = H);
                              }),
                              R
                            );
                          });
                      var W = D.RTCPeerConnection.prototype.addTrack;
                      W &&
                        (D.RTCPeerConnection.prototype.addTrack = function () {
                          var H = W.apply(this, arguments);
                          return (H._pc = this), H;
                        }),
                        (D.RTCRtpSender.prototype.getStats = function () {
                          var H = this;
                          return this._pc.getStats().then(function (R) {
                            return s.filterStats(R, H.track, !0);
                          });
                        });
                    }
                    if (!("getStats" in D.RTCRtpReceiver.prototype)) {
                      var G = D.RTCPeerConnection.prototype.getReceivers;
                      G &&
                        (D.RTCPeerConnection.prototype.getReceivers =
                          function () {
                            var H = this,
                              R = G.apply(this, []);
                            return (
                              R.forEach(function (w) {
                                return (w._pc = H);
                              }),
                              R
                            );
                          }),
                        s.wrapPeerConnectionEvent(D, "track", function (H) {
                          return (H.receiver._pc = H.srcElement), H;
                        }),
                        (D.RTCRtpReceiver.prototype.getStats = function () {
                          var H = this;
                          return this._pc.getStats().then(function (R) {
                            return s.filterStats(R, H.track, !1);
                          });
                        });
                    }
                    if (
                      "getStats" in D.RTCRtpSender.prototype &&
                      "getStats" in D.RTCRtpReceiver.prototype
                    ) {
                      var ne = D.RTCPeerConnection.prototype.getStats;
                      D.RTCPeerConnection.prototype.getStats = function () {
                        if (
                          arguments.length > 0 &&
                          arguments[0] instanceof D.MediaStreamTrack
                        ) {
                          var H,
                            R,
                            w,
                            q = arguments[0];
                          return (
                            this.getSenders().forEach(function (J) {
                              J.track === q && (H ? (w = !0) : (H = J));
                            }),
                            this.getReceivers().forEach(function (J) {
                              return (
                                J.track === q && (R ? (w = !0) : (R = J)),
                                J.track === q
                              );
                            }),
                            w || (H && R)
                              ? Promise.reject(
                                  new DOMException(
                                    "There are more than one sender or receiver for the track.",
                                    "InvalidAccessError"
                                  )
                                )
                              : H
                              ? H.getStats()
                              : R
                              ? R.getStats()
                              : Promise.reject(
                                  new DOMException(
                                    "There is no sender or receiver for the track.",
                                    "InvalidAccessError"
                                  )
                                )
                          );
                        }
                        return ne.apply(this, arguments);
                      };
                    }
                  }
                }
                function L(D) {
                  D.RTCPeerConnection.prototype.getLocalStreams = function () {
                    var H = this;
                    return (
                      (this._shimmedLocalStreams =
                        this._shimmedLocalStreams || {}),
                      Object.keys(this._shimmedLocalStreams).map(function (R) {
                        return H._shimmedLocalStreams[R][0];
                      })
                    );
                  };
                  var M = D.RTCPeerConnection.prototype.addTrack;
                  D.RTCPeerConnection.prototype.addTrack = function (H, R) {
                    if (!R) return M.apply(this, arguments);
                    this._shimmedLocalStreams = this._shimmedLocalStreams || {};
                    var w = M.apply(this, arguments);
                    return (
                      this._shimmedLocalStreams[R.id]
                        ? this._shimmedLocalStreams[R.id].indexOf(w) === -1 &&
                          this._shimmedLocalStreams[R.id].push(w)
                        : (this._shimmedLocalStreams[R.id] = [R, w]),
                      w
                    );
                  };
                  var W = D.RTCPeerConnection.prototype.addStream;
                  D.RTCPeerConnection.prototype.addStream = function (H) {
                    var R = this;
                    (this._shimmedLocalStreams =
                      this._shimmedLocalStreams || {}),
                      H.getTracks().forEach(function (J) {
                        if (
                          R.getSenders().find(function (re) {
                            return re.track === J;
                          })
                        )
                          throw new DOMException(
                            "Track already exists.",
                            "InvalidAccessError"
                          );
                      });
                    var w = this.getSenders();
                    W.apply(this, arguments);
                    var q = this.getSenders().filter(function (J) {
                      return w.indexOf(J) === -1;
                    });
                    this._shimmedLocalStreams[H.id] = [H].concat(q);
                  };
                  var G = D.RTCPeerConnection.prototype.removeStream;
                  D.RTCPeerConnection.prototype.removeStream = function (H) {
                    return (
                      (this._shimmedLocalStreams =
                        this._shimmedLocalStreams || {}),
                      delete this._shimmedLocalStreams[H.id],
                      G.apply(this, arguments)
                    );
                  };
                  var ne = D.RTCPeerConnection.prototype.removeTrack;
                  D.RTCPeerConnection.prototype.removeTrack = function (H) {
                    var R = this;
                    return (
                      (this._shimmedLocalStreams =
                        this._shimmedLocalStreams || {}),
                      H &&
                        Object.keys(this._shimmedLocalStreams).forEach(
                          function (w) {
                            var q = R._shimmedLocalStreams[w].indexOf(H);
                            q !== -1 && R._shimmedLocalStreams[w].splice(q, 1),
                              R._shimmedLocalStreams[w].length === 1 &&
                                delete R._shimmedLocalStreams[w];
                          }
                        ),
                      ne.apply(this, arguments)
                    );
                  };
                }
                function $(D, M) {
                  if (D.RTCPeerConnection) {
                    if (
                      D.RTCPeerConnection.prototype.addTrack &&
                      M.version >= 65
                    )
                      return L(D);
                    var W = D.RTCPeerConnection.prototype.getLocalStreams;
                    D.RTCPeerConnection.prototype.getLocalStreams =
                      function () {
                        var J = this,
                          re = W.apply(this);
                        return (
                          (this._reverseStreams = this._reverseStreams || {}),
                          re.map(function (pe) {
                            return J._reverseStreams[pe.id];
                          })
                        );
                      };
                    var G = D.RTCPeerConnection.prototype.addStream;
                    D.RTCPeerConnection.prototype.addStream = function (J) {
                      var re = this;
                      if (
                        ((this._streams = this._streams || {}),
                        (this._reverseStreams = this._reverseStreams || {}),
                        J.getTracks().forEach(function (ye) {
                          if (
                            re.getSenders().find(function (Ne) {
                              return Ne.track === ye;
                            })
                          )
                            throw new DOMException(
                              "Track already exists.",
                              "InvalidAccessError"
                            );
                        }),
                        !this._reverseStreams[J.id])
                      ) {
                        var pe = new D.MediaStream(J.getTracks());
                        (this._streams[J.id] = pe),
                          (this._reverseStreams[pe.id] = J),
                          (J = pe);
                      }
                      G.apply(this, [J]);
                    };
                    var ne = D.RTCPeerConnection.prototype.removeStream;
                    (D.RTCPeerConnection.prototype.removeStream = function (J) {
                      (this._streams = this._streams || {}),
                        (this._reverseStreams = this._reverseStreams || {}),
                        ne.apply(this, [this._streams[J.id] || J]),
                        delete this._reverseStreams[
                          this._streams[J.id] ? this._streams[J.id].id : J.id
                        ],
                        delete this._streams[J.id];
                    }),
                      (D.RTCPeerConnection.prototype.addTrack = function (
                        J,
                        re
                      ) {
                        var pe = this;
                        if (this.signalingState === "closed")
                          throw new DOMException(
                            "The RTCPeerConnection's signalingState is 'closed'.",
                            "InvalidStateError"
                          );
                        var ye = [].slice.call(arguments, 1);
                        if (
                          ye.length !== 1 ||
                          !ye[0].getTracks().find(function (Kt) {
                            return Kt === J;
                          })
                        )
                          throw new DOMException(
                            "The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.",
                            "NotSupportedError"
                          );
                        if (
                          this.getSenders().find(function (Kt) {
                            return Kt.track === J;
                          })
                        )
                          throw new DOMException(
                            "Track already exists.",
                            "InvalidAccessError"
                          );
                        (this._streams = this._streams || {}),
                          (this._reverseStreams = this._reverseStreams || {});
                        var Ne = this._streams[re.id];
                        if (Ne)
                          Ne.addTrack(J),
                            Promise.resolve().then(function () {
                              pe.dispatchEvent(new Event("negotiationneeded"));
                            });
                        else {
                          var Ve = new D.MediaStream([J]);
                          (this._streams[re.id] = Ve),
                            (this._reverseStreams[Ve.id] = re),
                            this.addStream(Ve);
                        }
                        return this.getSenders().find(function (Kt) {
                          return Kt.track === J;
                        });
                      }),
                      ["createOffer", "createAnswer"].forEach(function (J) {
                        var re = D.RTCPeerConnection.prototype[J],
                          pe = _({}, J, function () {
                            var ye = this,
                              Ne = arguments;
                            return arguments.length &&
                              typeof arguments[0] == "function"
                              ? re.apply(this, [
                                  function (Ve) {
                                    var Kt = w(ye, Ve);
                                    Ne[0].apply(null, [Kt]);
                                  },
                                  function (Ve) {
                                    Ne[1] && Ne[1].apply(null, Ve);
                                  },
                                  arguments[2],
                                ])
                              : re.apply(this, arguments).then(function (Ve) {
                                  return w(ye, Ve);
                                });
                          });
                        D.RTCPeerConnection.prototype[J] = pe[J];
                      });
                    var H = D.RTCPeerConnection.prototype.setLocalDescription;
                    D.RTCPeerConnection.prototype.setLocalDescription =
                      function () {
                        return arguments.length && arguments[0].type
                          ? ((arguments[0] = q(this, arguments[0])),
                            H.apply(this, arguments))
                          : H.apply(this, arguments);
                      };
                    var R = Object.getOwnPropertyDescriptor(
                      D.RTCPeerConnection.prototype,
                      "localDescription"
                    );
                    Object.defineProperty(
                      D.RTCPeerConnection.prototype,
                      "localDescription",
                      {
                        get: function () {
                          var re = R.get.apply(this);
                          return re.type === "" ? re : w(this, re);
                        },
                      }
                    ),
                      (D.RTCPeerConnection.prototype.removeTrack = function (
                        J
                      ) {
                        var re,
                          pe = this;
                        if (this.signalingState === "closed")
                          throw new DOMException(
                            "The RTCPeerConnection's signalingState is 'closed'.",
                            "InvalidStateError"
                          );
                        if (!J._pc)
                          throw new DOMException(
                            "Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.",
                            "TypeError"
                          );
                        if (J._pc !== this)
                          throw new DOMException(
                            "Sender was not created by this connection.",
                            "InvalidAccessError"
                          );
                        (this._streams = this._streams || {}),
                          Object.keys(this._streams).forEach(function (ye) {
                            pe._streams[ye].getTracks().find(function (Ne) {
                              return J.track === Ne;
                            }) && (re = pe._streams[ye]);
                          }),
                          re &&
                            (re.getTracks().length === 1
                              ? this.removeStream(this._reverseStreams[re.id])
                              : re.removeTrack(J.track),
                            this.dispatchEvent(new Event("negotiationneeded")));
                      });
                  }
                  function w(J, re) {
                    var pe = re.sdp;
                    return (
                      Object.keys(J._reverseStreams || []).forEach(function (
                        ye
                      ) {
                        var Ne = J._reverseStreams[ye],
                          Ve = J._streams[Ne.id];
                        pe = pe.replace(new RegExp(Ve.id, "g"), Ne.id);
                      }),
                      new RTCSessionDescription({ type: re.type, sdp: pe })
                    );
                  }
                  function q(J, re) {
                    var pe = re.sdp;
                    return (
                      Object.keys(J._reverseStreams || []).forEach(function (
                        ye
                      ) {
                        var Ne = J._reverseStreams[ye],
                          Ve = J._streams[Ne.id];
                        pe = pe.replace(new RegExp(Ne.id, "g"), Ve.id);
                      }),
                      new RTCSessionDescription({ type: re.type, sdp: pe })
                    );
                  }
                }
                function te(D, M) {
                  !D.RTCPeerConnection &&
                    D.webkitRTCPeerConnection &&
                    (D.RTCPeerConnection = D.webkitRTCPeerConnection),
                    D.RTCPeerConnection &&
                      M.version < 53 &&
                      [
                        "setLocalDescription",
                        "setRemoteDescription",
                        "addIceCandidate",
                      ].forEach(function (W) {
                        var G = D.RTCPeerConnection.prototype[W],
                          ne = _({}, W, function () {
                            return (
                              (arguments[0] = new (
                                W === "addIceCandidate"
                                  ? D.RTCIceCandidate
                                  : D.RTCSessionDescription
                              )(arguments[0])),
                              G.apply(this, arguments)
                            );
                          });
                        D.RTCPeerConnection.prototype[W] = ne[W];
                      });
                }
                function X(D, M) {
                  s.wrapPeerConnectionEvent(
                    D,
                    "negotiationneeded",
                    function (W) {
                      var G = W.target;
                      if (
                        !(
                          M.version < 72 ||
                          (G.getConfiguration &&
                            G.getConfiguration().sdpSemantics === "plan-b")
                        ) ||
                        G.signalingState === "stable"
                      )
                        return W;
                    }
                  );
                }
              },
              {
                "../utils.js": 11,
                "./getdisplaymedia": 4,
                "./getusermedia": 5,
              },
            ],
            4: [
              function (n, a, c) {
                function s(l, h) {
                  (l.navigator.mediaDevices &&
                    "getDisplayMedia" in l.navigator.mediaDevices) ||
                    (l.navigator.mediaDevices &&
                      (typeof h == "function"
                        ? (l.navigator.mediaDevices.getDisplayMedia = function (
                            v
                          ) {
                            return h(v).then(function (g) {
                              var _ = v.video && v.video.width,
                                b = v.video && v.video.height,
                                C = v.video && v.video.frameRate;
                              return (
                                (v.video = {
                                  mandatory: {
                                    chromeMediaSource: "desktop",
                                    chromeMediaSourceId: g,
                                    maxFrameRate: C || 3,
                                  },
                                }),
                                _ && (v.video.mandatory.maxWidth = _),
                                b && (v.video.mandatory.maxHeight = b),
                                l.navigator.mediaDevices.getUserMedia(v)
                              );
                            });
                          })
                        : console.error(
                            "shimGetDisplayMedia: getSourceId argument is not a function"
                          )));
                }
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.shimGetDisplayMedia = s);
              },
              {},
            ],
            5: [
              function (n, a, c) {
                function s(_) {
                  if (typeof WeakMap != "function") return null;
                  var b = /* @__PURE__ */ new WeakMap(),
                    C = /* @__PURE__ */ new WeakMap();
                  return (s = function (z) {
                    return z ? C : b;
                  })(_);
                }
                function l(_, b) {
                  if (!b && _ && _.__esModule) return _;
                  if (
                    _ === null ||
                    (h(_) !== "object" && typeof _ != "function")
                  )
                    return { default: _ };
                  var C = s(b);
                  if (C && C.has(_)) return C.get(_);
                  var N = {},
                    z =
                      Object.defineProperty && Object.getOwnPropertyDescriptor;
                  for (var F in _)
                    if (
                      F !== "default" &&
                      Object.prototype.hasOwnProperty.call(_, F)
                    ) {
                      var U = z ? Object.getOwnPropertyDescriptor(_, F) : null;
                      U && (U.get || U.set)
                        ? Object.defineProperty(N, F, U)
                        : (N[F] = _[F]);
                    }
                  return (N.default = _), C && C.set(_, N), N;
                }
                function h(_) {
                  return (
                    (h =
                      typeof Symbol == "function" &&
                      vt(Symbol.iterator) == "symbol"
                        ? function (b) {
                            return vt(b);
                          }
                        : function (b) {
                            return b &&
                              typeof Symbol == "function" &&
                              b.constructor === Symbol &&
                              b !== Symbol.prototype
                              ? "symbol"
                              : vt(b);
                          }),
                    h(_)
                  );
                }
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.shimGetUserMedia = g);
                var v = l(n("../utils.js")).log;
                function g(_, b) {
                  var C = _ && _.navigator;
                  if (C.mediaDevices) {
                    var N = function (L) {
                        if (h(L) !== "object" || L.mandatory || L.optional)
                          return L;
                        var $ = {};
                        return (
                          Object.keys(L).forEach(function (te) {
                            if (
                              te !== "require" &&
                              te !== "advanced" &&
                              te !== "mediaSource"
                            ) {
                              var X =
                                h(L[te]) === "object"
                                  ? L[te]
                                  : { ideal: L[te] };
                              X.exact !== void 0 &&
                                typeof X.exact == "number" &&
                                (X.min = X.max = X.exact);
                              var D = function (G, ne) {
                                return G
                                  ? G + ne.charAt(0).toUpperCase() + ne.slice(1)
                                  : ne === "deviceId"
                                  ? "sourceId"
                                  : ne;
                              };
                              if (X.ideal !== void 0) {
                                $.optional = $.optional || [];
                                var M = {};
                                typeof X.ideal == "number"
                                  ? ((M[D("min", te)] = X.ideal),
                                    $.optional.push(M),
                                    ((M = {})[D("max", te)] = X.ideal),
                                    $.optional.push(M))
                                  : ((M[D("", te)] = X.ideal),
                                    $.optional.push(M));
                              }
                              X.exact !== void 0 && typeof X.exact != "number"
                                ? (($.mandatory = $.mandatory || {}),
                                  ($.mandatory[D("", te)] = X.exact))
                                : ["min", "max"].forEach(function (W) {
                                    X[W] !== void 0 &&
                                      (($.mandatory = $.mandatory || {}),
                                      ($.mandatory[D(W, te)] = X[W]));
                                  });
                            }
                          }),
                          L.advanced &&
                            ($.optional = ($.optional || []).concat(
                              L.advanced
                            )),
                          $
                        );
                      },
                      z = function (L, $) {
                        if (b.version >= 61) return $(L);
                        if (
                          (L = JSON.parse(JSON.stringify(L))) &&
                          h(L.audio) === "object"
                        ) {
                          var te = function (G, ne, H) {
                            ne in G &&
                              !(H in G) &&
                              ((G[H] = G[ne]), delete G[ne]);
                          };
                          te(
                            (L = JSON.parse(JSON.stringify(L))).audio,
                            "autoGainControl",
                            "googAutoGainControl"
                          ),
                            te(
                              L.audio,
                              "noiseSuppression",
                              "googNoiseSuppression"
                            ),
                            (L.audio = N(L.audio));
                        }
                        if (L && h(L.video) === "object") {
                          var X = L.video.facingMode;
                          X = X && (h(X) === "object" ? X : { ideal: X });
                          var D,
                            M = b.version < 66;
                          if (
                            X &&
                            (X.exact === "user" ||
                              X.exact === "environment" ||
                              X.ideal === "user" ||
                              X.ideal === "environment") &&
                            (!C.mediaDevices.getSupportedConstraints ||
                              !C.mediaDevices.getSupportedConstraints()
                                .facingMode ||
                              M) &&
                            (delete L.video.facingMode,
                            X.exact === "environment" ||
                            X.ideal === "environment"
                              ? (D = ["back", "rear"])
                              : (X.exact !== "user" && X.ideal !== "user") ||
                                (D = ["front"]),
                            D)
                          )
                            return C.mediaDevices
                              .enumerateDevices()
                              .then(function (W) {
                                var G = (W = W.filter(function (ne) {
                                  return ne.kind === "videoinput";
                                })).find(function (ne) {
                                  return D.some(function (H) {
                                    return ne.label.toLowerCase().includes(H);
                                  });
                                });
                                return (
                                  !G &&
                                    W.length &&
                                    D.includes("back") &&
                                    (G = W[W.length - 1]),
                                  G &&
                                    (L.video.deviceId = X.exact
                                      ? { exact: G.deviceId }
                                      : { ideal: G.deviceId }),
                                  (L.video = N(L.video)),
                                  v("chrome: " + JSON.stringify(L)),
                                  $(L)
                                );
                              });
                          L.video = N(L.video);
                        }
                        return v("chrome: " + JSON.stringify(L)), $(L);
                      },
                      F = function (L) {
                        return b.version >= 64
                          ? L
                          : {
                              name:
                                {
                                  PermissionDeniedError: "NotAllowedError",
                                  PermissionDismissedError: "NotAllowedError",
                                  InvalidStateError: "NotAllowedError",
                                  DevicesNotFoundError: "NotFoundError",
                                  ConstraintNotSatisfiedError:
                                    "OverconstrainedError",
                                  TrackStartError: "NotReadableError",
                                  MediaDeviceFailedDueToShutdown:
                                    "NotAllowedError",
                                  MediaDeviceKillSwitchOn: "NotAllowedError",
                                  TabCaptureError: "AbortError",
                                  ScreenCaptureError: "AbortError",
                                  DeviceCaptureError: "AbortError",
                                }[L.name] || L.name,
                              message: L.message,
                              constraint: L.constraint || L.constraintName,
                              toString: function () {
                                return (
                                  this.name +
                                  (this.message && ": ") +
                                  this.message
                                );
                              },
                            };
                      },
                      U = function (L, $, te) {
                        z(L, function (X) {
                          C.webkitGetUserMedia(X, $, function (D) {
                            te && te(F(D));
                          });
                        });
                      };
                    if (
                      ((C.getUserMedia = U.bind(C)),
                      C.mediaDevices.getUserMedia)
                    ) {
                      var E = C.mediaDevices.getUserMedia.bind(C.mediaDevices);
                      C.mediaDevices.getUserMedia = function (A) {
                        return z(A, function (L) {
                          return E(L).then(
                            function ($) {
                              if (
                                (L.audio && !$.getAudioTracks().length) ||
                                (L.video && !$.getVideoTracks().length)
                              )
                                throw (
                                  ($.getTracks().forEach(function (te) {
                                    te.stop();
                                  }),
                                  new DOMException("", "NotFoundError"))
                                );
                              return $;
                            },
                            function ($) {
                              return Promise.reject(F($));
                            }
                          );
                        });
                      };
                    }
                  }
                }
              },
              { "../utils.js": 11 },
            ],
            6: [
              function (n, a, c) {
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.removeExtmapAllowMixed = U),
                  (c.shimAddIceCandidateNullOrEmpty = E),
                  (c.shimConnectionState = F),
                  (c.shimMaxMessageSize = N),
                  (c.shimParameterlessSetLocalDescription = A),
                  (c.shimRTCIceCandidate = b),
                  (c.shimRTCIceCandidateRelayProtocol = C),
                  (c.shimSendThrowTypeError = z);
                var s = g(n("sdp")),
                  l = v(n("./utils"));
                function h(L) {
                  if (typeof WeakMap != "function") return null;
                  var $ = /* @__PURE__ */ new WeakMap(),
                    te = /* @__PURE__ */ new WeakMap();
                  return (h = function (D) {
                    return D ? te : $;
                  })(L);
                }
                function v(L, $) {
                  if (!$ && L && L.__esModule) return L;
                  if (
                    L === null ||
                    (_(L) !== "object" && typeof L != "function")
                  )
                    return { default: L };
                  var te = h($);
                  if (te && te.has(L)) return te.get(L);
                  var X = {},
                    D =
                      Object.defineProperty && Object.getOwnPropertyDescriptor;
                  for (var M in L)
                    if (
                      M !== "default" &&
                      Object.prototype.hasOwnProperty.call(L, M)
                    ) {
                      var W = D ? Object.getOwnPropertyDescriptor(L, M) : null;
                      W && (W.get || W.set)
                        ? Object.defineProperty(X, M, W)
                        : (X[M] = L[M]);
                    }
                  return (X.default = L), te && te.set(L, X), X;
                }
                function g(L) {
                  return L && L.__esModule ? L : { default: L };
                }
                function _(L) {
                  return (
                    (_ =
                      typeof Symbol == "function" &&
                      vt(Symbol.iterator) == "symbol"
                        ? function ($) {
                            return vt($);
                          }
                        : function ($) {
                            return $ &&
                              typeof Symbol == "function" &&
                              $.constructor === Symbol &&
                              $ !== Symbol.prototype
                              ? "symbol"
                              : vt($);
                          }),
                    _(L)
                  );
                }
                function b(L) {
                  if (
                    !(
                      !L.RTCIceCandidate ||
                      (L.RTCIceCandidate &&
                        "foundation" in L.RTCIceCandidate.prototype)
                    )
                  ) {
                    var $ = L.RTCIceCandidate;
                    (L.RTCIceCandidate = function (te) {
                      if (
                        (_(te) === "object" &&
                          te.candidate &&
                          te.candidate.indexOf("a=") === 0 &&
                          ((te = JSON.parse(JSON.stringify(te))).candidate =
                            te.candidate.substring(2)),
                        te.candidate && te.candidate.length)
                      ) {
                        var X = new $(te),
                          D = s.default.parseCandidate(te.candidate);
                        for (var M in D)
                          M in X ||
                            Object.defineProperty(X, M, { value: D[M] });
                        return (
                          (X.toJSON = function () {
                            return {
                              candidate: X.candidate,
                              sdpMid: X.sdpMid,
                              sdpMLineIndex: X.sdpMLineIndex,
                              usernameFragment: X.usernameFragment,
                            };
                          }),
                          X
                        );
                      }
                      return new $(te);
                    }),
                      (L.RTCIceCandidate.prototype = $.prototype),
                      l.wrapPeerConnectionEvent(
                        L,
                        "icecandidate",
                        function (te) {
                          return (
                            te.candidate &&
                              Object.defineProperty(te, "candidate", {
                                value: new L.RTCIceCandidate(te.candidate),
                                writable: "false",
                              }),
                            te
                          );
                        }
                      );
                  }
                }
                function C(L) {
                  !L.RTCIceCandidate ||
                    (L.RTCIceCandidate &&
                      "relayProtocol" in L.RTCIceCandidate.prototype) ||
                    l.wrapPeerConnectionEvent(L, "icecandidate", function ($) {
                      if ($.candidate) {
                        var te = s.default.parseCandidate(
                          $.candidate.candidate
                        );
                        te.type === "relay" &&
                          ($.candidate.relayProtocol = {
                            0: "tls",
                            1: "tcp",
                            2: "udp",
                          }[te.priority >> 24]);
                      }
                      return $;
                    });
                }
                function N(L, $) {
                  if (L.RTCPeerConnection) {
                    "sctp" in L.RTCPeerConnection.prototype ||
                      Object.defineProperty(
                        L.RTCPeerConnection.prototype,
                        "sctp",
                        {
                          get: function () {
                            return this._sctp === void 0 ? null : this._sctp;
                          },
                        }
                      );
                    var te = function (ne) {
                        if (!ne || !ne.sdp) return !1;
                        var H = s.default.splitSections(ne.sdp);
                        return (
                          H.shift(),
                          H.some(function (R) {
                            var w = s.default.parseMLine(R);
                            return (
                              w &&
                              w.kind === "application" &&
                              w.protocol.indexOf("SCTP") !== -1
                            );
                          })
                        );
                      },
                      X = function (ne) {
                        var H = ne.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
                        if (H === null || H.length < 2) return -1;
                        var R = parseInt(H[1], 10);
                        return R != R ? -1 : R;
                      },
                      D = function (ne) {
                        var H = 65536;
                        return (
                          $.browser === "firefox" &&
                            (H =
                              $.version < 57
                                ? ne === -1
                                  ? 16384
                                  : 2147483637
                                : $.version < 60
                                ? $.version === 57
                                  ? 65535
                                  : 65536
                                : 2147483637),
                          H
                        );
                      },
                      M = function (ne, H) {
                        var R = 65536;
                        $.browser === "firefox" &&
                          $.version === 57 &&
                          (R = 65535);
                        var w = s.default.matchPrefix(
                          ne.sdp,
                          "a=max-message-size:"
                        );
                        return (
                          w.length > 0
                            ? (R = parseInt(w[0].substring(19), 10))
                            : $.browser === "firefox" &&
                              H !== -1 &&
                              (R = 2147483637),
                          R
                        );
                      },
                      W = L.RTCPeerConnection.prototype.setRemoteDescription;
                    L.RTCPeerConnection.prototype.setRemoteDescription =
                      function () {
                        if (
                          ((this._sctp = null),
                          $.browser === "chrome" &&
                            $.version >= 76 &&
                            this.getConfiguration().sdpSemantics === "plan-b" &&
                            Object.defineProperty(this, "sctp", {
                              get: function () {
                                return this._sctp === void 0
                                  ? null
                                  : this._sctp;
                              },
                              enumerable: !0,
                              configurable: !0,
                            }),
                          te(arguments[0]))
                        ) {
                          var G,
                            ne = X(arguments[0]),
                            H = D(ne),
                            R = M(arguments[0], ne);
                          G =
                            H === 0 && R === 0
                              ? Number.POSITIVE_INFINITY
                              : H === 0 || R === 0
                              ? Math.max(H, R)
                              : Math.min(H, R);
                          var w = {};
                          Object.defineProperty(w, "maxMessageSize", {
                            get: function () {
                              return G;
                            },
                          }),
                            (this._sctp = w);
                        }
                        return W.apply(this, arguments);
                      };
                  }
                }
                function z(L) {
                  if (
                    L.RTCPeerConnection &&
                    "createDataChannel" in L.RTCPeerConnection.prototype
                  ) {
                    var $ = L.RTCPeerConnection.prototype.createDataChannel;
                    (L.RTCPeerConnection.prototype.createDataChannel =
                      function () {
                        var X = $.apply(this, arguments);
                        return te(X, this), X;
                      }),
                      l.wrapPeerConnectionEvent(L, "datachannel", function (X) {
                        return te(X.channel, X.target), X;
                      });
                  }
                  function te(X, D) {
                    var M = X.send;
                    X.send = function () {
                      var W = arguments[0],
                        G = W.length || W.size || W.byteLength;
                      if (
                        X.readyState === "open" &&
                        D.sctp &&
                        G > D.sctp.maxMessageSize
                      )
                        throw new TypeError(
                          "Message too large (can send a maximum of " +
                            D.sctp.maxMessageSize +
                            " bytes)"
                        );
                      return M.apply(X, arguments);
                    };
                  }
                }
                function F(L) {
                  if (
                    L.RTCPeerConnection &&
                    !("connectionState" in L.RTCPeerConnection.prototype)
                  ) {
                    var $ = L.RTCPeerConnection.prototype;
                    Object.defineProperty($, "connectionState", {
                      get: function () {
                        return (
                          { completed: "connected", checking: "connecting" }[
                            this.iceConnectionState
                          ] || this.iceConnectionState
                        );
                      },
                      enumerable: !0,
                      configurable: !0,
                    }),
                      Object.defineProperty($, "onconnectionstatechange", {
                        get: function () {
                          return this._onconnectionstatechange || null;
                        },
                        set: function (X) {
                          this._onconnectionstatechange &&
                            (this.removeEventListener(
                              "connectionstatechange",
                              this._onconnectionstatechange
                            ),
                            delete this._onconnectionstatechange),
                            X &&
                              this.addEventListener(
                                "connectionstatechange",
                                (this._onconnectionstatechange = X)
                              );
                        },
                        enumerable: !0,
                        configurable: !0,
                      }),
                      ["setLocalDescription", "setRemoteDescription"].forEach(
                        function (te) {
                          var X = $[te];
                          $[te] = function () {
                            return (
                              this._connectionstatechangepoly ||
                                ((this._connectionstatechangepoly = function (
                                  D
                                ) {
                                  var M = D.target;
                                  if (
                                    M._lastConnectionState !== M.connectionState
                                  ) {
                                    M._lastConnectionState = M.connectionState;
                                    var W = new Event(
                                      "connectionstatechange",
                                      D
                                    );
                                    M.dispatchEvent(W);
                                  }
                                  return D;
                                }),
                                this.addEventListener(
                                  "iceconnectionstatechange",
                                  this._connectionstatechangepoly
                                )),
                              X.apply(this, arguments)
                            );
                          };
                        }
                      );
                  }
                }
                function U(L, $) {
                  if (
                    L.RTCPeerConnection &&
                    !(
                      ($.browser === "chrome" && $.version >= 71) ||
                      ($.browser === "safari" && $.version >= 605)
                    )
                  ) {
                    var te = L.RTCPeerConnection.prototype.setRemoteDescription;
                    L.RTCPeerConnection.prototype.setRemoteDescription =
                      function (X) {
                        if (
                          X &&
                          X.sdp &&
                          X.sdp.indexOf(`
a=extmap-allow-mixed`) !== -1
                        ) {
                          var D = X.sdp
                            .split(
                              `
`
                            )
                            .filter(function (M) {
                              return M.trim() !== "a=extmap-allow-mixed";
                            }).join(`
`);
                          L.RTCSessionDescription &&
                          X instanceof L.RTCSessionDescription
                            ? (arguments[0] = new L.RTCSessionDescription({
                                type: X.type,
                                sdp: D,
                              }))
                            : (X.sdp = D);
                        }
                        return te.apply(this, arguments);
                      };
                  }
                }
                function E(L, $) {
                  if (L.RTCPeerConnection && L.RTCPeerConnection.prototype) {
                    var te = L.RTCPeerConnection.prototype.addIceCandidate;
                    te &&
                      te.length !== 0 &&
                      (L.RTCPeerConnection.prototype.addIceCandidate =
                        function () {
                          return arguments[0]
                            ? (($.browser === "chrome" && $.version < 78) ||
                                ($.browser === "firefox" && $.version < 68) ||
                                $.browser === "safari") &&
                              arguments[0] &&
                              arguments[0].candidate === ""
                              ? Promise.resolve()
                              : te.apply(this, arguments)
                            : (arguments[1] && arguments[1].apply(null),
                              Promise.resolve());
                        });
                  }
                }
                function A(L, $) {
                  if (L.RTCPeerConnection && L.RTCPeerConnection.prototype) {
                    var te = L.RTCPeerConnection.prototype.setLocalDescription;
                    te &&
                      te.length !== 0 &&
                      (L.RTCPeerConnection.prototype.setLocalDescription =
                        function () {
                          var X = this,
                            D = arguments[0] || {};
                          if (_(D) !== "object" || (D.type && D.sdp))
                            return te.apply(this, arguments);
                          if (!(D = { type: D.type, sdp: D.sdp }).type)
                            switch (this.signalingState) {
                              case "stable":
                              case "have-local-offer":
                              case "have-remote-pranswer":
                                D.type = "offer";
                                break;
                              default:
                                D.type = "answer";
                            }
                          return D.sdp ||
                            (D.type !== "offer" && D.type !== "answer")
                            ? te.apply(this, [D])
                            : (D.type === "offer"
                                ? this.createOffer
                                : this.createAnswer
                              )
                                .apply(this)
                                .then(function (M) {
                                  return te.apply(X, [M]);
                                });
                        });
                  }
                }
              },
              { "./utils": 11, sdp: 12 },
            ],
            7: [
              function (n, a, c) {
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.shimAddTransceiver = G),
                  (c.shimCreateAnswer = R),
                  (c.shimCreateOffer = H),
                  Object.defineProperty(c, "shimGetDisplayMedia", {
                    enumerable: !0,
                    get: function () {
                      return h.shimGetDisplayMedia;
                    },
                  }),
                  (c.shimGetParameters = ne),
                  Object.defineProperty(c, "shimGetUserMedia", {
                    enumerable: !0,
                    get: function () {
                      return l.shimGetUserMedia;
                    },
                  }),
                  (c.shimOnTrack = $),
                  (c.shimPeerConnection = te),
                  (c.shimRTCDataChannel = W),
                  (c.shimReceiverGetStats = D),
                  (c.shimRemoveStream = M),
                  (c.shimSenderGetStats = X);
                var s = g(n("../utils")),
                  l = n("./getusermedia"),
                  h = n("./getdisplaymedia");
                function v(w) {
                  if (typeof WeakMap != "function") return null;
                  var q = /* @__PURE__ */ new WeakMap(),
                    J = /* @__PURE__ */ new WeakMap();
                  return (v = function (pe) {
                    return pe ? J : q;
                  })(w);
                }
                function g(w, q) {
                  if (!q && w && w.__esModule) return w;
                  if (
                    w === null ||
                    (L(w) !== "object" && typeof w != "function")
                  )
                    return { default: w };
                  var J = v(q);
                  if (J && J.has(w)) return J.get(w);
                  var re = {},
                    pe =
                      Object.defineProperty && Object.getOwnPropertyDescriptor;
                  for (var ye in w)
                    if (
                      ye !== "default" &&
                      Object.prototype.hasOwnProperty.call(w, ye)
                    ) {
                      var Ne = pe
                        ? Object.getOwnPropertyDescriptor(w, ye)
                        : null;
                      Ne && (Ne.get || Ne.set)
                        ? Object.defineProperty(re, ye, Ne)
                        : (re[ye] = w[ye]);
                    }
                  return (re.default = w), J && J.set(w, re), re;
                }
                function _(w) {
                  return z(w) || N(w) || C(w) || b();
                }
                function b() {
                  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
                }
                function C(w, q) {
                  if (w) {
                    if (typeof w == "string") return F(w, q);
                    var J = Object.prototype.toString.call(w).slice(8, -1);
                    return (
                      J === "Object" &&
                        w.constructor &&
                        (J = w.constructor.name),
                      J === "Map" || J === "Set"
                        ? Array.from(w)
                        : J === "Arguments" ||
                          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J)
                        ? F(w, q)
                        : void 0
                    );
                  }
                }
                function N(w) {
                  if (
                    (typeof Symbol != "undefined" &&
                      w[Symbol.iterator] != null) ||
                    w["@@iterator"] != null
                  )
                    return Array.from(w);
                }
                function z(w) {
                  if (Array.isArray(w)) return F(w);
                }
                function F(w, q) {
                  (q == null || q > w.length) && (q = w.length);
                  for (var J = 0, re = new Array(q); J < q; J++) re[J] = w[J];
                  return re;
                }
                function U(w, q, J) {
                  return (
                    (q = E(q)) in w
                      ? Object.defineProperty(w, q, {
                          value: J,
                          enumerable: !0,
                          configurable: !0,
                          writable: !0,
                        })
                      : (w[q] = J),
                    w
                  );
                }
                function E(w) {
                  var q = A(w, "string");
                  return L(q) === "symbol" ? q : String(q);
                }
                function A(w, q) {
                  if (L(w) !== "object" || w === null) return w;
                  var J = w[Symbol.toPrimitive];
                  if (J !== void 0) {
                    var re = J.call(w, q || "default");
                    if (L(re) !== "object") return re;
                    throw new TypeError(
                      "@@toPrimitive must return a primitive value."
                    );
                  }
                  return (q === "string" ? String : Number)(w);
                }
                function L(w) {
                  return (
                    (L =
                      typeof Symbol == "function" &&
                      vt(Symbol.iterator) == "symbol"
                        ? function (q) {
                            return vt(q);
                          }
                        : function (q) {
                            return q &&
                              typeof Symbol == "function" &&
                              q.constructor === Symbol &&
                              q !== Symbol.prototype
                              ? "symbol"
                              : vt(q);
                          }),
                    L(w)
                  );
                }
                function $(w) {
                  L(w) === "object" &&
                    w.RTCTrackEvent &&
                    "receiver" in w.RTCTrackEvent.prototype &&
                    !("transceiver" in w.RTCTrackEvent.prototype) &&
                    Object.defineProperty(
                      w.RTCTrackEvent.prototype,
                      "transceiver",
                      {
                        get: function () {
                          return { receiver: this.receiver };
                        },
                      }
                    );
                }
                function te(w, q) {
                  if (
                    L(w) === "object" &&
                    (w.RTCPeerConnection || w.mozRTCPeerConnection)
                  ) {
                    !w.RTCPeerConnection &&
                      w.mozRTCPeerConnection &&
                      (w.RTCPeerConnection = w.mozRTCPeerConnection),
                      q.version < 53 &&
                        [
                          "setLocalDescription",
                          "setRemoteDescription",
                          "addIceCandidate",
                        ].forEach(function (pe) {
                          var ye = w.RTCPeerConnection.prototype[pe],
                            Ne = U({}, pe, function () {
                              return (
                                (arguments[0] = new (
                                  pe === "addIceCandidate"
                                    ? w.RTCIceCandidate
                                    : w.RTCSessionDescription
                                )(arguments[0])),
                                ye.apply(this, arguments)
                              );
                            });
                          w.RTCPeerConnection.prototype[pe] = Ne[pe];
                        });
                    var J = {
                        inboundrtp: "inbound-rtp",
                        outboundrtp: "outbound-rtp",
                        candidatepair: "candidate-pair",
                        localcandidate: "local-candidate",
                        remotecandidate: "remote-candidate",
                      },
                      re = w.RTCPeerConnection.prototype.getStats;
                    w.RTCPeerConnection.prototype.getStats = function () {
                      var pe = Array.prototype.slice.call(arguments),
                        ye = pe[0],
                        Ne = pe[1],
                        Ve = pe[2];
                      return re
                        .apply(this, [ye || null])
                        .then(function (Kt) {
                          if (q.version < 53 && !Ne)
                            try {
                              Kt.forEach(function (Ht) {
                                Ht.type = J[Ht.type] || Ht.type;
                              });
                            } catch (Ht) {
                              if (Ht.name !== "TypeError") throw Ht;
                              Kt.forEach(function (Qt, bn) {
                                Kt.set(
                                  bn,
                                  Object.assign({}, Qt, {
                                    type: J[Qt.type] || Qt.type,
                                  })
                                );
                              });
                            }
                          return Kt;
                        })
                        .then(Ne, Ve);
                    };
                  }
                }
                function X(w) {
                  if (
                    L(w) === "object" &&
                    w.RTCPeerConnection &&
                    w.RTCRtpSender &&
                    (!w.RTCRtpSender ||
                      !("getStats" in w.RTCRtpSender.prototype))
                  ) {
                    var q = w.RTCPeerConnection.prototype.getSenders;
                    q &&
                      (w.RTCPeerConnection.prototype.getSenders = function () {
                        var re = this,
                          pe = q.apply(this, []);
                        return (
                          pe.forEach(function (ye) {
                            return (ye._pc = re);
                          }),
                          pe
                        );
                      });
                    var J = w.RTCPeerConnection.prototype.addTrack;
                    J &&
                      (w.RTCPeerConnection.prototype.addTrack = function () {
                        var re = J.apply(this, arguments);
                        return (re._pc = this), re;
                      }),
                      (w.RTCRtpSender.prototype.getStats = function () {
                        return this.track
                          ? this._pc.getStats(this.track)
                          : Promise.resolve(/* @__PURE__ */ new Map());
                      });
                  }
                }
                function D(w) {
                  if (
                    L(w) === "object" &&
                    w.RTCPeerConnection &&
                    w.RTCRtpSender &&
                    (!w.RTCRtpSender ||
                      !("getStats" in w.RTCRtpReceiver.prototype))
                  ) {
                    var q = w.RTCPeerConnection.prototype.getReceivers;
                    q &&
                      (w.RTCPeerConnection.prototype.getReceivers =
                        function () {
                          var J = this,
                            re = q.apply(this, []);
                          return (
                            re.forEach(function (pe) {
                              return (pe._pc = J);
                            }),
                            re
                          );
                        }),
                      s.wrapPeerConnectionEvent(w, "track", function (J) {
                        return (J.receiver._pc = J.srcElement), J;
                      }),
                      (w.RTCRtpReceiver.prototype.getStats = function () {
                        return this._pc.getStats(this.track);
                      });
                  }
                }
                function M(w) {
                  w.RTCPeerConnection &&
                    !("removeStream" in w.RTCPeerConnection.prototype) &&
                    (w.RTCPeerConnection.prototype.removeStream = function (q) {
                      var J = this;
                      s.deprecated("removeStream", "removeTrack"),
                        this.getSenders().forEach(function (re) {
                          re.track &&
                            q.getTracks().includes(re.track) &&
                            J.removeTrack(re);
                        });
                    });
                }
                function W(w) {
                  w.DataChannel &&
                    !w.RTCDataChannel &&
                    (w.RTCDataChannel = w.DataChannel);
                }
                function G(w) {
                  if (L(w) === "object" && w.RTCPeerConnection) {
                    var q = w.RTCPeerConnection.prototype.addTransceiver;
                    q &&
                      (w.RTCPeerConnection.prototype.addTransceiver =
                        function () {
                          this.setParametersPromises = [];
                          var J = arguments[1] && arguments[1].sendEncodings;
                          J === void 0 && (J = []);
                          var re = (J = _(J)).length > 0;
                          re &&
                            J.forEach(function (Ve) {
                              if (
                                "rid" in Ve &&
                                !/^[a-z0-9]{0,16}$/i.test(Ve.rid)
                              )
                                throw new TypeError(
                                  "Invalid RID value provided."
                                );
                              if (
                                "scaleResolutionDownBy" in Ve &&
                                !(parseFloat(Ve.scaleResolutionDownBy) >= 1)
                              )
                                throw new RangeError(
                                  "scale_resolution_down_by must be >= 1.0"
                                );
                              if (
                                "maxFramerate" in Ve &&
                                !(parseFloat(Ve.maxFramerate) >= 0)
                              )
                                throw new RangeError(
                                  "max_framerate must be >= 0.0"
                                );
                            });
                          var pe = q.apply(this, arguments);
                          if (re) {
                            var ye = pe.sender,
                              Ne = ye.getParameters();
                            (!("encodings" in Ne) ||
                              (Ne.encodings.length === 1 &&
                                Object.keys(Ne.encodings[0]).length === 0)) &&
                              ((Ne.encodings = J),
                              (ye.sendEncodings = J),
                              this.setParametersPromises.push(
                                ye
                                  .setParameters(Ne)
                                  .then(function () {
                                    delete ye.sendEncodings;
                                  })
                                  .catch(function () {
                                    delete ye.sendEncodings;
                                  })
                              ));
                          }
                          return pe;
                        });
                  }
                }
                function ne(w) {
                  if (L(w) === "object" && w.RTCRtpSender) {
                    var q = w.RTCRtpSender.prototype.getParameters;
                    q &&
                      (w.RTCRtpSender.prototype.getParameters = function () {
                        var J = q.apply(this, arguments);
                        return (
                          "encodings" in J ||
                            (J.encodings = [].concat(
                              this.sendEncodings || [{}]
                            )),
                          J
                        );
                      });
                  }
                }
                function H(w) {
                  if (L(w) === "object" && w.RTCPeerConnection) {
                    var q = w.RTCPeerConnection.prototype.createOffer;
                    w.RTCPeerConnection.prototype.createOffer = function () {
                      var J = arguments,
                        re = this;
                      return this.setParametersPromises &&
                        this.setParametersPromises.length
                        ? Promise.all(this.setParametersPromises)
                            .then(function () {
                              return q.apply(re, J);
                            })
                            .finally(function () {
                              re.setParametersPromises = [];
                            })
                        : q.apply(this, arguments);
                    };
                  }
                }
                function R(w) {
                  if (L(w) === "object" && w.RTCPeerConnection) {
                    var q = w.RTCPeerConnection.prototype.createAnswer;
                    w.RTCPeerConnection.prototype.createAnswer = function () {
                      var J = arguments,
                        re = this;
                      return this.setParametersPromises &&
                        this.setParametersPromises.length
                        ? Promise.all(this.setParametersPromises)
                            .then(function () {
                              return q.apply(re, J);
                            })
                            .finally(function () {
                              re.setParametersPromises = [];
                            })
                        : q.apply(this, arguments);
                    };
                  }
                }
              },
              { "../utils": 11, "./getdisplaymedia": 8, "./getusermedia": 9 },
            ],
            8: [
              function (n, a, c) {
                function s(l, h) {
                  (l.navigator.mediaDevices &&
                    "getDisplayMedia" in l.navigator.mediaDevices) ||
                    (l.navigator.mediaDevices &&
                      (l.navigator.mediaDevices.getDisplayMedia = function (v) {
                        if (!v || !v.video) {
                          var g = new DOMException(
                            "getDisplayMedia without video constraints is undefined"
                          );
                          return (
                            (g.name = "NotFoundError"),
                            (g.code = 8),
                            Promise.reject(g)
                          );
                        }
                        return (
                          v.video === !0
                            ? (v.video = { mediaSource: h })
                            : (v.video.mediaSource = h),
                          l.navigator.mediaDevices.getUserMedia(v)
                        );
                      }));
                }
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.shimGetDisplayMedia = s);
              },
              {},
            ],
            9: [
              function (n, a, c) {
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.shimGetUserMedia = g);
                var s = h(n("../utils"));
                function l(_) {
                  if (typeof WeakMap != "function") return null;
                  var b = /* @__PURE__ */ new WeakMap(),
                    C = /* @__PURE__ */ new WeakMap();
                  return (l = function (z) {
                    return z ? C : b;
                  })(_);
                }
                function h(_, b) {
                  if (!b && _ && _.__esModule) return _;
                  if (
                    _ === null ||
                    (v(_) !== "object" && typeof _ != "function")
                  )
                    return { default: _ };
                  var C = l(b);
                  if (C && C.has(_)) return C.get(_);
                  var N = {},
                    z =
                      Object.defineProperty && Object.getOwnPropertyDescriptor;
                  for (var F in _)
                    if (
                      F !== "default" &&
                      Object.prototype.hasOwnProperty.call(_, F)
                    ) {
                      var U = z ? Object.getOwnPropertyDescriptor(_, F) : null;
                      U && (U.get || U.set)
                        ? Object.defineProperty(N, F, U)
                        : (N[F] = _[F]);
                    }
                  return (N.default = _), C && C.set(_, N), N;
                }
                function v(_) {
                  return (
                    (v =
                      typeof Symbol == "function" &&
                      vt(Symbol.iterator) == "symbol"
                        ? function (b) {
                            return vt(b);
                          }
                        : function (b) {
                            return b &&
                              typeof Symbol == "function" &&
                              b.constructor === Symbol &&
                              b !== Symbol.prototype
                              ? "symbol"
                              : vt(b);
                          }),
                    v(_)
                  );
                }
                function g(_, b) {
                  var C = _ && _.navigator,
                    N = _ && _.MediaStreamTrack;
                  if (
                    ((C.getUserMedia = function (A, L, $) {
                      s.deprecated(
                        "navigator.getUserMedia",
                        "navigator.mediaDevices.getUserMedia"
                      ),
                        C.mediaDevices.getUserMedia(A).then(L, $);
                    }),
                    !(
                      b.version > 55 &&
                      "autoGainControl" in
                        C.mediaDevices.getSupportedConstraints()
                    ))
                  ) {
                    var z = function (L, $, te) {
                        $ in L && !(te in L) && ((L[te] = L[$]), delete L[$]);
                      },
                      F = C.mediaDevices.getUserMedia.bind(C.mediaDevices);
                    if (
                      ((C.mediaDevices.getUserMedia = function (A) {
                        return (
                          v(A) === "object" &&
                            v(A.audio) === "object" &&
                            ((A = JSON.parse(JSON.stringify(A))),
                            z(A.audio, "autoGainControl", "mozAutoGainControl"),
                            z(
                              A.audio,
                              "noiseSuppression",
                              "mozNoiseSuppression"
                            )),
                          F(A)
                        );
                      }),
                      N && N.prototype.getSettings)
                    ) {
                      var U = N.prototype.getSettings;
                      N.prototype.getSettings = function () {
                        var A = U.apply(this, arguments);
                        return (
                          z(A, "mozAutoGainControl", "autoGainControl"),
                          z(A, "mozNoiseSuppression", "noiseSuppression"),
                          A
                        );
                      };
                    }
                    if (N && N.prototype.applyConstraints) {
                      var E = N.prototype.applyConstraints;
                      N.prototype.applyConstraints = function (A) {
                        return (
                          this.kind === "audio" &&
                            v(A) === "object" &&
                            ((A = JSON.parse(JSON.stringify(A))),
                            z(A, "autoGainControl", "mozAutoGainControl"),
                            z(A, "noiseSuppression", "mozNoiseSuppression")),
                          E.apply(this, [A])
                        );
                      };
                    }
                  }
                }
              },
              { "../utils": 11 },
            ],
            10: [
              function (n, a, c) {
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.shimAudioContext = E),
                  (c.shimCallbacksAPI = b),
                  (c.shimConstraints = N),
                  (c.shimCreateOfferLegacy = U),
                  (c.shimGetUserMedia = C),
                  (c.shimLocalStreamsAPI = g),
                  (c.shimRTCIceServerUrls = z),
                  (c.shimRemoteStreamsAPI = _),
                  (c.shimTrackEventTransceiver = F);
                var s = h(n("../utils"));
                function l(A) {
                  if (typeof WeakMap != "function") return null;
                  var L = /* @__PURE__ */ new WeakMap(),
                    $ = /* @__PURE__ */ new WeakMap();
                  return (l = function (X) {
                    return X ? $ : L;
                  })(A);
                }
                function h(A, L) {
                  if (!L && A && A.__esModule) return A;
                  if (
                    A === null ||
                    (v(A) !== "object" && typeof A != "function")
                  )
                    return { default: A };
                  var $ = l(L);
                  if ($ && $.has(A)) return $.get(A);
                  var te = {},
                    X =
                      Object.defineProperty && Object.getOwnPropertyDescriptor;
                  for (var D in A)
                    if (
                      D !== "default" &&
                      Object.prototype.hasOwnProperty.call(A, D)
                    ) {
                      var M = X ? Object.getOwnPropertyDescriptor(A, D) : null;
                      M && (M.get || M.set)
                        ? Object.defineProperty(te, D, M)
                        : (te[D] = A[D]);
                    }
                  return (te.default = A), $ && $.set(A, te), te;
                }
                function v(A) {
                  return (
                    (v =
                      typeof Symbol == "function" &&
                      vt(Symbol.iterator) == "symbol"
                        ? function (L) {
                            return vt(L);
                          }
                        : function (L) {
                            return L &&
                              typeof Symbol == "function" &&
                              L.constructor === Symbol &&
                              L !== Symbol.prototype
                              ? "symbol"
                              : vt(L);
                          }),
                    v(A)
                  );
                }
                function g(A) {
                  if (v(A) === "object" && A.RTCPeerConnection) {
                    if (
                      ("getLocalStreams" in A.RTCPeerConnection.prototype ||
                        (A.RTCPeerConnection.prototype.getLocalStreams =
                          function () {
                            return (
                              this._localStreams || (this._localStreams = []),
                              this._localStreams
                            );
                          }),
                      !("addStream" in A.RTCPeerConnection.prototype))
                    ) {
                      var L = A.RTCPeerConnection.prototype.addTrack;
                      (A.RTCPeerConnection.prototype.addStream = function ($) {
                        var te = this;
                        this._localStreams || (this._localStreams = []),
                          this._localStreams.includes($) ||
                            this._localStreams.push($),
                          $.getAudioTracks().forEach(function (X) {
                            return L.call(te, X, $);
                          }),
                          $.getVideoTracks().forEach(function (X) {
                            return L.call(te, X, $);
                          });
                      }),
                        (A.RTCPeerConnection.prototype.addTrack = function ($) {
                          for (
                            var te = this,
                              X = arguments.length,
                              D = new Array(X > 1 ? X - 1 : 0),
                              M = 1;
                            M < X;
                            M++
                          )
                            D[M - 1] = arguments[M];
                          return (
                            D &&
                              D.forEach(function (W) {
                                te._localStreams
                                  ? te._localStreams.includes(W) ||
                                    te._localStreams.push(W)
                                  : (te._localStreams = [W]);
                              }),
                            L.apply(this, arguments)
                          );
                        });
                    }
                    "removeStream" in A.RTCPeerConnection.prototype ||
                      (A.RTCPeerConnection.prototype.removeStream = function (
                        $
                      ) {
                        var te = this;
                        this._localStreams || (this._localStreams = []);
                        var X = this._localStreams.indexOf($);
                        if (X !== -1) {
                          this._localStreams.splice(X, 1);
                          var D = $.getTracks();
                          this.getSenders().forEach(function (M) {
                            D.includes(M.track) && te.removeTrack(M);
                          });
                        }
                      });
                  }
                }
                function _(A) {
                  if (
                    v(A) === "object" &&
                    A.RTCPeerConnection &&
                    ("getRemoteStreams" in A.RTCPeerConnection.prototype ||
                      (A.RTCPeerConnection.prototype.getRemoteStreams =
                        function () {
                          return this._remoteStreams ? this._remoteStreams : [];
                        }),
                    !("onaddstream" in A.RTCPeerConnection.prototype))
                  ) {
                    Object.defineProperty(
                      A.RTCPeerConnection.prototype,
                      "onaddstream",
                      {
                        get: function () {
                          return this._onaddstream;
                        },
                        set: function (te) {
                          var X = this;
                          this._onaddstream &&
                            (this.removeEventListener(
                              "addstream",
                              this._onaddstream
                            ),
                            this.removeEventListener(
                              "track",
                              this._onaddstreampoly
                            )),
                            this.addEventListener(
                              "addstream",
                              (this._onaddstream = te)
                            ),
                            this.addEventListener(
                              "track",
                              (this._onaddstreampoly = function (D) {
                                D.streams.forEach(function (M) {
                                  if (
                                    (X._remoteStreams ||
                                      (X._remoteStreams = []),
                                    !X._remoteStreams.includes(M))
                                  ) {
                                    X._remoteStreams.push(M);
                                    var W = new Event("addstream");
                                    (W.stream = M), X.dispatchEvent(W);
                                  }
                                });
                              })
                            );
                        },
                      }
                    );
                    var L = A.RTCPeerConnection.prototype.setRemoteDescription;
                    A.RTCPeerConnection.prototype.setRemoteDescription =
                      function () {
                        var $ = this;
                        return (
                          this._onaddstreampoly ||
                            this.addEventListener(
                              "track",
                              (this._onaddstreampoly = function (te) {
                                te.streams.forEach(function (X) {
                                  if (
                                    ($._remoteStreams ||
                                      ($._remoteStreams = []),
                                    !($._remoteStreams.indexOf(X) >= 0))
                                  ) {
                                    $._remoteStreams.push(X);
                                    var D = new Event("addstream");
                                    (D.stream = X), $.dispatchEvent(D);
                                  }
                                });
                              })
                            ),
                          L.apply($, arguments)
                        );
                      };
                  }
                }
                function b(A) {
                  if (v(A) === "object" && A.RTCPeerConnection) {
                    var L = A.RTCPeerConnection.prototype,
                      $ = L.createOffer,
                      te = L.createAnswer,
                      X = L.setLocalDescription,
                      D = L.setRemoteDescription,
                      M = L.addIceCandidate;
                    (L.createOffer = function (G, ne) {
                      var H =
                          arguments.length >= 2 ? arguments[2] : arguments[0],
                        R = $.apply(this, [H]);
                      return ne ? (R.then(G, ne), Promise.resolve()) : R;
                    }),
                      (L.createAnswer = function (G, ne) {
                        var H =
                            arguments.length >= 2 ? arguments[2] : arguments[0],
                          R = te.apply(this, [H]);
                        return ne ? (R.then(G, ne), Promise.resolve()) : R;
                      });
                    var W = function (ne, H, R) {
                      var w = X.apply(this, [ne]);
                      return R ? (w.then(H, R), Promise.resolve()) : w;
                    };
                    (L.setLocalDescription = W),
                      (W = function (ne, H, R) {
                        var w = D.apply(this, [ne]);
                        return R ? (w.then(H, R), Promise.resolve()) : w;
                      }),
                      (L.setRemoteDescription = W),
                      (W = function (ne, H, R) {
                        var w = M.apply(this, [ne]);
                        return R ? (w.then(H, R), Promise.resolve()) : w;
                      }),
                      (L.addIceCandidate = W);
                  }
                }
                function C(A) {
                  var L = A && A.navigator;
                  if (L.mediaDevices && L.mediaDevices.getUserMedia) {
                    var $ = L.mediaDevices,
                      te = $.getUserMedia.bind($);
                    L.mediaDevices.getUserMedia = function (X) {
                      return te(N(X));
                    };
                  }
                  !L.getUserMedia &&
                    L.mediaDevices &&
                    L.mediaDevices.getUserMedia &&
                    (L.getUserMedia = function (X, D, M) {
                      L.mediaDevices.getUserMedia(X).then(D, M);
                    }.bind(L));
                }
                function N(A) {
                  return A && A.video !== void 0
                    ? Object.assign({}, A, { video: s.compactObject(A.video) })
                    : A;
                }
                function z(A) {
                  if (A.RTCPeerConnection) {
                    var L = A.RTCPeerConnection;
                    (A.RTCPeerConnection = function ($, te) {
                      if ($ && $.iceServers) {
                        for (var X = [], D = 0; D < $.iceServers.length; D++) {
                          var M = $.iceServers[D];
                          M.urls === void 0 && M.url
                            ? (s.deprecated(
                                "RTCIceServer.url",
                                "RTCIceServer.urls"
                              ),
                              ((M = JSON.parse(JSON.stringify(M))).urls =
                                M.url),
                              delete M.url,
                              X.push(M))
                            : X.push($.iceServers[D]);
                        }
                        $.iceServers = X;
                      }
                      return new L($, te);
                    }),
                      (A.RTCPeerConnection.prototype = L.prototype),
                      "generateCertificate" in L &&
                        Object.defineProperty(
                          A.RTCPeerConnection,
                          "generateCertificate",
                          {
                            get: function () {
                              return L.generateCertificate;
                            },
                          }
                        );
                  }
                }
                function F(A) {
                  v(A) === "object" &&
                    A.RTCTrackEvent &&
                    "receiver" in A.RTCTrackEvent.prototype &&
                    !("transceiver" in A.RTCTrackEvent.prototype) &&
                    Object.defineProperty(
                      A.RTCTrackEvent.prototype,
                      "transceiver",
                      {
                        get: function () {
                          return { receiver: this.receiver };
                        },
                      }
                    );
                }
                function U(A) {
                  var L = A.RTCPeerConnection.prototype.createOffer;
                  A.RTCPeerConnection.prototype.createOffer = function ($) {
                    if ($) {
                      $.offerToReceiveAudio !== void 0 &&
                        ($.offerToReceiveAudio = !!$.offerToReceiveAudio);
                      var te = this.getTransceivers().find(function (D) {
                        return D.receiver.track.kind === "audio";
                      });
                      $.offerToReceiveAudio === !1 && te
                        ? te.direction === "sendrecv"
                          ? te.setDirection
                            ? te.setDirection("sendonly")
                            : (te.direction = "sendonly")
                          : te.direction === "recvonly" &&
                            (te.setDirection
                              ? te.setDirection("inactive")
                              : (te.direction = "inactive"))
                        : $.offerToReceiveAudio !== !0 ||
                          te ||
                          this.addTransceiver("audio", {
                            direction: "recvonly",
                          }),
                        $.offerToReceiveVideo !== void 0 &&
                          ($.offerToReceiveVideo = !!$.offerToReceiveVideo);
                      var X = this.getTransceivers().find(function (D) {
                        return D.receiver.track.kind === "video";
                      });
                      $.offerToReceiveVideo === !1 && X
                        ? X.direction === "sendrecv"
                          ? X.setDirection
                            ? X.setDirection("sendonly")
                            : (X.direction = "sendonly")
                          : X.direction === "recvonly" &&
                            (X.setDirection
                              ? X.setDirection("inactive")
                              : (X.direction = "inactive"))
                        : $.offerToReceiveVideo !== !0 ||
                          X ||
                          this.addTransceiver("video", {
                            direction: "recvonly",
                          });
                    }
                    return L.apply(this, arguments);
                  };
                }
                function E(A) {
                  v(A) !== "object" ||
                    A.AudioContext ||
                    (A.AudioContext = A.webkitAudioContext);
                }
              },
              { "../utils": 11 },
            ],
            11: [
              function (n, a, c) {
                function s(X, D, M) {
                  return (
                    (D = l(D)) in X
                      ? Object.defineProperty(X, D, {
                          value: M,
                          enumerable: !0,
                          configurable: !0,
                          writable: !0,
                        })
                      : (X[D] = M),
                    X
                  );
                }
                function l(X) {
                  var D = h(X, "string");
                  return v(D) === "symbol" ? D : String(D);
                }
                function h(X, D) {
                  if (v(X) !== "object" || X === null) return X;
                  var M = X[Symbol.toPrimitive];
                  if (M !== void 0) {
                    var W = M.call(X, D || "default");
                    if (v(W) !== "object") return W;
                    throw new TypeError(
                      "@@toPrimitive must return a primitive value."
                    );
                  }
                  return (D === "string" ? String : Number)(X);
                }
                function v(X) {
                  return (
                    (v =
                      typeof Symbol == "function" &&
                      vt(Symbol.iterator) == "symbol"
                        ? function (D) {
                            return vt(D);
                          }
                        : function (D) {
                            return D &&
                              typeof Symbol == "function" &&
                              D.constructor === Symbol &&
                              D !== Symbol.prototype
                              ? "symbol"
                              : vt(D);
                          }),
                    v(X)
                  );
                }
                Object.defineProperty(c, "__esModule", { value: !0 }),
                  (c.compactObject = L),
                  (c.deprecated = U),
                  (c.detectBrowser = E),
                  (c.disableLog = N),
                  (c.disableWarnings = z),
                  (c.extractVersion = b),
                  (c.filterStats = te),
                  (c.log = F),
                  (c.walkStats = $),
                  (c.wrapPeerConnectionEvent = C);
                var g = !0,
                  _ = !0;
                function b(X, D, M) {
                  var W = X.match(D);
                  return W && W.length >= M && parseInt(W[M], 10);
                }
                function C(X, D, M) {
                  if (X.RTCPeerConnection) {
                    var W = X.RTCPeerConnection.prototype,
                      G = W.addEventListener;
                    W.addEventListener = function (H, R) {
                      if (H !== D) return G.apply(this, arguments);
                      var w = function (J) {
                        var re = M(J);
                        re && (R.handleEvent ? R.handleEvent(re) : R(re));
                      };
                      return (
                        (this._eventMap = this._eventMap || {}),
                        this._eventMap[D] ||
                          (this._eventMap[D] = /* @__PURE__ */ new Map()),
                        this._eventMap[D].set(R, w),
                        G.apply(this, [H, w])
                      );
                    };
                    var ne = W.removeEventListener;
                    (W.removeEventListener = function (H, R) {
                      if (H !== D || !this._eventMap || !this._eventMap[D])
                        return ne.apply(this, arguments);
                      if (!this._eventMap[D].has(R))
                        return ne.apply(this, arguments);
                      var w = this._eventMap[D].get(R);
                      return (
                        this._eventMap[D].delete(R),
                        this._eventMap[D].size === 0 &&
                          delete this._eventMap[D],
                        Object.keys(this._eventMap).length === 0 &&
                          delete this._eventMap,
                        ne.apply(this, [H, w])
                      );
                    }),
                      Object.defineProperty(W, "on" + D, {
                        get: function () {
                          return this["_on" + D];
                        },
                        set: function (R) {
                          this["_on" + D] &&
                            (this.removeEventListener(D, this["_on" + D]),
                            delete this["_on" + D]),
                            R &&
                              this.addEventListener(D, (this["_on" + D] = R));
                        },
                        enumerable: !0,
                        configurable: !0,
                      });
                  }
                }
                function N(X) {
                  return typeof X != "boolean"
                    ? new Error(
                        "Argument type: " + v(X) + ". Please use a boolean."
                      )
                    : ((g = X),
                      X
                        ? "adapter.js logging disabled"
                        : "adapter.js logging enabled");
                }
                function z(X) {
                  return typeof X != "boolean"
                    ? new Error(
                        "Argument type: " + v(X) + ". Please use a boolean."
                      )
                    : ((_ = !X),
                      "adapter.js deprecation warnings " +
                        (X ? "disabled" : "enabled"));
                }
                function F() {
                  if (
                    (typeof window == "undefined" ? "undefined" : v(window)) ===
                    "object"
                  ) {
                    if (g) return;
                    typeof console != "undefined" &&
                      typeof console.log == "function" &&
                      console.log.apply(console, arguments);
                  }
                }
                function U(X, D) {
                  _ &&
                    console.warn(
                      X + " is deprecated, please use " + D + " instead."
                    );
                }
                function E(X) {
                  var D = { browser: null, version: null };
                  if (X === void 0 || !X.navigator || !X.navigator.userAgent)
                    return (D.browser = "Not a browser."), D;
                  var M = X.navigator;
                  if (M.mozGetUserMedia)
                    (D.browser = "firefox"),
                      (D.version = b(M.userAgent, /Firefox\/(\d+)\./, 1));
                  else if (
                    M.webkitGetUserMedia ||
                    (X.isSecureContext === !1 && X.webkitRTCPeerConnection)
                  )
                    (D.browser = "chrome"),
                      (D.version = b(M.userAgent, /Chrom(e|ium)\/(\d+)\./, 2));
                  else {
                    if (
                      !X.RTCPeerConnection ||
                      !M.userAgent.match(/AppleWebKit\/(\d+)\./)
                    )
                      return (D.browser = "Not a supported browser."), D;
                    (D.browser = "safari"),
                      (D.version = b(M.userAgent, /AppleWebKit\/(\d+)\./, 1)),
                      (D.supportsUnifiedPlan =
                        X.RTCRtpTransceiver &&
                        "currentDirection" in X.RTCRtpTransceiver.prototype);
                  }
                  return D;
                }
                function A(X) {
                  return (
                    Object.prototype.toString.call(X) === "[object Object]"
                  );
                }
                function L(X) {
                  return A(X)
                    ? Object.keys(X).reduce(function (D, M) {
                        var W = A(X[M]),
                          G = W ? L(X[M]) : X[M],
                          ne = W && !Object.keys(G).length;
                        return G === void 0 || ne
                          ? D
                          : Object.assign(D, s({}, M, G));
                      }, {})
                    : X;
                }
                function $(X, D, M) {
                  D &&
                    !M.has(D.id) &&
                    (M.set(D.id, D),
                    Object.keys(D).forEach(function (W) {
                      W.endsWith("Id")
                        ? $(X, X.get(D[W]), M)
                        : W.endsWith("Ids") &&
                          D[W].forEach(function (G) {
                            $(X, X.get(G), M);
                          });
                    }));
                }
                function te(X, D, M) {
                  var W = M ? "outbound-rtp" : "inbound-rtp",
                    G = /* @__PURE__ */ new Map();
                  if (D === null) return G;
                  var ne = [];
                  return (
                    X.forEach(function (H) {
                      H.type === "track" &&
                        H.trackIdentifier === D.id &&
                        ne.push(H);
                    }),
                    ne.forEach(function (H) {
                      X.forEach(function (R) {
                        R.type === W && R.trackId === H.id && $(X, R, G);
                      });
                    }),
                    G
                  );
                }
              },
              {},
            ],
            12: [
              function (n, a, c) {
                var s =
                    typeof Symbol == "function" &&
                    vt(Symbol.iterator) == "symbol"
                      ? function (h) {
                          return vt(h);
                        }
                      : function (h) {
                          return h &&
                            typeof Symbol == "function" &&
                            h.constructor === Symbol &&
                            h !== Symbol.prototype
                            ? "symbol"
                            : vt(h);
                        },
                  l = {
                    generateIdentifier: function () {
                      return Math.random().toString(36).substring(2, 12);
                    },
                  };
                (l.localCName = l.generateIdentifier()),
                  (l.splitLines = function (h) {
                    return h
                      .trim()
                      .split(
                        `
`
                      )
                      .map(function (v) {
                        return v.trim();
                      });
                  }),
                  (l.splitSections = function (h) {
                    return h
                      .split(
                        `
m=`
                      )
                      .map(function (v, g) {
                        return (
                          (g > 0 ? "m=" + v : v).trim() +
                          `\r
`
                        );
                      });
                  }),
                  (l.getDescription = function (h) {
                    var v = l.splitSections(h);
                    return v && v[0];
                  }),
                  (l.getMediaSections = function (h) {
                    var v = l.splitSections(h);
                    return v.shift(), v;
                  }),
                  (l.matchPrefix = function (h, v) {
                    return l.splitLines(h).filter(function (g) {
                      return g.indexOf(v) === 0;
                    });
                  }),
                  (l.parseCandidate = function (h) {
                    for (
                      var v = void 0,
                        g = {
                          foundation: (v =
                            h.indexOf("a=candidate:") === 0
                              ? h.substring(12).split(" ")
                              : h.substring(10).split(" "))[0],
                          component: { 1: "rtp", 2: "rtcp" }[v[1]] || v[1],
                          protocol: v[2].toLowerCase(),
                          priority: parseInt(v[3], 10),
                          ip: v[4],
                          address: v[4],
                          port: parseInt(v[5], 10),
                          type: v[7],
                        },
                        _ = 8;
                      _ < v.length;
                      _ += 2
                    )
                      switch (v[_]) {
                        case "raddr":
                          g.relatedAddress = v[_ + 1];
                          break;
                        case "rport":
                          g.relatedPort = parseInt(v[_ + 1], 10);
                          break;
                        case "tcptype":
                          g.tcpType = v[_ + 1];
                          break;
                        case "ufrag":
                          (g.ufrag = v[_ + 1]), (g.usernameFragment = v[_ + 1]);
                          break;
                        default:
                          g[v[_]] === void 0 && (g[v[_]] = v[_ + 1]);
                      }
                    return g;
                  }),
                  (l.writeCandidate = function (h) {
                    var v = [];
                    v.push(h.foundation);
                    var g = h.component;
                    g === "rtp"
                      ? v.push(1)
                      : g === "rtcp"
                      ? v.push(2)
                      : v.push(g),
                      v.push(h.protocol.toUpperCase()),
                      v.push(h.priority),
                      v.push(h.address || h.ip),
                      v.push(h.port);
                    var _ = h.type;
                    return (
                      v.push("typ"),
                      v.push(_),
                      _ !== "host" &&
                        h.relatedAddress &&
                        h.relatedPort &&
                        (v.push("raddr"),
                        v.push(h.relatedAddress),
                        v.push("rport"),
                        v.push(h.relatedPort)),
                      h.tcpType &&
                        h.protocol.toLowerCase() === "tcp" &&
                        (v.push("tcptype"), v.push(h.tcpType)),
                      (h.usernameFragment || h.ufrag) &&
                        (v.push("ufrag"),
                        v.push(h.usernameFragment || h.ufrag)),
                      "candidate:" + v.join(" ")
                    );
                  }),
                  (l.parseIceOptions = function (h) {
                    return h.substring(14).split(" ");
                  }),
                  (l.parseRtpMap = function (h) {
                    var v = h.substring(9).split(" "),
                      g = { payloadType: parseInt(v.shift(), 10) };
                    return (
                      (v = v[0].split("/")),
                      (g.name = v[0]),
                      (g.clockRate = parseInt(v[1], 10)),
                      (g.channels = v.length === 3 ? parseInt(v[2], 10) : 1),
                      (g.numChannels = g.channels),
                      g
                    );
                  }),
                  (l.writeRtpMap = function (h) {
                    var v = h.payloadType;
                    h.preferredPayloadType !== void 0 &&
                      (v = h.preferredPayloadType);
                    var g = h.channels || h.numChannels || 1;
                    return (
                      "a=rtpmap:" +
                      v +
                      " " +
                      h.name +
                      "/" +
                      h.clockRate +
                      (g !== 1 ? "/" + g : "") +
                      `\r
`
                    );
                  }),
                  (l.parseExtmap = function (h) {
                    var v = h.substring(9).split(" ");
                    return {
                      id: parseInt(v[0], 10),
                      direction:
                        v[0].indexOf("/") > 0 ? v[0].split("/")[1] : "sendrecv",
                      uri: v[1],
                      attributes: v.slice(2).join(" "),
                    };
                  }),
                  (l.writeExtmap = function (h) {
                    return (
                      "a=extmap:" +
                      (h.id || h.preferredId) +
                      (h.direction && h.direction !== "sendrecv"
                        ? "/" + h.direction
                        : "") +
                      " " +
                      h.uri +
                      (h.attributes ? " " + h.attributes : "") +
                      `\r
`
                    );
                  }),
                  (l.parseFmtp = function (h) {
                    for (
                      var v = {},
                        g = void 0,
                        _ = h.substring(h.indexOf(" ") + 1).split(";"),
                        b = 0;
                      b < _.length;
                      b++
                    )
                      v[(g = _[b].trim().split("="))[0].trim()] = g[1];
                    return v;
                  }),
                  (l.writeFmtp = function (h) {
                    var v = "",
                      g = h.payloadType;
                    if (
                      (h.preferredPayloadType !== void 0 &&
                        (g = h.preferredPayloadType),
                      h.parameters && Object.keys(h.parameters).length)
                    ) {
                      var _ = [];
                      Object.keys(h.parameters).forEach(function (b) {
                        h.parameters[b] !== void 0
                          ? _.push(b + "=" + h.parameters[b])
                          : _.push(b);
                      }),
                        (v +=
                          "a=fmtp:" +
                          g +
                          " " +
                          _.join(";") +
                          `\r
`);
                    }
                    return v;
                  }),
                  (l.parseRtcpFb = function (h) {
                    var v = h.substring(h.indexOf(" ") + 1).split(" ");
                    return { type: v.shift(), parameter: v.join(" ") };
                  }),
                  (l.writeRtcpFb = function (h) {
                    var v = "",
                      g = h.payloadType;
                    return (
                      h.preferredPayloadType !== void 0 &&
                        (g = h.preferredPayloadType),
                      h.rtcpFeedback &&
                        h.rtcpFeedback.length &&
                        h.rtcpFeedback.forEach(function (_) {
                          v +=
                            "a=rtcp-fb:" +
                            g +
                            " " +
                            _.type +
                            (_.parameter && _.parameter.length
                              ? " " + _.parameter
                              : "") +
                            `\r
`;
                        }),
                      v
                    );
                  }),
                  (l.parseSsrcMedia = function (h) {
                    var v = h.indexOf(" "),
                      g = { ssrc: parseInt(h.substring(7, v), 10) },
                      _ = h.indexOf(":", v);
                    return (
                      _ > -1
                        ? ((g.attribute = h.substring(v + 1, _)),
                          (g.value = h.substring(_ + 1)))
                        : (g.attribute = h.substring(v + 1)),
                      g
                    );
                  }),
                  (l.parseSsrcGroup = function (h) {
                    var v = h.substring(13).split(" ");
                    return {
                      semantics: v.shift(),
                      ssrcs: v.map(function (g) {
                        return parseInt(g, 10);
                      }),
                    };
                  }),
                  (l.getMid = function (h) {
                    var v = l.matchPrefix(h, "a=mid:")[0];
                    if (v) return v.substring(6);
                  }),
                  (l.parseFingerprint = function (h) {
                    var v = h.substring(14).split(" ");
                    return {
                      algorithm: v[0].toLowerCase(),
                      value: v[1].toUpperCase(),
                    };
                  }),
                  (l.getDtlsParameters = function (h, v) {
                    return {
                      role: "auto",
                      fingerprints: l
                        .matchPrefix(h + v, "a=fingerprint:")
                        .map(l.parseFingerprint),
                    };
                  }),
                  (l.writeDtlsParameters = function (h, v) {
                    var g =
                      "a=setup:" +
                      v +
                      `\r
`;
                    return (
                      h.fingerprints.forEach(function (_) {
                        g +=
                          "a=fingerprint:" +
                          _.algorithm +
                          " " +
                          _.value +
                          `\r
`;
                      }),
                      g
                    );
                  }),
                  (l.parseCryptoLine = function (h) {
                    var v = h.substring(9).split(" ");
                    return {
                      tag: parseInt(v[0], 10),
                      cryptoSuite: v[1],
                      keyParams: v[2],
                      sessionParams: v.slice(3),
                    };
                  }),
                  (l.writeCryptoLine = function (h) {
                    return (
                      "a=crypto:" +
                      h.tag +
                      " " +
                      h.cryptoSuite +
                      " " +
                      (s(h.keyParams) === "object"
                        ? l.writeCryptoKeyParams(h.keyParams)
                        : h.keyParams) +
                      (h.sessionParams ? " " + h.sessionParams.join(" ") : "") +
                      `\r
`
                    );
                  }),
                  (l.parseCryptoKeyParams = function (h) {
                    if (h.indexOf("inline:") !== 0) return null;
                    var v = h.substring(7).split("|");
                    return {
                      keyMethod: "inline",
                      keySalt: v[0],
                      lifeTime: v[1],
                      mkiValue: v[2] ? v[2].split(":")[0] : void 0,
                      mkiLength: v[2] ? v[2].split(":")[1] : void 0,
                    };
                  }),
                  (l.writeCryptoKeyParams = function (h) {
                    return (
                      h.keyMethod +
                      ":" +
                      h.keySalt +
                      (h.lifeTime ? "|" + h.lifeTime : "") +
                      (h.mkiValue && h.mkiLength
                        ? "|" + h.mkiValue + ":" + h.mkiLength
                        : "")
                    );
                  }),
                  (l.getCryptoParameters = function (h, v) {
                    return l
                      .matchPrefix(h + v, "a=crypto:")
                      .map(l.parseCryptoLine);
                  }),
                  (l.getIceParameters = function (h, v) {
                    var g = l.matchPrefix(h + v, "a=ice-ufrag:")[0],
                      _ = l.matchPrefix(h + v, "a=ice-pwd:")[0];
                    return g && _
                      ? {
                          usernameFragment: g.substring(12),
                          password: _.substring(10),
                        }
                      : null;
                  }),
                  (l.writeIceParameters = function (h) {
                    var v =
                      "a=ice-ufrag:" +
                      h.usernameFragment +
                      `\r
a=ice-pwd:` +
                      h.password +
                      `\r
`;
                    return (
                      h.iceLite &&
                        (v += `a=ice-lite\r
`),
                      v
                    );
                  }),
                  (l.parseRtpParameters = function (h) {
                    var v = {
                        codecs: [],
                        headerExtensions: [],
                        fecMechanisms: [],
                        rtcp: [],
                      },
                      g = l.splitLines(h)[0].split(" ");
                    v.profile = g[2];
                    for (var _ = 3; _ < g.length; _++) {
                      var b = g[_],
                        C = l.matchPrefix(h, "a=rtpmap:" + b + " ")[0];
                      if (C) {
                        var N = l.parseRtpMap(C),
                          z = l.matchPrefix(h, "a=fmtp:" + b + " ");
                        switch (
                          ((N.parameters = z.length ? l.parseFmtp(z[0]) : {}),
                          (N.rtcpFeedback = l
                            .matchPrefix(h, "a=rtcp-fb:" + b + " ")
                            .map(l.parseRtcpFb)),
                          v.codecs.push(N),
                          N.name.toUpperCase())
                        ) {
                          case "RED":
                          case "ULPFEC":
                            v.fecMechanisms.push(N.name.toUpperCase());
                        }
                      }
                    }
                    l.matchPrefix(h, "a=extmap:").forEach(function (U) {
                      v.headerExtensions.push(l.parseExtmap(U));
                    });
                    var F = l.matchPrefix(h, "a=rtcp-fb:* ").map(l.parseRtcpFb);
                    return (
                      v.codecs.forEach(function (U) {
                        F.forEach(function (E) {
                          U.rtcpFeedback.find(function (A) {
                            return (
                              A.type === E.type && A.parameter === E.parameter
                            );
                          }) || U.rtcpFeedback.push(E);
                        });
                      }),
                      v
                    );
                  }),
                  (l.writeRtpDescription = function (h, v) {
                    var g = "";
                    (g += "m=" + h + " "),
                      (g += v.codecs.length > 0 ? "9" : "0"),
                      (g += " " + (v.profile || "UDP/TLS/RTP/SAVPF") + " "),
                      (g +=
                        v.codecs
                          .map(function (b) {
                            return b.preferredPayloadType !== void 0
                              ? b.preferredPayloadType
                              : b.payloadType;
                          })
                          .join(" ") +
                        `\r
`),
                      (g += `c=IN IP4 0.0.0.0\r
`),
                      (g += `a=rtcp:9 IN IP4 0.0.0.0\r
`),
                      v.codecs.forEach(function (b) {
                        (g += l.writeRtpMap(b)),
                          (g += l.writeFmtp(b)),
                          (g += l.writeRtcpFb(b));
                      });
                    var _ = 0;
                    return (
                      v.codecs.forEach(function (b) {
                        b.maxptime > _ && (_ = b.maxptime);
                      }),
                      _ > 0 &&
                        (g +=
                          "a=maxptime:" +
                          _ +
                          `\r
`),
                      v.headerExtensions &&
                        v.headerExtensions.forEach(function (b) {
                          g += l.writeExtmap(b);
                        }),
                      g
                    );
                  }),
                  (l.parseRtpEncodingParameters = function (h) {
                    var v = [],
                      g = l.parseRtpParameters(h),
                      _ = g.fecMechanisms.indexOf("RED") !== -1,
                      b = g.fecMechanisms.indexOf("ULPFEC") !== -1,
                      C = l
                        .matchPrefix(h, "a=ssrc:")
                        .map(function (E) {
                          return l.parseSsrcMedia(E);
                        })
                        .filter(function (E) {
                          return E.attribute === "cname";
                        }),
                      N = C.length > 0 && C[0].ssrc,
                      z = void 0,
                      F = l
                        .matchPrefix(h, "a=ssrc-group:FID")
                        .map(function (E) {
                          return E.substring(17)
                            .split(" ")
                            .map(function (A) {
                              return parseInt(A, 10);
                            });
                        });
                    F.length > 0 &&
                      F[0].length > 1 &&
                      F[0][0] === N &&
                      (z = F[0][1]),
                      g.codecs.forEach(function (E) {
                        if (
                          E.name.toUpperCase() === "RTX" &&
                          E.parameters.apt
                        ) {
                          var A = {
                            ssrc: N,
                            codecPayloadType: parseInt(E.parameters.apt, 10),
                          };
                          N && z && (A.rtx = { ssrc: z }),
                            v.push(A),
                            _ &&
                              (((A = JSON.parse(JSON.stringify(A))).fec = {
                                ssrc: N,
                                mechanism: b ? "red+ulpfec" : "red",
                              }),
                              v.push(A));
                        }
                      }),
                      v.length === 0 && N && v.push({ ssrc: N });
                    var U = l.matchPrefix(h, "b=");
                    return (
                      U.length &&
                        ((U =
                          U[0].indexOf("b=TIAS:") === 0
                            ? parseInt(U[0].substring(7), 10)
                            : U[0].indexOf("b=AS:") === 0
                            ? 1e3 * parseInt(U[0].substring(5), 10) * 0.95 -
                              16e3
                            : void 0),
                        v.forEach(function (E) {
                          E.maxBitrate = U;
                        })),
                      v
                    );
                  }),
                  (l.parseRtcpParameters = function (h) {
                    var v = {},
                      g = l
                        .matchPrefix(h, "a=ssrc:")
                        .map(function (C) {
                          return l.parseSsrcMedia(C);
                        })
                        .filter(function (C) {
                          return C.attribute === "cname";
                        })[0];
                    g && ((v.cname = g.value), (v.ssrc = g.ssrc));
                    var _ = l.matchPrefix(h, "a=rtcp-rsize");
                    (v.reducedSize = _.length > 0),
                      (v.compound = _.length === 0);
                    var b = l.matchPrefix(h, "a=rtcp-mux");
                    return (v.mux = b.length > 0), v;
                  }),
                  (l.writeRtcpParameters = function (h) {
                    var v = "";
                    return (
                      h.reducedSize &&
                        (v += `a=rtcp-rsize\r
`),
                      h.mux &&
                        (v += `a=rtcp-mux\r
`),
                      h.ssrc !== void 0 &&
                        h.cname &&
                        (v +=
                          "a=ssrc:" +
                          h.ssrc +
                          " cname:" +
                          h.cname +
                          `\r
`),
                      v
                    );
                  }),
                  (l.parseMsid = function (h) {
                    var v = void 0,
                      g = l.matchPrefix(h, "a=msid:");
                    if (g.length === 1)
                      return {
                        stream: (v = g[0].substring(7).split(" "))[0],
                        track: v[1],
                      };
                    var _ = l
                      .matchPrefix(h, "a=ssrc:")
                      .map(function (b) {
                        return l.parseSsrcMedia(b);
                      })
                      .filter(function (b) {
                        return b.attribute === "msid";
                      });
                    return _.length > 0
                      ? { stream: (v = _[0].value.split(" "))[0], track: v[1] }
                      : void 0;
                  }),
                  (l.parseSctpDescription = function (h) {
                    var v = l.parseMLine(h),
                      g = l.matchPrefix(h, "a=max-message-size:"),
                      _ = void 0;
                    g.length > 0 && (_ = parseInt(g[0].substring(19), 10)),
                      isNaN(_) && (_ = 65536);
                    var b = l.matchPrefix(h, "a=sctp-port:");
                    if (b.length > 0)
                      return {
                        port: parseInt(b[0].substring(12), 10),
                        protocol: v.fmt,
                        maxMessageSize: _,
                      };
                    var C = l.matchPrefix(h, "a=sctpmap:");
                    if (C.length > 0) {
                      var N = C[0].substring(10).split(" ");
                      return {
                        port: parseInt(N[0], 10),
                        protocol: N[1],
                        maxMessageSize: _,
                      };
                    }
                  }),
                  (l.writeSctpDescription = function (h, v) {
                    var g = [];
                    return (
                      (g =
                        h.protocol !== "DTLS/SCTP"
                          ? [
                              "m=" +
                                h.kind +
                                " 9 " +
                                h.protocol +
                                " " +
                                v.protocol +
                                `\r
`,
                              `c=IN IP4 0.0.0.0\r
`,
                              "a=sctp-port:" +
                                v.port +
                                `\r
`,
                            ]
                          : [
                              "m=" +
                                h.kind +
                                " 9 " +
                                h.protocol +
                                " " +
                                v.port +
                                `\r
`,
                              `c=IN IP4 0.0.0.0\r
`,
                              "a=sctpmap:" +
                                v.port +
                                " " +
                                v.protocol +
                                ` 65535\r
`,
                            ]),
                      v.maxMessageSize !== void 0 &&
                        g.push(
                          "a=max-message-size:" +
                            v.maxMessageSize +
                            `\r
`
                        ),
                      g.join("")
                    );
                  }),
                  (l.generateSessionId = function () {
                    return Math.random().toString().substr(2, 22);
                  }),
                  (l.writeSessionBoilerplate = function (h, v, g) {
                    var _ = v !== void 0 ? v : 2;
                    return (
                      `v=0\r
o=` +
                      (g || "thisisadapterortc") +
                      " " +
                      (h || l.generateSessionId()) +
                      " " +
                      _ +
                      ` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`
                    );
                  }),
                  (l.getDirection = function (h, v) {
                    for (var g = l.splitLines(h), _ = 0; _ < g.length; _++)
                      switch (g[_]) {
                        case "a=sendrecv":
                        case "a=sendonly":
                        case "a=recvonly":
                        case "a=inactive":
                          return g[_].substring(2);
                      }
                    return v ? l.getDirection(v) : "sendrecv";
                  }),
                  (l.getKind = function (h) {
                    return l.splitLines(h)[0].split(" ")[0].substring(2);
                  }),
                  (l.isRejected = function (h) {
                    return h.split(" ", 2)[1] === "0";
                  }),
                  (l.parseMLine = function (h) {
                    var v = l.splitLines(h)[0].substring(2).split(" ");
                    return {
                      kind: v[0],
                      port: parseInt(v[1], 10),
                      protocol: v[2],
                      fmt: v.slice(3).join(" "),
                    };
                  }),
                  (l.parseOLine = function (h) {
                    var v = l.matchPrefix(h, "o=")[0].substring(2).split(" ");
                    return {
                      username: v[0],
                      sessionId: v[1],
                      sessionVersion: parseInt(v[2], 10),
                      netType: v[3],
                      addressType: v[4],
                      address: v[5],
                    };
                  }),
                  (l.isValidSDP = function (h) {
                    if (typeof h != "string" || h.length === 0) return !1;
                    for (var v = l.splitLines(h), g = 0; g < v.length; g++)
                      if (v[g].length < 2 || v[g].charAt(1) !== "=") return !1;
                    return !0;
                  }),
                  (a === void 0 ? "undefined" : s(a)) === "object" &&
                    (a.exports = l);
              },
              {},
            ],
          },
          {},
          [1]
        )(1);
      })({ exports: {} });
    var ba = "4.15.22",
      fd = {},
      If = No,
      Rf = Bs,
      Ws =
        Object.keys ||
        function (u) {
          return If(u, Rf);
        },
      Cf = ct,
      Af = ja,
      Bi = Hn,
      pd = Wn,
      xf = on,
      vd = Ws;
    fd.f =
      Cf && !Af
        ? Object.defineProperties
        : function (u, e) {
            pd(u);
            for (var n, a = xf(e), c = vd(e), s = c.length, l = 0; s > l; )
              Bi.f(u, (n = c[l++]), a[n]);
            return u;
          };
    var Gs,
      md = Yn("document", "documentElement"),
      Of = Wn,
      Pf = fd,
      qs = Bs,
      uc = Zu,
      Df = md,
      Nf = kr,
      gd = Yu("IE_PROTO"),
      cc = function () {},
      _d = function (e) {
        return "<script>" + e + "</script>";
      },
      lc = function (e) {
        e.write(_d("")), e.close();
        var n = e.parentWindow.Object;
        return (e = null), n;
      },
      Ks = function () {
        try {
          Gs = new ActiveXObject("htmlfile");
        } catch (c) {}
        var e, n;
        Ks =
          typeof document != "undefined"
            ? document.domain && Gs
              ? lc(Gs)
              : (((n = Nf("iframe")).style.display = "none"),
                Df.appendChild(n),
                (n.src = "javascript:"),
                (e = n.contentWindow.document).open(),
                e.write(_d("document.F=Object")),
                e.close(),
                e.F)
            : lc(Gs);
        for (var a = qs.length; a--; ) delete Ks.prototype[qs[a]];
        return Ks();
      };
    uc[gd] = !0;
    var Ga =
        Object.create ||
        function (u, e) {
          var n;
          return (
            u !== null
              ? ((cc.prototype = Of(u)),
                (n = new cc()),
                (cc.prototype = null),
                (n[gd] = u))
              : (n = Ks()),
            e === void 0 ? n : Pf.f(n, e)
          );
        },
      jn = In,
      xg = Ga,
      Og = Hn.f,
      yd = jn("unscopables"),
      bd = Array.prototype;
    bd[yd] == null && Og(bd, yd, { configurable: !0, value: xg(null) });
    var Sa,
      Lf,
      Sd,
      dc = function (e) {
        bd[yd][e] = !0;
      },
      qa = {},
      hc = !st(function () {
        function u() {}
        return (
          (u.prototype.constructor = null),
          Object.getPrototypeOf(new u()) !== u.prototype
        );
      }),
      Mf = Jn,
      Pg = Ft,
      Dg = mr,
      fc = hc,
      Ka = Yu("IE_PROTO"),
      Ja = Object,
      wi = Ja.prototype,
      Js = fc
        ? Ja.getPrototypeOf
        : function (u) {
            var e = Dg(u);
            if (Mf(e, Ka)) return e[Ka];
            var n = e.constructor;
            return Pg(n) && e instanceof n
              ? n.prototype
              : e instanceof Ja
              ? wi
              : null;
          },
      Uf = st,
      bt = Ft,
      pc = nn,
      wa = Js,
      $a = fr,
      zi = In("iterator"),
      ka = !1;
    [].keys &&
      ("next" in (Sd = [].keys())
        ? (Lf = wa(wa(Sd))) !== Object.prototype && (Sa = Lf)
        : (ka = !0));
    var Ya =
      !pc(Sa) ||
      Uf(function () {
        var u = {};
        return Sa[zi].call(u) !== u;
      });
    Ya && (Sa = {}),
      bt(Sa[zi]) ||
        $a(Sa, zi, function () {
          return this;
        });
    var Hi = { IteratorPrototype: Sa, BUGGY_SAFARI_ITERATORS: ka },
      Za = Hn.f,
      Qa = Jn,
      Ta = In("toStringTag"),
      En = function (e, n, a) {
        e && !a && (e = e.prototype),
          e && !Qa(e, Ta) && Za(e, Ta, { configurable: !0, value: n });
      },
      Vf = Hi.IteratorPrototype,
      t = Ga,
      f = me,
      d = En,
      y = qa,
      k = function () {
        return this;
      },
      T = function (e, n, a, c) {
        var s = n + " Iterator";
        return (
          (e.prototype = t(Vf, { next: f(+!c, a) })), d(e, s, !1), (y[s] = k), e
        );
      },
      P = Ft,
      V = String,
      j = TypeError,
      x = He,
      K = Wn,
      ae = function (e) {
        if (vt(e) == "object" || P(e)) return e;
        throw j("Can't set " + V(e) + " as a prototype");
      },
      Z =
        Object.setPrototypeOf ||
        ("__proto__" in {}
          ? (function () {
              var u,
                e = !1,
                n = {};
              try {
                (u = x(
                  Object.getOwnPropertyDescriptor(Object.prototype, "__proto__")
                    .set
                ))(n, []),
                  (e = n instanceof Array);
              } catch (a) {}
              return function (a, c) {
                return K(a), ae(c), e ? u(a, c) : (a.__proto__ = c), a;
              };
            })()
          : void 0),
      Q = Ut,
      ue = Re,
      we = Ft,
      se = T,
      le = Js,
      fe = Z,
      _e = En,
      Se = Zr,
      ke = fr,
      Ae = qa,
      Me = pa.PROPER,
      Le = pa.CONFIGURABLE,
      Ue = Hi.IteratorPrototype,
      Te = Hi.BUGGY_SAFARI_ITERATORS,
      xe = In("iterator"),
      qe = "keys",
      ut = "values",
      Ge = "entries",
      mt = function () {
        return this;
      },
      kt = function (e, n, a, c, s, l, h) {
        se(a, n, c);
        var v,
          g,
          _,
          b = function (L) {
            if (L === s && U) return U;
            if (!Te && L in z) return z[L];
            switch (L) {
              case qe:
              case ut:
              case Ge:
                return function () {
                  return new a(this, L);
                };
            }
            return function () {
              return new a(this);
            };
          },
          C = n + " Iterator",
          N = !1,
          z = e.prototype,
          F = z[xe] || z["@@iterator"] || (s && z[s]),
          U = (!Te && F) || b(s),
          E = (n == "Array" && z.entries) || F;
        if (
          (E &&
            (v = le(E.call(new e()))) !== Object.prototype &&
            v.next &&
            (le(v) !== Ue && (fe ? fe(v, Ue) : we(v[xe]) || ke(v, xe, mt)),
            _e(v, C, !0)),
          Me &&
            s == ut &&
            F &&
            F.name !== ut &&
            (Le
              ? Se(z, "name", ut)
              : ((N = !0),
                (U = function () {
                  return ue(F, this);
                }))),
          s)
        )
          if (((g = { values: b(ut), keys: l ? U : b(qe), entries: b(Ge) }), h))
            for (_ in g) (Te || N || !(_ in z)) && ke(z, _, g[_]);
          else Q({ target: n, proto: !0, forced: Te || N }, g);
        return z[xe] !== U && ke(z, xe, U, { name: s }), (Ae[n] = U), g;
      },
      qt = function (e, n) {
        return { value: e, done: n };
      },
      xt = on,
      Rn = dc,
      fn = qa,
      Qn = On,
      Qe = Hn.f,
      tt = kt,
      Ye = qt,
      et = ct,
      or = "Array Iterator",
      ki = Qn.set,
      ci = Qn.getterFor(or),
      Ea = tt(
        Array,
        "Array",
        function (u, e) {
          ki(this, { type: or, target: xt(u), index: 0, kind: e });
        },
        function () {
          var u = ci(this),
            e = u.target,
            n = u.kind,
            a = u.index++;
          return !e || a >= e.length
            ? ((u.target = void 0), Ye(void 0, !0))
            : Ye(n == "keys" ? a : n == "values" ? e[a] : [a, e[a]], !1);
        },
        "values"
      ),
      Xa = (fn.Arguments = fn.Array);
    if ((Rn("keys"), Rn("values"), Rn("entries"), et && Xa.name !== "values"))
      try {
        Qe(Xa, "name", { value: "values" });
      } catch (u) {}
    var vc = {};
    vc[In("toStringTag")] = "z";
    var eo = String(vc) === "[object z]",
      li = eo,
      Qr = Ft,
      to = Mt,
      $s = In("toStringTag"),
      mc = Object,
      Ys =
        to(
          (function () {
            return arguments;
          })()
        ) == "Arguments",
      di = li
        ? to
        : function (u) {
            var e, n, a;
            return u === void 0
              ? "Undefined"
              : u === null
              ? "Null"
              : typeof (n = (function (c, s) {
                  try {
                    return c[s];
                  } catch (l) {}
                })((e = mc(u)), $s)) == "string"
              ? n
              : Ys
              ? to(e)
              : (a = to(e)) == "Object" && Qr(e.callee)
              ? "Arguments"
              : a;
          },
      Zs = di,
      hi = eo
        ? {}.toString
        : function () {
            return "[object " + Zs(this) + "]";
          };
    eo || fr(Object.prototype, "toString", hi, { unsafe: !0 });
    var Ia = { exports: {} },
      no = {},
      Vo = Is,
      Ff = Hn,
      Fo = me,
      Wi = function (e, n, a) {
        var c = Vo(n);
        c in e ? Ff.f(e, c, Fo(0, a)) : (e[c] = a);
      },
      jf = si,
      Bf = Zn,
      zf = Wi,
      jo = Array,
      Qs = Math.max,
      gc = function (e, n, a) {
        for (
          var c = Bf(e),
            s = jf(n, c),
            l = jf(a === void 0 ? c : a, c),
            h = jo(Qs(l - s, 0)),
            v = 0;
          s < l;
          s++, v++
        )
          zf(h, v, e[s]);
        return (h.length = v), h;
      },
      Hf = Mt,
      Wf = on,
      Gf = dn.f,
      Ng = gc,
      wd =
        (typeof window == "undefined" ? "undefined" : vt(window)) == "object" &&
        window &&
        Object.getOwnPropertyNames
          ? Object.getOwnPropertyNames(window)
          : [];
    no.f = function (u) {
      return wd && Hf(u) == "Window"
        ? (function (e) {
            try {
              return Gf(e);
            } catch (n) {
              return Ng(wd);
            }
          })(u)
        : Gf(Wf(u));
    };
    var Lg = st(function () {
        if (typeof ArrayBuffer == "function") {
          var u = new ArrayBuffer(8);
          Object.isExtensible(u) && Object.defineProperty(u, "a", { value: 8 });
        }
      }),
      qf = st,
      ro = nn,
      Mg = Mt,
      kd = Lg,
      _c = Object.isExtensible,
      Kf =
        qf(function () {
          _c(1);
        }) || kd
          ? function (u) {
              return (
                !!ro(u) && (!kd || Mg(u) != "ArrayBuffer") && (!_c || _c(u))
              );
            }
          : _c,
      Ug = !st(function () {
        return Object.isExtensible(Object.preventExtensions({}));
      }),
      Jf = Ut,
      Vg = He,
      Fg = Zu,
      $f = nn,
      Td = Jn,
      Yf = Hn.f,
      Bo = dn,
      Zf = no,
      jg = Kf,
      VO = Ug,
      KS = !1,
      io = zu("meta"),
      FO = 0,
      Bg = function (e) {
        Yf(e, io, { value: { objectID: "O" + FO++, weakData: {} } });
      },
      jO = (Ia.exports = {
        enable: function () {
          (jO.enable = function () {}), (KS = !0);
          var e = Bo.f,
            n = Vg([].splice),
            a = {};
          (a[io] = 1),
            e(a).length &&
              ((Bo.f = function (c) {
                for (var s = e(c), l = 0, h = s.length; l < h; l++)
                  if (s[l] === io) {
                    n(s, l, 1);
                    break;
                  }
                return s;
              }),
              Jf(
                { target: "Object", stat: !0, forced: !0 },
                { getOwnPropertyNames: Zf.f }
              ));
        },
        fastKey: function (e, n) {
          if (!$f(e))
            return vt(e) == "symbol"
              ? e
              : (typeof e == "string" ? "S" : "P") + e;
          if (!Td(e, io)) {
            if (!jg(e)) return "F";
            if (!n) return "E";
            Bg(e);
          }
          return e[io].objectID;
        },
        getWeakData: function (e, n) {
          if (!Td(e, io)) {
            if (!jg(e)) return !0;
            if (!n) return !1;
            Bg(e);
          }
          return e[io].weakData;
        },
        onFreeze: function (e) {
          return VO && KS && jg(e) && !Td(e, io) && Bg(e), e;
        },
      });
    Fg[io] = !0;
    var BO = Dr,
      zO = Lt,
      HO = He(He.bind),
      ao = function (e, n) {
        return (
          BO(e),
          n === void 0
            ? e
            : zO
            ? HO(e, n)
            : function () {
                return e.apply(n, arguments);
              }
        );
      },
      WO = qa,
      GO = In("iterator"),
      qO = Array.prototype,
      zg = function (e) {
        return e !== void 0 && (WO.Array === e || qO[GO] === e);
      },
      KO = di,
      JS = Va,
      JO = cn,
      $O = qa,
      YO = In("iterator"),
      Ed = function (e) {
        if (!JO(e)) return JS(e, YO) || JS(e, "@@iterator") || $O[KO(e)];
      },
      ZO = Re,
      QO = Dr,
      XO = Wn,
      eP = Pr,
      tP = Ed,
      nP = TypeError,
      Qf = function (e, n) {
        var a = arguments.length < 2 ? tP(e) : n;
        if (QO(a)) return XO(ZO(a, e));
        throw nP(eP(e) + " is not iterable");
      },
      rP = Re,
      $S = Wn,
      iP = Va,
      YS = function (e, n, a) {
        var c, s;
        $S(e);
        try {
          if (!(c = iP(e, "return"))) {
            if (n === "throw") throw a;
            return a;
          }
          c = rP(c, e);
        } catch (l) {
          (s = !0), (c = l);
        }
        if (n === "throw") throw a;
        if (s) throw c;
        return $S(c), a;
      },
      aP = ao,
      oP = Re,
      sP = Wn,
      uP = Pr,
      cP = zg,
      lP = Zn,
      ZS = nr,
      dP = Qf,
      hP = Ed,
      QS = YS,
      fP = TypeError,
      Xf = function (e, n) {
        (this.stopped = e), (this.result = n);
      },
      XS = Xf.prototype,
      Id = function (e, n, a) {
        var c,
          s,
          l,
          h,
          v,
          g,
          _,
          b = a && a.that,
          C = !(!a || !a.AS_ENTRIES),
          N = !(!a || !a.IS_RECORD),
          z = !(!a || !a.IS_ITERATOR),
          F = !(!a || !a.INTERRUPTED),
          U = aP(n, b),
          E = function ($) {
            return c && QS(c, "normal", $), new Xf(!0, $);
          },
          A = function ($) {
            return C
              ? (sP($), F ? U($[0], $[1], E) : U($[0], $[1]))
              : F
              ? U($, E)
              : U($);
          };
        if (N) c = e.iterator;
        else if (z) c = e;
        else {
          if (!(s = hP(e))) throw fP(uP(e) + " is not iterable");
          if (cP(s)) {
            for (l = 0, h = lP(e); h > l; l++)
              if ((v = A(e[l])) && ZS(XS, v)) return v;
            return new Xf(!1);
          }
          c = dP(e, s);
        }
        for (g = N ? e.next : c.next; !(_ = oP(g, c)).done; ) {
          try {
            v = A(_.value);
          } catch (L) {
            QS(c, "throw", L);
          }
          if (vt(v) == "object" && v && ZS(XS, v)) return v;
        }
        return new Xf(!1);
      },
      pP = nr,
      vP = TypeError,
      zo = function (e, n) {
        if (pP(n, e)) return e;
        throw vP("Incorrect invocation");
      },
      ew = In("iterator"),
      tw = !1;
    try {
      var mP = 0,
        nw = {
          next: function () {
            return { done: !!mP++ };
          },
          return: function () {
            tw = !0;
          },
        };
      (nw[ew] = function () {
        return this;
      }),
        Array.from(nw, function () {
          throw 2;
        });
    } catch (u) {}
    var ep = function (e, n) {
        if (!n && !tw) return !1;
        var a = !1;
        try {
          var c = {};
          (c[ew] = function () {
            return {
              next: function () {
                return { done: (a = !0) };
              },
            };
          }),
            e(c);
        } catch (s) {}
        return a;
      },
      gP = Ft,
      _P = nn,
      rw = Z,
      tp = function (e, n, a) {
        var c, s;
        return (
          rw &&
            gP((c = n.constructor)) &&
            c !== a &&
            _P((s = c.prototype)) &&
            s !== a.prototype &&
            rw(e, s),
          e
        );
      },
      yP = Ut,
      bP = ot,
      SP = He,
      iw = Uo,
      wP = fr,
      kP = Ia.exports,
      TP = Id,
      EP = zo,
      IP = Ft,
      RP = cn,
      Hg = nn,
      Wg = st,
      CP = ep,
      AP = En,
      xP = tp,
      Gg = function (e, n, a) {
        var c = e.indexOf("Map") !== -1,
          s = e.indexOf("Weak") !== -1,
          l = c ? "set" : "add",
          h = bP[e],
          v = h && h.prototype,
          g = h,
          _ = {},
          b = function (A) {
            var L = SP(v[A]);
            wP(
              v,
              A,
              A == "add"
                ? function ($) {
                    return L(this, $ === 0 ? 0 : $), this;
                  }
                : A == "delete"
                ? function ($) {
                    return !(s && !Hg($)) && L(this, $ === 0 ? 0 : $);
                  }
                : A == "get"
                ? function ($) {
                    return s && !Hg($) ? void 0 : L(this, $ === 0 ? 0 : $);
                  }
                : A == "has"
                ? function ($) {
                    return !(s && !Hg($)) && L(this, $ === 0 ? 0 : $);
                  }
                : function ($, te) {
                    return L(this, $ === 0 ? 0 : $, te), this;
                  }
            );
          };
        if (
          iw(
            e,
            !IP(h) ||
              !(
                s ||
                (v.forEach &&
                  !Wg(function () {
                    new h().entries().next();
                  }))
              )
          )
        )
          (g = a.getConstructor(n, e, c, l)), kP.enable();
        else if (iw(e, !0)) {
          var C = new g(),
            N = C[l](s ? {} : -0, 1) != C,
            z = Wg(function () {
              C.has(1);
            }),
            F = CP(function (E) {
              new h(E);
            }),
            U =
              !s &&
              Wg(function () {
                for (var E = new h(), A = 5; A--; ) E[l](A, A);
                return !E.has(-0);
              });
          F ||
            (((g = n(function (E, A) {
              EP(E, v);
              var L = xP(new h(), E, g);
              return RP(A) || TP(A, L[l], { that: L, AS_ENTRIES: c }), L;
            })).prototype = v),
            (v.constructor = g)),
            (z || U) && (b("delete"), b("has"), c && b("get")),
            (U || N) && b(l),
            s && v.clear && delete v.clear;
        }
        return (
          (_[e] = g),
          yP({ global: !0, constructor: !0, forced: g != h }, _),
          AP(g, e),
          s || a.setStrong(g, e, c),
          g
        );
      },
      OP = fr,
      Rd = function (e, n, a) {
        for (var c in n) OP(e, c, n[c], a);
        return e;
      },
      PP = Yn,
      DP = Hn,
      NP = ct,
      aw = In("species"),
      Cd = function (e) {
        var n = PP(e),
          a = DP.f;
        NP &&
          n &&
          !n[aw] &&
          a(n, aw, {
            configurable: !0,
            get: function () {
              return this;
            },
          });
      },
      LP = Hn.f,
      MP = Ga,
      ow = Rd,
      UP = ao,
      VP = zo,
      FP = cn,
      jP = Id,
      BP = kt,
      sw = qt,
      zP = Cd,
      Ad = ct,
      uw = Ia.exports.fastKey,
      cw = On.set,
      qg = On.getterFor,
      lw = {
        getConstructor: function (e, n, a, c) {
          var s = e(function (_, b) {
              VP(_, l),
                cw(_, {
                  type: n,
                  index: MP(null),
                  first: void 0,
                  last: void 0,
                  size: 0,
                }),
                Ad || (_.size = 0),
                FP(b) || jP(b, _[c], { that: _, AS_ENTRIES: a });
            }),
            l = s.prototype,
            h = qg(n),
            v = function (b, C, N) {
              var z,
                F,
                U = h(b),
                E = g(b, C);
              return (
                E
                  ? (E.value = N)
                  : ((U.last = E =
                      {
                        index: (F = uw(C, !0)),
                        key: C,
                        value: N,
                        previous: (z = U.last),
                        next: void 0,
                        removed: !1,
                      }),
                    U.first || (U.first = E),
                    z && (z.next = E),
                    Ad ? U.size++ : b.size++,
                    F !== "F" && (U.index[F] = E)),
                b
              );
            },
            g = function (b, C) {
              var N,
                z = h(b),
                F = uw(C);
              if (F !== "F") return z.index[F];
              for (N = z.first; N; N = N.next) if (N.key == C) return N;
            };
          return (
            ow(l, {
              clear: function () {
                for (var b = h(this), C = b.index, N = b.first; N; )
                  (N.removed = !0),
                    N.previous && (N.previous = N.previous.next = void 0),
                    delete C[N.index],
                    (N = N.next);
                (b.first = b.last = void 0),
                  Ad ? (b.size = 0) : (this.size = 0);
              },
              delete: function (b) {
                var C = this,
                  N = h(C),
                  z = g(C, b);
                if (z) {
                  var F = z.next,
                    U = z.previous;
                  delete N.index[z.index],
                    (z.removed = !0),
                    U && (U.next = F),
                    F && (F.previous = U),
                    N.first == z && (N.first = F),
                    N.last == z && (N.last = U),
                    Ad ? N.size-- : C.size--;
                }
                return !!z;
              },
              forEach: function (b) {
                for (
                  var C,
                    N = h(this),
                    z = UP(b, arguments.length > 1 ? arguments[1] : void 0);
                  (C = C ? C.next : N.first);

                )
                  for (z(C.value, C.key, this); C && C.removed; )
                    C = C.previous;
              },
              has: function (b) {
                return !!g(this, b);
              },
            }),
            ow(
              l,
              a
                ? {
                    get: function (b) {
                      var C = g(this, b);
                      return C && C.value;
                    },
                    set: function (b, C) {
                      return v(this, b === 0 ? 0 : b, C);
                    },
                  }
                : {
                    add: function (b) {
                      return v(this, (b = b === 0 ? 0 : b), b);
                    },
                  }
            ),
            Ad &&
              LP(l, "size", {
                get: function () {
                  return h(this).size;
                },
              }),
            s
          );
        },
        setStrong: function (e, n, a) {
          var c = n + " Iterator",
            s = qg(n),
            l = qg(c);
          BP(
            e,
            n,
            function (h, v) {
              cw(this, {
                type: c,
                target: h,
                state: s(h),
                kind: v,
                last: void 0,
              });
            },
            function () {
              for (var h = l(this), v = h.kind, g = h.last; g && g.removed; )
                g = g.previous;
              return h.target && (h.last = g = g ? g.next : h.state.first)
                ? sw(
                    v == "keys"
                      ? g.key
                      : v == "values"
                      ? g.value
                      : [g.key, g.value],
                    !1
                  )
                : ((h.target = void 0), sw(void 0, !0));
            },
            a ? "entries" : "values",
            !a,
            !0
          ),
            zP(n);
        },
      };
    Gg(
      "Set",
      function (u) {
        return function () {
          return u(this, arguments.length ? arguments[0] : void 0);
        };
      },
      lw
    );
    var HP = di,
      WP = String,
      _r = function (e) {
        if (HP(e) === "Symbol")
          throw TypeError("Cannot convert a Symbol value to a string");
        return WP(e);
      },
      Kg = He,
      GP = Lr,
      qP = _r,
      KP = Dt,
      JP = Kg("".charAt),
      dw = Kg("".charCodeAt),
      $P = Kg("".slice),
      hw = function (e) {
        return function (n, a) {
          var c,
            s,
            l = qP(KP(n)),
            h = GP(a),
            v = l.length;
          return h < 0 || h >= v
            ? e
              ? ""
              : void 0
            : (c = dw(l, h)) < 55296 ||
              c > 56319 ||
              h + 1 === v ||
              (s = dw(l, h + 1)) < 56320 ||
              s > 57343
            ? e
              ? JP(l, h)
              : c
            : e
            ? $P(l, h, h + 2)
            : s - 56320 + ((c - 55296) << 10) + 65536;
        };
      },
      Jg = { codeAt: hw(!1), charAt: hw(!0) },
      YP = Jg.charAt,
      ZP = _r,
      fw = On,
      QP = kt,
      pw = qt,
      vw = "String Iterator",
      XP = fw.set,
      eD = fw.getterFor(vw);
    QP(
      String,
      "String",
      function (u) {
        XP(this, { type: vw, string: ZP(u), index: 0 });
      },
      function () {
        var u,
          e = eD(this),
          n = e.string,
          a = e.index;
        return a >= n.length
          ? pw(void 0, !0)
          : ((u = YP(n, a)), (e.index += u.length), pw(u, !1));
      }
    );
    var mw = {
        CSSRuleList: 0,
        CSSStyleDeclaration: 0,
        CSSValueList: 0,
        ClientRectList: 0,
        DOMRectList: 0,
        DOMStringList: 0,
        DOMTokenList: 1,
        DataTransferItemList: 0,
        FileList: 0,
        HTMLAllCollection: 0,
        HTMLCollection: 0,
        HTMLFormElement: 0,
        HTMLSelectElement: 0,
        MediaList: 0,
        MimeTypeArray: 0,
        NamedNodeMap: 0,
        NodeList: 1,
        PaintRequestList: 0,
        Plugin: 0,
        PluginArray: 0,
        SVGLengthList: 0,
        SVGNumberList: 0,
        SVGPathSegList: 0,
        SVGPointList: 0,
        SVGStringList: 0,
        SVGTransformList: 0,
        SourceBufferList: 0,
        StyleSheetList: 0,
        TextTrackCueList: 0,
        TextTrackList: 0,
        TouchList: 0,
      },
      $g = kr("span").classList,
      gw = $g && $g.constructor && $g.constructor.prototype,
      _w = gw === Object.prototype ? void 0 : gw,
      yw = ot,
      bw = mw,
      tD = _w,
      xd = Ea,
      Yg = Zr,
      Sw = In,
      Zg = Sw("iterator"),
      ww = Sw("toStringTag"),
      Qg = xd.values,
      kw = function (e, n) {
        if (e) {
          if (e[Zg] !== Qg)
            try {
              Yg(e, Zg, Qg);
            } catch (c) {
              e[Zg] = Qg;
            }
          if ((e[ww] || Yg(e, ww, n), bw[n])) {
            for (var a in xd)
              if (e[a] !== xd[a])
                try {
                  Yg(e, a, xd[a]);
                } catch (c) {
                  e[a] = xd[a];
                }
          }
        }
      };
    for (var Xg in bw) kw(yw[Xg] && yw[Xg].prototype, Xg);
    kw(tD, "DOMTokenList");
    var nD = Lt,
      Tw = Function.prototype,
      Ew = Tw.apply,
      Iw = Tw.call,
      Xs =
        ((typeof Reflect == "undefined" ? "undefined" : vt(Reflect)) ==
          "object" &&
          Reflect.apply) ||
        (nD
          ? Iw.bind(Ew)
          : function () {
              return Iw.apply(Ew, arguments);
            }),
      yc = He([].slice),
      rD = TypeError,
      np = function (e, n) {
        if (e < n) throw rD("Not enough arguments");
        return e;
      },
      e_ = ot,
      iD = Xs,
      aD = Ft,
      oD = yc,
      sD = np,
      uD = /MSIE .\./.test(zn),
      cD = e_.Function,
      Rw = function (e) {
        return uD
          ? function (n, a) {
              var c = sD(arguments.length, 1) > 2,
                s = aD(n) ? n : cD(n),
                l = c ? oD(arguments, 2) : void 0;
              return e(
                c
                  ? function () {
                      iD(s, this, l);
                    }
                  : s,
                a
              );
            }
          : e;
      },
      Cw = { setTimeout: Rw(e_.setTimeout), setInterval: Rw(e_.setInterval) },
      Aw = Cw.setInterval;
    Ut(
      { global: !0, bind: !0, forced: ot.setInterval !== Aw },
      { setInterval: Aw }
    );
    var xw = Cw.setTimeout;
    Ut(
      { global: !0, bind: !0, forced: ot.setTimeout !== xw },
      { setTimeout: xw }
    ),
      Gg(
        "Map",
        function (u) {
          return function () {
            return u(this, arguments.length ? arguments[0] : void 0);
          };
        },
        lw
      );
    var lD = Mt,
      bc =
        Array.isArray ||
        function (u) {
          return lD(u) == "Array";
        },
      dD = He,
      hD = st,
      Ow = Ft,
      fD = di,
      pD = Ju,
      Pw = function () {},
      vD = [],
      Dw = Yn("Reflect", "construct"),
      t_ = /^\s*(?:class|function)\b/,
      mD = dD(t_.exec),
      gD = !t_.exec(Pw),
      Od = function (e) {
        if (!Ow(e)) return !1;
        try {
          return Dw(Pw, vD, e), !0;
        } catch (n) {
          return !1;
        }
      },
      Nw = function (e) {
        if (!Ow(e)) return !1;
        switch (fD(e)) {
          case "AsyncFunction":
          case "GeneratorFunction":
          case "AsyncGeneratorFunction":
            return !1;
        }
        try {
          return gD || !!mD(t_, pD(e));
        } catch (n) {
          return !0;
        }
      };
    Nw.sham = !0;
    var rp =
        !Dw ||
        hD(function () {
          var u;
          return (
            Od(Od.call) ||
            !Od(Object) ||
            !Od(function () {
              u = !0;
            }) ||
            u
          );
        })
          ? Nw
          : Od,
      Lw = bc,
      _D = rp,
      yD = nn,
      bD = In("species"),
      Mw = Array,
      SD = function (e) {
        var n;
        return (
          Lw(e) &&
            ((n = e.constructor),
            ((_D(n) && (n === Mw || Lw(n.prototype))) ||
              (yD(n) && (n = n[bD]) === null)) &&
              (n = void 0)),
          n === void 0 ? Mw : n
        );
      },
      n_ = function (e, n) {
        return new (SD(e))(n === 0 ? 0 : n);
      },
      wD = ao,
      kD = St,
      TD = mr,
      ED = Zn,
      ID = n_,
      Uw = He([].push),
      Ho = function (e) {
        var n = e == 1,
          a = e == 2,
          c = e == 3,
          s = e == 4,
          l = e == 6,
          h = e == 7,
          v = e == 5 || l;
        return function (g, _, b, C) {
          for (
            var N,
              z,
              F = TD(g),
              U = kD(F),
              E = wD(_, b),
              A = ED(U),
              L = 0,
              $ = C || ID,
              te = n ? $(g, A) : a || h ? $(g, 0) : void 0;
            A > L;
            L++
          )
            if ((v || L in U) && ((z = E((N = U[L]), L, F)), e))
              if (n) te[L] = z;
              else if (z)
                switch (e) {
                  case 3:
                    return !0;
                  case 5:
                    return N;
                  case 6:
                    return L;
                  case 2:
                    Uw(te, N);
                }
              else
                switch (e) {
                  case 4:
                    return !1;
                  case 7:
                    Uw(te, N);
                }
          return l ? -1 : c || s ? s : te;
        };
      },
      Mr = {
        forEach: Ho(0),
        map: Ho(1),
        filter: Ho(2),
        some: Ho(3),
        every: Ho(4),
        find: Ho(5),
        findIndex: Ho(6),
        filterReject: Ho(7),
      },
      RD = st,
      CD = da,
      AD = In("species"),
      Pd = function (e) {
        return (
          CD >= 51 ||
          !RD(function () {
            var n = [];
            return (
              ((n.constructor = {})[AD] = function () {
                return { foo: 1 };
              }),
              n[e](Boolean).foo !== 1
            );
          })
        );
      },
      xD = Mr.map;
    Ut(
      { target: "Array", proto: !0, forced: !Pd("map") },
      {
        map: function (e) {
          return xD(this, e, arguments.length > 1 ? arguments[1] : void 0);
        },
      }
    );
    var OD = ct,
      PD = bc,
      DD = TypeError,
      ND = Object.getOwnPropertyDescriptor,
      LD =
        OD &&
        !(function () {
          if (this !== void 0) return !0;
          try {
            Object.defineProperty([], "length", { writable: !1 }).length = 1;
          } catch (u) {
            return u instanceof TypeError;
          }
        })(),
      MD = TypeError,
      Vw = function (e) {
        if (e > 9007199254740991) throw MD("Maximum allowed index exceeded");
        return e;
      },
      Fw = Pr,
      UD = TypeError,
      jw = function (e, n) {
        if (!delete e[n])
          throw UD("Cannot delete property " + Fw(n) + " of " + Fw(e));
      },
      VD = Ut,
      FD = mr,
      jD = si,
      BD = Lr,
      zD = Zn,
      HD = LD
        ? function (u, e) {
            if (PD(u) && !ND(u, "length").writable)
              throw DD("Cannot set read only .length");
            return (u.length = e);
          }
        : function (u, e) {
            return (u.length = e);
          },
      WD = Vw,
      GD = n_,
      qD = Wi,
      r_ = jw,
      KD = Pd("splice"),
      JD = Math.max,
      $D = Math.min;
    VD(
      { target: "Array", proto: !0, forced: !KD },
      {
        splice: function (e, n) {
          var a,
            c,
            s,
            l,
            h,
            v,
            g = FD(this),
            _ = zD(g),
            b = jD(e, _),
            C = arguments.length;
          for (
            C === 0
              ? (a = c = 0)
              : C === 1
              ? ((a = 0), (c = _ - b))
              : ((a = C - 2), (c = $D(JD(BD(n), 0), _ - b))),
              WD(_ + a - c),
              s = GD(g, c),
              l = 0;
            l < c;
            l++
          )
            (h = b + l) in g && qD(s, l, g[h]);
          if (((s.length = c), a < c)) {
            for (l = b; l < _ - c; l++)
              (v = l + a), (h = l + c) in g ? (g[v] = g[h]) : r_(g, v);
            for (l = _; l > _ - c + a; l--) r_(g, l - 1);
          } else if (a > c)
            for (l = _ - c; l > b; l--)
              (v = l + a - 1), (h = l + c - 1) in g ? (g[v] = g[h]) : r_(g, v);
          for (l = 0; l < a; l++) g[l + b] = arguments[l + 2];
          return HD(g, _ - c + a), s;
        },
      }
    );
    var YD = st,
      Dd = function (e, n) {
        var a = [][e];
        return (
          !!a &&
          YD(function () {
            a.call(
              null,
              n ||
                function () {
                  return 1;
                },
              1
            );
          })
        );
      },
      ZD = Mr.forEach,
      i_ = Dd("forEach")
        ? [].forEach
        : function (u) {
            return ZD(this, u, arguments.length > 1 ? arguments[1] : void 0);
          };
    Ut(
      { target: "Array", proto: !0, forced: [].forEach != i_ },
      { forEach: i_ }
    );
    var Bw = ot,
      zw = mw,
      QD = _w,
      a_ = i_,
      XD = Zr,
      Hw = function (e) {
        if (e && e.forEach !== a_)
          try {
            XD(e, "forEach", a_);
          } catch (n) {
            e.forEach = a_;
          }
      };
    for (var o_ in zw) zw[o_] && Hw(Bw[o_] && Bw[o_].prototype);
    Hw(QD);
    var e5 = Ut,
      t5 = st,
      n5 = bc,
      r5 = nn,
      i5 = mr,
      a5 = Zn,
      Ww = Vw,
      Gw = Wi,
      o5 = n_,
      s5 = Pd,
      u5 = da,
      qw = In("isConcatSpreadable"),
      c5 =
        u5 >= 51 ||
        !t5(function () {
          var u = [];
          return (u[qw] = !1), u.concat()[0] !== u;
        }),
      l5 = s5("concat"),
      d5 = function (e) {
        if (!r5(e)) return !1;
        var n = e[qw];
        return n !== void 0 ? !!n : n5(e);
      };
    e5(
      { target: "Array", proto: !0, arity: 1, forced: !c5 || !l5 },
      {
        concat: function (e) {
          var n,
            a,
            c,
            s,
            l,
            h = i5(this),
            v = o5(h, 0),
            g = 0;
          for (n = -1, c = arguments.length; n < c; n++)
            if (d5((l = n === -1 ? h : arguments[n])))
              for (s = a5(l), Ww(g + s), a = 0; a < s; a++, g++)
                a in l && Gw(v, g, l[a]);
            else Ww(g + 1), Gw(v, g++, l);
          return (v.length = g), v;
        },
      }
    );
    var h5 = Ut,
      f5 = St,
      p5 = on,
      v5 = Dd,
      m5 = He([].join),
      g5 = f5 != Object,
      _5 = v5("join", ",");
    h5(
      { target: "Array", proto: !0, forced: g5 || !_5 },
      {
        join: function (e) {
          return m5(p5(this), e === void 0 ? "," : e);
        },
      }
    );
    var y5 = Mr.filter;
    Ut(
      { target: "Array", proto: !0, forced: !Pd("filter") },
      {
        filter: function (e) {
          return y5(this, e, arguments.length > 1 ? arguments[1] : void 0);
        },
      }
    );
    var Kw = He,
      b5 = fr,
      s_ = Date.prototype,
      Jw = "Invalid Date",
      S5 = "toString",
      w5 = Kw(s_.toString),
      k5 = Kw(s_.getTime);
    String(/* @__PURE__ */ new Date(NaN)) != Jw &&
      b5(s_, S5, function () {
        var u = k5(this);
        return u == u ? w5(this) : Jw;
      });
    var T5 = Lr,
      E5 = _r,
      I5 = Dt,
      R5 = RangeError,
      $w = function (e) {
        var n = E5(I5(this)),
          a = "",
          c = T5(e);
        if (c < 0 || c == 1 / 0) throw R5("Wrong number of repetitions");
        for (; c > 0; (c >>>= 1) && (n += n)) 1 & c && (a += n);
        return a;
      },
      Yw = He,
      C5 = Pn,
      Zw = _r,
      A5 = Dt,
      x5 = Yw($w),
      O5 = Yw("".slice),
      P5 = Math.ceil,
      Qw = function (e) {
        return function (n, a, c) {
          var s,
            l,
            h = Zw(A5(n)),
            v = C5(a),
            g = h.length,
            _ = c === void 0 ? " " : Zw(c);
          return v <= g || _ == ""
            ? h
            : ((l = x5(_, P5((s = v - g) / _.length))).length > s &&
                (l = O5(l, 0, s)),
              e ? h + l : l + h);
        };
      },
      D5 = { start: Qw(!1), end: Qw(!0) },
      N5 =
        /Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(
          zn
        ),
      L5 = D5.start;
    Ut(
      { target: "String", proto: !0, forced: N5 },
      {
        padStart: function (e) {
          return L5(this, e, arguments.length > 1 ? arguments[1] : void 0);
        },
      }
    );
    var M5 = Wn,
      Xw = function () {
        var e = M5(this),
          n = "";
        return (
          e.hasIndices && (n += "d"),
          e.global && (n += "g"),
          e.ignoreCase && (n += "i"),
          e.multiline && (n += "m"),
          e.dotAll && (n += "s"),
          e.unicode && (n += "u"),
          e.unicodeSets && (n += "v"),
          e.sticky && (n += "y"),
          n
        );
      },
      u_ = st,
      c_ = ot.RegExp,
      l_ = u_(function () {
        var u = c_("a", "y");
        return (u.lastIndex = 2), u.exec("abcd") != null;
      }),
      U5 =
        l_ ||
        u_(function () {
          return !c_("a", "y").sticky;
        }),
      ek = {
        BROKEN_CARET:
          l_ ||
          u_(function () {
            var u = c_("^r", "gy");
            return (u.lastIndex = 2), u.exec("str") != null;
          }),
        MISSED_STICKY: U5,
        UNSUPPORTED_Y: l_,
      },
      V5 = st,
      F5 = ot.RegExp,
      tk = V5(function () {
        var u = F5(".", "s");
        return !(
          u.dotAll &&
          u.exec(`
`) &&
          u.flags === "s"
        );
      }),
      j5 = st,
      B5 = ot.RegExp,
      nk = j5(function () {
        var u = B5("(?<a>b)", "g");
        return u.exec("b").groups.a !== "b" || "b".replace(u, "$<a>c") !== "bc";
      }),
      Sc = Re,
      ip = He,
      z5 = _r,
      H5 = Xw,
      W5 = ek,
      G5 = Vu.exports,
      q5 = Ga,
      K5 = On.get,
      J5 = tk,
      $5 = nk,
      Y5 = G5("native-string-replace", String.prototype.replace),
      ap = RegExp.prototype.exec,
      d_ = ap,
      Z5 = ip("".charAt),
      Q5 = ip("".indexOf),
      X5 = ip("".replace),
      h_ = ip("".slice),
      f_ = (function () {
        var u = /a/,
          e = /b*/g;
        return (
          Sc(ap, u, "a"), Sc(ap, e, "a"), u.lastIndex !== 0 || e.lastIndex !== 0
        );
      })(),
      rk = W5.BROKEN_CARET,
      p_ = /()??/.exec("")[1] !== void 0;
    (f_ || p_ || rk || J5 || $5) &&
      (d_ = function (e) {
        var n,
          a,
          c,
          s,
          l,
          h,
          v,
          g = this,
          _ = K5(g),
          b = z5(e),
          C = _.raw;
        if (C)
          return (
            (C.lastIndex = g.lastIndex),
            (n = Sc(d_, C, b)),
            (g.lastIndex = C.lastIndex),
            n
          );
        var N = _.groups,
          z = rk && g.sticky,
          F = Sc(H5, g),
          U = g.source,
          E = 0,
          A = b;
        if (
          (z &&
            ((F = X5(F, "y", "")),
            Q5(F, "g") === -1 && (F += "g"),
            (A = h_(b, g.lastIndex)),
            g.lastIndex > 0 &&
              (!g.multiline ||
                (g.multiline &&
                  Z5(b, g.lastIndex - 1) !==
                    `
`)) &&
              ((U = "(?: " + U + ")"), (A = " " + A), E++),
            (a = new RegExp("^(?:" + U + ")", F))),
          p_ && (a = new RegExp("^" + U + "$(?!\\s)", F)),
          f_ && (c = g.lastIndex),
          (s = Sc(ap, z ? a : g, A)),
          z
            ? s
              ? ((s.input = h_(s.input, E)),
                (s[0] = h_(s[0], E)),
                (s.index = g.lastIndex),
                (g.lastIndex += s[0].length))
              : (g.lastIndex = 0)
            : f_ && s && (g.lastIndex = g.global ? s.index + s[0].length : c),
          p_ &&
            s &&
            s.length > 1 &&
            Sc(Y5, s[0], a, function () {
              for (l = 1; l < arguments.length - 2; l++)
                arguments[l] === void 0 && (s[l] = void 0);
            }),
          s && N)
        )
          for (s.groups = h = q5(null), l = 0; l < N.length; l++)
            h[(v = N[l])[0]] = s[v[1]];
        return s;
      });
    var op = d_;
    Ut({ target: "RegExp", proto: !0, forced: /./.exec !== op }, { exec: op });
    var ik = He,
      ak = fr,
      e6 = op,
      ok = st,
      sk = In,
      t6 = Zr,
      n6 = sk("species"),
      v_ = RegExp.prototype,
      m_ = function (e, n, a, c) {
        var s = sk(e),
          l = !ok(function () {
            var _ = {};
            return (
              (_[s] = function () {
                return 7;
              }),
              ""[e](_) != 7
            );
          }),
          h =
            l &&
            !ok(function () {
              var _ = !1,
                b = /a/;
              return (
                e === "split" &&
                  (((b = {}).constructor = {}),
                  (b.constructor[n6] = function () {
                    return b;
                  }),
                  (b.flags = ""),
                  (b[s] = /./[s])),
                (b.exec = function () {
                  return (_ = !0), null;
                }),
                b[s](""),
                !_
              );
            });
        if (!l || !h || a) {
          var v = ik(/./[s]),
            g = n(s, ""[e], function (_, b, C, N, z) {
              var F = ik(_),
                U = b.exec;
              return U === e6 || U === v_.exec
                ? l && !z
                  ? { done: !0, value: v(b, C, N) }
                  : { done: !0, value: F(C, b, N) }
                : { done: !1 };
            });
          ak(String.prototype, e, g[0]), ak(v_, s, g[1]);
        }
        c && t6(v_[s], "sham", !0);
      },
      r6 = Jg.charAt,
      uk = function (e, n, a) {
        return n + (a ? r6(e, n).length : 1);
      },
      g_ = He,
      i6 = mr,
      a6 = Math.floor,
      __ = g_("".charAt),
      o6 = g_("".replace),
      y_ = g_("".slice),
      s6 = /\$([$&'`]|\d{1,2}|<[^>]*>)/g,
      u6 = /\$([$&'`]|\d{1,2})/g,
      ck = Re,
      c6 = Wn,
      l6 = Ft,
      d6 = Mt,
      h6 = op,
      f6 = TypeError,
      b_ = function (e, n) {
        var a = e.exec;
        if (l6(a)) {
          var c = ck(a, e, n);
          return c !== null && c6(c), c;
        }
        if (d6(e) === "RegExp") return ck(h6, e, n);
        throw f6("RegExp#exec called on incompatible receiver");
      },
      p6 = Xs,
      lk = Re,
      sp = He,
      v6 = m_,
      m6 = st,
      g6 = Wn,
      _6 = Ft,
      y6 = cn,
      b6 = Lr,
      S6 = Pn,
      wc = _r,
      w6 = Dt,
      k6 = uk,
      T6 = Va,
      E6 = function (e, n, a, c, s, l) {
        var h = a + e.length,
          v = c.length,
          g = u6;
        return (
          s !== void 0 && ((s = i6(s)), (g = s6)),
          o6(l, g, function (_, b) {
            var C;
            switch (__(b, 0)) {
              case "$":
                return "$";
              case "&":
                return e;
              case "`":
                return y_(n, 0, a);
              case "'":
                return y_(n, h);
              case "<":
                C = s[y_(b, 1, -1)];
                break;
              default:
                var N = +b;
                if (N === 0) return _;
                if (N > v) {
                  var z = a6(N / 10);
                  return z === 0
                    ? _
                    : z <= v
                    ? c[z - 1] === void 0
                      ? __(b, 1)
                      : c[z - 1] + __(b, 1)
                    : _;
                }
                C = c[N - 1];
            }
            return C === void 0 ? "" : C;
          })
        );
      },
      I6 = b_,
      S_ = In("replace"),
      R6 = Math.max,
      C6 = Math.min,
      A6 = sp([].concat),
      w_ = sp([].push),
      dk = sp("".indexOf),
      hk = sp("".slice),
      x6 = "a".replace(/./, "$0") === "$0",
      fk = !!/./[S_] && /./[S_]("a", "$0") === "",
      O6 = !m6(function () {
        var u = /./;
        return (
          (u.exec = function () {
            var e = [];
            return (e.groups = { a: "7" }), e;
          }),
          "".replace(u, "$<a>") !== "7"
        );
      });
    v6(
      "replace",
      function (u, e, n) {
        var a = fk ? "$" : "$0";
        return [
          function (c, s) {
            var l = w6(this),
              h = y6(c) ? void 0 : T6(c, S_);
            return h ? lk(h, c, l, s) : lk(e, wc(l), c, s);
          },
          function (c, s) {
            var l = g6(this),
              h = wc(c);
            if (typeof s == "string" && dk(s, a) === -1 && dk(s, "$<") === -1) {
              var v = n(e, l, h, s);
              if (v.done) return v.value;
            }
            var g = _6(s);
            g || (s = wc(s));
            var _ = l.global;
            if (_) {
              var b = l.unicode;
              l.lastIndex = 0;
            }
            for (var C = []; ; ) {
              var N = I6(l, h);
              if (N === null || (w_(C, N), !_)) break;
              wc(N[0]) === "" && (l.lastIndex = k6(h, S6(l.lastIndex), b));
            }
            for (var z, F = "", U = 0, E = 0; E < C.length; E++) {
              for (
                var A = wc((N = C[E])[0]),
                  L = R6(C6(b6(N.index), h.length), 0),
                  $ = [],
                  te = 1;
                te < N.length;
                te++
              )
                w_($, (z = N[te]) === void 0 ? z : String(z));
              var X = N.groups;
              if (g) {
                var D = A6([A], $, L, h);
                X !== void 0 && w_(D, X);
                var M = wc(p6(s, void 0, D));
              } else M = E6(A, h, L, $, X, s);
              L >= U && ((F += hk(h, U, L) + M), (U = L + A.length));
            }
            return F + hk(h, U);
          },
        ];
      },
      !O6 || !x6 || fk
    );
    var P6 = Re,
      D6 = Jn,
      N6 = nr,
      L6 = Xw,
      pk = RegExp.prototype,
      vk = function (e) {
        var n = e.flags;
        return n !== void 0 || "flags" in pk || D6(e, "flags") || !N6(pk, e)
          ? n
          : P6(L6, e);
      },
      M6 = pa.PROPER,
      U6 = fr,
      V6 = Wn,
      mk = _r,
      F6 = st,
      j6 = vk,
      gk = "toString",
      _k = RegExp.prototype.toString,
      B6 = F6(function () {
        return _k.call({ source: "a", flags: "b" }) != "/a/b";
      }),
      z6 = M6 && _k.name != gk;
    (B6 || z6) &&
      U6(
        RegExp.prototype,
        gk,
        function () {
          var u = V6(this);
          return "/" + mk(u.source) + "/" + mk(j6(u));
        },
        { unsafe: !0 }
      );
    var H6 = st,
      W6 = In("iterator"),
      yk = !H6(function () {
        var u = new URL("b?a=1&b=2&c=3", "http://a"),
          e = u.searchParams,
          n = "";
        return (
          (u.pathname = "c%20d"),
          e.forEach(function (a, c) {
            e.delete("b"), (n += c + a);
          }),
          !e.sort ||
            u.href !== "http://a/c%20d?a=1&c=3" ||
            e.get("c") !== "3" ||
            String(new URLSearchParams("?a=1")) !== "a=1" ||
            !e[W6] ||
            new URL("https://a@b").username !== "a" ||
            new URLSearchParams(new URLSearchParams("a=b")).get("a") !== "b" ||
            new URL("http://тест").host !== "xn--e1aybc" ||
            new URL("http://a#б").hash !== "#%D0%B1" ||
            n !== "a1c3" ||
            new URL("http://x", void 0).host !== "x"
        );
      }),
      bk = gc,
      G6 = Math.floor,
      k_ = function (e, n) {
        var a = e.length,
          c = G6(a / 2);
        return a < 8 ? q6(e, n) : K6(e, k_(bk(e, 0, c), n), k_(bk(e, c), n), n);
      },
      q6 = function (e, n) {
        for (var a, c, s = e.length, l = 1; l < s; ) {
          for (c = l, a = e[l]; c && n(e[c - 1], a) > 0; ) e[c] = e[--c];
          c !== l++ && (e[c] = a);
        }
        return e;
      },
      K6 = function (e, n, a, c) {
        for (var s = n.length, l = a.length, h = 0, v = 0; h < s || v < l; )
          e[h + v] =
            h < s && v < l
              ? c(n[h], a[v]) <= 0
                ? n[h++]
                : a[v++]
              : h < s
              ? n[h++]
              : a[v++];
        return e;
      },
      Sk = k_,
      T_ = Ut,
      kc = ot,
      up = Re,
      Ra = He,
      J6 = ct,
      wk = yk,
      kk = fr,
      $6 = Rd,
      Y6 = En,
      Z6 = T,
      E_ = On,
      Tk = zo,
      I_ = Ft,
      Q6 = Jn,
      X6 = ao,
      eN = di,
      tN = Wn,
      Ek = nn,
      fi = _r,
      nN = Ga,
      Ik = me,
      R_ = Qf,
      rN = Ed,
      Tc = np,
      iN = Sk,
      aN = In("iterator"),
      cp = "URLSearchParams",
      Rk = "URLSearchParamsIterator",
      Ck = E_.set,
      Gi = E_.getterFor(cp),
      oN = E_.getterFor(Rk),
      sN = Object.getOwnPropertyDescriptor,
      C_ = function (e) {
        if (!J6) return kc[e];
        var n = sN(kc, e);
        return n && n.value;
      },
      Ak = C_("fetch"),
      lp = C_("Request"),
      Nd = C_("Headers"),
      A_ = lp && lp.prototype,
      xk = Nd && Nd.prototype,
      uN = kc.RegExp,
      cN = kc.TypeError,
      Ok = kc.decodeURIComponent,
      lN = kc.encodeURIComponent,
      dN = Ra("".charAt),
      Pk = Ra([].join),
      eu = Ra([].push),
      x_ = Ra("".replace),
      hN = Ra([].shift),
      Dk = Ra([].splice),
      Nk = Ra("".split),
      fN = Ra("".slice),
      pN = /\+/g,
      Lk = Array(4),
      vN = function (e) {
        return (
          Lk[e - 1] || (Lk[e - 1] = uN("((?:%[\\da-f]{2}){" + e + "})", "gi"))
        );
      },
      mN = function (e) {
        try {
          return Ok(e);
        } catch (n) {
          return e;
        }
      },
      Mk = function (e) {
        var n = x_(e, pN, " "),
          a = 4;
        try {
          return Ok(n);
        } catch (c) {
          for (; a; ) n = x_(n, vN(a--), mN);
          return n;
        }
      },
      gN = /[!'()~]|%20/g,
      _N = {
        "!": "%21",
        "'": "%27",
        "(": "%28",
        ")": "%29",
        "~": "%7E",
        "%20": "+",
      },
      yN = function (e) {
        return _N[e];
      },
      Uk = function (e) {
        return x_(lN(e), gN, yN);
      },
      O_ = Z6(
        function (u, e) {
          Ck(this, { type: Rk, iterator: R_(Gi(u).entries), kind: e });
        },
        "Iterator",
        function () {
          var u = oN(this),
            e = u.kind,
            n = u.iterator.next(),
            a = n.value;
          return (
            n.done ||
              (n.value =
                e === "keys"
                  ? a.key
                  : e === "values"
                  ? a.value
                  : [a.key, a.value]),
            n
          );
        },
        !0
      ),
      Vk = function (e) {
        (this.entries = []),
          (this.url = null),
          e !== void 0 &&
            (Ek(e)
              ? this.parseObject(e)
              : this.parseQuery(
                  typeof e == "string"
                    ? dN(e, 0) === "?"
                      ? fN(e, 1)
                      : e
                    : fi(e)
                ));
      };
    Vk.prototype = {
      type: cp,
      bindURL: function (e) {
        (this.url = e), this.update();
      },
      parseObject: function (e) {
        var n,
          a,
          c,
          s,
          l,
          h,
          v,
          g = rN(e);
        if (g)
          for (a = (n = R_(e, g)).next; !(c = up(a, n)).done; ) {
            if (
              ((l = (s = R_(tN(c.value))).next),
              (h = up(l, s)).done || (v = up(l, s)).done || !up(l, s).done)
            )
              throw cN("Expected sequence with length 2");
            eu(this.entries, { key: fi(h.value), value: fi(v.value) });
          }
        else
          for (var _ in e)
            Q6(e, _) && eu(this.entries, { key: _, value: fi(e[_]) });
      },
      parseQuery: function (e) {
        if (e)
          for (var n, a, c = Nk(e, "&"), s = 0; s < c.length; )
            (n = c[s++]).length &&
              ((a = Nk(n, "=")),
              eu(this.entries, { key: Mk(hN(a)), value: Mk(Pk(a, "=")) }));
      },
      serialize: function () {
        for (var e, n = this.entries, a = [], c = 0; c < n.length; )
          (e = n[c++]), eu(a, Uk(e.key) + "=" + Uk(e.value));
        return Pk(a, "&");
      },
      update: function () {
        (this.entries.length = 0), this.parseQuery(this.url.query);
      },
      updateURL: function () {
        this.url && this.url.update();
      },
    };
    var dp = function () {
        Tk(this, Ld);
        var e = arguments.length > 0 ? arguments[0] : void 0;
        Ck(this, new Vk(e));
      },
      Ld = dp.prototype;
    if (
      ($6(
        Ld,
        {
          append: function (e, n) {
            Tc(arguments.length, 2);
            var a = Gi(this);
            eu(a.entries, { key: fi(e), value: fi(n) }), a.updateURL();
          },
          delete: function (e) {
            Tc(arguments.length, 1);
            for (
              var n = Gi(this), a = n.entries, c = fi(e), s = 0;
              s < a.length;

            )
              a[s].key === c ? Dk(a, s, 1) : s++;
            n.updateURL();
          },
          get: function (e) {
            Tc(arguments.length, 1);
            for (var n = Gi(this).entries, a = fi(e), c = 0; c < n.length; c++)
              if (n[c].key === a) return n[c].value;
            return null;
          },
          getAll: function (e) {
            Tc(arguments.length, 1);
            for (
              var n = Gi(this).entries, a = fi(e), c = [], s = 0;
              s < n.length;
              s++
            )
              n[s].key === a && eu(c, n[s].value);
            return c;
          },
          has: function (e) {
            Tc(arguments.length, 1);
            for (var n = Gi(this).entries, a = fi(e), c = 0; c < n.length; )
              if (n[c++].key === a) return !0;
            return !1;
          },
          set: function (e, n) {
            Tc(arguments.length, 1);
            for (
              var a,
                c = Gi(this),
                s = c.entries,
                l = !1,
                h = fi(e),
                v = fi(n),
                g = 0;
              g < s.length;
              g++
            )
              (a = s[g]).key === h &&
                (l ? Dk(s, g--, 1) : ((l = !0), (a.value = v)));
            l || eu(s, { key: h, value: v }), c.updateURL();
          },
          sort: function () {
            var e = Gi(this);
            iN(e.entries, function (n, a) {
              return n.key > a.key ? 1 : -1;
            }),
              e.updateURL();
          },
          forEach: function (e) {
            for (
              var n,
                a = Gi(this).entries,
                c = X6(e, arguments.length > 1 ? arguments[1] : void 0),
                s = 0;
              s < a.length;

            )
              c((n = a[s++]).value, n.key, this);
          },
          keys: function () {
            return new O_(this, "keys");
          },
          values: function () {
            return new O_(this, "values");
          },
          entries: function () {
            return new O_(this, "entries");
          },
        },
        { enumerable: !0 }
      ),
      kk(Ld, aN, Ld.entries, { name: "entries" }),
      kk(
        Ld,
        "toString",
        function () {
          return Gi(this).serialize();
        },
        { enumerable: !0 }
      ),
      Y6(dp, cp),
      T_({ global: !0, constructor: !0, forced: !wk }, { URLSearchParams: dp }),
      !wk && I_(Nd))
    ) {
      var bN = Ra(xk.has),
        SN = Ra(xk.set),
        Fk = function (e) {
          if (Ek(e)) {
            var n,
              a = e.body;
            if (eN(a) === cp)
              return (
                (n = e.headers ? new Nd(e.headers) : new Nd()),
                bN(n, "content-type") ||
                  SN(
                    n,
                    "content-type",
                    "application/x-www-form-urlencoded;charset=UTF-8"
                  ),
                nN(e, { body: Ik(0, fi(a)), headers: Ik(0, n) })
              );
          }
          return e;
        };
      if (
        (I_(Ak) &&
          T_(
            { global: !0, enumerable: !0, dontCallGetSet: !0, forced: !0 },
            {
              fetch: function (e) {
                return Ak(e, arguments.length > 1 ? Fk(arguments[1]) : {});
              },
            }
          ),
        I_(lp))
      ) {
        var P_ = function (e) {
          return (
            Tk(this, A_),
            new lp(e, arguments.length > 1 ? Fk(arguments[1]) : {})
          );
        };
        (A_.constructor = P_),
          (P_.prototype = A_),
          T_(
            { global: !0, constructor: !0, dontCallGetSet: !0, forced: !0 },
            { Request: P_ }
          );
      }
    }
    var wN = { URLSearchParams: dp, getState: Gi },
      kN =
        Object.is ||
        function (u, e) {
          return u === e ? u !== 0 || 1 / u == 1 / e : u != u && e != e;
        },
      TN = Re,
      EN = Wn,
      IN = cn,
      RN = Dt,
      jk = kN,
      Bk = _r,
      CN = Va,
      AN = b_;
    m_("search", function (u, e, n) {
      return [
        function (a) {
          var c = RN(this),
            s = IN(a) ? void 0 : CN(a, u);
          return s ? TN(s, a, c) : new RegExp(a)[u](Bk(c));
        },
        function (a) {
          var c = EN(this),
            s = Bk(a),
            l = n(e, c, s);
          if (l.done) return l.value;
          var h = c.lastIndex;
          jk(h, 0) || (c.lastIndex = 0);
          var v = AN(c, s);
          return (
            jk(c.lastIndex, h) || (c.lastIndex = h), v === null ? -1 : v.index
          );
        },
      ];
    }),
      /* @__PURE__ */ new Date().getTime();
    var D_ = 0,
      Ur = function () {
        return /* @__PURE__ */ new Date().getTime() + D_;
      },
      zk = function () {
        var e = /* @__PURE__ */ new Date();
        return e.setTime(Ur()), e.toLocaleString();
      },
      xN = Re,
      ON = Wn,
      PN = cn,
      DN = Pn,
      N_ = _r,
      NN = Dt,
      LN = Va,
      MN = uk,
      Hk = b_;
    m_("match", function (u, e, n) {
      return [
        function (a) {
          var c = NN(this),
            s = PN(a) ? void 0 : LN(a, u);
          return s ? xN(s, a, c) : new RegExp(a)[u](N_(c));
        },
        function (a) {
          var c = ON(this),
            s = N_(a),
            l = n(e, c, s);
          if (l.done) return l.value;
          if (!c.global) return Hk(c, s);
          var h = c.unicode;
          c.lastIndex = 0;
          for (var v, g = [], _ = 0; (v = Hk(c, s)) !== null; ) {
            var b = N_(v[0]);
            (g[_] = b),
              b === "" && (c.lastIndex = MN(s, DN(c.lastIndex), h)),
              _++;
          }
          return _ === 0 ? null : g;
        },
      ];
    });
    var UN = nn,
      VN = Mt,
      FN = In("match"),
      Wk = function (e) {
        var n;
        return UN(e) && ((n = e[FN]) !== void 0 ? !!n : VN(e) == "RegExp");
      },
      jN = Hn.f,
      BN = ct,
      L_ = ot,
      Md = He,
      zN = Uo,
      HN = tp,
      WN = Zr,
      GN = dn.f,
      Gk = nr,
      qN = Wk,
      qk = _r,
      KN = vk,
      Kk = ek,
      JN = function (e, n, a) {
        a in e ||
          jN(e, a, {
            configurable: !0,
            get: function () {
              return n[a];
            },
            set: function (s) {
              n[a] = s;
            },
          });
      },
      $N = fr,
      YN = st,
      ZN = Jn,
      QN = On.enforce,
      XN = Cd,
      Jk = tk,
      $k = nk,
      e8 = In("match"),
      Wo = L_.RegExp,
      Ec = Wo.prototype,
      t8 = L_.SyntaxError,
      n8 = Md(Ec.exec),
      hp = Md("".charAt),
      Yk = Md("".replace),
      Zk = Md("".indexOf),
      r8 = Md("".slice),
      i8 = /^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,
      tu = /a/g,
      M_ = /a/g,
      a8 = new Wo(tu) !== tu,
      Qk = Kk.MISSED_STICKY,
      o8 = Kk.UNSUPPORTED_Y,
      s8 =
        BN &&
        (!a8 ||
          Qk ||
          Jk ||
          $k ||
          YN(function () {
            return (
              (M_[e8] = !1),
              Wo(tu) != tu || Wo(M_) == M_ || Wo(tu, "i") != "/a/i"
            );
          }));
    if (zN("RegExp", s8)) {
      for (
        var nu = function (e, n) {
            var a,
              c,
              s,
              l,
              h,
              v,
              g = Gk(Ec, this),
              _ = qN(e),
              b = n === void 0,
              C = [],
              N = e;
            if (!g && _ && b && e.constructor === nu) return e;
            if (
              ((_ || Gk(Ec, e)) && ((e = e.source), b && (n = KN(N))),
              (e = e === void 0 ? "" : qk(e)),
              (n = n === void 0 ? "" : qk(n)),
              (N = e),
              Jk &&
                ("dotAll" in tu) &&
                (c = !!n && Zk(n, "s") > -1) &&
                (n = Yk(n, /s/g, "")),
              (a = n),
              Qk &&
                ("sticky" in tu) &&
                (s = !!n && Zk(n, "y") > -1) &&
                o8 &&
                (n = Yk(n, /y/g, "")),
              $k &&
                ((l = (function (z) {
                  for (
                    var F,
                      U = z.length,
                      E = 0,
                      A = "",
                      L = [],
                      $ = {},
                      te = !1,
                      X = !1,
                      D = 0,
                      M = "";
                    E <= U;
                    E++
                  ) {
                    if ((F = hp(z, E)) === "\\") F += hp(z, ++E);
                    else if (F === "]") te = !1;
                    else if (!te)
                      switch (!0) {
                        case F === "[":
                          te = !0;
                          break;
                        case F === "(":
                          n8(i8, r8(z, E + 1)) && ((E += 2), (X = !0)),
                            (A += F),
                            D++;
                          continue;
                        case F === ">" && X:
                          if (M === "" || ZN($, M))
                            throw new t8("Invalid capture group name");
                          ($[M] = !0),
                            (L[L.length] = [M, D]),
                            (X = !1),
                            (M = "");
                          continue;
                      }
                    X ? (M += F) : (A += F);
                  }
                  return [A, L];
                })(e)),
                (e = l[0]),
                (C = l[1])),
              (h = HN(Wo(e, n), g ? this : Ec, nu)),
              (c || s || C.length) &&
                ((v = QN(h)),
                c &&
                  ((v.dotAll = !0),
                  (v.raw = nu(
                    (function (z) {
                      for (
                        var F, U = z.length, E = 0, A = "", L = !1;
                        E <= U;
                        E++
                      )
                        (F = hp(z, E)) !== "\\"
                          ? L || F !== "."
                            ? (F === "[" ? (L = !0) : F === "]" && (L = !1),
                              (A += F))
                            : (A += "[\\s\\S]")
                          : (A += F + hp(z, ++E));
                      return A;
                    })(e),
                    a
                  ))),
                s && (v.sticky = !0),
                C.length && (v.groups = C)),
              e !== N)
            )
              try {
                WN(h, "source", N === "" ? "(?:)" : N);
              } catch (z) {}
            return h;
          },
          Xk = GN(Wo),
          e2 = 0;
        Xk.length > e2;

      )
        JN(nu, Wo, Xk[e2++]);
      (Ec.constructor = nu),
        (nu.prototype = Ec),
        $N(L_, "RegExp", nu, { constructor: !0 });
    }
    XN("RegExp");
    var t2 = He((1).valueOf),
      n2 = `	
\v\f\r                　\u2028\u2029\uFEFF`,
      u8 = Dt,
      c8 = _r,
      r2 = He("".replace),
      fp = `[	
\v\f\r                　\u2028\u2029\uFEFF]`,
      l8 = RegExp("^" + fp + fp + "*"),
      d8 = RegExp(fp + fp + "*$"),
      U_ = function (e) {
        return function (n) {
          var a = c8(u8(n));
          return 1 & e && (a = r2(a, l8, "")), 2 & e && (a = r2(a, d8, "")), a;
        };
      },
      pp = { start: U_(1), end: U_(2), trim: U_(3) },
      h8 = ct,
      V_ = ot,
      i2 = He,
      f8 = Uo,
      p8 = fr,
      a2 = Jn,
      v8 = tp,
      m8 = nr,
      g8 = Io,
      o2 = Ts,
      _8 = st,
      y8 = dn.f,
      b8 = zt.f,
      S8 = Hn.f,
      w8 = t2,
      k8 = pp.trim,
      s2 = "Number",
      Go = V_.Number,
      F_ = Go.prototype,
      T8 = V_.TypeError,
      E8 = i2("".slice),
      vp = i2("".charCodeAt),
      I8 = function (e) {
        var n = o2(e, "number");
        return typeof n == "bigint" ? n : R8(n);
      },
      R8 = function (e) {
        var n,
          a,
          c,
          s,
          l,
          h,
          v,
          g,
          _ = o2(e, "number");
        if (g8(_)) throw T8("Cannot convert a Symbol value to a number");
        if (typeof _ == "string" && _.length > 2) {
          if (((_ = k8(_)), (n = vp(_, 0)) === 43 || n === 45)) {
            if ((a = vp(_, 2)) === 88 || a === 120) return NaN;
          } else if (n === 48) {
            switch (vp(_, 1)) {
              case 66:
              case 98:
                (c = 2), (s = 49);
                break;
              case 79:
              case 111:
                (c = 8), (s = 55);
                break;
              default:
                return +_;
            }
            for (h = (l = E8(_, 2)).length, v = 0; v < h; v++)
              if ((g = vp(l, v)) < 48 || g > s) return NaN;
            return parseInt(l, c);
          }
        }
        return +_;
      };
    if (f8(s2, !Go(" 0o1") || !Go("0b1") || Go("+0x1"))) {
      for (
        var mp,
          Ic = function (e) {
            var n = arguments.length < 1 ? 0 : Go(I8(e)),
              a = this;
            return m8(F_, a) &&
              _8(function () {
                w8(a);
              })
              ? v8(Object(n), a, Ic)
              : n;
          },
          u2 = h8
            ? y8(Go)
            : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(
                ","
              ),
          j_ = 0;
        u2.length > j_;
        j_++
      )
        a2(Go, (mp = u2[j_])) && !a2(Ic, mp) && S8(Ic, mp, b8(Go, mp));
      (Ic.prototype = F_),
        (F_.constructor = Ic),
        p8(V_, s2, Ic, { constructor: !0 });
    }
    var C8 = ui.includes,
      A8 = dc;
    Ut(
      {
        target: "Array",
        proto: !0,
        forced: st(function () {
          return !Array(1).includes();
        }),
      },
      {
        includes: function (e) {
          return C8(this, e, arguments.length > 1 ? arguments[1] : void 0);
        },
      }
    ),
      A8("includes");
    var x8 = Wk,
      O8 = TypeError,
      c2 = function (e) {
        if (x8(e)) throw O8("The method doesn't accept regular expressions");
        return e;
      },
      P8 = In("match"),
      l2 = function (e) {
        var n = /./;
        try {
          "/./"[e](n);
        } catch (a) {
          try {
            return (n[P8] = !1), "/./"[e](n);
          } catch (c) {}
        }
        return !1;
      },
      D8 = Ut,
      N8 = c2,
      L8 = Dt,
      d2 = _r,
      M8 = l2,
      U8 = He("".indexOf);
    D8(
      { target: "String", proto: !0, forced: !M8("includes") },
      {
        includes: function (e) {
          return !!~U8(
            d2(L8(this)),
            d2(N8(e)),
            arguments.length > 1 ? arguments[1] : void 0
          );
        },
      }
    );
    var V8 = Ut,
      F8 = ui.indexOf,
      j8 = Dd,
      B_ = He([].indexOf),
      h2 = !!B_ && 1 / B_([1], 1, -0) < 0,
      B8 = j8("indexOf");
    V8(
      { target: "Array", proto: !0, forced: h2 || !B8 },
      {
        indexOf: function (e) {
          var n = arguments.length > 1 ? arguments[1] : void 0;
          return h2 ? B_(this, e, n) || 0 : F8(this, e, n);
        },
      }
    );
    var z8 = mr,
      f2 = Js,
      H8 = hc;
    Ut(
      {
        target: "Object",
        stat: !0,
        forced: st(function () {
          f2(1);
        }),
        sham: !H8,
      },
      {
        getPrototypeOf: function (e) {
          return f2(z8(e));
        },
      }
    );
    var W8 = Xs,
      G8 = Dr,
      q8 = Wn;
    Ut(
      {
        target: "Reflect",
        stat: !0,
        forced: !st(function () {
          Reflect.apply(function () {});
        }),
      },
      {
        apply: function (e, n, a) {
          return W8(G8(e), n, q8(a));
        },
      }
    );
    var K8 = ct,
      J8 = pa.EXISTS,
      p2 = He,
      $8 = Hn.f,
      v2 = Function.prototype,
      Y8 = p2(v2.toString),
      m2 = /function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,
      Z8 = p2(m2.exec);
    K8 &&
      !J8 &&
      $8(v2, "name", {
        configurable: !0,
        get: function () {
          try {
            return Z8(m2, Y8(this))[1];
          } catch (e) {
            return "";
          }
        },
      });
    var Q8 = Ut,
      g2 = Date,
      X8 = He(g2.prototype.getTime);
    Q8(
      { target: "Date", stat: !0 },
      {
        now: function () {
          return X8(new g2());
        },
      }
    );
    var Ud,
      Rc,
      _2,
      z_,
      Vd = Mt(ot.process) == "process",
      eL = rp,
      tL = Pr,
      nL = TypeError,
      y2 = function (e) {
        if (eL(e)) return e;
        throw nL(tL(e) + " is not a constructor");
      },
      b2 = Wn,
      rL = y2,
      iL = cn,
      aL = In("species"),
      gp = function (e, n) {
        var a,
          c = b2(e).constructor;
        return c === void 0 || iL((a = b2(c)[aL])) ? n : rL(a);
      },
      S2 = /(?:ipad|iphone|ipod).*applewebkit/i.test(zn),
      pi = ot,
      oL = Xs,
      sL = ao,
      w2 = Ft,
      uL = Jn,
      cL = st,
      k2 = md,
      lL = yc,
      T2 = kr,
      dL = np,
      hL = S2,
      fL = Vd,
      H_ = pi.setImmediate,
      W_ = pi.clearImmediate,
      pL = pi.process,
      G_ = pi.Dispatch,
      vL = pi.Function,
      E2 = pi.MessageChannel,
      mL = pi.String,
      q_ = 0,
      Fd = {},
      gL = "onreadystatechange";
    try {
      Ud = pi.location;
    } catch (u) {}
    var K_ = function (e) {
        if (uL(Fd, e)) {
          var n = Fd[e];
          delete Fd[e], n();
        }
      },
      J_ = function (e) {
        return function () {
          K_(e);
        };
      },
      I2 = function (e) {
        K_(e.data);
      },
      R2 = function (e) {
        pi.postMessage(mL(e), Ud.protocol + "//" + Ud.host);
      };
    (H_ && W_) ||
      ((H_ = function (e) {
        dL(arguments.length, 1);
        var n = w2(e) ? e : vL(e),
          a = lL(arguments, 1);
        return (
          (Fd[++q_] = function () {
            oL(n, void 0, a);
          }),
          Rc(q_),
          q_
        );
      }),
      (W_ = function (e) {
        delete Fd[e];
      }),
      fL
        ? (Rc = function (e) {
            pL.nextTick(J_(e));
          })
        : G_ && G_.now
        ? (Rc = function (e) {
            G_.now(J_(e));
          })
        : E2 && !hL
        ? ((z_ = (_2 = new E2()).port2),
          (_2.port1.onmessage = I2),
          (Rc = sL(z_.postMessage, z_)))
        : pi.addEventListener &&
          w2(pi.postMessage) &&
          !pi.importScripts &&
          Ud &&
          Ud.protocol !== "file:" &&
          !cL(R2)
        ? ((Rc = R2), pi.addEventListener("message", I2, !1))
        : (Rc =
            gL in T2("script")
              ? function (u) {
                  k2.appendChild(T2("script")).onreadystatechange =
                    function () {
                      k2.removeChild(this), K_(u);
                    };
                }
              : function (u) {
                  setTimeout(J_(u), 0);
                }));
    var jd,
      ru,
      Bd,
      Cc,
      $_,
      Y_,
      Z_,
      C2,
      A2 = { set: H_, clear: W_ },
      _L = ot,
      yL = /ipad|iphone|ipod/i.test(zn) && _L.Pebble !== void 0,
      bL = /web0s(?!.*chrome)/i.test(zn),
      iu = ot,
      x2 = ao,
      SL = zt.f,
      Q_ = A2.set,
      wL = S2,
      kL = yL,
      TL = bL,
      X_ = Vd,
      O2 = iu.MutationObserver || iu.WebKitMutationObserver,
      P2 = iu.document,
      D2 = iu.process,
      _p = iu.Promise,
      N2 = SL(iu, "queueMicrotask"),
      L2 = N2 && N2.value;
    L2 ||
      ((jd = function () {
        var e, n;
        for (X_ && (e = D2.domain) && e.exit(); ru; ) {
          (n = ru.fn), (ru = ru.next);
          try {
            n();
          } catch (a) {
            throw (ru ? Cc() : (Bd = void 0), a);
          }
        }
        (Bd = void 0), e && e.enter();
      }),
      wL || X_ || TL || !O2 || !P2
        ? !kL && _p && _p.resolve
          ? (((Z_ = _p.resolve(void 0)).constructor = _p),
            (C2 = x2(Z_.then, Z_)),
            (Cc = function () {
              C2(jd);
            }))
          : X_
          ? (Cc = function () {
              D2.nextTick(jd);
            })
          : ((Q_ = x2(Q_, iu)),
            (Cc = function () {
              Q_(jd);
            }))
        : (($_ = !0),
          (Y_ = P2.createTextNode("")),
          new O2(jd).observe(Y_, { characterData: !0 }),
          (Cc = function () {
            Y_.data = $_ = !$_;
          })));
    var EL =
        L2 ||
        function (u) {
          var e = { fn: u, next: void 0 };
          Bd && (Bd.next = e), ru || ((ru = e), Cc()), (Bd = e);
        },
      IL = ot,
      e0 = function (e) {
        try {
          return { error: !1, value: e() };
        } catch (n) {
          return { error: !0, value: n };
        }
      },
      M2 = function () {
        (this.head = null), (this.tail = null);
      };
    M2.prototype = {
      add: function (e) {
        var n = { item: e, next: null };
        this.head ? (this.tail.next = n) : (this.head = n), (this.tail = n);
      },
      get: function () {
        var e = this.head;
        if (e)
          return (
            (this.head = e.next), this.tail === e && (this.tail = null), e.item
          );
      },
    };
    var RL = M2,
      zd = ot.Promise,
      U2 =
        (typeof Deno == "undefined" ? "undefined" : vt(Deno)) == "object" &&
        Deno &&
        vt(Deno.version) == "object",
      CL =
        !U2 &&
        !Vd &&
        (typeof window == "undefined" ? "undefined" : vt(window)) == "object" &&
        (typeof document == "undefined" ? "undefined" : vt(document)) ==
          "object",
      AL = ot,
      Hd = zd,
      xL = Ft,
      OL = Uo,
      PL = Ju,
      DL = In,
      NL = CL,
      LL = U2,
      t0 = da;
    Hd && Hd.prototype;
    var ML = DL("species"),
      V2 = !1,
      F2 = xL(AL.PromiseRejectionEvent),
      UL = OL("Promise", function () {
        var u = PL(Hd),
          e = u !== String(Hd);
        if (!e && t0 === 66) return !0;
        if (!t0 || t0 < 51 || !/native code/.test(u)) {
          var n = new Hd(function (c) {
              c(1);
            }),
            a = function (s) {
              s(
                function () {},
                function () {}
              );
            };
          if (
            (((n.constructor = {})[ML] = a),
            !(V2 = n.then(function () {}) instanceof a))
          )
            return !0;
        }
        return !e && (NL || LL) && !F2;
      }),
      au = { CONSTRUCTOR: UL, REJECTION_EVENT: F2, SUBCLASSING: V2 },
      Ac = {},
      j2 = Dr,
      VL = TypeError,
      FL = function (e) {
        var n, a;
        (this.promise = new e(function (c, s) {
          if (n !== void 0 || a !== void 0) throw VL("Bad Promise constructor");
          (n = c), (a = s);
        })),
          (this.resolve = j2(n)),
          (this.reject = j2(a));
      };
    Ac.f = function (u) {
      return new FL(u);
    };
    var n0,
      B2,
      z2,
      jL = Ut,
      yp = Vd,
      qo = ot,
      xc = Re,
      H2 = fr,
      W2 = Z,
      BL = En,
      zL = Cd,
      HL = Dr,
      bp = Ft,
      WL = nn,
      GL = zo,
      qL = gp,
      G2 = A2.set,
      r0 = EL,
      KL = function (e, n) {
        var a = IL.console;
        a && a.error && (arguments.length == 1 ? a.error(e) : a.error(e, n));
      },
      JL = e0,
      $L = RL,
      q2 = On,
      Sp = zd,
      K2 = Ac,
      wp = "Promise",
      J2 = au.CONSTRUCTOR,
      YL = au.REJECTION_EVENT,
      ZL = au.SUBCLASSING,
      i0 = q2.getterFor(wp),
      QL = q2.set,
      Oc = Sp && Sp.prototype,
      Pc = Sp,
      kp = Oc,
      $2 = qo.TypeError,
      a0 = qo.document,
      o0 = qo.process,
      s0 = K2.f,
      XL = s0,
      eM = !!(a0 && a0.createEvent && qo.dispatchEvent),
      Y2 = "unhandledrejection",
      Z2 = function (e) {
        var n;
        return !(!WL(e) || !bp((n = e.then))) && n;
      },
      Q2 = function (e, n) {
        var a,
          c,
          s,
          l = n.value,
          h = n.state == 1,
          v = h ? e.ok : e.fail,
          g = e.resolve,
          _ = e.reject,
          b = e.domain;
        try {
          v
            ? (h || (n.rejection === 2 && nM(n), (n.rejection = 1)),
              v === !0
                ? (a = l)
                : (b && b.enter(), (a = v(l)), b && (b.exit(), (s = !0))),
              a === e.promise
                ? _($2("Promise-chain cycle"))
                : (c = Z2(a))
                ? xc(c, a, g, _)
                : g(a))
            : _(l);
        } catch (C) {
          b && !s && b.exit(), _(C);
        }
      },
      X2 = function (e, n) {
        e.notified ||
          ((e.notified = !0),
          r0(function () {
            for (var a, c = e.reactions; (a = c.get()); ) Q2(a, e);
            (e.notified = !1), n && !e.rejection && tM(e);
          }));
      },
      eT = function (e, n, a) {
        var c, s;
        eM
          ? (((c = a0.createEvent("Event")).promise = n),
            (c.reason = a),
            c.initEvent(e, !1, !0),
            qo.dispatchEvent(c))
          : (c = { promise: n, reason: a }),
          !YL && (s = qo["on" + e])
            ? s(c)
            : e === Y2 && KL("Unhandled promise rejection", a);
      },
      tM = function (e) {
        xc(G2, qo, function () {
          var n,
            a = e.facade,
            c = e.value;
          if (
            tT(e) &&
            ((n = JL(function () {
              yp ? o0.emit("unhandledRejection", c, a) : eT(Y2, a, c);
            })),
            (e.rejection = yp || tT(e) ? 2 : 1),
            n.error)
          )
            throw n.value;
        });
      },
      tT = function (e) {
        return e.rejection !== 1 && !e.parent;
      },
      nM = function (e) {
        xc(G2, qo, function () {
          var n = e.facade;
          yp
            ? o0.emit("rejectionHandled", n)
            : eT("rejectionhandled", n, e.value);
        });
      },
      Dc = function (e, n, a) {
        return function (c) {
          e(n, c, a);
        };
      },
      Nc = function (e, n, a) {
        e.done ||
          ((e.done = !0),
          a && (e = a),
          (e.value = n),
          (e.state = 2),
          X2(e, !0));
      },
      u0 = function (e, n, a) {
        if (!e.done) {
          (e.done = !0), a && (e = a);
          try {
            if (e.facade === n) throw $2("Promise can't be resolved itself");
            var c = Z2(n);
            c
              ? r0(function () {
                  var s = { done: !1 };
                  try {
                    xc(c, n, Dc(u0, s, e), Dc(Nc, s, e));
                  } catch (l) {
                    Nc(s, l, e);
                  }
                })
              : ((e.value = n), (e.state = 1), X2(e, !1));
          } catch (s) {
            Nc({ done: !1 }, s, e);
          }
        }
      };
    if (
      J2 &&
      ((kp = (Pc = function (e) {
        GL(this, kp), HL(e), xc(n0, this);
        var n = i0(this);
        try {
          e(Dc(u0, n), Dc(Nc, n));
        } catch (a) {
          Nc(n, a);
        }
      }).prototype),
      ((n0 = function (e) {
        QL(this, {
          type: wp,
          done: !1,
          notified: !1,
          parent: !1,
          reactions: new $L(),
          rejection: !1,
          state: 0,
          value: void 0,
        });
      }).prototype = H2(kp, "then", function (u, e) {
        var n = i0(this),
          a = s0(qL(this, Pc));
        return (
          (n.parent = !0),
          (a.ok = !bp(u) || u),
          (a.fail = bp(e) && e),
          (a.domain = yp ? o0.domain : void 0),
          n.state == 0
            ? n.reactions.add(a)
            : r0(function () {
                Q2(a, n);
              }),
          a.promise
        );
      })),
      (B2 = function () {
        var e = new n0(),
          n = i0(e);
        (this.promise = e),
          (this.resolve = Dc(u0, n)),
          (this.reject = Dc(Nc, n));
      }),
      (K2.f = s0 =
        function (e) {
          return e === Pc || e === void 0 ? new B2(e) : XL(e);
        }),
      bp(Sp) && Oc !== Object.prototype)
    ) {
      (z2 = Oc.then),
        ZL ||
          H2(
            Oc,
            "then",
            function (u, e) {
              var n = this;
              return new Pc(function (a, c) {
                xc(z2, n, a, c);
              }).then(u, e);
            },
            { unsafe: !0 }
          );
      try {
        delete Oc.constructor;
      } catch (u) {}
      W2 && W2(Oc, kp);
    }
    jL({ global: !0, constructor: !0, wrap: !0, forced: J2 }, { Promise: Pc }),
      BL(Pc, wp, !1),
      zL(wp);
    var rM = zd,
      nT =
        au.CONSTRUCTOR ||
        !ep(function (u) {
          rM.all(u).then(void 0, function () {});
        }),
      iM = Re,
      aM = Dr,
      oM = Ac,
      sM = e0,
      uM = Id;
    Ut(
      { target: "Promise", stat: !0, forced: nT },
      {
        all: function (e) {
          var n = this,
            a = oM.f(n),
            c = a.resolve,
            s = a.reject,
            l = sM(function () {
              var h = aM(n.resolve),
                v = [],
                g = 0,
                _ = 1;
              uM(e, function (b) {
                var C = g++,
                  N = !1;
                _++,
                  iM(h, n, b).then(function (z) {
                    N || ((N = !0), (v[C] = z), --_ || c(v));
                  }, s);
              }),
                --_ || c(v);
            });
          return l.error && s(l.value), a.promise;
        },
      }
    );
    var cM = Ut,
      lM = au.CONSTRUCTOR,
      c0 = zd,
      dM = Yn,
      hM = Ft,
      fM = fr,
      rT = c0 && c0.prototype;
    if (
      (cM(
        { target: "Promise", proto: !0, forced: lM, real: !0 },
        {
          catch: function (e) {
            return this.then(void 0, e);
          },
        }
      ),
      hM(c0))
    ) {
      var iT = dM("Promise").prototype.catch;
      rT.catch !== iT && fM(rT, "catch", iT, { unsafe: !0 });
    }
    var pM = Re,
      vM = Dr,
      mM = Ac,
      gM = e0,
      _M = Id;
    Ut(
      { target: "Promise", stat: !0, forced: nT },
      {
        race: function (e) {
          var n = this,
            a = mM.f(n),
            c = a.reject,
            s = gM(function () {
              var l = vM(n.resolve);
              _M(e, function (h) {
                pM(l, n, h).then(a.resolve, c);
              });
            });
          return s.error && c(s.value), a.promise;
        },
      }
    );
    var yM = Re,
      bM = Ac;
    Ut(
      { target: "Promise", stat: !0, forced: au.CONSTRUCTOR },
      {
        reject: function (e) {
          var n = bM.f(this);
          return yM(n.reject, void 0, e), n.promise;
        },
      }
    );
    var SM = Wn,
      wM = nn,
      kM = Ac,
      aT = function (e, n) {
        if ((SM(e), wM(n) && n.constructor === e)) return n;
        var a = kM.f(e);
        return (0, a.resolve)(n), a.promise;
      },
      TM = Ut,
      EM = au.CONSTRUCTOR,
      IM = aT;
    Yn("Promise"),
      TM(
        { target: "Promise", stat: !0, forced: EM },
        {
          resolve: function (e) {
            return IM(this, e);
          },
        }
      );
    var RM = mr,
      oT = Ws;
    Ut(
      {
        target: "Object",
        stat: !0,
        forced: st(function () {
          oT(1);
        }),
      },
      {
        keys: function (e) {
          return oT(RM(e));
        },
      }
    );
    var sT = "canvas",
      Ct = "audio",
      wt = "video",
      l0 = "screen",
      oo = "small",
      Tp = "big",
      Vn = "auxiliary",
      Ti = "aux",
      Ep = "smallVideo",
      uT = "user",
      cT = "environment",
      Ar = "mute",
      Ca = "unmute",
      sr = "ended",
      Ko = "playing",
      Jo = "pause",
      Lc = "error",
      d0 = "loadeddata",
      Wd = "audioinput",
      Ip = "videoinput",
      lT = "detail",
      CM = "text",
      hn = "main",
      qi = "backup",
      AM = "banned",
      xM = "kick",
      OM = "user_time_out",
      PM = "room_disband",
      dT = "sei-message",
      Mc = "PLAYING",
      Aa = "PAUSED",
      $o = "STOPPED",
      Uc = "inactive",
      Yo = "sendonly",
      h0 = "recvonly",
      hT = "add",
      fT = "remove",
      DM = "replace",
      f0 = "track",
      NM = "wss://trtc.rtc.qq.com",
      LM = "wss://webrtc.qq.com",
      Rp = "qcloud",
      MM = "trtc",
      UM = "webrtc",
      Gd = "",
      pT = "jssdk_log",
      VM = "jssdk_event",
      FM = "jssdk_new_endreport",
      p0 = function (e) {
        return (Gd = e);
      },
      jM = 1,
      BM = 2,
      Cp = "live",
      Vc = 20,
      v0 = 21,
      xa = "anchor",
      ou = "audience",
      Oa = "5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV",
      qd = "224d130c-7b5c-415b-aaa2-79c2eb5a6df2",
      zM = 2,
      Bn = hn,
      ir = Vn,
      Ap = "unknown",
      Vr = "DISCONNECTED",
      vT = "CONNECTING",
      m0 = "RECONNECTING",
      Fr = "CONNECTED",
      HM = "new",
      xp = "connecting",
      mT = "failed",
      g0 = "closed",
      WM = "disconnected",
      gT = "connected",
      GM = "completed",
      _0 = 30,
      _T = "join",
      qM = "delta-join",
      yT = "rejoin",
      KM = "leave",
      JM = "delta-leave",
      bT = "publish",
      $M = "delta-publish",
      ST = "unpublish",
      wT = "subscribe",
      kT = "unsubscribe",
      TT = "uplink-connection",
      ET = "uplink-reconnection",
      IT = "downlink-connection",
      RT = "downlink-reconnection",
      Op = "setLocalDescription",
      CT = "setRemoteDescription",
      AT = "iceConnectionState",
      Kd = "stream-initialize",
      y0 = "websocketConnectionState",
      xT = "websocketReconnectionState",
      OT = "update-stream",
      PT = "recover-subscription",
      DT = "start-mix-transcode",
      NT = "stop-mix-transcode",
      LT = "player-error",
      MT = "schedule",
      b0 = "unsubscribe",
      S0 = "subscribe_change",
      Jd = "unified-plan",
      w0 = "plan-b",
      k0 = { MANUAL: "manual", PRESET_LAYOUT: "preset-layout" },
      UT = { REMOTE: "$PLACE_HOLDER_REMOTE$" },
      VT = {
        IT_AUDIO_VIDEO: 0,
        IT_PICTURE: 2,
        IT_CANVAS: 3,
        IT_PURE_AUDIO: 4,
        IT_PURE_VIDEO: 5,
      },
      Dn = "string",
      Xn = "number",
      yr = "boolean",
      FT = "array",
      vi = "object",
      jr = { ADD: hT, REMOVE: fT },
      T0 = { unknown: 0, wifi: 1, "4g": 2, "3g": 3, "2g": 4, wired: 5 },
      jT = -1,
      $d = 0,
      YM = 1,
      BT = Tp,
      zT = oo,
      HT = 6048e5,
      ZM = "schedule.cloud-rtc.com",
      QM = "schedule.rtc.qcloud.com",
      XM = "schedule.rtc.tencentcloud.com",
      e7 = "schedule-ecdn.rtc.tencentcloud.com",
      E0 = "",
      WT = function (e) {
        return (E0 = e);
      },
      Yd = "TRTC",
      Br = "Client",
      Zo = "LocalStream",
      I0 = "RemoteStream",
      t7 = "Stream",
      R0 = "web.sdk.qcloud.com",
      GT = "web.sdk.tencent.cn",
      qT = "web.sdk.cloud.tencent.cn",
      KT = "https://console.cloud.tencent.com/trtc",
      Fc = "https://".concat(R0, "/trtc/webrtc/doc"),
      C0 = "".concat(Fc, "/zh-cn/"),
      A0 = "trtc_error_assistance",
      Pp = "default",
      JT = "communications",
      Ei = { TRACE: 0, DEBUG: 1, INFO: 2, WARN: 3, ERROR: 4, NONE: 5 },
      n7 = 1,
      $T = 2,
      r7 = 1,
      YT = 2,
      su = Object.keys(Ei),
      i7 = ["normal leave", "timeout leave", "kick", "role change"],
      Dp = 2e3,
      jc = "ric",
      Np = "raf",
      a7 = "interval",
      ZT = "timeout",
      QT =
        "Resolution reset to 1080p, need to upgrade ability here https://cloud.tencent.com/document/product/647/85386",
      o7 = {
        "TRTC.checkSystemRequirements": 40001,
        "TRTC.isScreenShareSupported": 40002,
        "TRTC.isSmallStreamSupported": 40003,
        "TRTC.createClient.rtc": 40004,
        "TRTC.createClient.live": 40005,
        "TRTC.createClient.intRoomId": 40006,
        "TRTC.createClient.stringRoomId": 40007,
        "TRTC.createClient.autoSubscribe": 40008,
        "TRTC.createClient.manualSubscribe": 40009,
        "TRTC.enableUploadLog": 40010,
        "TRTC.disableUploadLog": 40011,
        "Client.publish": 40012,
        "Client.publish.isAuxiliary": 40013,
        "Client.switchRole": 40014,
        "Client.startPublishCDNStream": 40015,
        "Client.stopPublishCDNStream": 40016,
        "Client.startMixTranscode": 40017,
        "Client.stopMixTranscode": 40018,
        "Client.enableAudioVolumeEvaluation": 40019,
        "Client.enableSmallStream": 40020,
        "Client.disableSmallStream": 40021,
        "Client.setSmallStreamProfile": 40022,
        "Client.setRemoteVideoStreamType": 40023,
        "Client.sendSEIMessage": 40024,
        "Client.setProxyServer": 40025,
        "Client.setTurnServer": 40026,
        "LocalStream.setAudioProfile.standard": 40027,
        "LocalStream.setAudioProfile.high": 40028,
        "LocalStream.setAudioProfile.standard-stereo": 40029,
        "LocalStream.setAudioProfile.high-stereo": 40030,
        "LocalStream.setVideoProfile.120p": 40031,
        "LocalStream.setVideoProfile.120p_2": 40032,
        "LocalStream.setVideoProfile.180p": 40033,
        "LocalStream.setVideoProfile.180p_2": 40034,
        "LocalStream.setVideoProfile.240p": 40035,
        "LocalStream.setVideoProfile.240p_2": 40036,
        "LocalStream.setVideoProfile.360p": 40037,
        "LocalStream.setVideoProfile.360p_2": 40038,
        "LocalStream.setVideoProfile.480p": 40039,
        "LocalStream.setVideoProfile.480p_2": 40040,
        "LocalStream.setVideoProfile.720p": 40041,
        "LocalStream.setVideoProfile.1080p": 40042,
        "LocalStream.setVideoProfile.1440p": 40043,
        "LocalStream.setVideoProfile.4K": 40044,
        "LocalStream.setScreenProfile.480p": 40045,
        "LocalStream.setScreenProfile.480p_2": 40046,
        "LocalStream.setScreenProfile.720p": 40047,
        "LocalStream.setScreenProfile.720p_2": 40048,
        "LocalStream.setScreenProfile.1080p": 40049,
        "LocalStream.setScreenProfile.1080p_2": 40050,
        "LocalStream.setVideoContentHint.motion": 40051,
        "LocalStream.setVideoContentHint.detail": 40052,
        "LocalStream.setVideoContentHint.text": 40053,
        "LocalStream.setAudioCaptureVolume": 40054,
        "LocalStream.getVideoFrame": 40055,
        "RemoteStream.setAudioOutput": 40056,
        "RemoteStream.getVideoFrame": 40057,
        AI_DENOISER: 1700,
        SPATIAL_AUDIO: 1701,
        "2K_4K": 1704,
      },
      x0 = [
        "width",
        "height",
        "frameRate",
        "facingMode",
        "sampleRate",
        "sampleSize",
        "channelCount",
        "deviceId",
      ],
      s7 = Dt,
      XT = _r,
      u7 = /"/g,
      c7 = He("".replace),
      eE = function (e, n, a, c) {
        var s = XT(s7(e)),
          l = "<" + n;
        return (
          a !== "" && (l += " " + a + '="' + c7(XT(c), u7, "&quot;") + '"'),
          l + ">" + s + "</" + n + ">"
        );
      },
      l7 = st,
      tE = function (e) {
        return l7(function () {
          var n = ""[e]('"');
          return n !== n.toLowerCase() || n.split('"').length > 3;
        });
      },
      d7 = eE;
    Ut(
      { target: "String", proto: !0, forced: tE("link") },
      {
        link: function (e) {
          return d7(this, "a", "href", e);
        },
      }
    ),
      Ut({ target: "Array", stat: !0 }, { isArray: bc });
    var h7 = "AVOID_REPEATED_CALL",
      f7 = "INVALID_PARAMETER_REQUIRED",
      nE = "INVALID_PARAMETER_TYPE",
      p7 = "INVALID_PARAMETER_EMPTY",
      rE = "INVALID_PARAMETER_INSTANCE",
      v7 = "INVALID_PARAMETER_RANGE",
      m7 = "API_CALL_TIMEOUT",
      g7 = "SIGNAL_CHANNEL_RECONNECTION_FAILED",
      _7 = "SIGNAL_CHANNEL_SETUP_FAILED",
      y7 = "ERROR_MESSAGE",
      b7 = "EXCHANGE_SDP_TIMEOUT",
      S7 = "DOWNLINK_RECONNECTION_FAILED",
      w7 = "EXCHANGE_SDP_FAILED",
      k7 = "UPLINK_RECONNECTION_FAILED",
      T7 = "INVALID_PURE_AUDIO",
      E7 = "INVALID_STREAMID",
      I7 = "INVALID_USER_DEFINE_RECORDID",
      R7 = "INVALID_USER_DEFINE_PUSH_ARGS",
      C7 = "INVALID_PROXY",
      A7 = "INVALID_JOIN",
      x7 = "INVALID_ROOMID_STRING",
      O7 = "INVALID_ROOMID_INTEGER",
      P7 = "JOIN_ROOM_TIMEOUT",
      iE = "JOIN_ROOM_FAILED",
      D7 = "REJOIN_ROOM_FAILED",
      N7 = "INVALID_DESTROY",
      L7 = "INVALID_PUBLISH",
      M7 = "INVALID_UNPUBLISH",
      U7 = "INVALID_AUDIENCE",
      V7 = "INVALID_INITIALIZE",
      F7 = "INVALID_DUPLICATE_PUBLISHING",
      O0 = "INVALID_REMOTE_STREAM",
      j7 = "SUBSCRIBE_FAILED",
      B7 = "INVALID_ROLE",
      z7 = "INVALID_OPERATION_SWITCH_ROLE",
      H7 = "SWITCH_ROLE_TIMEOUT",
      W7 = "SWITCH_ROLE_FAILED",
      G7 = "CLIENT_BANNED",
      aE = "INVALID_OPERATION_START_PUBLISH_CDN",
      q7 = "INVALID_OPERATION_STOP_PUBLISH_CDN",
      K7 = "INVALID_STREAM_ID",
      oE = "START_PUBLISH_CDN_FAILED",
      sE = "STOP_PUBLISH_CDN_FAILED",
      J7 = "START_MIX_TRANSCODE",
      $7 = "STOP_MIX_TRANSCODE",
      Y7 = "INVALID_AUDIO_VOLUME",
      Z7 = "ENABLE_SMALL_STREAM_PUBLISHED",
      Q7 = "DISABLE_SMALL_STREAM_PUBLISHED",
      X7 = "NOT_SUPPORTED_SMALL_STREAM",
      eU = "INVALID_SMALL_STREAM_PROFILE",
      tU = "INVALID_PARAMETER_REMOTE_STREAM",
      nU = "INVALID_SWITCH_DEVICE",
      rU = "INVALID_SWITCH_DEVICE_PUBLISHING",
      uE = "INVALID_REPLACE_TRACK",
      iU = "INVALID_INITIALIZE_LOCAL_STREAM",
      aU = "INVALID_ADD_TRACK_REPETITIVE",
      oU = "INVALID_ADD_TRACK_REMOVING",
      sU = "INVALID_ADD_TRACK_PUBLISHING",
      cE = "INVALID_STREAM_INITIALIZED",
      uU = "INVALID_ADD_TRACK_NUMBER",
      cU = "INVALID_REMOVE_AUDIO_TRACK",
      lU = "INVALID_REMOVE_AUDIO_ADDING",
      dU = "INVALID_REMOVE_AUDIO_ON",
      hU = "INVALID_REMOVE_TRACK_PUBLISHING",
      fU = "INVALID_REMOVE_TRACK_NOT_PUBLISHING",
      pU = "INVALID_REMOVE_TRACK_NUMBER",
      vU = "INVALID_REPLACE_TRACK_NO_TRACK",
      mU = "REPEAT_JOIN",
      P0 = "CLIENT_DESTROYED",
      gU = "START_MIX_TRANSCODE_FAILED",
      _U = "STOP_MIX_TRANSCODE_FAILED",
      yU = "MIX_TRANSCODE_NOT_STARTED",
      bU = "CANNOT_LESS_THAN_ZERO",
      SU = "MIX_PARAMS_VIDEO_FRAMERATE",
      wU = "MIX_PARAMS_VIDEO_GOP",
      kU = "MIX_PARAMS_AUDIO_BITRATE",
      TU = "MIX_PARAMS_USER_Z_ORDER",
      EU = "MIX_PARAMS_NOT_SELF",
      IU = "MIX_PARAMS_USER_STREAM",
      RU = "INVALID_ELEMENT_ID",
      CU = "INVALID_ELEMENT_ID_TYPE",
      D0 = "PLAY_FAILED",
      AU = "INVALID_CREATE_STREAM_SOURCE",
      xU = "INVALID_CREATE_STREAM_SCREEN",
      OU = "INVALID_CREATE_STREAM_AUDIO",
      PU = "INVALID_CREATE_STREAM_SCREEN_AUDIO",
      lE = "NOT_SUPPORTED_HTTP",
      dE = "NOT_SUPPORTED_WEBRTC",
      DU = "NOT_SUPPORTED_PROFILE",
      hE = "NOT_SUPPORTED_H264ENCODE",
      fE = "NOT_SUPPORTED_H264DECODE",
      N0 = "NOT_SUPPORTED_TRACK",
      NU = "NOT_SUPPORTED_SWITCH_DEVICE",
      LU = "NOT_SUPPORTED_CAPTURE",
      MU = "NOT_SUPPORTED_AUX",
      UU = "MICROPHONE_NOT_FOUND",
      VU = "CAMERA_NOT_FOUND",
      pE = "SIGNAL_RESPONSE_FAILED",
      FU = "CATCH_HANDLER_ERROR",
      jU = "API_NOT_EXIST",
      BU = "CONNECTION_CLOSED",
      zU = "SUBSCRIBE_ALL_FALSE",
      vE = "SEI_NOT_SUPPORT",
      HU = "SEI_DISABLED",
      WU = "SEI_EMPTY",
      GU = "SEI_OVERSIZE",
      qU = "SEI_BEFORE_PUBLISH",
      KU = "SEI_NOT_VIDEO",
      JU = "CALL_FREQUENCY_LIMIT",
      $U = "CONNECTION_ABORTED",
      L0 = "API_CALL_ABORTED",
      YU = "DUPLICATE_AUX",
      Qo = {
        AVOID_REPEATED_CALL: function (e) {
          return "previous ".concat(
            e.name,
            "() is ongoing, please avoid repeated calls."
          );
        },
        INVALID_PARAMETER_REQUIRED: function (e) {
          var n = e.key,
            a = e.rule,
            c = e.fnName,
            s = e.value;
          return "'"
            .concat(n || a.name, "' is a required param when calling ")
            .concat(c, "(), received: ")
            .concat(s, ".");
        },
        INVALID_PARAMETER_TYPE: function (e) {
          var n = e.key,
            a = e.rule,
            c = e.fnName,
            s = e.value,
            l = "".concat(n || a.name),
            h = "";
          return (
            (h = Array.isArray(a.type) ? a.type.join("|") : a.type),
            "'"
              .concat(l, "' must be type of ")
              .concat(h, " when calling ")
              .concat(c, "(), received type: ")
              .concat(ns(s), ".")
          );
        },
        INVALID_PARAMETER_EMPTY: function (e) {
          var n = e.key,
            a = e.rule,
            c = e.fnName,
            s = e.value;
          return "'"
            .concat(n || a.name, "' cannot be '")
            .concat(s, "' when calling ")
            .concat(c, "().");
        },
        INVALID_PARAMETER_INSTANCE: function (e) {
          var n = e.key,
            a = e.rule,
            c = e.fnName,
            s = e.value,
            l = "".concat(n || a.name),
            h = "".concat(a.instanceOf.name || a.instanceOf);
          return "'"
            .concat(l, "' must be instanceof ")
            .concat(h, " when calling ")
            .concat(c, "(), received type: ")
            .concat(ns(s), ".");
        },
        INVALID_PARAMETER_RANGE: function (e) {
          var n = e.key,
            a = e.rule,
            c = e.fnName,
            s = e.value;
          return "'"
            .concat(n || a.name, "' must be one of ")
            .concat(a.values.join("|"), " when calling ")
            .concat(c, "(), received: ")
            .concat(s, ".");
        },
        API_CALL_TIMEOUT: function (e) {
          return "".concat(e.commandDesc || e.command, " timeout observed.");
        },
        SIGNAL_CHANNEL_RECONNECTION_FAILED:
          "signal channel reconnection failed, please check your network.",
        SIGNAL_CHANNEL_SETUP_FAILED: function (e) {
          return "SignalChannel setup failure: (errorCode: "
            .concat(e.errorCode, ", errorMsg: ")
            .concat(e.errorMsg, " }).");
        },
        ERROR_MESSAGE: function (e) {
          var n = "".concat(e.type, " failed");
          return (
            e.message && (n = "".concat(n, ": ").concat(e.message, ".")), n
          );
        },
        EXCHANGE_SDP_TIMEOUT: "exchange sdp timeout.",
        DOWNLINK_RECONNECTION_FAILED:
          "downlink reconnection failed, please check your network and re-join room.",
        EXCHANGE_SDP_FAILED: function (e) {
          return "exchange sdp failed ".concat(e.errMsg, ".");
        },
        UPDATE_OFFER_TIMEOUT: "update offer timeout observed.",
        UPLINK_RECONNECTION_FAILED:
          "uplink reconnection failed, please check your network and publish again.",
        INVALID_RECORDID: "recordId must be an integer number.",
        INVALID_PURE_AUDIO: "pureAudioPushMode must be 1 or 2.",
        INVALID_STREAMID:
          "streamId must be a sting literal within 64 bytes, and not be empty.",
        INVALID_USER_DEFINE_RECORDID:
          "userDefineRecordId must be a sting literal contains (a-zA-Z),(0-9), underline and hyphen, within 64 bytes, and not be empty.",
        INVALID_USER_DEFINE_PUSH_ARGS:
          "userDefinePushArgs must be a sting literal within 256 bytes, and not be empty.",
        INVALID_PROXY: 'proxy server url must start with "wss://".',
        INVALID_JOIN: "duplicate join() called.",
        INVALID_ROOMID_STRING: function (e) {
          return "'".concat(
            e,
            "' must be validate string when useStringRoomId is true."
          );
        },
        INVALID_ROOMID_INTEGER: function (e) {
          return "'".concat(
            e,
            "' must be an integer between [1, 4294967294] when useStringRoomId is false."
          );
        },
        INVALID_SIGNAL_CHANNEL: "SignalChannel is not ready yet.",
        JOIN_ROOM_TIMEOUT: "join room timeout.",
        JOIN_ROOM_FAILED: function (e) {
          var n = e.error,
            a = e.code;
          return "Failed to join room - ".concat(n, " code: ").concat(a);
        },
        REJOIN_ROOM_FAILED: function (e) {
          return "reJoin room: ".concat(
            e.roomId,
            " failed, please check your network."
          );
        },
        INVALID_DESTROY: "please call leave() before destroy().",
        INVALID_PUBLISH: "please call join() before publish().",
        INVALID_UNPUBLISH: "stream has not been published yet.",
        INVALID_AUDIENCE: "no permission to publish() under live/"
          .concat(ou, ', please call switchRole("')
          .concat(xa, '") firstly before publish().'),
        INVALID_INITIALIZE:
          "cannot publish stream because stream is not initialized, is switching device, or has been closed.",
        INVALID_DUPLICATE_PUBLISHING: function (e) {
          return "duplicate "
            .concat(e, " stream publishing, please unpublish your prev ")
            .concat(e, " stream and then re-publish.");
        },
        INVALID_SUBSCRIBE_UNDEFINED: "stream is undefined or null.",
        INVALID_SUBSCRIBE_LOCAL: "stream cannot be LocalStream.",
        INVALID_REMOTE_STREAM:
          "remoteStream does not exist because it has been unpublished by remote peer.",
        SUBSCRIBE_FAILED: function (e) {
          var n = e.message,
            a = e.stream;
          return "failed to subscribe "
            .concat(a.getUserId(), " ")
            .concat(a.getType(), " stream, reason: ")
            .concat(n, ".");
        },
        INVALID_ROLE: "switchRole can only be called in live mode.",
        INVALID_PARAMETER_SWITCH_ROLE: "role could only be set to a value as "
          .concat(xa, " or ")
          .concat(ou, "."),
        INVALID_OPERATION_SWITCH_ROLE:
          "please call join() before switchRole().",
        SWITCH_ROLE_TIMEOUT: "switchRole timeout.",
        SWITCH_ROLE_FAILED: function (e) {
          return "switchRole failed, errCode: "
            .concat(e.code, " errMsg: ")
            .concat(e.message, ".");
        },
        CLIENT_BANNED: function (e) {
          return "client was banned because of " + e.message + ".";
        },
        INVALID_OPERATION_START_PUBLISH_CDN:
          "please call startPublishCDNStream() before client join the room or after client join the room and successfully publish the local stream.",
        INVALID_OPERATION_STOP_PUBLISH_CDN:
          "please call startPublishCDNStream() before stopPublishCDNStream().",
        START_PUBLISH_CDN_FAILED: function (e) {
          return "startPublishCDNStream failed, errMsg: ".concat(
            e.message,
            "."
          );
        },
        STOP_PUBLISH_CDN_FAILED: function (e) {
          return "stopPublishCDNStream failed, errMsg: ".concat(e.message, ".");
        },
        INVALID_STREAM_ID: function (e) {
          return "'".concat(
            e,
            "' can only consist of uppercase and lowercase english letters (a-zA-Z), numbers (0-9), hyphens and underscores."
          );
        },
        START_MIX_TRANSCODE: "please call startMixTranscode() after join().",
        STOP_MIX_TRANSCODE:
          "please call stopMixTranscode() after startMixTranscode().",
        INVALID_AUDIO_VOLUME: "interval must be a number.",
        ENABLE_SMALL_STREAM_PUBLISHED:
          "Cannot enable small stream after localStream published.",
        DISABLE_SMALL_STREAM_PUBLISHED:
          "Cannot disable small stream after localStream published.",
        NOT_SUPPORTED_SMALL_STREAM:
          "your browser does not support opening small stream.",
        INVALID_SMALL_STREAM_PROFILE: "small stream profile is invalid.",
        INVALID_PARAMETER_REMOTE_STREAM: "remoteStream is invalid.",
        INVALID_OPERATION_CHANGE_SMALL:
          "cannot switch to the small stream without subscribing to the video of remoteStream.",
        REMOTE_NOT_PUBLISH_SMALL_STREAM:
          "remote peer does not publish small stream.",
        INVALID_SWITCH_DEVICE: "cannot switch device on current stream.",
        INVALID_SWITCH_DEVICE_PUBLISHING:
          "cannot switch device when publishing localStream.",
        INVALID_REPLACE_TRACK:
          "cannot replace track when publishing localStream.",
        INVALID_INITIALIZE_LOCAL_STREAM:
          "local stream has not initialized yet.",
        INVALID_ADD_TRACK_REPETITIVE:
          "previous addTrack is ongoing, please avoid repetitive execution.",
        INVALID_ADD_TRACK_REMOVING:
          "cannot add track when a track is removing.",
        INVALID_ADD_TRACK_PUBLISHING:
          "cannot add track when publishing localStream.",
        INVALID_STREAM_INITIALIZED:
          "your local stream haven't been initialized yet.",
        INVALID_ADD_TRACK_NUMBER:
          "a Stream has at most one audio track and one video track.",
        INVALID_REMOVE_AUDIO_TRACK:
          "remove audio track is not supported on your browser.",
        INVALID_REMOVE_AUDIO_ADDING:
          "cannot remove track when a track is adding.",
        INVALID_REMOVE_AUDIO_ON:
          "previous removeTrack is ongoing, please avoid repetitive execution.",
        INVALID_REMOVE_TRACK_PUBLISHING:
          "cannot remove track when publishing localStream.",
        INVALID_REMOVE_TRACK_NOT_PUBLISHING:
          "the track to be removed is not being publishing.",
        INVALID_REMOVE_TRACK_NUMBER:
          "remove the only video track is not supported, please use replaceTrack or muteVideo.",
        INVALID_REPLACE_TRACK_NO_TRACK: function (e) {
          return "cannot replace "
            .concat(e.kind, " track because stream has not ")
            .concat(e.kind, " track");
        },
        START_MIX_TRANSCODE_FAILED: function (e) {
          return "startMixTranscode failed, errMsg: ".concat(e.message, ".");
        },
        STOP_MIX_TRANSCODE_FAILED: function (e) {
          return "stopMixTranscode failed, errMsg: ".concat(e.message, ".");
        },
        MIX_TRANSCODE_NOT_STARTED: "mixTranscode has not been started.",
        CANNOT_LESS_THAN_ZERO: function (e) {
          var n = e.key,
            a = e.rule,
            c = e.fnName;
          return (
            e.value,
            "'"
              .concat(n || a.name, "' cannot be less than 0 when calling ")
              .concat(c, "().")
          );
        },
        MIX_PARAMS_VIDEO_FRAMERATE:
          "'config.videoFramerate' should be an integer between 0 and 30, excluding 0.",
        MIX_PARAMS_VIDEO_GOP:
          "'config.videoGOP' should be an integer between 1 and 8.",
        MIX_PARAMS_AUDIO_BITRATE:
          "'config.audioBitrate' should be an integer between 32 and 192.",
        MIX_PARAMS_USER_Z_ORDER: function (e) {
          return "'".concat(e, "' is required and must be between 1 and 15.");
        },
        MIX_PARAMS_NOT_SELF: "'config.mixUsers' must contain self.",
        MIX_PARAMS_USER_STREAM:
          "'config.videoWidth' and 'config.videoHeight' of output stream should be contain all mix stream.",
        INVALID_PLAY: "duplicate play() call observed, please stop() firstly.",
        INVALID_ELEMENT_ID: function (e) {
          var n = e.key,
            a = e.fnName;
          return "'"
            .concat(n, "' is not found in the document object when calling ")
            .concat(a, "().");
        },
        INVALID_ELEMENT_ID_TYPE: function (e) {
          var n = e.key,
            a = e.fnName,
            c = e.type;
          return "the element corresponding to '"
            .concat(n, "' must be instanceof HTMLDivElement when calling ")
            .concat(a, "(), received: ")
            .concat(c, ".");
        },
        PLAY_FAILED: function (e) {
          return ""
            .concat(e.media, " play failed，browser exception: ")
            .concat(e.error.toString());
        },
        INVALID_USERID: "userId cannot be all spaces.",
        INVALID_CREATE_STREAM_SOURCE:
          "LocalStream must be created by createStream() with either audio/video or audioSource/videoSource, but can not be mixed with audio/video and audioSource/videoSource.",
        INVALID_CREATE_STREAM_SCREEN: "screen/video cannot be both true.",
        INVALID_CREATE_STREAM_AUDIO: "audio/screenAudio cannot be both true.",
        INVALID_CREATE_STREAM_SCREEN_AUDIO:
          "when screen is true, screenAudio can be configured.",
        NOT_SUPPORTED_HTTP:
          "http protocol does not support the ability to capture and publish streams, please use the https protocol.",
        NOT_SUPPORTED_WEBRTC:
          "your browser or environment does not support full WebRTC capabilities.",
        NOT_SUPPORTED_PROFILE: "your browser does not support setVideoProfile.",
        NOT_SUPPORTED_MEDIA:
          "your browser or environment does not support navigator.mediaDevices.",
        NOT_SUPPORTED_H264ENCODE:
          "your device does not support H.264 encoding.",
        NOT_SUPPORTED_H264DECODE:
          "your device does not support H.264 decoding.",
        NOT_SUPPORTED_TRACK: function (e) {
          return "".concat(e, "Track is not supported on your browser.");
        },
        NOT_SUPPORTED_SWITCH_DEVICE:
          "switchDevice is not supported on your browser.",
        NOT_SUPPORTED_CAPTURE:
          "Your browser or environment does not support screen sharing, please check whether the browser version.",
        MICROPHONE_NOT_FOUND:
          "no microphone detected, please check your microphone and the configuration on TRTC.createStream.",
        CAMERA_NOT_FOUND:
          "no camera detected, please check your camera and the configuration on TRTC.createStream.",
        SIGNAL_RESPONSE_FAILED: function (e) {
          return ""
            .concat(e.signalResponse, " failed, response code is ")
            .concat(e.code, " , errMsg: ")
            .concat(e.message, ".");
        },
        CATCH_HANDLER_ERROR: function (e) {
          var n = e.name,
            a = e.event;
          return "an error was caught on "
            .concat(n, ".on('")
            .concat(a, "', handler), please check your code on 'handler'.");
        },
        API_NOT_EXIST: function (e) {
          var n = e.name;
          return "experimental api ".concat(n, " does not exist.");
        },
        REPEAT_JOIN: function (e) {
          return "[".concat(
            e,
            "] is calling client.join api or has already joined room, please avoid repeated join."
          );
        },
        CONNECTION_CLOSED:
          "remoteStream has been unsubscribed or unpublished by remote user.",
        SUBSCRIBE_ALL_FALSE:
          "cannot subscribe when both audio & video are false, use client.unsubscribe() instead",
        CLIENT_DESTROYED: function (e) {
          var n = e.funName;
          return "failed to call ".concat(
            n,
            "() because client was destroyed."
          );
        },
        SEI_NOT_SUPPORT: function (e) {
          return "not support to sendSEIMessage".concat(
            e === !1 ? " without using h264 codec" : ""
          );
        },
        SEI_DISABLED:
          "SEI is disabled, to enable SEI: TRTC.createClient({ enableSEI: true })",
        SEI_EMPTY: "buffer cannot be empty",
        SEI_OVERSIZE: function (e) {
          return "buffer size(".concat(e, ") is over 1000 Bytes");
        },
        SEI_BEFORE_PUBLISH:
          "please call sendSEIMessage() after publish() success",
        SEI_NOT_VIDEO: "cannot send sei when localStream has not video.",
        CALL_FREQUENCY_LIMIT: function (e) {
          var n = e.isSize,
            a = e.name,
            c = e.timesInSecond,
            s = e.maxSizeInSecond;
          return "api "
            .concat(a, " call ")
            .concat(n ? "size" : "times", " is over ")
            .concat(n ? s + " bytes" : c, " in a second.");
        },
        CONNECTION_ABORTED: function (e) {
          return "connection aborted due to: " + e;
        },
        API_CALL_ABORTED: function (e) {
          return e.message.includes("REMOTE_STREAM_NOT_EXIST")
            ? "Subscribe "
                .concat(e.stream.getUserId(), " ")
                .concat(
                  e.stream.getType(),
                  " stream aborted, reason: remote user "
                )
                .concat(e.stream.getUserId(), " unpublished stream.")
            : "API aborted, reason: ".concat(e.message);
        },
        DUPLICATE_AUX: "only one auxiliary stream can be published in a room.",
        NOT_SUPPORTED_AUX:
          "publish auxiliary stream is not supported on your browser.",
      },
      mE = ot,
      ZU = st,
      QU = _r,
      XU = pp.trim,
      eV = He("".charAt),
      Lp = mE.parseFloat,
      gE = mE.Symbol,
      _E = gE && gE.iterator,
      yE =
        1 /
          Lp(`	
\v\f\r                　\u2028\u2029\uFEFF-0`) !=
          -1 / 0 ||
        (_E &&
          !ZU(function () {
            Lp(Object(_E));
          }))
          ? function (u) {
              var e = XU(QU(u)),
                n = Lp(e);
              return n === 0 && eV(e, 0) == "-" ? -0 : n;
            }
          : Lp;
    Ut({ global: !0, forced: parseFloat != yE }, { parseFloat: yE });
    var Nt = (window.navigator && window.navigator.userAgent) || "",
      bE = /AppleWebKit\/([\d.]+)/i.exec(Nt);
    bE && parseFloat(bE.pop());
    var M0 = /iPad/i.test(Nt),
      SE =
        navigator.maxTouchPoints &&
        navigator.maxTouchPoints > 2 &&
        /Macintosh/.test(Nt),
      U0 = /iPhone/i.test(Nt) && !M0,
      tV = /iPod/i.test(Nt),
      Xo = U0 || M0 || tV || SE,
      Bc = /Android/i.test(Nt);
    Bc &&
      (function () {
        var u = Nt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
        if (!u) return null;
        var e = u[1] && parseFloat(u[1]),
          n = u[2] && parseFloat(u[2]);
        e && n && parseFloat(u[1] + "." + u[2]);
      })();
    var Ii = /Firefox/i.test(Nt),
      wE =
        Ii &&
        (function () {
          var u = Nt.match(/Firefox\/(\d+)/);
          return u && u[1] ? parseFloat(u[1]) : null;
        })(),
      Mp = /Edge\//i.test(Nt),
      nV =
        Mp &&
        (function () {
          var u = Nt.match(/Edge\/(\d+)/i);
          if (u && u[1]) return u[1];
        })(),
      Up = /Edg\//i.test(Nt),
      kE =
        Up &&
        (function () {
          var u = Nt.match(/Edg\/(\d+)/);
          return u && u[1] ? parseFloat(u[1]) : null;
        })(),
      V0 = /SogouMobileBrowser\//i.test(Nt),
      rV =
        V0 &&
        (function () {
          var u = Nt.match(/SogouMobileBrowser\/(\d+)/);
          return u && u[1] ? parseFloat(u[1]) : null;
        })(),
      F0 = /MetaSr\s/i.test(Nt),
      iV =
        F0 &&
        (function () {
          var u = Nt.match(/MetaSr(\s\d+(\.\d+)+)/);
          return u && u[1] ? parseFloat(u[1]) : null;
        })(),
      so = /TBS\/\d+/i.test(Nt),
      aV =
        so &&
        (function () {
          var u = Nt.match(/TBS\/(\d+)/i);
          if (u && u[1]) return u[1];
        })(),
      j0 = /XWEB\/\d+/i.test(Nt),
      oV =
        j0 &&
        (function () {
          var u = Nt.match(/XWEB\/(\d+)/i);
          if (u && u[1]) return u[1];
        })();
    /MSIE\/\d+/i.test(Nt) &&
      (function () {
        var u = /MSIE\s(\d+)\.\d/.exec(Nt);
        u && parseFloat(u[1]);
      })();
    var B0 = /(micromessenger|webbrowser)/i.test(Nt),
      sV =
        B0 &&
        (function () {
          var u = Nt.match(/MicroMessenger\/(\d+)/i);
          if (u && u[1]) return u[1];
        })(),
      z0 = !so && /MQQBrowser\/\d+/i.test(Nt) && /COVC\/\d+/i.test(Nt),
      H0 = !so && /MQQBrowser\/\d+/i.test(Nt) && !/COVC\/\d+/i.test(Nt),
      TE =
        (H0 || z0) &&
        (function () {
          var u = Nt.match(/ MQQBrowser\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      W0 = !so && / QQBrowser\/\d+/i.test(Nt),
      uV =
        W0 &&
        (function () {
          var u = Nt.match(/ QQBrowser\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      G0 = !so && /QQBrowserLite\/\d+/i.test(Nt),
      cV =
        G0 &&
        (function () {
          var u = Nt.match(/QQBrowserLite\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      q0 = !so && /MQBHD\/\d+/i.test(Nt),
      lV =
        q0 &&
        (function () {
          var u = Nt.match(/MQBHD\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      EE = /Windows/i.test(Nt),
      Zd = !Xo && /MAC OS X/i.test(Nt),
      IE = !Bc && /Linux/i.test(Nt),
      dV = /UCBrowser/i.test(Nt),
      RE,
      Vp,
      K0 = /MiuiBrowser/i.test(Nt),
      hV =
        K0 &&
        (function () {
          var u = Nt.match(/MiuiBrowser\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      J0 = /HuaweiBrowser/i.test(Nt),
      $0 = /Huawei/i.test(Nt),
      fV =
        J0 &&
        (function () {
          var u = Nt.match(/HuaweiBrowser\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      Y0 = /SamsungBrowser/i.test(Nt),
      pV =
        Y0 &&
        (function () {
          var u = Nt.match(/SamsungBrowser\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      Fp = /HeyTapBrowser/i.test(Nt),
      vV =
        Fp &&
        (function () {
          var u = Nt.match(/HeyTapBrowser\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      jp = /VivoBrowser/i.test(Nt),
      mV =
        jp &&
        (function () {
          var u = Nt.match(/VivoBrowser\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      zc = function () {
        var e = Nt.match(/Chrome\/(\d+)/);
        return e && e[1] ? Number(e[1]) : null;
      },
      gV = /Chrome/i.test(Nt),
      Bp =
        !Mp &&
        !F0 &&
        !V0 &&
        !so &&
        !j0 &&
        !Up &&
        !W0 &&
        !K0 &&
        !J0 &&
        !Y0 &&
        !Fp &&
        !jp &&
        /Chrome/i.test(Nt),
      Z0 = Bp && zc(),
      _V =
        Bp &&
        (function () {
          var u = Nt.match(/Chrome\/([\d.]+)/);
          return u && u[1] ? u[1] : null;
        })(),
      uu = !gV && !H0 && !z0 && !G0 && !q0 && /Safari/i.test(Nt),
      Q0 = (function () {
        if (uu) {
          var u = Nt.match(/Version\/([\d.]+)/);
          if (u && u[1]) return u[1];
        }
        return "";
      })(),
      yV = /Android.*(wv|.0.0.0)/.test(Nt),
      es = (function () {
        if (SE) return Q0;
        if (Xo) {
          var u = Nt.match(/OS (\d+)_(\d+)/i);
          if (u && u[1]) {
            var e = u[1];
            return u[2] && (e += ".".concat(u[2])), e;
          }
        }
        return "";
      })(),
      CE = Number(es.split(".")[0]),
      zp = Q0 === "15.1",
      Hp = es === "15.1",
      bV = (RE = Number(es.split(".")[0])) === 14 || RE === 13,
      cu =
        location.protocol === "file:" ||
        location.hostname === "localhost" ||
        location.hostname === "127.0.0.1",
      lu = function () {
        if (ht(Vp))
          try {
            Vp = window.localStorage;
          } catch (e) {
            ft.warn(e), (Vp = !1);
          }
        return Vp;
      },
      X0 = /* @__PURE__ */ new Map([
        [Ii, ["Firefox", wE]],
        [Up, ["Edg", kE]],
        [Bp, ["Chrome", _V]],
        [uu, ["Safari", Q0]],
        [so, ["TBS", aV]],
        [j0, ["XWEB", oV]],
        [B0 && U0, ["WeChat", sV]],
        [W0, ["QQ(Win)", uV]],
        [H0, ["QQ(Mobile)", TE]],
        [z0, ["QQ(Mobile X5)", TE]],
        [G0, ["QQ(Mac)", cV]],
        [q0, ["QQ(iPad)", lV]],
        [K0, ["MI", hV]],
        [J0, ["HW", fV]],
        [Y0, ["Samsung", pV]],
        [Fp, ["OPPO", vV]],
        [jp, ["VIVO", mV]],
        [Mp, ["EDGE", nV]],
        [V0, ["SogouMobile", rV]],
        [F0, ["Sogou", iV]],
      ]);
    function du() {
      var u = "unknown",
        e = "unknown";
      return (
        X0.get(!0) && ((u = X0.get(!0)[0]), (e = X0.get(!0)[1])),
        { name: u, version: e }
      );
    }
    var AE = function (e, n) {
        return n ? Fc + "/" + e + "/" + n : Fc + "/" + e + "/index.html";
      },
      SV = function () {
        if (!lu()) return !1;
        var e = localStorage.getItem(A0);
        (e &&
          !(function (n) {
            var a =
                n.saveTime &&
                /* @__PURE__ */ new Date().getTime() - n.saveTime >= HT,
              c = !n.saveVersion || n.saveVersion !== ba;
            return a || c;
          })(JSON.parse(e))) ||
          (ft.info("init debug info"),
          (function () {
            var n = new XMLHttpRequest();
            if (
              (n.open(
                "GET",
                "https://web.sdk.qcloud.com/trtc/webrtc/download/error-message/0.0.3/script.js",
                !1
              ),
              n.send(null),
              n.readyState === 4 && n.status === 200)
            ) {
              var a = document.createElement("script");
              (a.type = "text/javascript"),
                (a.text = n.responseText),
                document.body.appendChild(a),
                localStorage.setItem(
                  A0,
                  JSON.stringify({
                    message: n.responseText,
                    saveTime: /* @__PURE__ */ new Date().getTime(),
                    saveVersion: ba,
                  })
                ),
                document.body.removeChild(a);
            }
          })());
      };
    function Fe(u) {
      var e = u.key,
        n = u.data,
        a = u.link,
        c = u.addDocLink,
        s = c === void 0 || c,
        l = "",
        h = "",
        v = "";
      zr(Qo[e]) ? (l = Qo[e](n)) : vr(Qo[e]) && (l = Qo[e]);
      var g = (function () {
          if (window.TRTC_ERROR_INFO && window.TRTC_ERROR_LINK)
            return {
              TRTC_ERROR_INFO: window.TRTC_ERROR_INFO,
              TRTC_ERROR_LINK: window.TRTC_ERROR_LINK,
            };
          var N = localStorage.getItem(A0);
          if (N) {
            N = JSON.parse(N);
            var z = document.createElement("script");
            (z.type = "text/javascript"),
              (z.text = N.message),
              document.body.appendChild(z);
            var F = window.TRTC_ERROR_INFO,
              U = window.TRTC_ERROR_LINK;
            return (
              document.body.removeChild(z),
              { TRTC_ERROR_INFO: F, TRTC_ERROR_LINK: U }
            );
          }
          return {};
        })(),
        _ = g.TRTC_ERROR_INFO,
        b = g.TRTC_ERROR_LINK;
      a
        ? (v = "".concat(a.className, ".html#").concat(a.fnName))
        : b && b[e] && (zr(b[e]) ? (v = b[e](n)) : vr(b[e]) && (v = b[e]));
      var C = l;
      return (
        hu() &&
          (_ && _[e] && (zr(_[e]) ? (h = _[e](n)) : vr(_[e]) && (h = _[e])),
          h &&
            ((C = s
              ? h +
                `
请查看文档: ` +
                AE("zh-cn", v) +
                `

`
              : h +
                `

`),
            (C += l))),
        s &&
          (C +=
            ` 
Refer to: ` +
            AE("en", v) +
            `
`),
        C
      );
    }
    var xE = function () {
        return (function (e) {
          var n = window.location.search.match(
            new RegExp("(\\?|&)" + e + "=([^&]*)(&|$)")
          );
          return n ? decodeURIComponent(n[2]) : "";
        })("trtc_env");
      },
      OE = function (e) {
        return (e = Number(e)) > 0 && e < 14e8;
      },
      Wp = function (e, n) {
        var a;
        a = Gd
          ? Gd.includes("http")
            ? Gd
            : "https://" + Gd
          : OE(e)
          ? "https://apisgp.my-imcloud.com"
          : "https://yun.tim.qq.com";
        var c = Math.floor(Math.random() * Math.pow(2, 31));
        return ""
          .concat(a, "/v5/AVQualityReportSvc/C2S?random=")
          .concat(c, "&sdkappid=")
          .concat(e, "&cmdtype=")
          .concat(n);
      };
    function ey() {
      var u = navigator.userAgent,
        e = navigator.connection,
        n = u.match(/NetType\/\w+/) ? u.match(/NetType\/\w+/)[0] : "";
      (n = n.toLowerCase().replace("nettype/", "")) === "3gnet" && (n = "3g");
      var a = e && e.type && e.type.toLowerCase(),
        c = e && e.effectiveType && e.effectiveType.toLowerCase();
      c === "slow-2" && (c = "2g");
      var s = n || "unknown";
      if (a)
        switch (a) {
          case "cellular":
          case "wimax":
            s = c || "unknown";
            break;
          case "wifi":
            s = "wifi";
            break;
          case "ethernet":
            s = "wired";
            break;
          case "none":
          case "other":
          case "unknown":
            s = "unknown";
        }
      return s;
    }
    var ts = function (e) {
      if (
        !e ||
        S(e) !== "object" ||
        Object.prototype.toString.call(e) != "[object Object]"
      )
        return !1;
      var n = Object.getPrototypeOf(e);
      if (n === null) return !0;
      var a =
        Object.prototype.hasOwnProperty.call(n, "constructor") && n.constructor;
      return (
        typeof a == "function" &&
        a instanceof a &&
        Function.prototype.toString.call(a) ===
          Function.prototype.toString.call(Object)
      );
    };
    function Gp(u) {
      var e =
          arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1,
        n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 1;
      return u <= 1 ? n : Gp(u - 1, n, e + n);
    }
    function ty(u) {
      var e = Math.round(u / 2) + 1;
      return e > 6 ? 13e3 : 1e3 * Gp(e);
    }
    var zr = function (e) {
        return typeof e == "function";
      },
      ht = function (e) {
        return e === void 0;
      },
      vr = function (e) {
        return typeof e == "string";
      },
      Ki = function (e) {
        return typeof e == "number";
      },
      Ji = function (e) {
        return typeof e == "boolean";
      },
      PE = function (e) {
        return ns(e) === "object";
      },
      Hc = function (e) {
        return ns(e) === "array";
      },
      DE = function (e) {
        return ns(e) === "MediaStreamTrack".toLowerCase();
      };
    function ns(u) {
      return Reflect.apply(Object.prototype.toString, u, [])
        .replace(/^\[object\s(\w+)\]$/, "$1")
        .toLowerCase();
    }
    function NE(u) {
      var e = {};
      return (
        (e.urls = "turn:".concat(u.url)),
        ht(u.username) ||
          ht(u.credential) ||
          ((e.username = u.username),
          (e.credential = u.credential),
          (e.credentialType = "password"),
          ht(u.credentialType) || (e.credentialType = u.credentialType)),
        e
      );
    }
    function er() {
      return performance && performance.now
        ? Math.floor(performance.now())
        : Date.now();
    }
    function ny(u) {
      var e =
        arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "big";
      if (!vr(u)) return 0;
      var n = u.split(".");
      return e === "big"
        ? ((Number(n[0]) << 24) |
            (Number(n[1]) << 16) |
            (Number(n[2]) << 8) |
            Number(n[3])) >>>
            0
        : ((Number(n[3]) << 24) |
            (Number(n[2]) << 16) |
            (Number(n[1]) << 8) |
            Number(n[0])) >>>
            0;
    }
    var ry,
      iy,
      hu = function () {
        var e = navigator.language || navigator.userLanguage;
        return (e = e.substr(0, 2)) === "zh";
      },
      LE =
        ((ry = !1),
        (iy = document.visibilityState),
        function () {
          document.visibilityState !== iy &&
            ft.info("visibility change: ".concat(document.visibilityState)),
            ry ||
              (document.addEventListener("visibilitychange", function () {
                ft.info("visibility change: " + document.visibilityState),
                  (iy = document.visibilityState);
              }),
              (ry = !0));
        });
    window.AudioContext =
      window.AudioContext ||
      window.webkitAudioContext ||
      window.mozAudioContext;
    var ME = function () {
        return new window.AudioContext();
      },
      UE = (function () {
        var u;
        return function () {
          return (
            u ||
            ((u = new window.AudioContext()),
            (u.onstatechange = function () {
              ft.info("gain context state: ".concat(u.state)),
                u.state === "suspended"
                  ? (u.resume(), document.addEventListener("click", u.resume))
                  : u.state === "interrupted"
                  ? u.resume()
                  : document.removeEventListener("click", u.resume);
            }),
            u)
          );
        };
      })(),
      wV = !!window.AudioWorkletNode,
      VE = function (e, n) {
        var a = e.emit;
        return (
          (e.emit = function () {
            for (var c = arguments.length, s = new Array(c), l = 0; l < c; l++)
              s[l] = arguments[l];
            try {
              a.apply(e, s);
            } catch (v) {
              var h = Fe({
                key: FU,
                data: { name: n, event: s[0] },
                addDocLink: !1,
              });
              ft.warn(
                h +
                  `

` +
                  v.stack
              );
            }
          }),
          e
        );
      },
      FE = function (e) {
        return +e < 10 ? "0".concat(e) : e;
      },
      kV = function (e) {
        var n = e.match(/^\d+\.\d+\.\d+/)[0];
        if (!n) return e;
        var a = n.split("."),
          c = FE(a[1]) + FE(a[2]);
        return (
          a[1] - 15 > 0 && (a[1] = "15"),
          a[2] - 15 > 0 && (a[2] = "15"),
          a.join(".") + "." + c
        );
      };
    function Wc(u, e) {
      try {
        if (Hc(u))
          return "[".concat(
            u
              .map(function (c) {
                return Wc(c, e);
              })
              .join(","),
            "]"
          );
        if (!ts(u) || !Hc(e)) return JSON.stringify(u);
        var n = {},
          a = new Set(e);
        return (
          Object.keys(u).forEach(function (c) {
            a.has(c) && (n[c] = u[c]);
          }),
          JSON.stringify(n)
        );
      } catch (c) {
        return "{}";
      }
    }
    function qp(u) {
      var e = u.url,
        n = u.body,
        a = u.method,
        c = u.timeout,
        s = new XMLHttpRequest();
      return new Promise(function (l, h) {
        s.onload = function (g) {
          if (s.status >= 200 && s.status < 300 && s.responseText.length > 0)
            try {
              var _ = JSON.parse(s.response);
              l({ data: _ });
            } catch (b) {
              l({ data: s.response });
            }
          else
            s.status > 0 &&
              h({
                code: s.status,
                message: "request failed, readyState:"
                  .concat(s.readyState, " status:")
                  .concat(s.status, " loaded size:")
                  .concat(g.loaded),
              });
        };
        var v = function (_) {
          h({
            code: s.readyState,
            message: "request "
              .concat(_.type, ", readyState:")
              .concat(s.readyState, " status:")
              .concat(s.status, " loaded size:")
              .concat(_.loaded),
          });
        };
        (s.onerror = v),
          (s.onabort = v),
          (s.ontimeout = v),
          (s.timeout = c || 5e3),
          s.open(a || "POST", e, !0),
          s.send(n);
      });
    }
    var jE = { exports: {} };
    (function (u) {
      var e = Object.prototype.hasOwnProperty,
        n = "~";
      function a() {}
      function c(v, g, _) {
        (this.fn = v), (this.context = g), (this.once = _ || !1);
      }
      function s(v, g, _, b, C) {
        if (typeof _ != "function")
          throw new TypeError("The listener must be a function");
        var N = new c(_, b || v, C),
          z = n ? n + g : g;
        return (
          v._events[z]
            ? v._events[z].fn
              ? (v._events[z] = [v._events[z], N])
              : v._events[z].push(N)
            : ((v._events[z] = N), v._eventsCount++),
          v
        );
      }
      function l(v, g) {
        --v._eventsCount == 0 ? (v._events = new a()) : delete v._events[g];
      }
      function h() {
        (this._events = new a()), (this._eventsCount = 0);
      }
      Object.create &&
        ((a.prototype = /* @__PURE__ */ Object.create(null)),
        new a().__proto__ || (n = !1)),
        (h.prototype.eventNames = function () {
          var v,
            g,
            _ = [];
          if (this._eventsCount === 0) return _;
          for (g in (v = this._events))
            e.call(v, g) && _.push(n ? g.slice(1) : g);
          return Object.getOwnPropertySymbols
            ? _.concat(Object.getOwnPropertySymbols(v))
            : _;
        }),
        (h.prototype.listeners = function (v) {
          var g = n ? n + v : v,
            _ = this._events[g];
          if (!_) return [];
          if (_.fn) return [_.fn];
          for (var b = 0, C = _.length, N = new Array(C); b < C; b++)
            N[b] = _[b].fn;
          return N;
        }),
        (h.prototype.listenerCount = function (v) {
          var g = n ? n + v : v,
            _ = this._events[g];
          return _ ? (_.fn ? 1 : _.length) : 0;
        }),
        (h.prototype.emit = function (v, g, _, b, C, N) {
          var z = n ? n + v : v;
          if (!this._events[z]) return !1;
          var F,
            U,
            E = this._events[z],
            A = arguments.length;
          if (E.fn) {
            switch ((E.once && this.removeListener(v, E.fn, void 0, !0), A)) {
              case 1:
                return E.fn.call(E.context), !0;
              case 2:
                return E.fn.call(E.context, g), !0;
              case 3:
                return E.fn.call(E.context, g, _), !0;
              case 4:
                return E.fn.call(E.context, g, _, b), !0;
              case 5:
                return E.fn.call(E.context, g, _, b, C), !0;
              case 6:
                return E.fn.call(E.context, g, _, b, C, N), !0;
            }
            for (U = 1, F = new Array(A - 1); U < A; U++)
              F[U - 1] = arguments[U];
            E.fn.apply(E.context, F);
          } else {
            var L,
              $ = E.length;
            for (U = 0; U < $; U++)
              switch (
                (E[U].once && this.removeListener(v, E[U].fn, void 0, !0), A)
              ) {
                case 1:
                  E[U].fn.call(E[U].context);
                  break;
                case 2:
                  E[U].fn.call(E[U].context, g);
                  break;
                case 3:
                  E[U].fn.call(E[U].context, g, _);
                  break;
                case 4:
                  E[U].fn.call(E[U].context, g, _, b);
                  break;
                default:
                  if (!F)
                    for (L = 1, F = new Array(A - 1); L < A; L++)
                      F[L - 1] = arguments[L];
                  E[U].fn.apply(E[U].context, F);
              }
          }
          return !0;
        }),
        (h.prototype.on = function (v, g, _) {
          return s(this, v, g, _, !1);
        }),
        (h.prototype.once = function (v, g, _) {
          return s(this, v, g, _, !0);
        }),
        (h.prototype.removeListener = function (v, g, _, b) {
          var C = n ? n + v : v;
          if (!this._events[C]) return this;
          if (!g) return l(this, C), this;
          var N = this._events[C];
          if (N.fn)
            N.fn !== g ||
              (b && !N.once) ||
              (_ && N.context !== _) ||
              l(this, C);
          else {
            for (var z = 0, F = [], U = N.length; z < U; z++)
              (N[z].fn !== g ||
                (b && !N[z].once) ||
                (_ && N[z].context !== _)) &&
                F.push(N[z]);
            F.length
              ? (this._events[C] = F.length === 1 ? F[0] : F)
              : l(this, C);
          }
          return this;
        }),
        (h.prototype.removeAllListeners = function (v) {
          var g;
          return (
            v
              ? ((g = n ? n + v : v), this._events[g] && l(this, g))
              : ((this._events = new a()), (this._eventsCount = 0)),
            this
          );
        }),
        (h.prototype.off = h.prototype.removeListener),
        (h.prototype.addListener = h.prototype.on),
        (h.prefixed = n),
        (h.EventEmitter = h),
        (u.exports = h);
    })(jE);
    var rs = jE.exports,
      Ee = new rs(),
      Kp = 1,
      ay = 2,
      oy = 3,
      Gc = 4,
      fu = 5,
      sy = 20,
      uy = 21,
      qc = 22,
      cy = 23,
      ly = 24,
      dy = 27,
      hy = 28,
      Jp = 29,
      BE = 30,
      zE = 31,
      fy = 32,
      py = 33,
      HE = 40,
      TV = 41,
      EV = 52,
      IV = 100,
      WE = 101,
      Qd = 102,
      vy = 103,
      Ri = 110,
      $p = 111,
      my = 112,
      uo = 113,
      co = 114,
      RV = 115,
      pu = 116,
      CV = 120,
      gy = 121,
      _y = 122,
      yy = 123,
      Xd = 130,
      by = 131,
      Sy = 132,
      wy = 133,
      ky = 134,
      Ty = 135,
      Ey = 136,
      Iy = 137,
      Yp = 200,
      Ry = 201,
      Cy = 300,
      eh = 301,
      Ay = 302,
      xy = 303;
    function th(u) {
      var e = u.retryFunction,
        n = u.settings,
        a = u.onError,
        c = u.onRetrying,
        s = u.onRetryFailed,
        l = u.onRetrySuccess,
        h = u.context;
      return function () {
        for (
          var v = this, g = arguments.length, _ = new Array(g), b = 0;
          b < g;
          b++
        )
          _[b] = arguments[b];
        var C = n.retries || 5,
          N = 0,
          z = -1,
          F = 0,
          U = (function () {
            var E = I(
              m().mark(function A(L, $) {
                var te, X, D, M;
                return m().wrap(
                  function (W) {
                    for (;;)
                      switch ((W.prev = W.next)) {
                        case 0:
                          return (
                            (te = h || v),
                            (W.prev = 1),
                            (W.next = 4),
                            e.apply(te, _)
                          );
                        case 4:
                          (X = W.sent),
                            N !== 0 && zr(l) && l.call(te, N),
                            (N = 0),
                            L(X),
                            (W.next = 15);
                          break;
                        case 10:
                          (W.prev = 10),
                            (W.t0 = W.catch(1)),
                            (D = function () {
                              clearTimeout(z), (N = 0), (F = 2), $(W.t0);
                            }),
                            (M = function () {
                              F !== 2 && N < C
                                ? (N++,
                                  (F = 1),
                                  zr(c) && c.call(te, N, D),
                                  (z = setTimeout(
                                    function () {
                                      (z = -1), U(L, $);
                                    },
                                    ht(n.timeout) ? 1e3 : n.timeout
                                  )))
                                : (D(), zr(s) && s.call(te, W.t0));
                            }),
                            zr(a) ? a.call(te, W.t0, M, $, _, N) : M();
                        case 15:
                        case "end":
                          return W.stop();
                      }
                  },
                  A,
                  null,
                  [[1, 10]]
                );
              })
            );
            return function (A, L) {
              return E.apply(this, arguments);
            };
          })();
        return new Promise(U);
      };
    }
    var AV = oe(function u(e) {
        B(this, u),
          (this.log = e.log),
          (this.level = e.level),
          (this.userId = e.userId),
          (this.sdkAppId = e.sdkAppId),
          (this.forAllJoinedClients = e.forAllJoinedClients),
          (this.uploaded = !1);
      }),
      xV = (function () {
        function u(e) {
          B(this, u),
            (this.id_ = e.id),
            (this.userId_ = e.userId),
            (this.sdkAppId_ = e.sdkAppId),
            (this.type_ = e.type),
            (this.isLocal_ = !Ji(e.isLocal) || e.isLocal);
        }
        return (
          oe(u, [
            {
              key: "setUserId",
              value: function (n) {
                this.userId_ = n;
              },
            },
            {
              key: "setSdkAppId",
              value: function (n) {
                this.sdkAppId_ = n;
              },
            },
            {
              key: "log",
              value: function (n, a) {
                ft.log({
                  log: "["
                    .concat(this.isLocal_ ? "↑" : "↓")
                    .concat(this.id_, "] ")
                    .concat(this.type_ ? this.type_ + " " : "")
                    .concat(a),
                  level: n,
                  forAllJoinedClients: ht(this.userId_),
                  userId: this.userId_,
                  sdkAppId: this.sdkAppId_,
                });
              },
            },
            {
              key: "info",
              value: function (n) {
                this.log(Ei.INFO, n);
              },
            },
            {
              key: "debug",
              value: function (n) {
                this.log(Ei.DEBUG, n);
              },
            },
            {
              key: "warn",
              value: function (n) {
                this.log(Ei.WARN, n);
              },
            },
            {
              key: "error",
              value: function (n) {
                this.log(Ei.ERROR, n);
              },
            },
          ]),
          u
        );
      })(),
      OV = !(Xo || Bc),
      PV = (function () {
        function u() {
          var a = this;
          B(this, u),
            (this.clients_ = /* @__PURE__ */ new Set()),
            (this.queue_ = []),
            (this.timeoutId_ = -1),
            (this.logLevel_ = Ei.DEBUG),
            (this.logLevelToUpload_ = Ei.INFO),
            (this.enableUploadLog_ = !0),
            (this.isAbleToUpload_ = !1),
            this.checkURLParam(),
            Ee.on(BE, function (c) {
              var s = c.client;
              a.timeoutId_ === -1 && a.startUpload(), a.clients_.add(s);
            }),
            Ee.on(py, function (c) {
              var s = c.client;
              return a.clients_.delete(s);
            }),
            Ee.on(zE, function (c) {
              c &&
                ts(c.config) &&
                su[c.config.logLevelToUpload] &&
                (a.logLevelToUpload_ = c.config.logLevelToUpload);
            }),
            Ee.on(Gc, this.setIsAbleToUpload, this),
            Ee.on(fu, this.setIsAbleToUpload, this);
        }
        var e, n;
        return (
          oe(u, [
            {
              key: "getIsAbleToUpload",
              value: function () {
                return this.isAbleToUpload_;
              },
            },
            {
              key: "setIsAbleToUpload",
              value: function () {
                (this.isAbleToUpload_ = !0),
                  Ee.off(Gc, this.setIsAbleToUpload, this),
                  Ee.off(fu, this.setIsAbleToUpload, this);
              },
            },
            {
              key: "startUpload",
              value:
                ((n = I(
                  m().mark(function a() {
                    var c = this;
                    return m().wrap(
                      function (s) {
                        for (;;)
                          switch ((s.prev = s.next)) {
                            case 0:
                              return (s.prev = 0), (s.next = 3), this.upload();
                            case 3:
                              s.next = 7;
                              break;
                            case 5:
                              (s.prev = 5), (s.t0 = s.catch(0));
                            case 7:
                              this.timeoutId_ = setTimeout(function () {
                                return c.startUpload();
                              }, 2e3);
                            case 8:
                            case "end":
                              return s.stop();
                          }
                      },
                      a,
                      this,
                      [[0, 5]]
                    );
                  })
                )),
                function () {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "getLogsToUpload",
              value: function () {
                var c = this,
                  s = { map: /* @__PURE__ */ new Map(), splicedQueue: [] };
                if (
                  this.queue_[0].forAllJoinedClients &&
                  this.clients_.size === 0
                )
                  return s;
                for (
                  var l = 0,
                    h = function () {
                      if (l === 50) return "break";
                      var g = c.queue_[l];
                      if (g.forAllJoinedClients) {
                        var _ = /* @__PURE__ */ new Set();
                        c.clients_.forEach(function (b) {
                          if (b.getIsJoined()) {
                            var C = b.getUserId(),
                              N = b.getSDKAppId();
                            _.has("".concat(C, "-").concat(N)) ||
                              (_.add("".concat(C, "-").concat(N)),
                              s.map.has(C)
                                ? s.map.get(C).logs.push(g)
                                : s.map.set(C, {
                                    userId: C,
                                    sdkAppId: N,
                                    logs: [g],
                                  }));
                          }
                        });
                      } else
                        s.map.has(g.userId)
                          ? s.map.get(g.userId).logs.push(g)
                          : s.map.set(g.userId, {
                              userId: g.userId,
                              sdkAppId: g.sdkAppId,
                              logs: [g],
                            });
                    };
                  l < this.queue_.length && h() !== "break";
                  l++
                );
                return (
                  s.map.size > 0 && (s.splicedQueue = this.queue_.splice(0, l)),
                  s
                );
              },
            },
            {
              key: "upload",
              value:
                ((e = I(
                  m().mark(function a() {
                    var c, s, l, h, v, g, _, b, C, N;
                    return m().wrap(
                      function (z) {
                        for (;;)
                          switch ((z.prev = z.next)) {
                            case 0:
                              if (
                                this.queue_.length !== 0 &&
                                this.isAbleToUpload_
                              ) {
                                z.next = 2;
                                break;
                              }
                              return z.abrupt("return");
                            case 2:
                              if (
                                ((c = this.getLogsToUpload()),
                                (s = c.map),
                                (l = c.splicedQueue),
                                s.size !== 0)
                              ) {
                                z.next = 5;
                                break;
                              }
                              return z.abrupt("return");
                            case 5:
                              (z.prev = 5), (h = Ze(s.values())), (v = 0);
                            case 8:
                              if (!(v < h.length)) {
                                z.next = 16;
                                break;
                              }
                              return (
                                (g = h[v]),
                                (_ = g.userId),
                                (b = g.sdkAppId),
                                (C = g.logs),
                                (z.next = 12),
                                this.uploadLogWithRetry(
                                  JSON.stringify({
                                    timestamp: zk(),
                                    sdkAppId: String(b),
                                    userId: _,
                                    version: ba,
                                    log: C.map(function (F) {
                                      return F.log;
                                    }).join(`
`),
                                  }),
                                  b
                                )
                              );
                            case 12:
                              C.forEach(function (F) {
                                return (F.uploaded = !0);
                              });
                            case 13:
                              v++, (z.next = 8);
                              break;
                            case 16:
                              z.next = 20;
                              break;
                            case 18:
                              (z.prev = 18), (z.t0 = z.catch(5));
                            case 20:
                              (N = l.filter(function (F) {
                                return !F.uploaded;
                              })),
                                N.length > 0 &&
                                  (this.queue_ = N.concat(this.queue_));
                            case 22:
                            case "end":
                              return z.stop();
                          }
                      },
                      a,
                      this,
                      [[5, 18]]
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "uploadLogWithRetry",
              value: function (c, s) {
                return th({
                  retryFunction: function () {
                    return qp({ url: Wp(s, pT), body: c, timeout: 5e3 });
                  },
                  settings: { retries: 3, timeout: 1e3 },
                  onError: function (h, v) {
                    v();
                  },
                })();
              },
            },
            {
              key: "getPrefix",
              value: function (c) {
                var s = /* @__PURE__ */ new Date();
                return (
                  s.setTime(Ur()),
                  String.prototype.padStart
                    ? "["
                        .concat(
                          s
                            .toTimeString()
                            .replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1"),
                          ":"
                        )
                        .concat(
                          s.getMilliseconds().toString().padStart(3, "0"),
                          "] <"
                        )
                        .concat(su[c], ">")
                    : "["
                        .concat(
                          s
                            .toTimeString()
                            .replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1"),
                          ":"
                        )
                        .concat(s.getMilliseconds(), "] <")
                        .concat(su[c], ">")
                );
              },
            },
            {
              key: "getLogLevel",
              value: function () {
                return this.logLevel_;
              },
            },
            {
              key: "setLogLevel",
              value: function (c) {
                ht(su[c]) ||
                  (this.logLevel_ !== c && this.info("setLogLevel ".concat(c)),
                  (this.logLevel_ = c));
              },
            },
            {
              key: "enableUploadLog",
              value: function () {
                this.enableUploadLog_ = !0;
              },
            },
            {
              key: "disableUploadLog",
              value: function () {
                this.enableUploadLog_ = !1;
              },
            },
            {
              key: "log",
              value: function (c) {
                var s = c.log,
                  l = c.level,
                  h = c.forAllJoinedClients,
                  v = h === void 0 || h,
                  g = c.userId,
                  _ = c.sdkAppId;
                if (
                  ((s = "".concat(this.getPrefix(l), " ").concat(s)),
                  this.enableUploadLog_ &&
                    l >= this.logLevelToUpload_ &&
                    this.queue_.push(
                      new AV({
                        log: s,
                        level: l,
                        userId: g,
                        sdkAppId: _,
                        forAllJoinedClients: v,
                      })
                    ),
                  !(l < this.logLevel_))
                ) {
                  var b = su[l] ? su[l].toLowerCase() : "info";
                  OV
                    ? console[b](
                        "%cTRTC%c%s",
                        "padding: 1px 4px;border-radius: 3px;color: #fff;background: #1E88E5;",
                        "display: inline",
                        s
                      )
                    : console[b](s);
                }
              },
            },
            {
              key: "debug",
              value: function (c) {
                this.log({ log: c, level: Ei.DEBUG });
              },
            },
            {
              key: "info",
              value: function (c) {
                this.log({ log: c, level: Ei.INFO });
              },
            },
            {
              key: "warn",
              value: function (c) {
                this.log({ log: c, level: Ei.WARN });
              },
            },
            {
              key: "error",
              value: function (c) {
                this.log({ log: c, level: Ei.ERROR });
              },
            },
            {
              key: "createLogger",
              value: function (c) {
                return new xV(c);
              },
            },
            {
              key: "checkURLParam",
              value: function () {
                var c = new URLSearchParams(location.search).get(
                  "logLevelToUpload"
                );
                su[c] && (this.logLevelToUpload_ = c);
              },
            },
          ]),
          u
        );
      })(),
      ft = new PV(),
      GE = !0,
      DV = nn,
      NV = Math.floor,
      qE =
        Number.isInteger ||
        function (u) {
          return !DV(u) && isFinite(u) && NV(u) === u;
        };
    Ut({ target: "Number", stat: !0 }, { isInteger: qE });
    var Oy,
      LV = Ut,
      KE = He,
      MV = zt.f,
      UV = Pn,
      JE = _r,
      VV = c2,
      FV = Dt,
      jV = l2,
      $E = KE("".startsWith),
      BV = KE("".slice),
      zV = Math.min,
      YE = jV("startsWith");
    LV(
      {
        target: "String",
        proto: !0,
        forced:
          !!(
            YE ||
            ((Oy = MV(String.prototype, "startsWith")), !Oy || Oy.writable)
          ) && !YE,
      },
      {
        startsWith: function (e) {
          var n = JE(FV(this));
          VV(e);
          var a = UV(
              zV(arguments.length > 1 ? arguments[1] : void 0, n.length)
            ),
            c = JE(e);
          return $E ? $E(n, c, a) : BV(n, a, a + c.length) === c;
        },
      }
    );
    var ZE = ct,
      HV = He,
      WV = Re,
      GV = st,
      Py = Ws,
      qV = ud,
      KV = ge,
      JV = mr,
      $V = St,
      Kc = Object.assign,
      QE = Object.defineProperty,
      YV = HV([].concat),
      XE =
        !Kc ||
        GV(function () {
          if (
            ZE &&
            Kc(
              { b: 1 },
              Kc(
                QE({}, "a", {
                  enumerable: !0,
                  get: function () {
                    QE(this, "b", { value: 3, enumerable: !1 });
                  },
                }),
                { b: 2 }
              )
            ).b !== 1
          )
            return !0;
          var u = {},
            e = {},
            n = Symbol(),
            a = "abcdefghijklmnopqrst";
          return (
            (u[n] = 7),
            a.split("").forEach(function (c) {
              e[c] = c;
            }),
            Kc({}, u)[n] != 7 || Py(Kc({}, e)).join("") != a
          );
        })
          ? function (u, e) {
              for (
                var n = JV(u), a = arguments.length, c = 1, s = qV.f, l = KV.f;
                a > c;

              )
                for (
                  var h,
                    v = $V(arguments[c++]),
                    g = s ? YV(Py(v), s(v)) : Py(v),
                    _ = g.length,
                    b = 0;
                  _ > b;

                )
                  (h = g[b++]), (ZE && !WV(l, v, h)) || (n[h] = v[h]);
              return n;
            }
          : Kc,
      eI = XE;
    Ut(
      { target: "Object", stat: !0, arity: 2, forced: Object.assign !== eI },
      { assign: eI }
    );
    var tI = He,
      ZV = Dr,
      QV = nn,
      XV = Jn,
      nI = yc,
      e9 = Lt,
      rI = Function,
      t9 = tI([].concat),
      n9 = tI([].join),
      Dy = {},
      r9 = function (e, n, a) {
        if (!XV(Dy, n)) {
          for (var c = [], s = 0; s < n; s++) c[s] = "a[" + s + "]";
          Dy[n] = rI("C,a", "return new C(" + n9(c, ",") + ")");
        }
        return Dy[n](e, a);
      },
      i9 = e9
        ? rI.bind
        : function (u) {
            var e = ZV(this),
              n = e.prototype,
              a = nI(arguments, 1),
              c = function () {
                var l = t9(a, nI(arguments));
                return this instanceof c ? r9(e, l.length, l) : e.apply(u, l);
              };
            return QV(n) && (c.prototype = n), c;
          },
      iI = i9;
    Ut(
      { target: "Function", proto: !0, forced: Function.bind !== iI },
      { bind: iI }
    );
    var a9 = Ut,
      o9 = Mr.findIndex,
      s9 = dc,
      aI = "findIndex",
      oI = !0;
    aI in [] &&
      Array(1).findIndex(function () {
        oI = !1;
      }),
      a9(
        { target: "Array", proto: !0, forced: oI },
        {
          findIndex: function (e) {
            return o9(this, e, arguments.length > 1 ? arguments[1] : void 0);
          },
        }
      ),
      s9(aI);
    var u9 = ct,
      sI = He,
      c9 = Ws,
      l9 = on,
      d9 = sI(ge.f),
      h9 = sI([].push),
      uI = function (e) {
        return function (n) {
          for (
            var a, c = l9(n), s = c9(c), l = s.length, h = 0, v = [];
            l > h;

          )
            (a = s[h++]), (u9 && !d9(c, a)) || h9(v, e ? [a, c[a]] : c[a]);
          return v;
        };
      },
      f9 = { entries: uI(!0), values: uI(!1) }.values;
    Ut(
      { target: "Object", stat: !0 },
      {
        values: function (e) {
          return f9(e);
        },
      }
    );
    var cI = 1,
      lI = 5,
      Ny = 2,
      nh = 3,
      Ly = 4,
      Zp = "DISCONNECTED",
      dI = "CONNECTING",
      My = "RECONNECTING",
      rh = "CONNECTED",
      lo = {
        CLIENT_BANNED: 9,
        CHANNEL_SETUP_RESULT: 19,
        CHANNEL_RECONNECT_RESULT: 514,
        JOIN_ROOM_RESULT: 20,
        PEER_JOIN: 4134,
        PEER_LEAVE: 4135,
        STREAM_ADDED: 16,
        STREAM_REMOVED: 18,
        UPLINK_NETWORK_STATS: 22,
        UPDATE_REMOTE_MUTE_STAT: 23,
        PUBLISH_RESULT: 4098,
        PUBLISH_STATE_CHANGE_RESULT: 4112,
        UNPUBLISH_RESULT: 4100,
        SUBSCRIBE_RESULT: 4102,
        UNSUBSCRIBE_RESULT: 4104,
        SUBSCRIBE_CHANGE_RESULT: 4106,
        MUTE_RESULT: 4108,
        UPDATE_OFFER_RESULT: 4128,
        START_PUBLISH_TENCENT_CDN_RES: 1286,
        STOP_PUBLISH_TENCENT_CDN_RES: 1288,
        START_PUBLISH_GIVEN_CDN_RES: 777,
        STOP_PUBLISH_GIVEN_CDN_RES: 779,
        START_MIX_TRANSCODE_RES: 781,
        STOP_MIX_TRANSCODE_RES: 783,
        USER_LIST_RES: 4137,
        SWITCH_ROLE_RES: 4110,
        UPDATE_CONSTRAINT_CONFIG_RES: 772,
        CONNECT_OTHER_ROOM_RES: 8209,
        DISCONNECT_OTHER_ROOM_RES: 8211,
        UPDATE_OTHER_ROOM_FORWARD_MODE_RES: 8213,
      },
      p9 = [
        lo.UPDATE_REMOTE_MUTE_STAT,
        lo.UPLINK_NETWORK_STATS,
        lo.USER_LIST_RES,
        lo.MUTE_RESULT,
      ],
      Cn = {
        CLIENT_BANNED: "client-banned",
        CHANNEL_SETUP_RESULT: "channel-setup-result",
        CHANNEL_RECONNECT_RESULT: "channel-reconnect-result",
        JOIN_ROOM_RESULT: "join-room-result",
        PEER_JOIN: "peer-join",
        PEER_LEAVE: "peer-leave",
        STREAM_ADDED: "stream-added",
        STREAM_REMOVED: "stream-removed",
        UPLINK_NETWORK_STATS: "uplink-network-stats",
        UPDATE_REMOTE_MUTE_STAT: "update-remote-mute-stat",
        PUBLISH_RESULT: "publish-result",
        PUBLISH_STATE_CHANGE_RESULT: "publish-state-change-result",
        UNPUBLISH_RESULT: "unpublish-result",
        SUBSCRIBE_RESULT: "subscribe-result",
        SUBSCRIBE_CHANGE_RESULT: "subscribe-change-result",
        UNSUBSCRIBE_RESULT: "unsubscribe-result",
        UPDATE_OFFER_RESULT: "update-offer-result",
        START_PUBLISH_TENCENT_CDN_RES: "start-publish-tencent-cdn-res",
        STOP_PUBLISH_TENCENT_CDN_RES: "stop-publish-tencent-cdn-res",
        START_PUBLISH_GIVEN_CDN_RES: "start-publish-given-cdn-res",
        STOP_PUBLISH_GIVEN_CDN_RES: "stop-publish-given-cdn-res",
        START_MIX_TRANSCODE_RES: "start-mix-transcode-res",
        STOP_MIX_TRANSCODE_RES: "stop-mix-transcode-res",
        USER_LIST_RES: "user-list-res",
        SWITCH_ROLE_RES: "switch_role_res",
        MUTE_RESULT: "mute-result",
        UPDATE_CONSTRAINT_CONFIG_RES: "update-contraint-config-res",
        CONNECT_OTHER_ROOM_RES: "connect_other_room_res",
        UPDATE_OTHER_ROOM_FORWARD_MODE_RES:
          "update_other_room_forward_mode_res",
        DISCONNECT_OTHER_ROOM_RES: "disconnect_other_room_res",
      },
      v9 = "publish_change",
      m9 = "publish_state_change",
      g9 = "join",
      _9 = "leave",
      y9 = "quality_report",
      b9 = "mute_uplink",
      S9 = "publish",
      hI = "unpublish",
      w9 = "subscribe",
      k9 = "unsubscribe",
      T9 = "subscribe_change",
      E9 = "start_publishing",
      I9 = "stop_publishing",
      R9 = "start_push_user_cdn",
      C9 = "stop_push_user_cdn",
      A9 = "start_mcu_mix",
      x9 = "stop_mcu_mix",
      O9 = "get_user_list",
      P9 = "change_role",
      D9 = "update_constraint_config",
      N9 = "connect_other_room",
      L9 = "update_other_room_forward_mode",
      M9 = "disconnect_other_room",
      Oe = {
        INVALID_PARAMETER: 4096,
        INVALID_OPERATION: 4097,
        NOT_SUPPORTED: 4098,
        DEVICE_NOT_FOUND: 4099,
        INITIALIZE_FAILED: 4100,
        SIGNAL_CHANNEL_SETUP_FAILED: 16385,
        SIGNAL_CHANNEL_ERROR: 16386,
        ICE_TRANSPORT_ERROR: 16387,
        JOIN_ROOM_FAILED: 16388,
        CREATE_OFFER_FAILED: 16389,
        SIGNAL_CHANNEL_RECONNECTION_FAILED: 16390,
        UPLINK_RECONNECTION_FAILED: 16391,
        DOWNLINK_RECONNECTION_FAILED: 16392,
        REMOTE_STREAM_NOT_EXIST: 16400,
        CLIENT_BANNED: 16448,
        SERVER_TIMEOUT: 16449,
        SUBSCRIPTION_TIMEOUT: 16450,
        PLAY_NOT_ALLOWED: 16451,
        DEVICE_AUTO_RECOVER_FAILED: 16452,
        START_PUBLISH_CDN_FAILED: 16453,
        STOP_PUBLISH_CDN_FAILED: 16454,
        START_MIX_TRANSCODE_FAILED: 16455,
        STOP_MIX_TRANSCODE_FAILED: 16456,
        NOT_SUPPORTED_H264: 16457,
        SWITCH_ROLE_FAILED: 16458,
        API_CALL_TIMEOUT: 16459,
        SCHEDULE_FAILED: 16460,
        API_CALL_ABORTED: 16461,
        UNKNOWN: 65535,
      },
      De = (function (u) {
        be(n, u);
        var e = Tt(n);
        function n(a) {
          var c,
            s = a.name,
            l = s === void 0 ? "RtcError" : s,
            h = a.message,
            v = a.code,
            g = v === void 0 ? Oe.UNKNOWN : v,
            _ = a.extraCode,
            b = _ === void 0 ? 0 : _,
            C = a.constraint;
          B(this, n);
          var N = "<"
            .concat(
              (function (z) {
                for (var F in Oe) if (Oe[F] === z) return F;
                return "UNKNOWN";
              })(g),
              " 0x"
            )
            .concat(g.toString(16), ">");
          return (
            ((c = e.call(
              this,
              h +
                "".concat(C ? " constraint: ".concat(C) : "") +
                "".concat(h != null && h.includes(N) ? "" : " " + N)
            )).code_ = g),
            (c.extraCode_ = b),
            (c.name = l),
            (c.message_ = h),
            C && (c.constraint = C),
            c
          );
        }
        return (
          oe(n, [
            {
              key: "getCode",
              value: function () {
                return this.code_;
              },
            },
            {
              key: "getExtraCode",
              value: function () {
                return this.extraCode_;
              },
            },
          ]),
          n
        );
      })(_t(Error)),
      fI = 32768,
      pI = 32769,
      vI = 32770,
      mI = 32771,
      U9 = 32772,
      V9 = 32773,
      F9 = 32774,
      j9 = 32775,
      gI = 32777,
      B9 = 32778,
      Uy = 32779,
      z9 = 32780,
      H9 = 32781,
      W9 = 32782,
      G9 = 32783,
      q9 = 32784,
      K9 = 32785,
      J9 = 32786,
      $9 = 32787,
      Y9 = 32788,
      Z9 = 32789,
      Q9 = 32790,
      X9 = 32791,
      eF = 32792,
      tF = 32793,
      nF = 32794,
      rF = 32795,
      iF = 32796,
      aF = 32797,
      oF = 32798,
      sF = 32799,
      uF = 32800,
      cF = 32801,
      lF = 32802,
      dF = 32803,
      hF = 32804,
      ih = /* @__PURE__ */ new Map(),
      Xr = function (e, n) {
        var a = ih.get(e);
        a || (ih.set(e, []), (a = ih.get(e))), a.push(n);
      },
      fF = function (e) {
        var n = ih.get(e),
          a = [];
        return (
          n
            ? (ih.delete(e),
              (a = n.map(function (c) {
                return {
                  uint32_event_id: c.eventId,
                  uint64_date: c.timestamp,
                  str_userid: c.remoteUserId,
                  str_event_json: c.eventDesc,
                };
              })))
            : (a = []),
          a
        );
      },
      pF = Object.prototype.hasOwnProperty;
    function ho(u) {
      if (u == null) return !0;
      if (typeof u == "boolean") return !1;
      if (typeof u == "number") return u === 0;
      if (typeof u == "string" || typeof u == "function" || Array.isArray(u))
        return u.length === 0;
      if (u instanceof Error) return u.message === "";
      if (ts(u))
        switch (Object.prototype.toString.call(u)) {
          case "[object File]":
          case "[object Map]":
          case "[object Set]":
            return u.size === 0;
          case "[object Object]":
            for (var e in u) if (pF.call(u, e)) return !1;
            return !0;
        }
      return !1;
    }
    var vF = (function () {
        function u() {
          B(this, u);
          var e = du(),
            n = e.name,
            a = e.version;
          (this.roomIdMap_ = /* @__PURE__ */ new Map()),
            (this.configs_ = {
              sdkAppId: "",
              userId: "",
              version: ba,
              env: Rp,
              browserVersion: n + a,
              ua: navigator.userAgent,
            });
        }
        return (
          oe(u, [
            {
              key: "setConfig",
              value: function (n) {
                var a = n.sdkAppId,
                  c = n.env,
                  s = n.userId,
                  l = n.roomId;
                a !== this.configs_.sdkAppId &&
                  (this.configs_.sdkAppId = String(a)),
                  (this.configs_.env = c),
                  (this.configs_.userId = s),
                  this.roomIdMap_.set(s, String(l));
              },
            },
            {
              key: "logEvent",
              value: function (n) {
                if (!cu) {
                  var a = p(
                    p(p({}, n), this.configs_),
                    {},
                    { userId: n.userId || this.configs_.userId }
                  );
                  ht(a.code) &&
                    (a.code = a.result === "failed" ? Oe.UNKNOWN : 0),
                    this.sendRequest(Wp(this.configs_.sdkAppId, VM), a);
                }
              },
            },
            {
              key: "logSuccessEvent",
              value: function (n) {
                cu ||
                  (this.logEvent(
                    p(
                      p({}, n),
                      {},
                      {
                        result: "success",
                        roomId: this.roomIdMap_.get(n.userId),
                      }
                    )
                  ),
                  this.configs_.env === Rp &&
                    this.uploadEventToKibana(
                      p(p({}, n), {}, { result: "success" })
                    ));
              },
            },
            {
              key: "logFailedEvent",
              value: function (n) {
                if (!cu) {
                  var a = n.eventType,
                    c = n.code,
                    s = n.error,
                    l = n.userId,
                    h = {
                      roomId: this.roomIdMap_.get(l),
                      userId: l,
                      eventType: a,
                      result: "failed",
                      code:
                        c ||
                        (s instanceof De
                          ? s.getExtraCode() || s.getCode()
                          : Oe.UNKNOWN),
                    };
                  this.logEvent(h),
                    this.configs_.env === Rp &&
                      this.uploadEventToKibana(p(p({}, h), {}, { error: s }));
                }
              },
            },
            {
              key: "uploadEventToKibana",
              value: function (n) {
                var a = "stat-".concat(n.eventType, "-").concat(n.result);
                (n.eventType !== "delta-join" &&
                  n.eventType !== "delta-leave" &&
                  n.eventType !== "delta-publish") ||
                  (a = "".concat(n.eventType, ":").concat(n.delta)),
                  this.uploadEvent({ log: a, userId: n.userId }),
                  n.result === "failed" &&
                    ((a = "stat-"
                      .concat(n.eventType, "-")
                      .concat(n.result, "-")
                      .concat(n.code)),
                    this.uploadEvent({
                      log: a,
                      userId: n.userId,
                      error: n.error,
                    }));
              },
            },
            {
              key: "uploadEvent",
              value: function (n) {
                var a = n.log,
                  c = n.userId,
                  s = n.error,
                  l = {
                    timestamp: zk(),
                    sdkAppId: this.configs_.sdkAppId,
                    userId: c || this.configs_.userId,
                    version: this.configs_.version,
                    log: a,
                  };
                s && (l.errorInfo = s.message),
                  this.sendRequest(Wp(this.configs_.sdkAppId, pT), l);
              },
            },
            {
              key: "sendRequest",
              value: function (n, a) {
                var c = this;
                ft.getIsAbleToUpload()
                  ? qp({ url: n, body: JSON.stringify(a) }).catch(
                      function () {}
                    )
                  : setTimeout(function () {
                      c.sendRequest(n, a);
                    }, 1e3);
              },
            },
          ]),
          u
        );
      })(),
      gt = new vF(),
      mF = mr,
      gF = Ts;
    Ut(
      {
        target: "Date",
        proto: !0,
        arity: 1,
        forced: st(function () {
          return (
            /* @__PURE__ */ new Date(NaN).toJSON() !== null ||
            Date.prototype.toJSON.call({
              toISOString: function () {
                return 1;
              },
            }) !== 1
          );
        }),
      },
      {
        toJSON: function (e) {
          var n = mF(this),
            a = gF(n, "number");
          return typeof a != "number" || isFinite(a) ? n.toISOString() : null;
        },
      }
    );
    var _F = Re;
    Ut(
      { target: "URL", proto: !0, enumerable: !0 },
      {
        toJSON: function () {
          return _F(URL.prototype.toString, this);
        },
      }
    );
    var yF = Ut,
      Vy = He,
      bF = Lr,
      SF = t2,
      wF = $w,
      _I = st,
      kF = RangeError,
      yI = String,
      bI = Math.floor,
      Fy = Vy(wF),
      SI = Vy("".slice),
      ah = Vy((1).toFixed),
      Jc = function (e, n, a) {
        return n === 0
          ? a
          : n % 2 == 1
          ? Jc(e, n - 1, a * e)
          : Jc(e * e, n / 2, a);
      },
      $c = function (e, n, a) {
        for (var c = -1, s = a; ++c < 6; )
          (s += n * e[c]), (e[c] = s % 1e7), (s = bI(s / 1e7));
      },
      jy = function (e, n) {
        for (var a = 6, c = 0; --a >= 0; )
          (c += e[a]), (e[a] = bI(c / n)), (c = (c % n) * 1e7);
      },
      wI = function (e) {
        for (var n = 6, a = ""; --n >= 0; )
          if (a !== "" || n === 0 || e[n] !== 0) {
            var c = yI(e[n]);
            a = a === "" ? c : a + Fy("0", 7 - c.length) + c;
          }
        return a;
      };
    yF(
      {
        target: "Number",
        proto: !0,
        forced:
          _I(function () {
            return (
              ah(8e-5, 3) !== "0.000" ||
              ah(0.9, 0) !== "1" ||
              ah(1.255, 2) !== "1.25" ||
              ah(1000000000000000100, 0) !== "1000000000000000128"
            );
          }) ||
          !_I(function () {
            ah({});
          }),
      },
      {
        toFixed: function (e) {
          var n,
            a,
            c,
            s,
            l = SF(this),
            h = bF(e),
            v = [0, 0, 0, 0, 0, 0],
            g = "",
            _ = "0";
          if (h < 0 || h > 20) throw kF("Incorrect fraction digits");
          if (l != l) return "NaN";
          if (l <= -1e21 || l >= 1e21) return yI(l);
          if ((l < 0 && ((g = "-"), (l = -l)), l > 1e-21))
            if (
              ((a =
                (n =
                  (function (b) {
                    for (var C = 0, N = b; N >= 4096; ) (C += 12), (N /= 4096);
                    for (; N >= 2; ) (C += 1), (N /= 2);
                    return C;
                  })(l * Jc(2, 69, 1)) - 69) < 0
                  ? l * Jc(2, -n, 1)
                  : l / Jc(2, n, 1)),
              (a *= 4503599627370496),
              (n = 52 - n) > 0)
            ) {
              for ($c(v, 0, a), c = h; c >= 7; ) $c(v, 1e7, 0), (c -= 7);
              for ($c(v, Jc(10, c, 1), 0), c = n - 1; c >= 23; )
                jy(v, 1 << 23), (c -= 23);
              jy(v, 1 << c), $c(v, 1, 1), jy(v, 2), (_ = wI(v));
            } else $c(v, 0, a), $c(v, 1 << -n, 0), (_ = wI(v) + Fy("0", h));
          return (_ =
            h > 0
              ? g +
                ((s = _.length) <= h
                  ? "0." + Fy("0", h - s) + _
                  : SI(_, 0, s - h) + "." + SI(_, s - h))
              : g + _);
        },
      }
    );
    var By = null,
      zy = !0;
    function is(u) {
      Ji(u) && u !== zy && ((zy = u), ft.info("setIsNeedToSchedule " + u));
    }
    function TF(u, e) {
      try {
        if (PerformanceObserver) {
          var n = er(),
            a = Qp(u, hn),
            c = Qp(u, qi),
            s = new PerformanceObserver(function (l) {
              l.getEntries().forEach(function (h) {
                if (h.startTime >= n && (h.name === a || h.name === c)) {
                  var v = h.name === a ? hn : qi;
                  if (h.code && h.code !== 200)
                    return void ft.warn(
                      ""
                        .concat(v, " schedule with code ")
                        .concat(h.code, ", ")
                        .concat(JSON.stringify(h.toJSON()))
                    );
                  var g = h.responseEnd - h.startTime,
                    _ = [
                      h.domainLookupStart - h.startTime,
                      h.domainLookupEnd - h.domainLookupStart,
                      h.requestStart - h.secureConnectionStart,
                      h.secureConnectionStart - h.connectStart,
                      h.responseStart - h.requestStart,
                      h.responseEnd - h.responseStart,
                    ].map(function (b) {
                      return b.toFixed(1);
                    });
                  s.disconnect(),
                    gt.uploadEvent({
                      log: "stat-schedule-net:"
                        .concat(g.toFixed(1), "(")
                        .concat(_.join("->"), ") ")
                        .concat(v),
                      userId: e,
                    });
                }
              });
            });
          s.observe({ type: "resource", buffered: !0 });
        }
      } catch (l) {}
    }
    function EF(u) {
      return Hy.apply(this, arguments);
    }
    function Hy() {
      return (
        (Hy = I(
          m().mark(function u(e) {
            var n, a, c, s, l, h, v, g, _, b, C, N, z;
            return m().wrap(
              function (F) {
                for (;;)
                  switch ((F.prev = F.next)) {
                    case 0:
                      if (
                        ((n = e.userId),
                        (a = e.sdkAppId),
                        (c = e.useStringRoomId),
                        (s = e.roomId),
                        (l = e.userSig),
                        zy || !By)
                      ) {
                        F.next = 3;
                        break;
                      }
                      return F.abrupt("return", { isCached: !0, result: By });
                    case 3:
                      return (
                        (h = { delta: 0, count: [1, 1], msg: [] }),
                        (F.prev = 4),
                        (v = new FormData()).append("userId", String(n)),
                        v.append("sdkAppId", String(a)),
                        v.append("isStrGroupId", c),
                        v.append("groupId", String(s)),
                        v.append("sdkVersion", ba),
                        v.append("userSig", String(l)),
                        E0 && v.append("oversea", !0),
                        TF(a, n),
                        (g = er()),
                        (F.next = 17),
                        RF(v, h, a)
                      );
                    case 17:
                      return (
                        (_ = F.sent).config &&
                          (_.config.loggerDomain && p0(_.config.loggerDomain),
                          Ji(_.config.scheduleCache) &&
                            is(!_.config.scheduleCache)),
                        (h.delta = er() - g),
                        kI({ stat: h, userId: n }),
                        (By = _),
                        F.abrupt("return", { isCached: !1, result: _ })
                      );
                    case 25:
                      throw (
                        ((F.prev = 25),
                        (F.t0 = F.catch(4)),
                        (b = Hc(F.t0) ? F.t0[0] : F.t0),
                        (C = Ki(b.code) ? b.code : 0),
                        (N = "schedule failed".concat(
                          b.message ? ": ".concat(b.message) : ""
                        )),
                        (z = new De({
                          code: Oe.SCHEDULE_FAILED,
                          extraCode: C,
                          message: Fe({ key: iE, data: { error: N, code: C } }),
                        })),
                        ft.error(z),
                        kI({ stat: h, userId: n, roomId: s, error: z }),
                        z)
                      );
                    case 34:
                    case "end":
                      return F.stop();
                  }
              },
              u,
              null,
              [[4, 25]]
            );
          })
        )),
        Hy.apply(this, arguments)
      );
    }
    function kI(u) {
      var e = u.stat,
        n = u.userId,
        a = u.error;
      a
        ? gt.logFailedEvent({ eventType: MT, error: a, userId: n })
        : gt.logSuccessEvent({ eventType: MT, delta: e.delta, userId: n }),
        gt.uploadEvent({
          log: "stat-schedule:" + JSON.stringify(e),
          userId: n,
        });
    }
    function Qp(u) {
      var e,
        n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : hn;
      return (
        (e = E0 || (OE(u) ? (n === hn ? XM : e7) : n === hn ? ZM : QM)),
        "https://".concat(e, "/api/v1/config")
      );
    }
    function IF(u, e, n) {
      return new Promise(function (a, c) {
        qp({ url: u, body: e, timeout: n.timeout })
          .then(function (s) {
            s.data.code === 0
              ? a(s.data.data)
              : c({ code: s.data.code, message: s.data.msg });
          })
          .catch(c);
      });
    }
    Ee.on(fu, function () {
      return is(!0);
    }),
      Ee.on(TV, function () {
        return is(!0);
      }),
      Ee.on(EV, function () {
        return is(!0);
      }),
      Ee.on(HE, function () {
        return is(!0);
      }),
      Ee.on(Yp, function (u) {
        u.state === m0 && is(!0);
      });
    var TI = function (e, n) {
      return th({
        retryFunction: IF,
        settings: { retries: 3, timeout: 0 },
        onError: n,
        onRetrying: e,
      });
    };
    function RF(u, e, n) {
      return new Promise(function (a, c) {
        var s,
          l = null;
        ((s = [
          TI(
            function (h) {
              return (e.count[0] = h + 1);
            },
            function (h, v) {
              (e.msg[0] = h.message), l || v();
            }
          )(Qp(n, hn), u, {
            get timeout() {
              return 1e3 * Gp(2 + e.count[0]);
            },
          }),
          TI(
            function (h) {
              return (e.count[1] = h + 1);
            },
            function (h, v) {
              (e.msg[1] = h.message), l || v();
            }
          )(Qp(n, qi), u, {
            get timeout() {
              return 1e3 * Gp(2 + e.count[1]);
            },
          }),
        ]),
        new Promise(function (h, v) {
          var g = [];
          s.forEach(function (_) {
            _.then(h).catch(function (b) {
              g.push(b), g.length === s.length && v(g);
            });
          });
        }))
          .then(function (h) {
            a((l = h));
          })
          .catch(c);
      });
    }
    var CF = (function () {
        function u(a) {
          B(this, u),
            (this.client_ = a.client),
            (this.sdkAppId_ = a.sdkAppId),
            (this.userId_ = a.userId),
            (this.userSig_ = a.userSig),
            (this.url_ = a.url),
            (this.backupUrl_ = a.backupUrl);
          var c = "?sdkAppId="
              .concat(encodeURIComponent(this.sdkAppId_), "&userId=")
              .concat(encodeURIComponent(this.userId_), "&userSig=")
              .concat(encodeURIComponent(this.userSig_), "&roomId=")
              .concat(encodeURIComponent(a.roomId)),
            s = this.client_.getSystemResult();
          if (s && s.detail) {
            var l = s.detail,
              h = l.isH264EncodeSupported,
              v = l.isVp8EncodeSupported,
              g = l.isH264DecodeSupported,
              _ = l.isVp8DecodeSupported;
            c += "&enc264="
              .concat(Number(h), "&dec264=")
              .concat(Number(g), "&encVp8=")
              .concat(Number(v), "&decVp8=")
              .concat(Number(_));
          }
          a.signalDomainWhenUnifiedProxy &&
            (c += "&signalDomain=".concat(
              encodeURIComponent(a.signalDomainWhenUnifiedProxy)
            )),
            (this.urlParams = c),
            (this.isConnected_ = !1),
            (this.isConnecting_ = !1),
            (this.socketInUse_ = null),
            (this.socket_ = null),
            (this.backupSocket_ = null),
            (this.backupTimer_ = -1),
            (this.signalInfo_ = {}),
            (this.currentState_ = Zp),
            (this.reconnectionCount_ = 0),
            (this.reconnectionTimer_ = -1),
            (this.lastMessageTime_ = -1),
            (this.seq_ = 0),
            (this.log_ = ft.createLogger({
              id: "ws|" + this.userId_,
              userId: this.userId_,
              sdkAppId: this.sdkAppId_,
            })),
            (this.emitter_ = new rs());
        }
        var e, n;
        return (
          oe(u, [
            {
              key: "urlWithParam_",
              get: function () {
                return "".concat(this.url_).concat(this.urlParams);
              },
            },
            {
              key: "backupUrlWithParam_",
              get: function () {
                return "".concat(this.backupUrl_).concat(this.urlParams);
              },
            },
            {
              key: "isOnline",
              get: function () {
                return (
                  this.currentState_ === rh &&
                  Date.now() - this.lastMessageTime_ < 12e3
                );
              },
            },
            {
              key: "connect",
              value: function () {
                var c = this;
                return new Promise(function (s, l) {
                  c.log_.info("connect to url: ".concat(c.urlWithParam_)),
                    c.emitConnectionStateChanged(dI),
                    (c.socket_ = new WebSocket(c.urlWithParam_)),
                    c.bindSocket(c.socket_),
                    (c.backupTimer_ = setTimeout(function () {
                      c.isConnected_ ||
                        (c.log_.info("trying to connect to backupUrl"),
                        c.tryConnectBackup());
                    }, 5e3));
                  var h = setTimeout(function () {
                    c.close(),
                      l(
                        new De({
                          code: Oe.JOIN_ROOM_FAILED,
                          message: "join room timeout",
                        })
                      );
                  }, 1e4);
                  c.once(nh, function () {
                    clearTimeout(h), s();
                  }),
                    c.once(Ly, function (v) {
                      clearTimeout(h), l(v);
                    });
                });
              },
            },
            {
              key: "tryConnectBackup",
              value: function () {
                this.backupSocket_ ||
                  (this.unbindAndCloseSocket(hn),
                  this.log_.debug(
                    "try to connect to url: ".concat(this.backupUrlWithParam_)
                  ),
                  (this.backupSocket_ = new WebSocket(
                    this.backupUrlWithParam_
                  )),
                  this.bindSocket(this.backupSocket_));
              },
            },
            {
              key: "bindSocket",
              value: function (c) {
                (c.onopen = this.onopen.bind(this)),
                  (c.onclose = this.onclose.bind(this)),
                  (c.onerror = this.onerror.bind(this)),
                  (c.onmessage = this.onmessage.bind(this));
              },
            },
            {
              key: "unbindSocket",
              value: function (c) {
                (c.onopen = function () {}),
                  (c.onclose = function () {}),
                  (c.onerror = function () {}),
                  (c.onmessage = function () {});
              },
            },
            {
              key: "unbindAndCloseSocket",
              value: function (c) {
                if (c === hn) {
                  if (this.socket_) {
                    this.unbindSocket(this.socket_);
                    try {
                      this.socket_.close(1e3);
                    } catch (s) {}
                    this.socket_ = null;
                  }
                } else if (this.backupSocket_) {
                  this.unbindSocket(this.backupSocket_);
                  try {
                    this.backupSocket_.close(1e3);
                  } catch (s) {}
                  this.backupSocket_ = null;
                }
              },
            },
            {
              key: "clearBackupTimer",
              value: function () {
                this.backupTimer_ !== -1 &&
                  (clearTimeout(this.backupTimer_), (this.backupTimer_ = -1));
              },
            },
            {
              key: "clearReconnectionTimer",
              value: function () {
                this.reconnectionTimer_ !== -1 &&
                  (clearTimeout(this.reconnectionTimer_),
                  (this.reconnectionTimer_ = -1));
              },
            },
            {
              key: "onopen",
              value: function (c) {
                if (!this.isConnected_) {
                  (this.isConnected_ = !0),
                    (this.isConnecting_ = !1),
                    this.isReconnecting_ &&
                      ho(this.signalInfo_) &&
                      this.stopReconnection(),
                    this.clearBackupTimer(),
                    c.target === this.socket_
                      ? (this.unbindAndCloseSocket(qi),
                        (this.socketInUse_ = this.socket_))
                      : (this.unbindAndCloseSocket(hn),
                        (this.socketInUse_ = this.backupSocket_));
                  var s = c.target.url;
                  this.log_.info("websocket[".concat(s, "] is connected")),
                    this.currentState_ === dI
                      ? this.addSignalEvent(X9, "signal channel is connected")
                      : this.currentState_ === My &&
                        this.addSignalEvent(
                          rF,
                          "signal channel reconnect success"
                        ),
                    this.emitConnectionStateChanged(rh),
                    this.emitter_.emit(nh);
                }
              },
            },
            {
              key: "onclose",
              value: function (c) {
                var s = c.target.url,
                  l = c.target === this.socketInUse_;
                if (
                  (this.log_.info(
                    "websocket["
                      .concat(s, " InUse: ")
                      .concat(l, "] is closed with code: ")
                      .concat(c.code)
                  ),
                  l &&
                    ((this.isConnected_ = !1),
                    this.emitConnectionStateChanged(Zp),
                    this.addSignalEvent(Q9, "signal channel is disconnected"),
                    !c.wasClean || c.code !== 1e3))
                ) {
                  this.log_.warn(
                    "onclose code:".concat(c.code, " reason:").concat(c.reason)
                  ),
                    this.log_.warn(
                      "close current websocket and schedule a reconnect timeout"
                    ),
                    (this.socketInUse_.onclose = function () {}),
                    this.socketInUse_.close(4011);
                  var h = this.socketInUse_ === this.socket_;
                  (this.socket_ =
                    this.backupSocket_ =
                    this.socketInUse_ =
                      null),
                    this.reconnect(h ? qi : hn);
                }
              },
            },
            {
              key: "onerror",
              value: function (c) {
                var s = c.target.url;
                if (
                  (this.log_.error("websocket[".concat(s, "] error observed")),
                  this.isConnected_)
                ) {
                  if (c.target === this.socketInUse_) {
                    (this.isConnected_ = !1),
                      this.unbindAndCloseSocket(hn),
                      this.unbindAndCloseSocket(qi);
                    var l = this.socketInUse_ === this.socket_;
                    (this.socketInUse_ = null), this.reconnect(l ? qi : hn);
                  }
                } else
                  this.isReconnecting_ ||
                    gt.logFailedEvent({
                      userId: this.client_.getUserId(),
                      eventType: y0,
                      code: Oe.UNKNOWN,
                    }),
                    c.target == this.socket_
                      ? (this.unbindAndCloseSocket(hn), this.reconnect(qi))
                      : (this.unbindAndCloseSocket(qi), this.reconnect(hn));
                (this.isConnecting_ = !1), (this.isConnected_ = !1);
              },
            },
            {
              key: "onmessage",
              value: function (c) {
                if (this.isConnected_) {
                  this.lastMessageTime_ = Date.now();
                  var s = JSON.parse(c.data),
                    l = s.cmd,
                    h = s.data,
                    v = Object.values(lo),
                    g = Object.keys(lo)[v.indexOf(l)],
                    _ = Cn[g];
                  switch (
                    (p9.includes(l) ||
                      (this.log_.debug("received msg: ".concat(c.data)),
                      this.log_.info(
                        "Received event: [ ".concat(
                          _ || "unknown cmd: " + l,
                          " ]"
                        )
                      )),
                    l)
                  ) {
                    case lo.CHANNEL_SETUP_RESULT:
                      if (s.code === 0)
                        (this.signalInfo_.clientIp = h.clientIp),
                          (this.signalInfo_.signalIp = h.signalInnerIp),
                          (this.signalInfo_.tinyId = s.tinyId),
                          h.svrTime &&
                            (function (C) {
                              D_ = C - /* @__PURE__ */ new Date().getTime();
                              var N = /* @__PURE__ */ new Date();
                              N.setTime(C),
                                ft.info(
                                  "baseTime from server: " +
                                    N +
                                    " offset: " +
                                    D_
                                );
                            })(h.svrTime),
                          this.log_.info("ChannelSetup Success"),
                          gt.logSuccessEvent({
                            userId: this.userId_,
                            eventType: y0,
                          }),
                          this.emitter_.emit(cI, {
                            signalInfo: this.signalInfo_,
                          });
                      else {
                        var b = new De({
                          code: Oe.SIGNAL_CHANNEL_SETUP_FAILED,
                          extraCode: s.code,
                          message: Fe({
                            key: _7,
                            data: { errorCode: s.code, errorMsg: s.message },
                          }),
                        });
                        this.log_.error(
                          "".concat(s.code, ", ").concat(s.message)
                        ),
                          this.close(),
                          gt.logFailedEvent({
                            userId: this.userId_,
                            eventType: y0,
                            error: b,
                          }),
                          this.emitter_.emit(lI, b);
                      }
                      break;
                    case lo.JOIN_ROOM_RESULT:
                      s.code === 0 &&
                        ((this.signalInfo_.relayIp = h.relayOuterIp),
                        (this.signalInfo_.relayInnerIp = h.relayInnerIp),
                        (this.signalInfo_.relayPort = h.relayPort),
                        this.log_.info(
                          "signalIp:"
                            .concat(this.signalInfo_.signalIp, " clientIp:")
                            .concat(this.signalInfo_.clientIp, " relayIp: ")
                            .concat(this.signalInfo_.relayIp)
                        )),
                        this.emitter_.emit(_, { data: s });
                      break;
                    case lo.CHANNEL_RECONNECT_RESULT:
                      s.code === 0
                        ? (this.log_.warn("reconnect success"),
                          this.stopReconnection(),
                          gt.logSuccessEvent({
                            userId: this.userId_,
                            eventType: xT,
                          }),
                          this.client_.syncUserList(),
                          this.client_.checkConnectionsToReconnect())
                        : (this.log_.warn(
                            "reconnect failed, "
                              .concat(s.code, " ")
                              .concat(s.message)
                          ),
                          this.client_.reJoin());
                      break;
                    default:
                      this.emitter_.emit(_, { data: s });
                  }
                }
              },
            },
            {
              key: "addSignalEvent",
              value: function (c, s) {
                Xr(this.userId_, {
                  eventId: c,
                  eventDesc: s,
                  timestamp: Ur(),
                  userId: this.userId_,
                  tinyId: this.signalInfo_.tinyId,
                });
              },
            },
            {
              key: "reconnect",
              value:
                ((n = I(
                  m().mark(function a() {
                    var c,
                      s,
                      l,
                      h,
                      v = this,
                      g = arguments;
                    return m().wrap(
                      function (_) {
                        for (;;)
                          switch ((_.prev = _.next)) {
                            case 0:
                              if (
                                ((c =
                                  g.length > 0 && g[0] !== void 0 ? g[0] : hn),
                                !this.isConnecting_ &&
                                  this.reconnectionTimer_ === -1)
                              ) {
                                _.next = 4;
                                break;
                              }
                              return (
                                this.log_.info(
                                  "signal channel is reconnecting, ignoring current reconnection"
                                ),
                                _.abrupt("return")
                              );
                            case 4:
                              if (
                                (Ee.emit(HE, this.client_),
                                !(this.reconnectionCount_ >= _0))
                              ) {
                                _.next = 12;
                                break;
                              }
                              return (
                                this.log_.warn(
                                  "SDK has tried reconnect signal channel for ".concat(
                                    _0,
                                    " times, but all failed. please check your network"
                                  )
                                ),
                                (s = new De({
                                  code: Oe.SIGNAL_CHANNEL_RECONNECTION_FAILED,
                                  message: Fe({ key: g7 }),
                                })),
                                gt.logFailedEvent({
                                  userId: this.client_.getUserId(),
                                  eventType: xT,
                                  error: s,
                                }),
                                this.addSignalEvent(
                                  iF,
                                  "signal channel reconnect fail"
                                ),
                                this.emitter_.emit(Ly, s),
                                _.abrupt("return")
                              );
                            case 12:
                              if (
                                ((this.isConnecting_ = !0),
                                this.reconnectionCount_++,
                                this.currentState_ !== My &&
                                  (this.emitConnectionStateChanged(My),
                                  this.addSignalEvent(
                                    nF,
                                    "signal channel is reconnecting"
                                  )),
                                this.log_.warn(
                                  "reconnecting to "
                                    .concat(c, " signal channel [")
                                    .concat(this.reconnectionCount_, "/")
                                    .concat(_0, "]")
                                ),
                                !(
                                  this.reconnectionCount_ >= 3 &&
                                  this.reconnectionCount_ % 3 == 0
                                ))
                              ) {
                                _.next = 20;
                                break;
                              }
                              return (
                                this.log_.warn("re-schedule to get new ws url"),
                                (_.next = 20),
                                this.reGetSignalChannelUrl()
                              );
                            case 20:
                              (l = this.getReconnectionUrl(c)),
                                c === hn
                                  ? ((this.socket_ = new WebSocket(l)),
                                    this.bindSocket(this.socket_))
                                  : ((this.backupSocket_ = new WebSocket(l)),
                                    this.bindSocket(this.backupSocket_)),
                                (h = ty(this.reconnectionCount_)),
                                (this.reconnectionTimer_ = setTimeout(
                                  function () {
                                    v.log_.warn(
                                      "reconnect "
                                        .concat(c, " signal channel timeout(")
                                        .concat(
                                          h / 1e3,
                                          "s), close and try again"
                                        )
                                    ),
                                      (v.isConnecting_ = !1),
                                      v.clearReconnectionTimer(),
                                      v.unbindAndCloseSocket(c),
                                      v.reconnect(c === hn ? qi : hn);
                                  },
                                  h
                                ));
                            case 24:
                            case "end":
                              return _.stop();
                          }
                      },
                      a,
                      this
                    );
                  })
                )),
                function () {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "reGetSignalChannelUrl",
              value:
                ((e = I(
                  m().mark(function a() {
                    var c, s, l, h;
                    return m().wrap(
                      function (v) {
                        for (;;)
                          switch ((v.prev = v.next)) {
                            case 0:
                              if (
                                ((v.prev = 0),
                                !this.client_.getWSProxy() &&
                                  !this.client_.getUnifiedProxy())
                              ) {
                                v.next = 3;
                                break;
                              }
                              return v.abrupt("return");
                            case 3:
                              return (
                                is(!0),
                                (v.next = 6),
                                this.client_.schedule(this.client_.getRoomId())
                              );
                            case 6:
                              (c = this.client_.getSignalChannelUrl()),
                                (s = c.mainUrl),
                                (l = c.backupUrl),
                                (this.url_ = s),
                                (this.backupUrl_ = l),
                                (h = new URLSearchParams(this.urlParams)).has(
                                  "signalDomain"
                                ) &&
                                  (h.set("signalDomain", s),
                                  (this.urlParams = h.toString())),
                                (v.next = 15);
                              break;
                            case 13:
                              (v.prev = 13), (v.t0 = v.catch(0));
                            case 15:
                            case "end":
                              return v.stop();
                          }
                      },
                      a,
                      this,
                      [[0, 13]]
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "isConnected",
              value: function () {
                return this.isConnected_;
              },
            },
            {
              key: "isReconnecting_",
              get: function () {
                return this.reconnectionTimer_ !== -1;
              },
            },
            {
              key: "getReconnectionUrl",
              value: function (c) {
                var s =
                  c === hn ? this.urlWithParam_ : this.backupUrlWithParam_;
                if (!ho(this.signalInfo_) && s.indexOf("&rc=1") === -1) {
                  var l = this.client_.getRoomId(),
                    h = this.client_.getUseStringRoomId();
                  s += "&rc=1&relayInnerIp="
                    .concat(this.signalInfo_.relayInnerIp, "&relayOuterIp=")
                    .concat(this.signalInfo_.relayIp, "&relayPort=")
                    .concat(this.signalInfo_.relayPort, "&roomId=")
                    .concat(l, "&useStringRoomId=")
                    .concat(h);
                }
                return s;
              },
            },
            {
              key: "send",
              value: function (c) {
                var s =
                  arguments.length > 1 && arguments[1] !== void 0
                    ? arguments[1]
                    : {};
                if (this.isConnected_) {
                  var l = {
                    cmd: c,
                    data: s,
                    userId: this.userId_,
                    tinyId: this.signalInfo_.tinyId,
                    seq: ++this.seq_,
                  };
                  return this.socketInUse_.send(JSON.stringify(l)), l.seq;
                }
              },
            },
            {
              key: "sendWaitForResponse",
              value: function (c) {
                var s = this,
                  l = c.command,
                  h = c.data,
                  v = c.timeout,
                  g = v === void 0 ? 5e3 : v,
                  _ = c.responseCommand,
                  b = c.commandDesc,
                  C = c.enableLog,
                  N = C === void 0 || C;
                return new Promise(function (z, F) {
                  var U = setTimeout(function () {
                      s.off(_, E);
                      var L = new De({
                        code: Oe.API_CALL_TIMEOUT,
                        message: Fe({
                          key: m7,
                          data: { commandDesc: b, command: l },
                        }),
                      });
                      N && s.log_.warn(L), F(L);
                    }, g),
                    E = function L($) {
                      $.data.seq === A && (clearTimeout(U), s.off(_, L), z($));
                    };
                  s.on(_, E);
                  var A = s.send(l, h);
                });
              },
            },
            {
              key: "sendWaitForResponseWithRetry",
              value: function () {
                var c = this,
                  s = arguments.length <= 0 ? void 0 : arguments[0],
                  l = s.commandDesc,
                  h = s.command,
                  v = s.retries,
                  g = v === void 0 ? 0 : v,
                  _ = s.retryTimeout,
                  b = _ === void 0 ? 0 : _;
                return th({
                  retryFunction: this.sendWaitForResponse,
                  onRetrying: function (N) {
                    c.log_.warn(
                      ""
                        .concat(l || h, " timeout observed, retrying [")
                        .concat(N, "/")
                        .concat(g, "]")
                    );
                  },
                  settings: { retries: g, timeout: b },
                  context: this,
                }).apply(void 0, arguments);
              },
            },
            {
              key: "getCurrentState",
              value: function () {
                return this.currentState_;
              },
            },
            {
              key: "getSignalInfo",
              value: function () {
                return this.signalInfo_;
              },
            },
            {
              key: "stopReconnection",
              value: function () {
                this.isReconnecting_ &&
                  ((this.reconnectionCount_ = 0),
                  this.clearReconnectionTimer());
              },
            },
            {
              key: "close",
              value: function () {
                this.log_.info("close SignalChannel"),
                  this.clearBackupTimer(),
                  this.stopReconnection(),
                  (this.signalInfo_ = {}),
                  (this.isConnecting_ = !1),
                  (this.isConnected_ = !1),
                  (this.socketInUse_ = null),
                  this.unbindAndCloseSocket(hn),
                  this.unbindAndCloseSocket(qi),
                  this.emitConnectionStateChanged(Zp);
              },
            },
            {
              key: "on",
              value: function (c, s, l) {
                this.emitter_.on(c, s, l);
              },
            },
            {
              key: "removeListener",
              value: function (c, s, l) {
                this.emitter_.removeListener(c, s, l);
              },
            },
            {
              key: "once",
              value: function (c, s, l) {
                this.emitter_.once(c, s, l);
              },
            },
            {
              key: "off",
              value: function (c, s, l) {
                this.emitter_.off(c, s, l);
              },
            },
            {
              key: "emitConnectionStateChanged",
              value: function (c) {
                c !== this.currentState_ &&
                  (this.emitter_.emit(Ny, {
                    prevState: this.currentState_,
                    state: c,
                  }),
                  (this.currentState_ = c));
              },
            },
          ]),
          u
        );
      })(),
      AF = Ut,
      xF = Mr.find,
      OF = dc,
      EI = "find",
      II = !0;
    EI in [] &&
      Array(1).find(function () {
        II = !1;
      }),
      AF(
        { target: "Array", proto: !0, forced: II },
        {
          find: function (e) {
            return xF(this, e, arguments.length > 1 ? arguments[1] : void 0);
          },
        }
      ),
      OF(EI);
    var $i = {},
      RI = {},
      Wy = { exports: {} },
      CI = (Wy.exports = {
        v: [{ name: "version", reg: /^(\d*)$/ }],
        o: [
          {
            name: "origin",
            reg: /^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,
            names: [
              "username",
              "sessionId",
              "sessionVersion",
              "netType",
              "ipVer",
              "address",
            ],
            format: "%s %s %d %s IP%d %s",
          },
        ],
        s: [{ name: "name" }],
        i: [{ name: "description" }],
        u: [{ name: "uri" }],
        e: [{ name: "email" }],
        p: [{ name: "phone" }],
        z: [{ name: "timezones" }],
        r: [{ name: "repeats" }],
        t: [
          {
            name: "timing",
            reg: /^(\d*) (\d*)/,
            names: ["start", "stop"],
            format: "%d %d",
          },
        ],
        c: [
          {
            name: "connection",
            reg: /^IN IP(\d) (\S*)/,
            names: ["version", "ip"],
            format: "IN IP%d %s",
          },
        ],
        b: [
          {
            push: "bandwidth",
            reg: /^(TIAS|AS|CT|RR|RS):(\d*)/,
            names: ["type", "limit"],
            format: "%s:%s",
          },
        ],
        m: [
          {
            reg: /^(\w*) (\d*) ([\w/]*)(?: (.*))?/,
            names: ["type", "port", "protocol", "payloads"],
            format: "%s %d %s %s",
          },
        ],
        a: [
          {
            push: "rtp",
            reg: /^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,
            names: ["payload", "codec", "rate", "encoding"],
            format: function (e) {
              return e.encoding
                ? "rtpmap:%d %s/%s/%s"
                : e.rate
                ? "rtpmap:%d %s/%s"
                : "rtpmap:%d %s";
            },
          },
          {
            push: "fmtp",
            reg: /^fmtp:(\d*) ([\S| ]*)/,
            names: ["payload", "config"],
            format: "fmtp:%d %s",
          },
          { name: "control", reg: /^control:(.*)/, format: "control:%s" },
          {
            name: "rtcp",
            reg: /^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,
            names: ["port", "netType", "ipVer", "address"],
            format: function (e) {
              return e.address != null ? "rtcp:%d %s IP%d %s" : "rtcp:%d";
            },
          },
          {
            push: "rtcpFbTrrInt",
            reg: /^rtcp-fb:(\*|\d*) trr-int (\d*)/,
            names: ["payload", "value"],
            format: "rtcp-fb:%s trr-int %d",
          },
          {
            push: "rtcpFb",
            reg: /^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,
            names: ["payload", "type", "subtype"],
            format: function (e) {
              return e.subtype != null ? "rtcp-fb:%s %s %s" : "rtcp-fb:%s %s";
            },
          },
          {
            push: "ext",
            reg: /^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,
            names: ["value", "direction", "encrypt-uri", "uri", "config"],
            format: function (e) {
              return (
                "extmap:%d" +
                (e.direction ? "/%s" : "%v") +
                (e["encrypt-uri"] ? " %s" : "%v") +
                " %s" +
                (e.config ? " %s" : "")
              );
            },
          },
          { name: "extmapAllowMixed", reg: /^(extmap-allow-mixed)/ },
          {
            push: "crypto",
            reg: /^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,
            names: ["id", "suite", "config", "sessionConfig"],
            format: function (e) {
              return e.sessionConfig != null
                ? "crypto:%d %s %s %s"
                : "crypto:%d %s %s";
            },
          },
          { name: "setup", reg: /^setup:(\w*)/, format: "setup:%s" },
          {
            name: "connectionType",
            reg: /^connection:(new|existing)/,
            format: "connection:%s",
          },
          { name: "mid", reg: /^mid:([^\s]*)/, format: "mid:%s" },
          { name: "msid", reg: /^msid:(.*)/, format: "msid:%s" },
          { name: "ptime", reg: /^ptime:(\d*(?:\.\d*)*)/, format: "ptime:%d" },
          {
            name: "maxptime",
            reg: /^maxptime:(\d*(?:\.\d*)*)/,
            format: "maxptime:%d",
          },
          { name: "direction", reg: /^(sendrecv|recvonly|sendonly|inactive)/ },
          { name: "icelite", reg: /^(ice-lite)/ },
          { name: "iceUfrag", reg: /^ice-ufrag:(\S*)/, format: "ice-ufrag:%s" },
          { name: "icePwd", reg: /^ice-pwd:(\S*)/, format: "ice-pwd:%s" },
          {
            name: "fingerprint",
            reg: /^fingerprint:(\S*) (\S*)/,
            names: ["type", "hash"],
            format: "fingerprint:%s %s",
          },
          {
            push: "candidates",
            reg: /^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,
            names: [
              "foundation",
              "component",
              "transport",
              "priority",
              "ip",
              "port",
              "type",
              "raddr",
              "rport",
              "tcptype",
              "generation",
              "network-id",
              "network-cost",
            ],
            format: function (e) {
              var n = "candidate:%s %d %s %d %s %d typ %s";
              return (
                (n += e.raddr != null ? " raddr %s rport %d" : "%v%v"),
                (n += e.tcptype != null ? " tcptype %s" : "%v"),
                e.generation != null && (n += " generation %d"),
                (n += e["network-id"] != null ? " network-id %d" : "%v"),
                (n += e["network-cost"] != null ? " network-cost %d" : "%v")
              );
            },
          },
          { name: "endOfCandidates", reg: /^(end-of-candidates)/ },
          {
            name: "remoteCandidates",
            reg: /^remote-candidates:(.*)/,
            format: "remote-candidates:%s",
          },
          {
            name: "iceOptions",
            reg: /^ice-options:(\S*)/,
            format: "ice-options:%s",
          },
          {
            push: "ssrcs",
            reg: /^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,
            names: ["id", "attribute", "value"],
            format: function (e) {
              var n = "ssrc:%d";
              return (
                e.attribute != null &&
                  ((n += " %s"), e.value != null && (n += ":%s")),
                n
              );
            },
          },
          {
            push: "ssrcGroups",
            reg: /^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,
            names: ["semantics", "ssrcs"],
            format: "ssrc-group:%s %s",
          },
          {
            name: "msidSemantic",
            reg: /^msid-semantic:\s?(\w*) (\S*)/,
            names: ["semantic", "token"],
            format: "msid-semantic: %s %s",
          },
          {
            push: "groups",
            reg: /^group:(\w*) (.*)/,
            names: ["type", "mids"],
            format: "group:%s %s",
          },
          { name: "rtcpMux", reg: /^(rtcp-mux)/ },
          { name: "rtcpRsize", reg: /^(rtcp-rsize)/ },
          {
            name: "sctpmap",
            reg: /^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,
            names: ["sctpmapNumber", "app", "maxMessageSize"],
            format: function (e) {
              return e.maxMessageSize != null
                ? "sctpmap:%s %s %s"
                : "sctpmap:%s %s";
            },
          },
          {
            name: "xGoogleFlag",
            reg: /^x-google-flag:([^\s]*)/,
            format: "x-google-flag:%s",
          },
          {
            push: "rids",
            reg: /^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,
            names: ["id", "direction", "params"],
            format: function (e) {
              return e.params ? "rid:%s %s %s" : "rid:%s %s";
            },
          },
          {
            push: "imageattrs",
            reg: new RegExp(
              "^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"
            ),
            names: ["pt", "dir1", "attrs1", "dir2", "attrs2"],
            format: function (e) {
              return "imageattr:%s %s %s" + (e.dir2 ? " %s %s" : "");
            },
          },
          {
            name: "simulcast",
            reg: new RegExp(
              "^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"
            ),
            names: ["dir1", "list1", "dir2", "list2"],
            format: function (e) {
              return "simulcast:%s %s" + (e.dir2 ? " %s %s" : "");
            },
          },
          {
            name: "simulcast_03",
            reg: /^simulcast:[\s\t]+([\S+\s\t]+)$/,
            names: ["value"],
            format: "simulcast: %s",
          },
          {
            name: "framerate",
            reg: /^framerate:(\d+(?:$|\.\d+))/,
            format: "framerate:%s",
          },
          {
            name: "sourceFilter",
            reg: /^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,
            names: [
              "filterMode",
              "netType",
              "addressTypes",
              "destAddress",
              "srcList",
            ],
            format: "source-filter: %s %s %s %s %s",
          },
          { name: "bundleOnly", reg: /^(bundle-only)/ },
          { name: "label", reg: /^label:(.+)/, format: "label:%s" },
          {
            name: "sctpPort",
            reg: /^sctp-port:(\d+)$/,
            format: "sctp-port:%s",
          },
          {
            name: "maxMessageSize",
            reg: /^max-message-size:(\d+)$/,
            format: "max-message-size:%s",
          },
          {
            push: "tsRefClocks",
            reg: /^ts-refclk:([^\s=]*)(?:=(\S*))?/,
            names: ["clksrc", "clksrcExt"],
            format: function (e) {
              return "ts-refclk:%s" + (e.clksrcExt != null ? "=%s" : "");
            },
          },
          {
            name: "mediaClk",
            reg: /^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,
            names: [
              "id",
              "mediaClockName",
              "mediaClockValue",
              "rateNumerator",
              "rateDenominator",
            ],
            format: function (e) {
              var n = "mediaclk:";
              return (
                (n += e.id != null ? "id=%s %s" : "%v%s"),
                (n += e.mediaClockValue != null ? "=%s" : ""),
                (n += e.rateNumerator != null ? " rate=%s" : ""),
                (n += e.rateDenominator != null ? "/%s" : "")
              );
            },
          },
          { name: "keywords", reg: /^keywds:(.+)$/, format: "keywds:%s" },
          { name: "content", reg: /^content:(.+)/, format: "content:%s" },
          {
            name: "bfcpFloorCtrl",
            reg: /^floorctrl:(c-only|s-only|c-s)/,
            format: "floorctrl:%s",
          },
          { name: "bfcpConfId", reg: /^confid:(\d+)/, format: "confid:%s" },
          { name: "bfcpUserId", reg: /^userid:(\d+)/, format: "userid:%s" },
          {
            name: "bfcpFloorId",
            reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,
            names: ["id", "mStream"],
            format: "floorid:%s mstrm:%s",
          },
          { push: "invalid", names: ["value"] },
        ],
      });
    Object.keys(CI).forEach(function (u) {
      CI[u].forEach(function (e) {
        e.reg || (e.reg = /(.*)/), e.format || (e.format = "%s");
      });
    }),
      (function (u) {
        var e = function (h) {
            return String(Number(h)) === h ? Number(h) : h;
          },
          n = function (h, v, g) {
            var _ = h.name && h.names;
            h.push && !v[h.push]
              ? (v[h.push] = [])
              : _ && !v[h.name] && (v[h.name] = {});
            var b = h.push ? {} : _ ? v[h.name] : v;
            (function (C, N, z, F) {
              if (F && !z) N[F] = e(C[1]);
              else
                for (var U = 0; U < z.length; U += 1)
                  C[U + 1] != null && (N[z[U]] = e(C[U + 1]));
            })(g.match(h.reg), b, h.names, h.name),
              h.push && v[h.push].push(b);
          },
          a = Wy.exports,
          c = RegExp.prototype.test.bind(/^([a-z])=(.*)/);
        u.parse = function (l) {
          var h = {},
            v = [],
            g = h;
          return (
            l
              .split(/(\r\n|\r|\n)/)
              .filter(c)
              .forEach(function (_) {
                var b = _[0],
                  C = _.slice(2);
                b === "m" &&
                  (v.push({ rtp: [], fmtp: [] }), (g = v[v.length - 1]));
                for (var N = 0; N < (a[b] || []).length; N += 1) {
                  var z = a[b][N];
                  if (z.reg.test(C)) return n(z, g, C);
                }
              }),
            (h.media = v),
            h
          );
        };
        var s = function (h, v) {
          var g = v.split(/=(.+)/, 2);
          return (
            g.length === 2
              ? (h[g[0]] = e(g[1]))
              : g.length === 1 && v.length > 1 && (h[g[0]] = void 0),
            h
          );
        };
        (u.parseParams = function (l) {
          return l.split(/;\s?/).reduce(s, {});
        }),
          (u.parseFmtpConfig = u.parseParams),
          (u.parsePayloads = function (l) {
            return l.toString().split(" ").map(Number);
          }),
          (u.parseRemoteCandidates = function (l) {
            for (
              var h = [], v = l.split(" ").map(e), g = 0;
              g < v.length;
              g += 3
            )
              h.push({ component: v[g], ip: v[g + 1], port: v[g + 2] });
            return h;
          }),
          (u.parseImageAttributes = function (l) {
            return l.split(" ").map(function (h) {
              return h
                .substring(1, h.length - 1)
                .split(",")
                .reduce(s, {});
            });
          }),
          (u.parseSimulcastStreamList = function (l) {
            return l.split(";").map(function (h) {
              return h.split(",").map(function (v) {
                var g,
                  _ = !1;
                return (
                  v[0] !== "~"
                    ? (g = e(v))
                    : ((g = e(v.substring(1, v.length))), (_ = !0)),
                  { scid: g, paused: _ }
                );
              });
            });
          });
      })(RI);
    var Gy = Wy.exports,
      PF = /%[sdv%]/g,
      DF = function (e) {
        var n = 1,
          a = arguments,
          c = a.length;
        return e.replace(PF, function (s) {
          if (n >= c) return s;
          var l = a[n];
          switch (((n += 1), s)) {
            case "%%":
              return "%";
            case "%s":
              return String(l);
            case "%d":
              return Number(l);
            case "%v":
              return "";
          }
        });
      },
      oh = function (e, n, a) {
        var c = [
          e +
            "=" +
            (n.format instanceof Function
              ? n.format(n.push ? a : a[n.name])
              : n.format),
        ];
        if (n.names)
          for (var s = 0; s < n.names.length; s += 1) {
            var l = n.names[s];
            n.name ? c.push(a[n.name][l]) : c.push(a[n.names[s]]);
          }
        else c.push(a[n.name]);
        return DF.apply(null, c);
      },
      NF = ["v", "o", "s", "i", "u", "e", "p", "c", "b", "t", "r", "z", "a"],
      LF = ["i", "c", "b", "a"],
      vu = RI,
      MF = function (e, n) {
        (n = n || {}),
          e.version == null && (e.version = 0),
          e.name == null && (e.name = " "),
          e.media.forEach(function (l) {
            l.payloads == null && (l.payloads = "");
          });
        var a = n.outerOrder || NF,
          c = n.innerOrder || LF,
          s = [];
        return (
          a.forEach(function (l) {
            Gy[l].forEach(function (h) {
              h.name in e && e[h.name] != null
                ? s.push(oh(l, h, e))
                : h.push in e &&
                  e[h.push] != null &&
                  e[h.push].forEach(function (v) {
                    s.push(oh(l, h, v));
                  });
            });
          }),
          e.media.forEach(function (l) {
            s.push(oh("m", Gy.m[0], l)),
              c.forEach(function (h) {
                Gy[h].forEach(function (v) {
                  v.name in l && l[v.name] != null
                    ? s.push(oh(h, v, l))
                    : v.push in l &&
                      l[v.push] != null &&
                      l[v.push].forEach(function (g) {
                        s.push(oh(h, v, g));
                      });
                });
              });
          }),
          s.join(`\r
`) +
            `\r
`
        );
      };
    ($i.write = MF),
      ($i.parse = vu.parse),
      ($i.parseParams = vu.parseParams),
      ($i.parseFmtpConfig = vu.parseFmtpConfig),
      ($i.parsePayloads = vu.parsePayloads),
      ($i.parseRemoteCandidates = vu.parseRemoteCandidates),
      ($i.parseImageAttributes = vu.parseImageAttributes),
      ($i.parseSimulcastStreamList = vu.parseSimulcastStreamList);
    var qy,
      Ky,
      Jy,
      $y,
      fo = function (e) {
        return $i.parse(e);
      },
      Yc = function (e) {
        return $i.write(e);
      },
      UF = function (e) {
        var n = fo(e);
        return (
          n.media.forEach(function (a) {
            a.type === Ct &&
              a.fmtp.forEach(function (c) {
                c.config += ";sprop-stereo=1;stereo=1";
              });
          }),
          Yc(n)
        );
      },
      AI =
        ((qy = window) === null || qy === void 0
          ? void 0
          : qy.requestIdleCallback) ||
        function (u) {
          var e = Date.now();
          return setTimeout(function () {
            u({
              didTimeout: !1,
              timeRemaining: function () {
                return Math.max(0, 50 - (Date.now() - e));
              },
            });
          }, 1e3);
        },
      VF =
        ((Ky = window) === null || Ky === void 0
          ? void 0
          : Ky.cancelIdleCallback) ||
        function (u) {
          clearTimeout(u);
        },
      FF =
        ((Jy = window) === null || Jy === void 0
          ? void 0
          : Jy.cancelAnimationFrame) ||
        (($y = window) === null || $y === void 0
          ? void 0
          : $y.mozCancelAnimationFrame),
      Nn = (function () {
        function u() {
          B(this, u);
        }
        return (
          oe(u, null, [
            {
              key: "generateTaskID",
              value: function () {
                return this.currentTaskID++;
              },
            },
            {
              key: "run",
              value: function () {
                var n =
                    arguments.length > 0 && arguments[0] !== void 0
                      ? arguments[0]
                      : ZT,
                  a = arguments.length > 1 ? arguments[1] : void 0,
                  c = arguments.length > 2 ? arguments[2] : void 0;
                (c = p(
                  p(
                    {},
                    n === a7
                      ? { delay: 2e3, count: 0, backgroundTask: !0 }
                      : n === jc
                      ? { delay: 1e4, count: 0 }
                      : n === Np
                      ? { fps: 60, delay: 16.6, count: 0, backgroundTask: !0 }
                      : { delay: 2e3, count: 0, backgroundTask: !0 }
                  ),
                  c
                )),
                  PE(a) && (c = p(p({}, c), a)),
                  zr(n) && ((a = n), (n = ZT));
                var s = p(
                  {
                    taskID: this.generateTaskID(),
                    loopCount: 0,
                    intervalID: null,
                    timeoutID: null,
                    rafID: null,
                    ricID: null,
                    taskName: n,
                    callback: a,
                  },
                  c
                );
                return this.taskMap.set(s.taskID, s), this[n](s), s.taskID;
              },
            },
            {
              key: "interval",
              value: function (n) {
                var a = this;
                return (n.intervalID = setInterval(function () {
                  n.callback(), (n.loopCount += 1), a.isBreakLoop(n);
                }, n.delay));
              },
            },
            {
              key: "timeout",
              value: function (n) {
                var a = this;
                return (n.timeoutID = setTimeout(function c() {
                  if ((n.callback(), (n.loopCount += 1), !a.isBreakLoop(n)))
                    return (n.timeoutID = setTimeout(c, n.delay));
                }, n.delay));
              },
            },
            {
              key: "ric",
              value: function (n) {
                var a,
                  c = this,
                  s = er();
                return (n.ricID = AI(
                  function l() {
                    if (
                      ((a = er() - s) >= n.delay &&
                        ((s = er() - Math.floor(a % n.delay)),
                        n.callback(),
                        (n.loopCount += 1)),
                      !c.isBreakLoop(n))
                    )
                      return (n.ricID = AI(l, { timeout: n.delay }));
                  },
                  { timeout: n.delay }
                ));
              },
            },
            {
              key: "raf",
              value: function (n) {
                var a = this;
                n.delay = (1e3 / n.fps).toFixed(2);
                var c,
                  s = er(),
                  l = function v() {
                    if (document.hidden && n.backgroundTask)
                      return (
                        (c = er() - s),
                        (s = er()),
                        n.callback(),
                        (n.loopCount += 1),
                        a.isBreakLoop(n)
                          ? void 0
                          : (n.timeoutID = setTimeout(
                              v,
                              n.delay - Math.floor(c % n.delay)
                            ))
                      );
                    if (
                      ((c = er() - s) >= n.delay &&
                        ((s = er() - Math.floor(c % n.delay)),
                        n.callback(),
                        (n.loopCount += 1)),
                      !a.isBreakLoop(n))
                    )
                      return (n.rafID = requestAnimationFrame(v));
                  };
                if (((n.rafID = requestAnimationFrame(l)), n.backgroundTask)) {
                  var h = function () {
                    if (document.hidden) {
                      var g = er() - s;
                      g >= n.delay
                        ? l()
                        : (n.timeoutID = setTimeout(l, n.delay - g));
                    }
                  };
                  document.addEventListener("visibilitychange", h),
                    (n.onVisibilitychange = h),
                    document.hidden && h();
                }
                return n.taskID;
              },
            },
            {
              key: "hasTask",
              value: function (n) {
                return this.taskMap.has(n);
              },
            },
            {
              key: "clearTask",
              value: function (n) {
                if (!this.taskMap.has(n)) return !0;
                var a = this.taskMap.get(n),
                  c = a.intervalID,
                  s = a.timeoutID,
                  l = a.rafID,
                  h = a.ricID,
                  v = a.onVisibilitychange;
                return (
                  c && clearInterval(c),
                  s && clearTimeout(s),
                  l && FF(l),
                  h && VF(h),
                  v && document.removeEventListener("visibilitychange", v),
                  this.taskMap.delete(n),
                  !0
                );
              },
            },
            {
              key: "isBreakLoop",
              value: function (n) {
                return (
                  !this.taskMap.has(n.taskID) ||
                  (n.count !== 0 &&
                    n.loopCount >= n.count &&
                    (this.clearTask(n.taskID), !0))
                );
              },
            },
          ]),
          u
        );
      })();
    ie(Nn, "taskMap", /* @__PURE__ */ new Map()), ie(Nn, "currentTaskID", 1);
    var jF = (function () {
        function u() {
          B(this, u),
            (this.prefix_ = "TRTC"),
            (this.queue_ = /* @__PURE__ */ new Map()),
            this.checkStorage();
        }
        return (
          oe(u, [
            {
              key: "getRealKey",
              value: function (n) {
                return "".concat(this.prefix_, "_").concat(n);
              },
            },
            {
              key: "checkStorage",
              value: function () {
                var n = this;
                if (lu()) {
                  var a = Object.keys(localStorage).filter(function (c) {
                    if (c.startsWith(n.prefix_)) {
                      var s = JSON.parse(localStorage.getItem(c));
                      if (s && s.expiresIn < Date.now()) return !0;
                    }
                    return !1;
                  });
                  a.forEach(function (c) {
                    return localStorage.removeItem(c);
                  });
                }
              },
            },
            {
              key: "doFlush",
              value: function () {
                if (lu())
                  try {
                    var n,
                      a = nt(this.queue_);
                    try {
                      for (a.s(); !(n = a.n()).done; ) {
                        var c = Et(n.value, 2),
                          s = c[0],
                          l = c[1];
                        localStorage.setItem(s, JSON.stringify(l));
                      }
                    } catch (h) {
                      a.e(h);
                    } finally {
                      a.f();
                    }
                  } catch (h) {
                    ft.warn(h);
                  }
              },
            },
            {
              key: "getItem",
              value: function (n) {
                if (!lu()) return null;
                try {
                  var a = JSON.parse(localStorage.getItem(this.getRealKey(n)));
                  return a && a.expiresIn >= Date.now() ? a.value : null;
                } catch (c) {
                  ft.warn(c);
                }
              },
            },
            {
              key: "setItem",
              value: function (n, a) {
                var c =
                  arguments.length > 2 &&
                  arguments[2] !== void 0 &&
                  arguments[2];
                if (lu())
                  try {
                    var s = { expiresIn: Date.now() + HT, value: a };
                    c
                      ? localStorage.setItem(
                          this.getRealKey(n),
                          JSON.stringify(s)
                        )
                      : (this.queue_.set(this.getRealKey(n), s),
                        Nn.hasTask(this.intervalId_) ||
                          (this.intervalId_ = Nn.run(
                            jc,
                            this.doFlush.bind(this),
                            { count: 1 }
                          )));
                  } catch (l) {
                    ft.warn(l);
                  }
              },
            },
            {
              key: "deleteItem",
              value: function (n) {
                if (!lu()) return !1;
                try {
                  return (
                    (n = this.getRealKey(n)),
                    this.queue_.delete(n),
                    localStorage.removeItem(n),
                    !0
                  );
                } catch (a) {
                  return ft.warn(a), !1;
                }
              },
            },
            {
              key: "clear",
              value: function () {
                if (lu())
                  try {
                    localStorage.clear();
                  } catch (n) {
                    ft.warn(n);
                  }
              },
            },
          ]),
          u
        );
      })(),
      Zc = new jF(),
      Fn = {
        result: !1,
        detail: {
          isBrowserSupported: !1,
          isWebRTCSupported: !1,
          isMediaDevicesSupported: !1,
          isH264EncodeSupported: !1,
          isVp8EncodeSupported: !1,
          isH264DecodeSupported: !1,
          isVp8DecodeSupported: !1,
        },
      },
      xI = "checkResult",
      OI = function () {
        return !dV && !Mp && !(Up && kE < 80) && !(Ii && wE < 56);
      },
      Yy = function () {
        return (
          [
            "RTCPeerConnection",
            "webkitRTCPeerConnection",
            "RTCIceGatherer",
          ].filter(function (e) {
            return e in window;
          }).length > 0
        );
      },
      BF = function () {
        if (!navigator.mediaDevices) return !1;
        var e = ["getUserMedia", "enumerateDevices"];
        return (
          e.filter(function (n) {
            return n in navigator.mediaDevices;
          }).length === e.length
        );
      },
      PI = (function () {
        var u = I(
          m().mark(function e() {
            var n, a, c, s, l, h;
            return m().wrap(
              function (v) {
                for (;;)
                  switch ((v.prev = v.next)) {
                    case 0:
                      if (
                        !Fn.detail.isH264EncodeSupported ||
                        !Fn.detail.isVp8EncodeSupported
                      ) {
                        v.next = 2;
                        break;
                      }
                      return v.abrupt("return", {
                        isH264EncodeSupported: Fn.detail.isH264EncodeSupported,
                        isVp8EncodeSupported: Fn.detail.isVp8EncodeSupported,
                      });
                    case 2:
                      return (
                        (n = ""),
                        (a = !1),
                        (c = !1),
                        (v.prev = 5),
                        (s = new RTCPeerConnection()),
                        (l = document.createElement(sT)).getContext("2d"),
                        (h = l.captureStream(0)),
                        s.addTrack(h.getVideoTracks()[0], h),
                        (v.next = 13),
                        s.createOffer()
                      );
                    case 13:
                      return (
                        (n = v.sent).sdp.toLowerCase().indexOf("h264") !== -1 &&
                          (a = !0),
                        n.sdp.toLowerCase().indexOf("vp8") !== -1 && (c = !0),
                        s.close(),
                        (Fn.detail.isH264EncodeSupported = a),
                        (Fn.detail.isVp8EncodeSupported = c),
                        v.abrupt("return", {
                          isH264EncodeSupported:
                            Fn.detail.isH264EncodeSupported,
                          isVp8EncodeSupported: Fn.detail.isVp8EncodeSupported,
                        })
                      );
                    case 22:
                      return (
                        (v.prev = 22),
                        (v.t0 = v.catch(5)),
                        v.abrupt("return", {
                          isH264EncodeSupported: !1,
                          isVp8EncodeSupported: !1,
                        })
                      );
                    case 25:
                    case "end":
                      return v.stop();
                  }
              },
              e,
              null,
              [[5, 22]]
            );
          })
        );
        return function () {
          return u.apply(this, arguments);
        };
      })();
    function zF() {
      return Zy.apply(this, arguments);
    }
    function Zy() {
      return (
        (Zy = I(
          m().mark(function u() {
            return m().wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    return e.abrupt(
                      "return",
                      new Promise(
                        (function () {
                          var n = I(
                            m().mark(function a(c) {
                              var s, l, h, v, g, _, b, C, N, z, F, U, E, A;
                              return m().wrap(
                                function (L) {
                                  for (;;)
                                    switch ((L.prev = L.next)) {
                                      case 0:
                                        return (
                                          (s = { encode: !1, decode: !1 }),
                                          (l = null),
                                          (L.prev = 2),
                                          (h =
                                            document.createElement("canvas")),
                                          (v = h.getContext("2d")),
                                          (h.width = 640),
                                          (h.height = 480),
                                          (g = setInterval(function () {
                                            v.fillText(
                                              "test",
                                              Math.floor(640 * Math.random()),
                                              Math.floor(480 * Math.random())
                                            );
                                          }, 33)),
                                          (_ = -1),
                                          (b = -1),
                                          (l = function () {
                                            clearInterval(_),
                                              clearInterval(g),
                                              clearTimeout(b),
                                              N.close(),
                                              z.close(),
                                              C.getTracks().forEach(function (
                                                te
                                              ) {
                                                return te.stop();
                                              });
                                          }),
                                          (b = setTimeout(function () {
                                            l(), c(s);
                                          }, 3e3)),
                                          (C = h.captureStream()),
                                          (N = new RTCPeerConnection({})),
                                          (z = new RTCPeerConnection({
                                            offerToReceiveAudio: !0,
                                            offerToReceiveVideo: !0,
                                          })),
                                          N.addEventListener(
                                            "icecandidate",
                                            function ($) {
                                              return z.addIceCandidate(
                                                $.candidate
                                              );
                                            }
                                          ),
                                          z.addEventListener(
                                            "icecandidate",
                                            function ($) {
                                              return N.addIceCandidate(
                                                $.candidate
                                              );
                                            }
                                          ),
                                          N.addTrack(C.getVideoTracks()[0], C),
                                          (L.next = 20),
                                          N.createOffer()
                                        );
                                      case 20:
                                        return (
                                          (F = L.sent),
                                          (L.next = 23),
                                          N.setLocalDescription(F)
                                        );
                                      case 23:
                                        return (
                                          (L.next = 25),
                                          z.setRemoteDescription(F)
                                        );
                                      case 25:
                                        return (L.next = 27), z.createAnswer();
                                      case 27:
                                        return (
                                          (U = L.sent),
                                          (E = fo(U.sdp)),
                                          (A = E.media[0].rtp.findIndex(
                                            function ($) {
                                              return $.codec === "H264";
                                            }
                                          )),
                                          (E.media[0].rtp = [
                                            E.media[0].rtp[A],
                                          ]),
                                          (E.media[0].fmtp =
                                            E.media[0].fmtp.filter(function (
                                              $
                                            ) {
                                              return (
                                                $.payload ===
                                                E.media[0].rtp[0].payload
                                              );
                                            })),
                                          (E.media[0].rtcpFb =
                                            E.media[0].rtcpFb.filter(function (
                                              $
                                            ) {
                                              return (
                                                $.payload ===
                                                E.media[0].rtp[0].payload
                                              );
                                            })),
                                          (U.sdp = Yc(E)),
                                          (L.next = 36),
                                          z.setLocalDescription(U)
                                        );
                                      case 36:
                                        return (
                                          (L.next = 38),
                                          N.setRemoteDescription(U)
                                        );
                                      case 38:
                                        (_ = setInterval(
                                          I(
                                            m().mark(function $() {
                                              var te, X;
                                              return m().wrap(function (D) {
                                                for (;;)
                                                  switch ((D.prev = D.next)) {
                                                    case 0:
                                                      return (
                                                        s.encode &&
                                                          s.decode &&
                                                          (l(), c(s)),
                                                        (D.next = 3),
                                                        N.getStats()
                                                      );
                                                    case 3:
                                                      return (
                                                        (te = D.sent),
                                                        (D.next = 6),
                                                        z.getStats()
                                                      );
                                                    case 6:
                                                      (X = D.sent),
                                                        s.encode ||
                                                          te.forEach(function (
                                                            M
                                                          ) {
                                                            M.type ===
                                                              "outbound-rtp" &&
                                                              M.mediaType ===
                                                                wt &&
                                                              M.framesEncoded >
                                                                0 &&
                                                              (s.encode = !0);
                                                          }),
                                                        s.decode ||
                                                          X.forEach(function (
                                                            M
                                                          ) {
                                                            M.type ===
                                                              "inbound-rtp" &&
                                                              M.mediaType ===
                                                                wt &&
                                                              M.framesDecoded >
                                                                0 &&
                                                              (s.decode = !0);
                                                          });
                                                    case 9:
                                                    case "end":
                                                      return D.stop();
                                                  }
                                              }, $);
                                            })
                                          ),
                                          500
                                        )),
                                          (L.next = 46);
                                        break;
                                      case 41:
                                        (L.prev = 41),
                                          (L.t0 = L.catch(2)),
                                          l(),
                                          ft.warn(L.t0),
                                          c(s);
                                      case 46:
                                      case "end":
                                        return L.stop();
                                    }
                                },
                                a,
                                null,
                                [[2, 41]]
                              );
                            })
                          );
                          return function (a) {
                            return n.apply(this, arguments);
                          };
                        })()
                      )
                    );
                  case 1:
                  case "end":
                    return e.stop();
                }
            }, u);
          })
        )),
        Zy.apply(this, arguments)
      );
    }
    var DI = (function () {
        var u = I(
          m().mark(function e() {
            var n, a, c, s;
            return m().wrap(
              function (l) {
                for (;;)
                  switch ((l.prev = l.next)) {
                    case 0:
                      if (
                        !Fn.detail.isH264DecodeSupported ||
                        !Fn.detail.isVp8DecodeSupported
                      ) {
                        l.next = 2;
                        break;
                      }
                      return l.abrupt("return", {
                        isH264DecodeSupported: Fn.detail.isH264DecodeSupported,
                        isVp8DecodeSupported: Fn.detail.isVp8DecodeSupported,
                      });
                    case 2:
                      return (
                        (n = ""),
                        (a = !1),
                        (c = !1),
                        (l.prev = 5),
                        (s = new RTCPeerConnection()),
                        (l.next = 9),
                        s.createOffer({
                          offerToReceiveAudio: 1,
                          offerToReceiveVideo: 1,
                        })
                      );
                    case 9:
                      return (
                        (n = l.sent).sdp.toLowerCase().indexOf("h264") !== -1 &&
                          (a = !0),
                        n.sdp.toLowerCase().indexOf("vp8") !== -1 && (c = !0),
                        s.close(),
                        l.abrupt("return", {
                          isH264DecodeSupported: a,
                          isVp8DecodeSupported: c,
                        })
                      );
                    case 16:
                      return (
                        (l.prev = 16),
                        (l.t0 = l.catch(5)),
                        l.abrupt("return", {
                          isH264DecodeSupported: !1,
                          isVp8DecodeSupported: !1,
                        })
                      );
                    case 19:
                    case "end":
                      return l.stop();
                  }
              },
              e,
              null,
              [[5, 16]]
            );
          })
        );
        return function () {
          return u.apply(this, arguments);
        };
      })(),
      HF = (function () {
        var u = I(
          m().mark(function e() {
            var n, a, c, s, l, h, v, g, _, b, C, N, z;
            return m().wrap(function (F) {
              for (;;)
                switch ((F.prev = F.next)) {
                  case 0:
                    if (NI()) {
                      F.next = 2;
                      break;
                    }
                    return F.abrupt("return", Fn);
                  case 2:
                    return (
                      (n = OI()), (a = Yy()), (c = BF()), (F.next = 7), PI()
                    );
                  case 7:
                    return (
                      (s = F.sent),
                      (l = s.isH264EncodeSupported),
                      (h = s.isVp8EncodeSupported),
                      (F.next = 12),
                      DI()
                    );
                  case 12:
                    if (
                      ((v = F.sent),
                      (g = v.isH264DecodeSupported),
                      (_ = v.isVp8DecodeSupported),
                      l && h)
                    ) {
                      F.next = 21;
                      break;
                    }
                    return (F.next = 18), PI();
                  case 18:
                    (b = F.sent),
                      (l = b.isH264EncodeSupported),
                      (h = b.isVp8EncodeSupported);
                  case 21:
                    if (!(l && g && (Fp || jp || yV) && !so && zc() < 79)) {
                      F.next = 29;
                      break;
                    }
                    return (F.next = 24), zF();
                  case 24:
                    (C = F.sent),
                      (N = C.encode),
                      (z = C.decode),
                      (l = N),
                      (g = z);
                  case 29:
                    return (
                      (Fn.result = n && a && c && (l || h) && (g || _)),
                      (Fn.detail.isBrowserSupported = n),
                      (Fn.detail.isWebRTCSupported = a),
                      (Fn.detail.isMediaDevicesSupported = c),
                      (Fn.detail.isH264EncodeSupported = l),
                      (Fn.detail.isVp8EncodeSupported = h),
                      (Fn.detail.isH264DecodeSupported = g),
                      (Fn.detail.isVp8DecodeSupported = _),
                      WF(),
                      Zc.setItem(
                        xI,
                        { ua: navigator.userAgent, checkResult: Fn },
                        !0
                      ),
                      F.abrupt("return", Fn)
                    );
                  case 40:
                  case "end":
                    return F.stop();
                }
            }, e);
          })
        );
        return function () {
          return u.apply(this, arguments);
        };
      })(),
      Qy = (function (u, e) {
        var n = null;
        return function () {
          if (n) return n;
          for (var a = arguments.length, c = new Array(a), s = 0; s < a; s++)
            c[s] = arguments[s];
          return (
            (n = u.apply(e || this, c))
              .then(function (l) {
                return (n = null), l;
              })
              .catch(function (l) {
                throw ((n = null), l);
              }),
            n
          );
        };
      })(HF);
    function NI() {
      return (
        Object.keys(Fn.detail).findIndex(function (u) {
          return !Fn.detail[u];
        }) >= 0
      );
    }
    function WF() {
      NI() &&
        (ft.warn(Fe({ key: dE })),
        ft.info(
          "".concat(navigator.userAgent, " ").concat(JSON.stringify(Fn.detail))
        ));
    }
    function LI() {
      return !(
        !navigator.mediaDevices || !navigator.mediaDevices.getDisplayMedia
      );
    }
    function MI() {
      return (
        "RTCPeerConnection" in window &&
        "getReceivers" in window.RTCPeerConnection.prototype
      );
    }
    function Xp() {
      return (
        "RTCPeerConnection" in window &&
        "getSenders" in window.RTCPeerConnection.prototype
      );
    }
    function as() {
      return (
        "RTCPeerConnection" in window &&
        "getTransceivers" in window.RTCPeerConnection.prototype
      );
    }
    function ev() {
      return (
        "RTCPeerConnection" in window &&
        "addTransceiver" in window.RTCPeerConnection.prototype
      );
    }
    function Xy() {
      return (
        "RTCRtpSender" in window &&
        "replaceTrack" in window.RTCRtpSender.prototype
      );
    }
    function UI() {
      return (
        "RTCRtpSender" in window &&
        "setParameters" in window.RTCRtpSender.prototype &&
        Xp()
      );
    }
    function tv() {
      return (
        !!ht(navigator.mediaDevices) && (ft.error(Qo.NOT_SUPPORTED_MEDIA), !0)
      );
    }
    function nv() {
      return (
        location.protocol === "http:" && !cu && (ft.warn(Fe({ key: lE })), !0)
      );
    }
    var e1 =
      "RTCRtpSender" in window &&
      "createEncodedStreams" in window.RTCRtpSender.prototype &&
      zc() >= 86;
    function t1(u) {
      return (
        !(
          u.type !== "candidate-pair" ||
          !u.nominated ||
          (u.state !== "in-progress" && u.state !== "succeeded")
        ) && !(Ji(u.selected) && !u.selected)
      );
    }
    var VI = /* @__PURE__ */ new Map([
      [Bc, "Android"],
      [Xo, "iOS"],
      [EE, "Windows"],
      [Zd, "MacOS"],
      [IE, "Linux"],
    ]);
    function n1() {
      var u = "unknown";
      return VI.get(!0) && (u = VI.get(!0)), u;
    }
    function GF() {
      var u = "";
      return (
        screen.width &&
          (u +=
            (screen.width ? screen.width * window.devicePixelRatio : "") +
            " * " +
            (screen.height ? screen.height * window.devicePixelRatio : "")),
        u
      );
    }
    function qF() {
      var u = !1;
      return (
        (navigator.getUserMedia ||
          (navigator.mediaDevices && navigator.mediaDevices.getUserMedia)) &&
          (u = !0),
        u
      );
    }
    function KF() {
      for (
        var u = { isSupported: !1 },
          e = [
            "AudioContext",
            "webkitAudioContext",
            "mozAudioContext",
            "msAudioContext",
          ],
          n = 0;
        n < e.length;
        n++
      )
        if (e[n] in window) {
          u.isSupported = !0;
          break;
        }
      return u.isSupported;
    }
    function FI() {
      return (
        !(B0 && zc() < 86) &&
        !(Xo && Ki(es) && es < 15) &&
        !(Z0 && Z0 < 63) &&
        !(!OI() || !("captureStream" in HTMLCanvasElement.prototype))
      );
    }
    var mu =
        window.MediaStreamTrack && "getSettings" in MediaStreamTrack.prototype,
      JF =
        window.MediaStreamTrack &&
        "getCapabilities" in MediaStreamTrack.prototype,
      $F = function () {
        var e, n, a;
        return (
          ((e = window) === null || e === void 0
            ? void 0
            : e.OffscreenCanvas) &&
          ((n = window) === null || n === void 0
            ? void 0
            : n.MediaStreamTrackProcessor) &&
          ((a = window) === null || a === void 0
            ? void 0
            : a.MediaStreamTrackGenerator)
        );
      };
    (function () {
      nv();
      var u = Zc.getItem(xI);
      u && u.ua === navigator.userAgent && (Fn = u.checkResult), Qy();
    })();
    var _n = {
        STREAM_ADDED: "stream-added",
        STREAM_REMOVED: "stream-removed",
        STREAM_UPDATED: "stream-updated",
        STREAM_PUBLISHED: "stream-published",
        STREAM_SUBSCRIBED: "stream-subscribed",
        STREAM_UNSUBSCRIBED: "stream-unsubscribed",
        STATE_CHANGED: "state-changed",
        ERROR: "error",
        CONNECTION_STATE_CHANGED: "connection-state-changed",
        SEI_MESSAGE: dT,
      },
      An = {
        STREAM_ADDED: "stream-added",
        STREAM_REMOVED: "stream-removed",
        STREAM_UPDATED: "stream-updated",
        STREAM_SUBSCRIBED: "stream-subscribed",
        CONNECTION_STATE_CHANGED: "connection-state-changed",
        PEER_JOIN: "peer-join",
        PEER_LEAVE: "peer-leave",
        MUTE_AUDIO: "mute-audio",
        MUTE_VIDEO: "mute-video",
        UNMUTE_AUDIO: "unmute-audio",
        UNMUTE_VIDEO: "unmute-video",
        CLIENT_BANNED: "client-banned",
        NETWORK_QUALITY: "network-quality",
        AUDIO_VOLUME: "audio-volume",
        SEI_MESSAGE: dT,
        ERROR: "error",
      },
      jI = "player-state-changed",
      YF = "screen-sharing-stopped",
      ZF = "connection-state-changed",
      QF = "device-auto-recovered",
      r1 = "error",
      ei = "player-state-changed",
      BI = "error",
      XF = eE;
    Ut(
      { target: "String", proto: !0, forced: tE("small") },
      {
        small: function () {
          return XF(this, "small", "", "");
        },
      }
    );
    var ej = (function () {
        function u(s) {
          B(this, u);
          var l = s.getUserId();
          (this.log_ = ft.createLogger({
            id: l,
            userId: l,
            sdkAppId: s.getSDKAppId(),
          })),
            (this.prevReportTime_ = 0),
            (this.prevReport_ = {}),
            (this.prevEncoderImplementation_ = ""),
            (this.prevQualityLimitationReason_ = ""),
            (this.prevDecoderImplementationMap_ = /* @__PURE__ */ new Map());
        }
        var e, n, a, c;
        return (
          oe(u, [
            {
              key: "statInterval",
              get: function () {
                return this.prevReportTime_ === 0
                  ? 2
                  : (Date.now() - this.prevReportTime_) / 1e3;
              },
            },
            {
              key: "getSenderStats",
              value:
                ((c = I(
                  m().mark(function s(l) {
                    var h,
                      v,
                      g,
                      _,
                      b = this;
                    return m().wrap(
                      function (C) {
                        for (;;)
                          switch ((C.prev = C.next)) {
                            case 0:
                              if (
                                ((h = {
                                  audio: {
                                    bytesSent: 0,
                                    packetsSent: 0,
                                    audioLevel: 0,
                                    totalAudioEnergy: 0,
                                  },
                                  video: {
                                    bytesSent: 0,
                                    packetsSent: 0,
                                    framesEncoded: 0,
                                    frameWidth: 0,
                                    frameHeight: 0,
                                    framesSent: 0,
                                    fpsCapture: 0,
                                  },
                                  small: {
                                    bytesSent: 0,
                                    packetsSent: 0,
                                    framesEncoded: 0,
                                    frameWidth: 0,
                                    frameHeight: 0,
                                    framesSent: 0,
                                    fpsCapture: 0,
                                  },
                                  auxiliary: {
                                    bytesSent: 0,
                                    packetsSent: 0,
                                    framesEncoded: 0,
                                    frameWidth: 0,
                                    frameHeight: 0,
                                    framesSent: 0,
                                    fpsCapture: 0,
                                  },
                                  rtt: 0,
                                }),
                                (v = l.getPeerConnection()),
                                (g = l.getSSRC()),
                                !v)
                              ) {
                                C.next = 15;
                                break;
                              }
                              return (C.prev = 4), (C.next = 7), v.getStats();
                            case 7:
                              C.sent.forEach(function (N) {
                                var z;
                                if (N.type === "outbound-rtp")
                                  if ((N.mediaType || N.kind) === wt) {
                                    if (!Ii && N.bytesSent === 0) return;
                                    N.ssrc !== g.video ||
                                      ht(N.encoderImplementation) ||
                                      b.prevEncoderImplementation_ ===
                                        N.encoderImplementation ||
                                      (b.log_.info(
                                        "encoderImplementation change to ".concat(
                                          N.encoderImplementation
                                        )
                                      ),
                                      (b.prevEncoderImplementation_ =
                                        N.encoderImplementation)),
                                      N.ssrc !== g.video ||
                                        ht(N.qualityLimitationReason) ||
                                        b.prevQualityLimitationReason_ ===
                                          N.qualityLimitationReason ||
                                        (b.log_.info(
                                          "qualityLimitationReason change to ".concat(
                                            N.qualityLimitationReason
                                          )
                                        ),
                                        (b.prevQualityLimitationReason_ =
                                          N.qualityLimitationReason));
                                    var F = wt;
                                    N.ssrc === g.small
                                      ? (F = oo)
                                      : N.ssrc === g.auxiliary && (F = Vn),
                                      (h[F].bytesSent = N.bytesSent),
                                      (h[F].packetsSent = N.packetsSent),
                                      (h[F].framesEncoded = N.framesEncoded);
                                  } else
                                    (h.audio.bytesSent = N.bytesSent),
                                      (h.audio.packetsSent = N.packetsSent);
                                else
                                  N.type === "candidate-pair"
                                    ? t1(N) &&
                                      Ki(N.currentRoundTripTime) &&
                                      (h.rtt = Math.floor(
                                        1e3 * N.currentRoundTripTime
                                      ))
                                    : N.type === "media-source" &&
                                      (N.kind === Ct
                                        ? ((h.audio.audioLevel =
                                            N.audioLevel || 0),
                                          (h.audio.totalAudioEnergy =
                                            N.totalAudioEnergy || 0))
                                        : N.kind === wt &&
                                          (N.trackIdentifier ===
                                          l.getVideoTrackId(wt)
                                            ? (h.video.fpsCapture =
                                                N.framesPerSecond)
                                            : N.trackIdentifier ===
                                              l.getVideoTrackId(Vn)
                                            ? (h.auxiliary.fpsCapture =
                                                N.framesPerSecond)
                                            : (h.small.fpsCapture =
                                                N.framesPerSecond)));
                                ht(N.audioLevel) ||
                                  ((h.audio.audioLevel = N.audioLevel || 0),
                                  (h.audio.totalAudioEnergy =
                                    N.totalAudioEnergy || 0)),
                                  ht(N.frameWidth) ||
                                    (N.trackIdentifier ===
                                      l.getVideoTrackId(wt) ||
                                    N.ssrc === g.video
                                      ? (z = wt)
                                      : N.trackIdentifier ===
                                          l.getVideoTrackId(Vn) ||
                                        N.ssrc === g.auxiliary
                                      ? (z = Vn)
                                      : (N.trackIdentifier !==
                                          l.getVideoTrackId(oo) &&
                                          N.ssrc !== g.small) ||
                                        (z = oo),
                                    z &&
                                      ((h[z].frameWidth = N.frameWidth),
                                      (h[z].frameHeight = N.frameHeight),
                                      (h[z].framesSent = N.framesSent)));
                              }),
                                h.audio.audioLevel === 0 &&
                                  (h.audio.audioLevel =
                                    ((_ = l.getLocalStream()) === null ||
                                    _ === void 0
                                      ? void 0
                                      : _.getInternalAudioLevel()) || 0),
                                (C.next = 15);
                              break;
                            case 12:
                              (C.prev = 12),
                                (C.t0 = C.catch(4)),
                                this.log_.warn(
                                  "failed to getStats on sender connection " +
                                    C.t0
                                );
                            case 15:
                              return C.abrupt("return", h);
                            case 16:
                            case "end":
                              return C.stop();
                          }
                      },
                      s,
                      this,
                      [[4, 12]]
                    );
                  })
                )),
                function (s) {
                  return c.apply(this, arguments);
                }),
            },
            {
              key: "getReceiverStats",
              value:
                ((a = I(
                  m().mark(function s(l) {
                    var h,
                      v,
                      g,
                      _,
                      b,
                      C = this;
                    return m().wrap(
                      function (N) {
                        for (;;)
                          switch ((N.prev = N.next)) {
                            case 0:
                              if (
                                ((h = {
                                  tinyId: l.getTinyId(),
                                  userId: l.getUserId(),
                                  rtt: 0,
                                  hasAudio: !1,
                                  hasVideo: !1,
                                  hasAuxiliary: !1,
                                  audio: {
                                    bytesReceived: 0,
                                    packetsReceived: 0,
                                    packetsLost: 0,
                                    jitter: 0,
                                    audioLevel: 0,
                                    totalAudioEnergy: 0,
                                  },
                                  video: {
                                    bytesReceived: 0,
                                    packetsReceived: 0,
                                    packetsLost: 0,
                                    framesReceived: 0,
                                    framesDecoded: 0,
                                    frameWidth: 0,
                                    frameHeight: 0,
                                  },
                                  auxiliary: {
                                    bytesReceived: 0,
                                    packetsReceived: 0,
                                    packetsLost: 0,
                                    framesReceived: 0,
                                    framesDecoded: 0,
                                    frameWidth: 0,
                                    frameHeight: 0,
                                  },
                                }),
                                !(v = l.getPeerConnection()))
                              ) {
                                N.next = 16;
                                break;
                              }
                              return (
                                (N.prev = 3),
                                (g = l.getSSRC()),
                                (_ = l.getTrackState()),
                                (N.next = 8),
                                v.getStats()
                              );
                            case 8:
                              N.sent.forEach(function (z) {
                                if (z.type === "inbound-rtp")
                                  if ((z.mediaType || z.kind) === Ct) {
                                    if (z.ssrc !== g.audio || !_.audio) return;
                                    (h.audio.packetsReceived =
                                      z.packetsReceived),
                                      (h.audio.bytesReceived = z.bytesReceived),
                                      (h.audio.packetsLost = z.packetsLost),
                                      (h.audio.jitter = z.jitter),
                                      (h.hasAudio = !0);
                                  } else {
                                    if (Ii && z.bytesReceived === 0) return;
                                    z.ssrc === g.video &&
                                      _.video &&
                                      ((h.video.packetsReceived =
                                        z.packetsReceived),
                                      (h.video.bytesReceived = z.bytesReceived),
                                      (h.video.packetsLost = z.packetsLost),
                                      (h.video.framesReceived =
                                        z.framesReceived),
                                      (h.video.framesDecoded = z.framesDecoded),
                                      (h.video.fpsDecoded = z.framesPerSecond),
                                      (h.hasVideo = !0),
                                      !z.decoderImplementation ||
                                        (C.prevDecoderImplementationMap_.has(
                                          h.userId
                                        ) &&
                                          C.prevDecoderImplementationMap_.get(
                                            h.userId
                                          ) === z.decoderImplementation) ||
                                        (C.log_.info(
                                          ""
                                            .concat(
                                              h.userId,
                                              " decoderImplementation change to "
                                            )
                                            .concat(z.decoderImplementation)
                                        ),
                                        C.prevDecoderImplementationMap_.set(
                                          h.userId,
                                          z.decoderImplementation
                                        ))),
                                      z.ssrc === g.auxiliary &&
                                        _.auxiliary &&
                                        ((h.auxiliary.packetsReceived =
                                          z.packetsReceived),
                                        (h.auxiliary.bytesReceived =
                                          z.bytesReceived),
                                        (h.auxiliary.packetsLost =
                                          z.packetsLost),
                                        (h.auxiliary.framesReceived =
                                          z.framesReceived),
                                        (h.auxiliary.framesDecoded =
                                          z.framesDecoded),
                                        (h.auxiliary.fpsDecoded =
                                          z.framesPerSecond),
                                        (h.hasAuxiliary = !0));
                                  }
                                else
                                  z.type === "candidate-pair" &&
                                    t1(z) &&
                                    Ki(z.currentRoundTripTime) &&
                                    (h.rtt = Math.floor(
                                      1e3 * z.currentRoundTripTime
                                    ));
                                ht(z.frameWidth) ||
                                  ((z.trackIdentifier !==
                                    l.getMainStreamVideoTrackId() &&
                                    z.ssrc !== g.video) ||
                                    ((h.video.frameWidth = z.frameWidth),
                                    (h.video.frameHeight = z.frameHeight)),
                                  (z.trackIdentifier !==
                                    l.getAuxStreamVideoTrackId() &&
                                    z.ssrc !== g.auxiliary) ||
                                    ((h.auxiliary.frameWidth = z.frameWidth),
                                    (h.auxiliary.frameHeight = z.frameHeight))),
                                  ht(z.audioLevel) ||
                                    ((h.audio.audioLevel = z.audioLevel || 0),
                                    (h.audio.totalAudioEnergy =
                                      z.totalAudioEnergy || 0));
                              }),
                                h.audio.audioLevel === 0 &&
                                  (h.audio.audioLevel =
                                    ((b = l.getMainStream()) === null ||
                                    b === void 0
                                      ? void 0
                                      : b.getInternalAudioLevel()) || 0),
                                (N.next = 16);
                              break;
                            case 13:
                              (N.prev = 13),
                                (N.t0 = N.catch(3)),
                                this.log_.warn(
                                  "failed to getStats on receiver connection " +
                                    N.t0
                                );
                            case 16:
                              return N.abrupt("return", h);
                            case 17:
                            case "end":
                              return N.stop();
                          }
                      },
                      s,
                      this,
                      [[3, 13]]
                    );
                  })
                )),
                function (s) {
                  return a.apply(this, arguments);
                }),
            },
            {
              key: "getStats",
              value:
                ((n = I(
                  m().mark(function s(l, h) {
                    var v, g, _, b, C, N, z;
                    return m().wrap(
                      function (F) {
                        for (;;)
                          switch ((F.prev = F.next)) {
                            case 0:
                              if (((v = {}), !l)) {
                                F.next = 5;
                                break;
                              }
                              return (F.next = 4), this.getSenderStats(l);
                            case 4:
                              v = F.sent;
                            case 5:
                              (g = []), (_ = nt(h)), (F.prev = 7), _.s();
                            case 9:
                              if ((b = _.n()).done) {
                                F.next = 17;
                                break;
                              }
                              return (
                                (C = Et(b.value, 2))[0],
                                (N = C[1]),
                                (F.next = 13),
                                this.getReceiverStats(N)
                              );
                            case 13:
                              (z = F.sent), g.push(z);
                            case 15:
                              F.next = 9;
                              break;
                            case 17:
                              F.next = 22;
                              break;
                            case 19:
                              (F.prev = 19), (F.t0 = F.catch(7)), _.e(F.t0);
                            case 22:
                              return (F.prev = 22), _.f(), F.finish(22);
                            case 25:
                              return F.abrupt("return", {
                                senderStats: v,
                                receiverStats: g,
                              });
                            case 26:
                            case "end":
                              return F.stop();
                          }
                      },
                      s,
                      this,
                      [[7, 19, 22, 25]]
                    );
                  })
                )),
                function (s, l) {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "getDifferenceValue",
              value: function (l, h) {
                if (ho(l)) return h;
                var v = h - l;
                return v < 0 ? 0 : v;
              },
            },
            {
              key: "prepareReport",
              value: function (l) {
                var h = this,
                  v = l.stats,
                  g = l.report,
                  _ = l.freezeMap;
                if (!ho(v.senderStats)) {
                  var b;
                  b = {
                    uint32_audio_level: 1e8 * v.senderStats.audio.audioLevel,
                    uint32_audio_energy:
                      1e6 * v.senderStats.audio.totalAudioEnergy,
                    uint32_audio_codec_bitrate: v.senderStats.audio.bytesSent,
                    audioLevel: v.senderStats.audio.audioLevel,
                  };
                  var C = [],
                    N = {
                      uint32_video_stream_type: 2,
                      uint32_video_codec_fps: v.senderStats.video.framesSent,
                      uint32_video_capture_fps: v.senderStats.video.fpsCapture,
                      uint32_video_width: v.senderStats.video.frameWidth,
                      uint32_video_height: v.senderStats.video.frameHeight,
                      uint32_video_codec_bitrate: v.senderStats.video.bytesSent,
                      uint32_video_enc_fps: v.senderStats.video.framesEncoded,
                    };
                  if ((C.push(N), v.senderStats.small.bytesSent)) {
                    var z = {
                      uint32_video_stream_type: 3,
                      uint32_video_codec_fps:
                        v.senderStats.small.framesSent || 0,
                      uint32_video_capture_fps:
                        v.senderStats.small.fpsCapture || 0,
                      uint32_video_width: v.senderStats.small.frameWidth || 0,
                      uint32_video_height: v.senderStats.small.frameHeight || 0,
                      uint32_video_codec_bitrate: v.senderStats.small.bytesSent,
                      uint32_video_enc_fps:
                        v.senderStats.small.framesEncoded || 0,
                    };
                    C.push(z);
                  }
                  if (v.senderStats.auxiliary.bytesSent) {
                    var F = {
                      uint32_video_stream_type: 7,
                      uint32_video_codec_fps:
                        v.senderStats.auxiliary.framesSent || 0,
                      uint32_video_capture_fps:
                        v.senderStats.auxiliary.fpsCapture || 0,
                      uint32_video_width:
                        v.senderStats.auxiliary.frameWidth || 0,
                      uint32_video_height:
                        v.senderStats.auxiliary.frameHeight || 0,
                      uint32_video_codec_bitrate:
                        v.senderStats.auxiliary.bytesSent,
                      uint32_video_enc_fps:
                        v.senderStats.auxiliary.framesEncoded || 0,
                    };
                    C.push(F);
                  }
                  var U = { uint32_bitrate: 0, uint32_rtt: v.senderStats.rtt };
                  g.msg_up_stream_info = {
                    msg_audio_status: b,
                    msg_video_status: C,
                    msg_network_status: U,
                  };
                }
                var E = this.statInterval;
                (g.msg_down_stream_info = []),
                  v.receiverStats.forEach(function (W) {
                    var G = {};
                    if (
                      ((G.msg_user_info = {
                        str_identifier: W.userId,
                        uint64_tinyid: W.tinyId,
                      }),
                      (G.msg_network_status = { uint32_rtt: W.rtt }),
                      (G.msg_video_status = {}),
                      W.hasAudio)
                    ) {
                      var ne = {
                        uint32_audio_codec_bitrate: W.audio.bytesReceived,
                        uint32_audio_total_bitrate: W.audio.bytesReceived,
                        uint32_audio_level: 1e8 * W.audio.audioLevel,
                        uint32_audio_energy: 1e6 * W.audio.totalAudioEnergy,
                        uint32_audio_receive: W.audio.packetsReceived,
                        uint32_audio_origin_lost: W.audio.packetsLost,
                        audioLevel: W.audio.audioLevel,
                      };
                      G.msg_audio_status = ne;
                    }
                    if (((G.msg_video_status = []), W.hasVideo)) {
                      var H = _.get(W.userId + "_" + Bn),
                        R = H ? H.duration : 0,
                        w = {
                          uint32_video_stream_type: 2,
                          uint32_video_receive_fps: W.video.framesReceived,
                          uint32_video_width: W.video.frameWidth,
                          uint32_video_height: W.video.frameHeight,
                          uint32_video_codec_bitrate: W.video.bytesReceived,
                          uint32_video_receive: W.video.packetsReceived,
                          uint32_video_origin_lost: W.video.packetsLost,
                          uint32_video_block_time: R,
                          uint32_video_dec_fps: W.video.framesDecoded,
                        };
                      G.msg_video_status.push(w);
                    }
                    if (W.hasAuxiliary) {
                      var q = _.get(W.userId + "_" + ir),
                        J = q ? q.duration : 0,
                        re = {
                          uint32_video_stream_type: 7,
                          uint32_video_receive_fps: W.auxiliary.framesReceived,
                          uint32_video_width: W.auxiliary.frameWidth,
                          uint32_video_height: W.auxiliary.frameHeight,
                          uint32_video_codec_bitrate: W.auxiliary.bytesReceived,
                          uint32_video_receive:
                            W.auxiliary.packetsReceived +
                            W.auxiliary.packetsLost,
                          uint32_video_origin_lost: W.auxiliary.packetsLost,
                          uint32_video_block_time: J,
                          uint32_video_dec_fps: W.auxiliary.framesDecoded,
                        };
                      G.msg_video_status.push(re);
                    }
                    g.msg_down_stream_info.push(G);
                  });
                var A = this.prevReport_;
                if (
                  ((this.prevReport_ = JSON.parse(JSON.stringify(g))),
                  g.msg_up_stream_info.msg_audio_status &&
                    A.msg_up_stream_info.msg_audio_status)
                ) {
                  var L = A.msg_up_stream_info.msg_audio_status,
                    $ = g.msg_up_stream_info.msg_audio_status,
                    te = this.getDifferenceValue(
                      L.uint32_audio_codec_bitrate,
                      $.uint32_audio_codec_bitrate
                    );
                  ($.uint32_audio_codec_bitrate = Math.round((8 * te) / E)),
                    (g.msg_up_stream_info.msg_network_status.uint32_bitrate +=
                      $.uint32_audio_codec_bitrate);
                }
                var X = A.msg_up_stream_info.msg_video_status;
                g.msg_up_stream_info.msg_video_status.forEach(function (W) {
                  var G = X.find(function (q) {
                    return (
                      q.uint32_video_stream_type === W.uint32_video_stream_type
                    );
                  });
                  if (!G || G.uint32_video_codec_bitrate === 0)
                    return (
                      (W.uint32_video_codec_bitrate = 0),
                      (W.uint32_video_enc_fps = 0),
                      void (W.uint32_video_codec_fps = 0)
                    );
                  var ne = G.uint32_video_codec_bitrate,
                    H = G.uint32_video_enc_fps,
                    R = G.uint32_video_codec_fps,
                    w = h.getDifferenceValue(ne, W.uint32_video_codec_bitrate);
                  (W.uint32_video_codec_bitrate = Math.round((8 * w) / E)),
                    (g.msg_up_stream_info.msg_network_status.uint32_bitrate +=
                      W.uint32_video_codec_bitrate),
                    (W.uint32_video_enc_fps = Math.round(
                      h.getDifferenceValue(H, W.uint32_video_enc_fps) / E
                    )),
                    (W.uint32_video_codec_fps = Math.round(
                      h.getDifferenceValue(R, W.uint32_video_codec_fps) / E
                    ));
                });
                var D = g.msg_down_stream_info,
                  M = A.msg_down_stream_info;
                return (
                  D.forEach(function (W) {
                    var G = M.find(function (J) {
                      return (
                        J.msg_user_info.uint64_tinyid ===
                        W.msg_user_info.uint64_tinyid
                      );
                    });
                    if (G) {
                      if (W.msg_audio_status && G.msg_audio_status) {
                        var ne = W.msg_audio_status,
                          H = G.msg_audio_status;
                        (ne.uint32_audio_origin_lost = h.getDifferenceValue(
                          H.uint32_audio_origin_lost,
                          ne.uint32_audio_origin_lost
                        )),
                          (ne.uint32_audio_receive = h.getDifferenceValue(
                            H.uint32_audio_receive,
                            ne.uint32_audio_receive
                          )),
                          (ne.uint32_audio_receive +=
                            ne.uint32_audio_origin_lost);
                        var R = h.getDifferenceValue(
                          H.uint32_audio_codec_bitrate,
                          ne.uint32_audio_codec_bitrate
                        );
                        (ne.uint32_audio_codec_bitrate = Math.round(
                          (8 * R) / E
                        )),
                          (ne.uint32_audio_total_bitrate = Math.round(
                            (8 * R) / E
                          ));
                      }
                      if (W.msg_video_status && G.msg_video_status) {
                        var w = W.msg_video_status,
                          q = G.msg_video_status;
                        w.forEach(function (J) {
                          var re = q.find(function (bn) {
                            return (
                              bn.uint32_video_stream_type ===
                              J.uint32_video_stream_type
                            );
                          });
                          if (!re)
                            return (
                              (J.uint32_video_receive = 0),
                              (J.uint32_video_origin_lost = 0),
                              (J.uint32_video_codec_bitrate = 0),
                              (J.uint32_video_receive_fps = 0),
                              void (J.uint32_video_dec_fps = 0)
                            );
                          var pe = re.uint32_video_receive,
                            ye = re.uint32_video_origin_lost,
                            Ne = re.uint32_video_codec_bitrate,
                            Ve = re.uint32_video_receive_fps,
                            Kt = re.uint32_video_dec_fps;
                          (J.uint32_video_origin_lost = h.getDifferenceValue(
                            ye,
                            J.uint32_video_origin_lost
                          )),
                            (J.uint32_video_receive =
                              h.getDifferenceValue(pe, J.uint32_video_receive) +
                              J.uint32_video_origin_lost);
                          var Ht = h.getDifferenceValue(
                            Ne,
                            J.uint32_video_codec_bitrate
                          );
                          J.uint32_video_codec_bitrate = Math.round(
                            (8 * Ht) / E
                          );
                          var Qt = h.getDifferenceValue(
                            Ve,
                            J.uint32_video_receive_fps
                          );
                          (J.uint32_video_receive_fps = Math.round(Qt / E)),
                            (J.uint32_video_dec_fps = Math.round(
                              h.getDifferenceValue(Kt, J.uint32_video_dec_fps) /
                                E
                            ));
                        });
                      }
                    }
                  }),
                  g
                );
              },
            },
            {
              key: "getStatsReport",
              value:
                ((e = I(
                  m().mark(function s(l) {
                    var h, v, g, _, b;
                    return m().wrap(
                      function (C) {
                        for (;;)
                          switch ((C.prev = C.next)) {
                            case 0:
                              return (
                                (h = l.uplinkConnection),
                                (v = l.downlinkConnections),
                                (g = l.freezeMap),
                                (_ = {
                                  msg_up_stream_info: {
                                    msg_audio_status: {
                                      uint32_audio_format: 0,
                                      uint32_audio_sample_rate: 0,
                                      uint32_audio_codec_bitrate: 0,
                                      uint32_audio_receive: 0,
                                      uint32_audio_origin_lost: 0,
                                      uint32_audio_level: 0,
                                      uint32_audio_energy: 0,
                                      audioLevel: 0,
                                    },
                                    msg_video_status: [
                                      {
                                        uint32_video_stream_type: 0,
                                        uint32_video_codec_fps: 0,
                                        uint32_video_capture_fps: 0,
                                        uint32_video_width: 0,
                                        uint32_video_height: 0,
                                        uint32_video_codec_bitrate: 0,
                                        uint32_video_receive: 0,
                                        uint32_video_origin_lost: 0,
                                        uint32_video_final_lost: 0,
                                        uint32_video_enc_fps: 0,
                                      },
                                    ],
                                    msg_network_status: {
                                      uint32_bitrate: 0,
                                      uint32_rtt: 0,
                                      uint32_lost: 0,
                                    },
                                  },
                                  msg_down_stream_info: [
                                    {
                                      msg_user_info: {
                                        str_identifier: "",
                                        uint64_tinyid: "",
                                      },
                                      msg_audio_status: {
                                        uint32_audio_format: 0,
                                        uint32_audio_sample_rate: 0,
                                        uint32_audio_codec_bitrate: 0,
                                        uint32_audio_total_bitrate: 0,
                                        uint32_audio_level: 0,
                                        uint32_audio_energy: 0,
                                        uint32_audio_receive: 0,
                                        uint32_audio_origin_lost: 0,
                                        uint32_audio_final_lost: 0,
                                        audioLevel: 0,
                                      },
                                      msg_video_status: [
                                        {
                                          uint32_video_stream_type: 0,
                                          uint32_video_receive_fps: 0,
                                          uint32_video_width: 0,
                                          uint32_video_height: 0,
                                          uint32_video_codec_bitrate: 0,
                                          uint32_video_receive: 0,
                                          uint32_video_origin_lost: 0,
                                          uint32_video_block_time: 0,
                                          uint32_video_dec_fps: 0,
                                        },
                                      ],
                                      msg_network_status: {
                                        uint32_bitrate: 0,
                                        uint32_rtt: 0,
                                        uint32_lost: 0,
                                        uint32_jitter: 0,
                                      },
                                    },
                                  ],
                                }),
                                (C.next = 4),
                                this.getStats(h, v)
                              );
                            case 4:
                              return (
                                (b = C.sent),
                                JSON.stringify(this.prevReport_) === "{}" &&
                                  (this.prevReport_ = JSON.parse(
                                    JSON.stringify(_)
                                  )),
                                this.prepareReport({
                                  stats: b,
                                  report: _,
                                  freezeMap: g,
                                  uplinkConnection: h,
                                  downlinkConnections: v,
                                }),
                                (this.prevReportTime_ = Date.now()),
                                C.abrupt("return", _)
                              );
                            case 9:
                            case "end":
                              return C.stop();
                          }
                      },
                      s,
                      this
                    );
                  })
                )),
                function (s) {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "reset",
              value: function () {
                (this.prevReportTime_ = 0),
                  (this.prevReport_ = {}),
                  (this.prevEncoderImplementation_ = ""),
                  (this.prevQualityLimitationReason_ = ""),
                  (this.prevDecoderImplementationMap_ =
                    /* @__PURE__ */ new Map());
              },
            },
          ]),
          u
        );
      })(),
      tj = (function () {
        function u(a) {
          var c = a.signalChannel,
            s = a.connections,
            l = a.client;
          B(this, u),
            (this.client_ = l),
            (this.signalChannel_ = c),
            (this.connections_ = s),
            (this.client_ = l),
            (this.log_ = ft.createLogger({
              id: "q|" + this.client_.getUserId(),
              userId: this.client_.getUserId(),
              sdkAppId: this.client_.getSDKAppId(),
            })),
            (this.uplinkConnection_ = null),
            (this.uplinkNetworkQuality_ = 0),
            (this.uplinkRTT_ = 0),
            (this.uplinkLoss_ = 0),
            (this.downlinkNetworkQuality_ = 0),
            (this.downlinkRTT_ = 0),
            (this.downlinkLoss_ = 0),
            (this.downlinkPrevStatMap_ = /* @__PURE__ */ new Map()),
            (this.downlinkLossAndRTTMap_ = /* @__PURE__ */ new Map()),
            (this.interval_ = -1),
            (this.emitter_ = new rs()),
            this.initialize();
        }
        var e, n;
        return (
          oe(u, [
            {
              key: "uplinkNetworkQuality",
              get: function () {
                return this.uplinkNetworkQuality_;
              },
              set: function (c) {
                c !== this.uplinkNetworkQuality_ &&
                  this.log_.info(
                    "uplink network quality change "
                      .concat(this.uplinkNetworkQuality, " -> ")
                      .concat(c, ", rtt: ")
                      .concat(this.uplinkRTT_, ", loss: ")
                      .concat(this.uplinkLoss_)
                  ),
                  (this.uplinkNetworkQuality_ = c);
              },
            },
            {
              key: "downlinkNetworkQuality",
              get: function () {
                return this.downlinkNetworkQuality_;
              },
              set: function (c) {
                if (c !== this.downlinkNetworkQuality_) {
                  var s = this.getAverageLossAndRTT(
                      Ze(this.downlinkLossAndRTTMap_.values())
                    ),
                    l = s.rtt,
                    h = s.loss;
                  this.log_.info(
                    "downlink network quality change "
                      .concat(this.downlinkNetworkQuality, " -> ")
                      .concat(c, ", rtt: ")
                      .concat(l, ", loss: ")
                      .concat(h)
                  );
                }
                this.downlinkNetworkQuality_ = c;
              },
            },
            {
              key: "initialize",
              value: function () {
                var c = this;
                this.signalChannel_.on(Cn.UPLINK_NETWORK_STATS, function (s) {
                  c.handleUplinkNetworkQuality(s);
                }),
                  this.signalChannel_.on(
                    Ny,
                    this.handleSignalConnectionStateChange.bind(this)
                  ),
                  this.start();
              },
            },
            {
              key: "handleUplinkNetworkQuality",
              value: function (c) {
                if (!this.uplinkConnection_)
                  return (
                    (this.uplinkNetworkQuality = 0),
                    (this.uplinkLoss_ = 0),
                    void (this.uplinkRTT_ = 0)
                  );
                var s = this.uplinkConnection_.getPeerConnection();
                if (s && this.isPeerConnectionDisconnected(s))
                  return (
                    (this.uplinkNetworkQuality = 6),
                    (this.uplinkLoss_ = 0),
                    void (this.uplinkRTT_ = 0)
                  );
                if (c.data.code === 0) {
                  var l = c.data.data,
                    h = l.expectAudPkg + l.expectVidPkg,
                    v = l.recvAudPkg + l.recvVidPkg,
                    g = h - v,
                    _ = l.delay;
                  if ((_ && this.updateDelay(_), h === 0 && v === 0)) return;
                  (this.uplinkLoss_ = g <= 0 ? 0 : Math.round((g / h) * 100)),
                    (this.uplinkRTT_ = l.rtt),
                    (this.uplinkNetworkQuality = this.getNetworkQuality(
                      this.uplinkLoss_,
                      this.uplinkRTT_
                    ));
                }
              },
            },
            {
              key: "handleDownlinkNetworkQuality",
              value:
                ((n = I(
                  m().mark(function a() {
                    var c,
                      s,
                      l,
                      h,
                      v,
                      g,
                      _,
                      b,
                      C,
                      N,
                      z,
                      F,
                      U,
                      E,
                      A,
                      L = this;
                    return m().wrap(
                      function ($) {
                        for (;;)
                          switch (($.prev = $.next)) {
                            case 0:
                              if (
                                this.connections_ &&
                                this.connections_.size !== 0
                              ) {
                                $.next = 3;
                                break;
                              }
                              return (
                                (this.downlinkNetworkQuality = 0),
                                $.abrupt("return")
                              );
                            case 3:
                              if (
                                ((c = Ze(this.connections_.values())),
                                (s = c.filter(function (te) {
                                  return (
                                    te.getPeerConnection() &&
                                    te.getPeerConnection().connectionState ===
                                      gT
                                  );
                                })),
                                c.filter(function (te) {
                                  return (
                                    te.getPeerConnection() &&
                                    L.isPeerConnectionDisconnected(
                                      te.getPeerConnection()
                                    )
                                  );
                                }).length !== c.length)
                              ) {
                                $.next = 9;
                                break;
                              }
                              return (
                                (this.downlinkNetworkQuality = 6),
                                $.abrupt("return")
                              );
                            case 9:
                              l = 0;
                            case 10:
                              if (!(l < s.length)) {
                                $.next = 31;
                                break;
                              }
                              return (
                                (h = s[l].getPeerConnection()),
                                ($.next = 14),
                                this.getStat(h)
                              );
                            case 14:
                              if (
                                ((v = $.sent),
                                (g = v.rtt),
                                (_ = v.totalPacketsLost),
                                (b = v.totalPacketsReceived),
                                this.downlinkPrevStatMap_.has(h))
                              ) {
                                $.next = 21;
                                break;
                              }
                              return (
                                this.downlinkPrevStatMap_.set(h, {
                                  totalPacketsLost: _,
                                  totalPacketsReceived: b,
                                }),
                                $.abrupt("continue", 28)
                              );
                            case 21:
                              (C = 0),
                                (N = this.downlinkPrevStatMap_.get(h)),
                                (z = _ - N.totalPacketsLost),
                                (F = b - N.totalPacketsReceived),
                                (C =
                                  z <= 0 || F < 0
                                    ? 0
                                    : Math.round((z / (z + F)) * 100)),
                                this.downlinkPrevStatMap_.set(h, {
                                  totalPacketsLost: _,
                                  totalPacketsReceived: b,
                                }),
                                this.downlinkLossAndRTTMap_.set(h, {
                                  rtt: g,
                                  loss: C,
                                  userId: s[l].getUserId(),
                                });
                            case 28:
                              l++, ($.next = 10);
                              break;
                            case 31:
                              if (
                                (Ze(this.downlinkPrevStatMap_.keys()).forEach(
                                  function (te) {
                                    L.isPeerConnectionDisconnected(te) &&
                                      (L.downlinkPrevStatMap_.delete(te),
                                      L.downlinkLossAndRTTMap_.delete(te));
                                  }
                                ),
                                this.downlinkLossAndRTTMap_.size !== 0)
                              ) {
                                $.next = 34;
                                break;
                              }
                              return $.abrupt("return");
                            case 34:
                              (U = this.getAverageLossAndRTT(
                                Ze(this.downlinkLossAndRTTMap_.values())
                              )),
                                (E = U.rtt),
                                (A = U.loss),
                                (this.downlinkRTT_ = E),
                                (this.downlinkLoss_ = A),
                                (this.downlinkNetworkQuality =
                                  this.getNetworkQuality(A, E));
                            case 38:
                            case "end":
                              return $.stop();
                          }
                      },
                      a,
                      this
                    );
                  })
                )),
                function () {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "getStat",
              value:
                ((e = I(
                  m().mark(function a(c) {
                    var s, l, h, v;
                    return m().wrap(
                      function (g) {
                        for (;;)
                          switch ((g.prev = g.next)) {
                            case 0:
                              if (
                                ((s = {
                                  rtt: 0,
                                  totalPacketsLost: 0,
                                  totalPacketsReceived: 0,
                                }),
                                c && MI())
                              ) {
                                g.next = 3;
                                break;
                              }
                              return g.abrupt("return", s);
                            case 3:
                              (l = c.getReceivers()), (g.prev = 4), (h = 0);
                            case 6:
                              if (!(h < l.length)) {
                                g.next = 15;
                                break;
                              }
                              return (v = l[h]), (g.next = 10), v.getStats();
                            case 10:
                              g.sent.forEach(function (_) {
                                _.type === "candidate-pair" &&
                                  Ki(_.currentRoundTripTime) &&
                                  (s.rtt = Math.round(
                                    1e3 * _.currentRoundTripTime
                                  )),
                                  _.type !== "inbound-rtp" ||
                                    (_.mediaType !== Ct &&
                                      _.mediaType !== wt) ||
                                    ((s.totalPacketsLost += _.packetsLost),
                                    (s.totalPacketsReceived +=
                                      _.packetsReceived));
                              });
                            case 12:
                              h++, (g.next = 6);
                              break;
                            case 15:
                              return g.abrupt("return", s);
                            case 18:
                              return (
                                (g.prev = 18),
                                (g.t0 = g.catch(4)),
                                g.abrupt("return", s)
                              );
                            case 21:
                            case "end":
                              return g.stop();
                          }
                      },
                      a,
                      null,
                      [[4, 18]]
                    );
                  })
                )),
                function (a) {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "getAverageLossAndRTT",
              value: function (c) {
                var s = { rtt: 0, loss: 0 };
                return (
                  Array.isArray(c) &&
                    c.length > 0 &&
                    (c.forEach(function (l) {
                      (s.rtt += l.rtt), (s.loss += l.loss);
                    }),
                    Object.keys(s).forEach(function (l) {
                      s[l] = Math.round(s[l] / c.length);
                    })),
                  s
                );
              },
            },
            {
              key: "getNetworkQuality",
              value: function (c, s) {
                return c > 50 || s > 500
                  ? 5
                  : c > 30 || s > 350
                  ? 4
                  : c > 20 || s > 200
                  ? 3
                  : c > 10 || s > 100
                  ? 2
                  : c >= 0 || s >= 0
                  ? 1
                  : 0;
              },
            },
            {
              key: "handleSignalConnectionStateChange",
              value: function (c) {
                c.state === Zp
                  ? ((this.uplinkRTT_ = 0),
                    (this.uplinkLoss_ = 0),
                    (this.uplinkNetworkQuality = 6))
                  : c.state === rh &&
                    this.uplinkNetworkQuality === 6 &&
                    (this.uplinkNetworkQuality = 5);
              },
            },
            {
              key: "handleUplinkConnectionStateChange",
              value: function (c) {
                var s = c.state;
                s === Vr
                  ? ((this.uplinkLoss_ = 0),
                    (this.uplinkRTT_ = 0),
                    (this.uplinkNetworkQuality = 6))
                  : s === Fr &&
                    this.uplinkNetworkQuality === 6 &&
                    (this.uplinkNetworkQuality = 5);
              },
            },
            {
              key: "isPeerConnectionDisconnected",
              value: function (c) {
                return !(
                  !c ||
                  (c.connectionState !== WM &&
                    c.connectionState !== mT &&
                    c.connectionState !== g0)
                );
              },
            },
            {
              key: "setUplinkConnection",
              value: function (c) {
                (this.uplinkConnection_ = c),
                  this.uplinkConnection_
                    ? this.uplinkConnection_.on(
                        _n.CONNECTION_STATE_CHANGED,
                        this.handleUplinkConnectionStateChange.bind(this)
                      )
                    : ((this.uplinkNetworkQuality = 0),
                      (this.uplinkRTT_ = 0),
                      (this.uplinkLoss_ = 0));
              },
            },
            {
              key: "start",
              value: function () {
                var c = this;
                this.interval_ === -1
                  ? (this.log_.info("start network quality calculating"),
                    (this.interval_ = Nn.run(
                      jc,
                      function () {
                        c.handleDownlinkNetworkQuality(),
                          Ee.emit(Cy, {
                            client: c.client_,
                            uplinkNetworkQuality: c.uplinkNetworkQuality,
                            downlinkNetworkQuality: c.downlinkNetworkQuality,
                            uplinkRTT: c.uplinkRTT_,
                            uplinkLoss: c.uplinkLoss_,
                            downlinkRTT: c.downlinkRTT_,
                            downlinkLoss: c.downlinkLoss_,
                            downlinkLossAndRTTMap: c.downlinkLossAndRTTMap_,
                          }),
                          c.emitter_.emit(An.NETWORK_QUALITY, {
                            uplinkNetworkQuality: c.uplinkNetworkQuality,
                            downlinkNetworkQuality: c.downlinkNetworkQuality,
                            uplinkRTT: c.uplinkRTT_,
                            uplinkLoss: c.uplinkLoss_,
                            downlinkRTT: c.downlinkRTT_,
                            downlinkLoss: c.downlinkLoss_,
                          });
                      },
                      { delay: 2e3 }
                    )))
                  : this.log_.info(
                      "network quality calculating is already started"
                    );
              },
            },
            {
              key: "stop",
              value: function () {
                this.log_.info("stop network quality calculating"),
                  this.interval_ !== -1 &&
                    (Nn.clearTask(this.interval_), (this.interval_ = -1)),
                  this.downlinkLossAndRTTMap_.clear(),
                  this.downlinkPrevStatMap_.clear();
              },
            },
            {
              key: "on",
              value: function (c, s) {
                this.emitter_.on(c, s);
              },
            },
            {
              key: "updateDelay",
              value: function (c) {
                var s = this;
                c.forEach(function (l) {
                  var h = l.srcTinyId,
                    v = l.videoDelay,
                    g = l.audioDelay,
                    _ = s.connections_.get(h);
                  _ && _.setDelay({ videoDelay: v, audioDelay: g });
                });
              },
            },
          ]),
          u
        );
      })(),
      nj = (function () {
        function u(a) {
          B(this, u),
            (this.log_ = ft.createLogger({
              id: a.client.getUserId(),
              userId: a.client.getUserId(),
              sdkAppId: a.client.getSDKAppId(),
            })),
            (this.localStream_ = null),
            (this.prevDevices_ = []),
            this.initialize();
        }
        var e, n;
        return (
          oe(u, [
            {
              key: "initialize",
              value: function () {
                navigator.mediaDevices &&
                  navigator.mediaDevices.addEventListener &&
                  ((this.onDeviceChange = this.onDeviceChange.bind(this)),
                  navigator.mediaDevices.addEventListener(
                    "devicechange",
                    this.onDeviceChange
                  ));
              },
            },
            {
              key: "destroy",
              value: function () {
                navigator.mediaDevices &&
                  navigator.mediaDevices.removeEventListener &&
                  navigator.mediaDevices.removeEventListener(
                    "devicechange",
                    this.onDeviceChange
                  );
              },
            },
            {
              key: "onDeviceChange",
              value:
                ((n = I(
                  m().mark(function a() {
                    var c,
                      s,
                      l,
                      h = this;
                    return m().wrap(
                      function (v) {
                        for (;;)
                          switch ((v.prev = v.next)) {
                            case 0:
                              if (
                                this.localStream_ &&
                                this.localStream_.getMediaStream() &&
                                !this.localStream_.getScreen()
                              ) {
                                v.next = 2;
                                break;
                              }
                              return v.abrupt("return");
                            case 2:
                              return (v.next = 4), a1();
                            case 4:
                              (c = v.sent),
                                (s = c.filter(function (g) {
                                  return (
                                    h.prevDevices_.findIndex(function (_) {
                                      var b = _.deviceId;
                                      return g.deviceId === b;
                                    }) < 0
                                  );
                                })),
                                (l = this.prevDevices_.filter(function (g) {
                                  return (
                                    c.findIndex(function (_) {
                                      var b = _.deviceId;
                                      return g.deviceId === b;
                                    }) < 0
                                  );
                                })),
                                s.length > 0 &&
                                  this.handleDeviceAdded(this.prevDevices_, s),
                                l.length > 0 && this.handleDeviceRemoved(c, l),
                                (this.prevDevices_ = c);
                            case 10:
                            case "end":
                              return v.stop();
                          }
                      },
                      a,
                      this
                    );
                  })
                )),
                function () {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "setLocalStream",
              value:
                ((e = I(
                  m().mark(function a(c) {
                    return m().wrap(
                      function (s) {
                        for (;;)
                          switch ((s.prev = s.next)) {
                            case 0:
                              if (!c) {
                                s.next = 4;
                                break;
                              }
                              return (s.next = 3), a1();
                            case 3:
                              this.prevDevices_ = s.sent;
                            case 4:
                              this.localStream_ = c;
                            case 5:
                            case "end":
                              return s.stop();
                          }
                      },
                      a,
                      this
                    );
                  })
                )),
                function (a) {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "handleDeviceAdded",
              value: function (c, s) {
                var l, h;
                if (this.localStream_) {
                  this.log_.warn("devicesAdded: ".concat(JSON.stringify(s))),
                    this.localStream_.updateDeviceIdInUse();
                  var v = s.filter(function (z) {
                      return z.kind === Ip;
                    }),
                    g = s.filter(function (z) {
                      return z.kind === Wd;
                    }),
                    _ = c.filter(function (z) {
                      return z.kind === Ip;
                    }),
                    b = c.filter(function (z) {
                      return z.kind === Wd;
                    }),
                    C =
                      v.length > 0 &&
                      _.length === 0 &&
                      ((l = this.localStream_.getVideoTrack()) === null ||
                      l === void 0
                        ? void 0
                        : l.readyState) !== "live",
                    N =
                      g.length > 0 &&
                      b.length === 0 &&
                      ((h = this.localStream_.getAudioTrack()) === null ||
                      h === void 0
                        ? void 0
                        : h.readyState) !== "live";
                  if (N && C)
                    return (
                      this.log_.info(
                        "new microphone and camera detected, but there was no device before."
                      ),
                      void this.localStream_.recoverCapture({
                        audio: !0,
                        video: !0,
                        cameraId: v[0].deviceId,
                        microphoneId: g[0].deviceId,
                      })
                    );
                  C &&
                    (this.log_.info(
                      "new camera detected, but there was no camera before."
                    ),
                    this.localStream_.recoverCapture({
                      audio: !1,
                      video: !0,
                      cameraId: v[0].deviceId,
                    })),
                    N &&
                      (this.log_.info(
                        "new microphone detected, but there was no microphone before."
                      ),
                      this.localStream_.recoverCapture({
                        audio: !0,
                        video: !1,
                        microphoneId: g[0].deviceId,
                      }));
                }
              },
            },
            {
              key: "handleDeviceRemoved",
              value: function (c, s) {
                if (this.localStream_) {
                  this.log_.warn("devicesRemoved: ".concat(JSON.stringify(s))),
                    this.localStream_.updateDeviceIdInUse();
                  var l = !1,
                    h = !1,
                    v = this.localStream_.getCameraId(),
                    g = this.localStream_.getMicrophoneId();
                  if (g === Pp) {
                    var _ = this.localStream_.getMicrophoneGroupId(),
                      b = c.filter(function (C) {
                        return C.deviceId === Pp && C.kind === Wd;
                      })[0];
                    b && b.groupId !== _ && (h = !0);
                  }
                  if (
                    (s.forEach(function (C) {
                      var N = C.deviceId;
                      v.length > 0 && N === v
                        ? (l = !0)
                        : g.length > 0 && N === g && (h = !0);
                    }),
                    l && h)
                  )
                    return (
                      this.log_.warn(
                        "current camera and microphone in use is lost, cameraId: "
                          .concat(v, ", microphoneId: ")
                          .concat(g)
                      ),
                      void (
                        (this.localStream_.getAudio() ||
                          this.localStream_.getVideo()) &&
                        this.localStream_.recoverCapture({
                          video: !0,
                          audio: !0,
                        })
                      )
                    );
                  l &&
                    (this.log_.warn(
                      "current camera in use is lost, deviceId: ".concat(v)
                    ),
                    this.localStream_.getVideo() &&
                      this.localStream_.recoverCapture({
                        video: !0,
                        audio: !1,
                      })),
                    h &&
                      (this.log_.warn(
                        "current microphone in use is lost, deviceId: ".concat(
                          g
                        )
                      ),
                      this.localStream_.getAudio() &&
                        this.localStream_.recoverCapture({
                          video: !1,
                          audio: !0,
                        }));
                }
              },
            },
          ]),
          u
        );
      })();
    function i1() {
      return (
        (i1 = I(
          m().mark(function u() {
            var e;
            return m().wrap(function (n) {
              for (;;)
                switch ((n.prev = n.next)) {
                  case 0:
                    if (!nv() && !tv()) {
                      n.next = 2;
                      break;
                    }
                    return n.abrupt("return", []);
                  case 2:
                    return (n.next = 4), rv();
                  case 4:
                    return (
                      (e = n.sent),
                      n.abrupt(
                        "return",
                        e
                          .filter(function (a) {
                            return a.kind === Ip;
                          })
                          .map(function (a, c) {
                            var s = a.label;
                            a.label || (s = "camera_" + c);
                            var l = {
                              label: s,
                              deviceId: a.deviceId,
                              kind: a.kind,
                            };
                            return (
                              a.groupId && (l.groupId = a.groupId),
                              a.getCapabilities &&
                                (l.getCapabilities = function () {
                                  return a.getCapabilities();
                                }),
                              l
                            );
                          })
                      )
                    );
                  case 6:
                  case "end":
                    return n.stop();
                }
            }, u);
          })
        )),
        i1.apply(this, arguments)
      );
    }
    var zI = /* @__PURE__ */ new Set();
    function rv() {
      return HI.apply(this, arguments);
    }
    function HI() {
      return (HI = I(
        m().mark(function u() {
          var e;
          return m().wrap(function (n) {
            for (;;)
              switch ((n.prev = n.next)) {
                case 0:
                  if (!nv() && !tv()) {
                    n.next = 2;
                    break;
                  }
                  return n.abrupt("return", []);
                case 2:
                  return (
                    (n.next = 4), navigator.mediaDevices.enumerateDevices()
                  );
                case 4:
                  return (
                    (e = n.sent).forEach(function (a) {
                      zI.add("".concat(a.deviceId, "_").concat(a.kind));
                    }),
                    n.abrupt("return", e)
                  );
                case 7:
                case "end":
                  return n.stop();
              }
          }, u);
        })
      )).apply(this, arguments);
    }
    function a1() {
      return o1.apply(this, arguments);
    }
    function o1() {
      return (
        (o1 = I(
          m().mark(function u() {
            var e;
            return m().wrap(function (n) {
              for (;;)
                switch ((n.prev = n.next)) {
                  case 0:
                    return (n.next = 2), rv();
                  case 2:
                    return (
                      (e = n.sent),
                      n.abrupt(
                        "return",
                        e
                          .filter(function (a) {
                            return a.kind !== Wd || a.deviceId != JT;
                          })
                          .map(function (a, c) {
                            var s = a.label;
                            a.label || (s = a.kind + "_" + c);
                            var l = {
                              label: s,
                              deviceId: a.deviceId,
                              kind: a.kind,
                            };
                            return (
                              a.groupId && (l.groupId = a.groupId),
                              a.getCapabilities &&
                                (l.getCapabilities = function () {
                                  return a.getCapabilities();
                                }),
                              l
                            );
                          })
                      )
                    );
                  case 4:
                  case "end":
                    return n.stop();
                }
            }, u);
          })
        )),
        o1.apply(this, arguments)
      );
    }
    function WI() {
      return s1.apply(this, arguments);
    }
    function s1() {
      return (
        (s1 = I(
          m().mark(function u() {
            var e;
            return m().wrap(function (n) {
              for (;;)
                switch ((n.prev = n.next)) {
                  case 0:
                    return (n.next = 2), rv();
                  case 2:
                    return (
                      (e = n.sent),
                      n.abrupt(
                        "return",
                        e
                          .filter(function (a) {
                            return a.kind === Wd && a.deviceId !== JT;
                          })
                          .map(function (a, c) {
                            var s = a.label;
                            a.label || (s = "microphone_" + c);
                            var l = {
                              label: s,
                              deviceId: a.deviceId,
                              kind: a.kind,
                            };
                            return (
                              a.groupId && (l.groupId = a.groupId),
                              a.getCapabilities &&
                                (l.getCapabilities = function () {
                                  return a.getCapabilities();
                                }),
                              l
                            );
                          })
                      )
                    );
                  case 4:
                  case "end":
                    return n.stop();
                }
            }, u);
          })
        )),
        s1.apply(this, arguments)
      );
    }
    function GI() {
      return u1.apply(this, arguments);
    }
    function u1() {
      return (
        (u1 = I(
          m().mark(function u() {
            var e;
            return m().wrap(function (n) {
              for (;;)
                switch ((n.prev = n.next)) {
                  case 0:
                    return (n.next = 2), rv();
                  case 2:
                    return (
                      (e = n.sent),
                      n.abrupt(
                        "return",
                        e
                          .filter(function (a) {
                            return a.kind === "audiooutput";
                          })
                          .map(function (a, c) {
                            var s = a.label;
                            a.label || (s = "speaker_" + c);
                            var l = {
                              label: s,
                              deviceId: a.deviceId,
                              kind: a.kind,
                            };
                            return a.groupId && (l.groupId = a.groupId), l;
                          })
                      )
                    );
                  case 4:
                  case "end":
                    return n.stop();
                }
            }, u);
          })
        )),
        u1.apply(this, arguments)
      );
    }
    function rj(u) {
      var e;
      if (
        u instanceof CanvasCaptureMediaStreamTrack ||
        !(u instanceof window.MediaStreamTrack)
      )
        return !1;
      var n = u.label.toLocaleLowerCase();
      if (n.includes("camera") || n.includes("webcam")) return !0;
      var a = ""
        .concat(
          (e = u.getSettings()) === null || e === void 0 ? void 0 : e.deviceId,
          "_"
        )
        .concat(Ip);
      return !!zI.has(a);
    }
    function ij(u, e) {
      return qI.apply(this, arguments);
    }
    function qI() {
      return (qI = I(
        m().mark(function u(e, n) {
          var a, c;
          return m().wrap(function (s) {
            for (;;)
              switch ((s.prev = s.next)) {
                case 0:
                  return (s.next = 2), WI();
                case 2:
                  if (
                    ((a = s.sent),
                    ((c = a.find(function (l) {
                      return l.deviceId === Pp;
                    })) == null
                      ? void 0
                      : c.groupId) !== e || c.label !== n)
                  ) {
                    s.next = 6;
                    break;
                  }
                  return s.abrupt("return", !0);
                case 6:
                  return s.abrupt("return", !1);
                case 7:
                case "end":
                  return s.stop();
              }
          }, u);
        })
      )).apply(this, arguments);
    }
    var Ci,
      KI = qu.exports,
      aj = Hn,
      oj = Wn,
      sj = YS,
      uj = ao,
      cj = Re,
      lj = mr,
      dj = function (e, n, a, c) {
        try {
          return c ? n(oj(a)[0], a[1]) : n(a);
        } catch (s) {
          sj(e, "throw", s);
        }
      },
      hj = zg,
      fj = rp,
      pj = Zn,
      JI = Wi,
      vj = Qf,
      mj = Ed,
      $I = Array,
      YI = function (e) {
        var n = lj(e),
          a = fj(this),
          c = arguments.length,
          s = c > 1 ? arguments[1] : void 0,
          l = s !== void 0;
        l && (s = uj(s, c > 2 ? arguments[2] : void 0));
        var h,
          v,
          g,
          _,
          b,
          C,
          N = mj(n),
          z = 0;
        if (!N || (this === $I && hj(N)))
          for (h = pj(n), v = a ? new this(h) : $I(h); h > z; z++)
            (C = l ? s(n[z], z) : n[z]), JI(v, z, C);
        else
          for (
            b = (_ = vj(n, N)).next, v = a ? new this() : [];
            !(g = cj(b, _)).done;
            z++
          )
            (C = l ? dj(_, s, [g.value, z], !0) : g.value), JI(v, z, C);
        return (v.length = z), v;
      },
      gu = He,
      c1 = 2147483647,
      gj = /[^\0-\u007E]/,
      ZI = /[.\u3002\uFF0E\uFF61]/g,
      QI = "Overflow: input needs wider integers to process",
      XI = RangeError,
      _j = gu(ZI.exec),
      Qc = Math.floor,
      l1 = String.fromCharCode,
      eR = gu("".charCodeAt),
      tR = gu([].join),
      os = gu([].push),
      yj = gu("".replace),
      bj = gu("".split),
      Sj = gu("".toLowerCase),
      nR = function (e) {
        return e + 22 + 75 * (e < 26);
      },
      wj = function (e, n, a) {
        var c = 0;
        for (e = a ? Qc(e / 700) : e >> 1, e += Qc(e / n); e > 455; )
          (e = Qc(e / 35)), (c += 36);
        return Qc(c + (36 * e) / (e + 38));
      },
      kj = function (e) {
        var n = [];
        e = (function (A) {
          for (var L = [], $ = 0, te = A.length; $ < te; ) {
            var X = eR(A, $++);
            if (X >= 55296 && X <= 56319 && $ < te) {
              var D = eR(A, $++);
              (64512 & D) == 56320
                ? os(L, ((1023 & X) << 10) + (1023 & D) + 65536)
                : (os(L, X), $--);
            } else os(L, X);
          }
          return L;
        })(e);
        var a,
          c,
          s = e.length,
          l = 128,
          h = 0,
          v = 72;
        for (a = 0; a < e.length; a++) (c = e[a]) < 128 && os(n, l1(c));
        var g = n.length,
          _ = g;
        for (g && os(n, "-"); _ < s; ) {
          var b = c1;
          for (a = 0; a < e.length; a++) (c = e[a]) >= l && c < b && (b = c);
          var C = _ + 1;
          if (b - l > Qc((c1 - h) / C)) throw XI(QI);
          for (h += (b - l) * C, l = b, a = 0; a < e.length; a++) {
            if ((c = e[a]) < l && ++h > c1) throw XI(QI);
            if (c == l) {
              for (var N = h, z = 36; ; ) {
                var F = z <= v ? 1 : z >= v + 26 ? 26 : z - v;
                if (N < F) break;
                var U = N - F,
                  E = 36 - F;
                os(n, l1(nR(F + (U % E)))), (N = Qc(U / E)), (z += 36);
              }
              os(n, l1(nR(N))), (v = wj(h, C, _ == g)), (h = 0), _++;
            }
          }
          h++, l++;
        }
        return tR(n, "");
      },
      Tj = Ut,
      d1 = ct,
      Ej = yk,
      h1 = ot,
      rR = ao,
      Ai = He,
      iv = fr,
      xi = function (e, n, a) {
        return (
          a.get && KI(a.get, n, { getter: !0 }),
          a.set && KI(a.set, n, { setter: !0 }),
          aj.f(e, n, a)
        );
      },
      Ij = zo,
      f1 = Jn,
      p1 = XE,
      Xc = YI,
      Yi = gc,
      Rj = Jg.codeAt,
      Cj = function (e) {
        var n,
          a,
          c = [],
          s = bj(yj(Sj(e), ZI, "."), ".");
        for (n = 0; n < s.length; n++)
          (a = s[n]), os(c, _j(gj, a) ? "xn--" + kj(a) : a);
        return tR(c, ".");
      },
      po = _r,
      Aj = En,
      xj = np,
      iR = wN,
      aR = On,
      Oj = aR.set,
      av = aR.getterFor("URL"),
      Pj = iR.URLSearchParams,
      Dj = iR.getState,
      sh = h1.URL,
      v1 = h1.TypeError,
      ov = h1.parseInt,
      Nj = Math.floor,
      oR = Math.pow,
      Oi = Ai("".charAt),
      Zi = Ai(/./.exec),
      uh = Ai([].join),
      Lj = Ai((1).toString),
      Mj = Ai([].pop),
      el = Ai([].push),
      sR = Ai("".replace),
      Uj = Ai([].shift),
      Vj = Ai("".split),
      ch = Ai("".slice),
      sv = Ai("".toLowerCase),
      Fj = Ai([].unshift),
      m1 = "Invalid scheme",
      _u = "Invalid host",
      uR = "Invalid port",
      cR = /[a-z]/i,
      jj = /[\d+-.a-z]/i,
      g1 = /\d/,
      Bj = /^0x/i,
      zj = /^[0-7]+$/,
      Hj = /^\d+$/,
      lR = /^[\da-f]+$/i,
      Wj = /[\0\t\n\r #%/:<>?@[\\\]^|]/,
      Gj = /[\0\t\n\r #/:<>?@[\\\]^|]/,
      qj = /^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,
      Kj = /[\t\n\r]/g,
      lh = function (e) {
        var n, a, c, s;
        if (typeof e == "number") {
          for (n = [], a = 0; a < 4; a++) Fj(n, e % 256), (e = Nj(e / 256));
          return uh(n, ".");
        }
        if (vt(e) == "object") {
          for (
            n = "",
              c = (function (l) {
                for (var h = null, v = 1, g = null, _ = 0, b = 0; b < 8; b++)
                  l[b] !== 0
                    ? (_ > v && ((h = g), (v = _)), (g = null), (_ = 0))
                    : (g === null && (g = b), ++_);
                return _ > v && ((h = g), (v = _)), h;
              })(e),
              a = 0;
            a < 8;
            a++
          )
            (s && e[a] === 0) ||
              (s && (s = !1),
              c === a
                ? ((n += a ? ":" : "::"), (s = !0))
                : ((n += Lj(e[a], 16)), a < 7 && (n += ":")));
          return "[" + n + "]";
        }
        return e;
      },
      uv = {},
      dR = p1({}, uv, { " ": 1, '"': 1, "<": 1, ">": 1, "`": 1 }),
      hR = p1({}, dR, { "#": 1, "?": 1, "{": 1, "}": 1 }),
      _1 = p1({}, hR, {
        "/": 1,
        ":": 1,
        ";": 1,
        "=": 1,
        "@": 1,
        "[": 1,
        "\\": 1,
        "]": 1,
        "^": 1,
        "|": 1,
      }),
      ss = function (e, n) {
        var a = Rj(e, 0);
        return a > 32 && a < 127 && !f1(n, e) ? e : encodeURIComponent(e);
      },
      cv = { ftp: 21, file: null, http: 80, https: 443, ws: 80, wss: 443 },
      dh = function (e, n) {
        var a;
        return (
          e.length == 2 &&
          Zi(cR, Oi(e, 0)) &&
          ((a = Oi(e, 1)) == ":" || (!n && a == "|"))
        );
      },
      fR = function (e) {
        var n;
        return (
          e.length > 1 &&
          dh(ch(e, 0, 2)) &&
          (e.length == 2 ||
            (n = Oi(e, 2)) === "/" ||
            n === "\\" ||
            n === "?" ||
            n === "#")
        );
      },
      Jj = function (e) {
        return e === "." || sv(e) === "%2e";
      },
      y1 = {},
      pR = {},
      b1 = {},
      vR = {},
      mR = {},
      S1 = {},
      gR = {},
      _R = {},
      lv = {},
      dv = {},
      w1 = {},
      k1 = {},
      T1 = {},
      E1 = {},
      yR = {},
      I1 = {},
      tl = {},
      Pa = {},
      bR = {},
      yu = {},
      vo = {},
      R1 = function (e, n, a) {
        var c,
          s,
          l,
          h = po(e);
        if (n) {
          if ((s = this.parse(h))) throw v1(s);
          this.searchParams = null;
        } else {
          if (
            (a !== void 0 && (c = new R1(a, !0)), (s = this.parse(h, null, c)))
          )
            throw v1(s);
          (l = Dj(new Pj())).bindURL(this), (this.searchParams = l);
        }
      };
    R1.prototype = {
      type: "URL",
      parse: function (e, n, a) {
        var c,
          s,
          l,
          h,
          v,
          g = this,
          _ = n || y1,
          b = 0,
          C = "",
          N = !1,
          z = !1,
          F = !1;
        for (
          e = po(e),
            n ||
              ((g.scheme = ""),
              (g.username = ""),
              (g.password = ""),
              (g.host = null),
              (g.port = null),
              (g.path = []),
              (g.query = null),
              (g.fragment = null),
              (g.cannotBeABaseURL = !1),
              (e = sR(e, qj, ""))),
            e = sR(e, Kj, ""),
            c = Xc(e);
          b <= c.length;

        ) {
          switch (((s = c[b]), _)) {
            case y1:
              if (!s || !Zi(cR, s)) {
                if (n) return m1;
                _ = b1;
                continue;
              }
              (C += sv(s)), (_ = pR);
              break;
            case pR:
              if (s && (Zi(jj, s) || s == "+" || s == "-" || s == "."))
                C += sv(s);
              else {
                if (s != ":") {
                  if (n) return m1;
                  (C = ""), (_ = b1), (b = 0);
                  continue;
                }
                if (
                  n &&
                  (g.isSpecial() != f1(cv, C) ||
                    (C == "file" &&
                      (g.includesCredentials() || g.port !== null)) ||
                    (g.scheme == "file" && !g.host))
                )
                  return;
                if (((g.scheme = C), n))
                  return void (
                    g.isSpecial() &&
                    cv[g.scheme] == g.port &&
                    (g.port = null)
                  );
                (C = ""),
                  g.scheme == "file"
                    ? (_ = E1)
                    : g.isSpecial() && a && a.scheme == g.scheme
                    ? (_ = vR)
                    : g.isSpecial()
                    ? (_ = _R)
                    : c[b + 1] == "/"
                    ? ((_ = mR), b++)
                    : ((g.cannotBeABaseURL = !0), el(g.path, ""), (_ = bR));
              }
              break;
            case b1:
              if (!a || (a.cannotBeABaseURL && s != "#")) return m1;
              if (a.cannotBeABaseURL && s == "#") {
                (g.scheme = a.scheme),
                  (g.path = Yi(a.path)),
                  (g.query = a.query),
                  (g.fragment = ""),
                  (g.cannotBeABaseURL = !0),
                  (_ = vo);
                break;
              }
              _ = a.scheme == "file" ? E1 : S1;
              continue;
            case vR:
              if (s != "/" || c[b + 1] != "/") {
                _ = S1;
                continue;
              }
              (_ = lv), b++;
              break;
            case mR:
              if (s == "/") {
                _ = dv;
                break;
              }
              _ = Pa;
              continue;
            case S1:
              if (((g.scheme = a.scheme), s == Ci))
                (g.username = a.username),
                  (g.password = a.password),
                  (g.host = a.host),
                  (g.port = a.port),
                  (g.path = Yi(a.path)),
                  (g.query = a.query);
              else if (s == "/" || (s == "\\" && g.isSpecial())) _ = gR;
              else if (s == "?")
                (g.username = a.username),
                  (g.password = a.password),
                  (g.host = a.host),
                  (g.port = a.port),
                  (g.path = Yi(a.path)),
                  (g.query = ""),
                  (_ = yu);
              else {
                if (s != "#") {
                  (g.username = a.username),
                    (g.password = a.password),
                    (g.host = a.host),
                    (g.port = a.port),
                    (g.path = Yi(a.path)),
                    g.path.length--,
                    (_ = Pa);
                  continue;
                }
                (g.username = a.username),
                  (g.password = a.password),
                  (g.host = a.host),
                  (g.port = a.port),
                  (g.path = Yi(a.path)),
                  (g.query = a.query),
                  (g.fragment = ""),
                  (_ = vo);
              }
              break;
            case gR:
              if (!g.isSpecial() || (s != "/" && s != "\\")) {
                if (s != "/") {
                  (g.username = a.username),
                    (g.password = a.password),
                    (g.host = a.host),
                    (g.port = a.port),
                    (_ = Pa);
                  continue;
                }
                _ = dv;
              } else _ = lv;
              break;
            case _R:
              if (((_ = lv), s != "/" || Oi(C, b + 1) != "/")) continue;
              b++;
              break;
            case lv:
              if (s != "/" && s != "\\") {
                _ = dv;
                continue;
              }
              break;
            case dv:
              if (s == "@") {
                N && (C = "%40" + C), (N = !0), (l = Xc(C));
                for (var U = 0; U < l.length; U++) {
                  var E = l[U];
                  if (E != ":" || F) {
                    var A = ss(E, _1);
                    F ? (g.password += A) : (g.username += A);
                  } else F = !0;
                }
                C = "";
              } else if (
                s == Ci ||
                s == "/" ||
                s == "?" ||
                s == "#" ||
                (s == "\\" && g.isSpecial())
              ) {
                if (N && C == "") return "Invalid authority";
                (b -= Xc(C).length + 1), (C = ""), (_ = w1);
              } else C += s;
              break;
            case w1:
            case k1:
              if (n && g.scheme == "file") {
                _ = I1;
                continue;
              }
              if (s != ":" || z) {
                if (
                  s == Ci ||
                  s == "/" ||
                  s == "?" ||
                  s == "#" ||
                  (s == "\\" && g.isSpecial())
                ) {
                  if (g.isSpecial() && C == "") return _u;
                  if (
                    n &&
                    C == "" &&
                    (g.includesCredentials() || g.port !== null)
                  )
                    return;
                  if ((h = g.parseHost(C))) return h;
                  if (((C = ""), (_ = tl), n)) return;
                  continue;
                }
                s == "[" ? (z = !0) : s == "]" && (z = !1), (C += s);
              } else {
                if (C == "") return _u;
                if ((h = g.parseHost(C))) return h;
                if (((C = ""), (_ = T1), n == k1)) return;
              }
              break;
            case T1:
              if (!Zi(g1, s)) {
                if (
                  s == Ci ||
                  s == "/" ||
                  s == "?" ||
                  s == "#" ||
                  (s == "\\" && g.isSpecial()) ||
                  n
                ) {
                  if (C != "") {
                    var L = ov(C, 10);
                    if (L > 65535) return uR;
                    (g.port = g.isSpecial() && L === cv[g.scheme] ? null : L),
                      (C = "");
                  }
                  if (n) return;
                  _ = tl;
                  continue;
                }
                return uR;
              }
              C += s;
              break;
            case E1:
              if (((g.scheme = "file"), s == "/" || s == "\\")) _ = yR;
              else {
                if (!a || a.scheme != "file") {
                  _ = Pa;
                  continue;
                }
                if (s == Ci)
                  (g.host = a.host), (g.path = Yi(a.path)), (g.query = a.query);
                else if (s == "?")
                  (g.host = a.host),
                    (g.path = Yi(a.path)),
                    (g.query = ""),
                    (_ = yu);
                else {
                  if (s != "#") {
                    fR(uh(Yi(c, b), "")) ||
                      ((g.host = a.host),
                      (g.path = Yi(a.path)),
                      g.shortenPath()),
                      (_ = Pa);
                    continue;
                  }
                  (g.host = a.host),
                    (g.path = Yi(a.path)),
                    (g.query = a.query),
                    (g.fragment = ""),
                    (_ = vo);
                }
              }
              break;
            case yR:
              if (s == "/" || s == "\\") {
                _ = I1;
                break;
              }
              a &&
                a.scheme == "file" &&
                !fR(uh(Yi(c, b), "")) &&
                (dh(a.path[0], !0) ? el(g.path, a.path[0]) : (g.host = a.host)),
                (_ = Pa);
              continue;
            case I1:
              if (s == Ci || s == "/" || s == "\\" || s == "?" || s == "#") {
                if (!n && dh(C)) _ = Pa;
                else if (C == "") {
                  if (((g.host = ""), n)) return;
                  _ = tl;
                } else {
                  if ((h = g.parseHost(C))) return h;
                  if ((g.host == "localhost" && (g.host = ""), n)) return;
                  (C = ""), (_ = tl);
                }
                continue;
              }
              C += s;
              break;
            case tl:
              if (g.isSpecial()) {
                if (((_ = Pa), s != "/" && s != "\\")) continue;
              } else if (n || s != "?")
                if (n || s != "#") {
                  if (s != Ci && ((_ = Pa), s != "/")) continue;
                } else (g.fragment = ""), (_ = vo);
              else (g.query = ""), (_ = yu);
              break;
            case Pa:
              if (
                s == Ci ||
                s == "/" ||
                (s == "\\" && g.isSpecial()) ||
                (!n && (s == "?" || s == "#"))
              ) {
                if (
                  ((v = sv((v = C))) === ".." ||
                  v === "%2e." ||
                  v === ".%2e" ||
                  v === "%2e%2e"
                    ? (g.shortenPath(),
                      s == "/" ||
                        (s == "\\" && g.isSpecial()) ||
                        el(g.path, ""))
                    : Jj(C)
                    ? s == "/" || (s == "\\" && g.isSpecial()) || el(g.path, "")
                    : (g.scheme == "file" &&
                        !g.path.length &&
                        dh(C) &&
                        (g.host && (g.host = ""), (C = Oi(C, 0) + ":")),
                      el(g.path, C)),
                  (C = ""),
                  g.scheme == "file" && (s == Ci || s == "?" || s == "#"))
                )
                  for (; g.path.length > 1 && g.path[0] === ""; ) Uj(g.path);
                s == "?"
                  ? ((g.query = ""), (_ = yu))
                  : s == "#" && ((g.fragment = ""), (_ = vo));
              } else C += ss(s, hR);
              break;
            case bR:
              s == "?"
                ? ((g.query = ""), (_ = yu))
                : s == "#"
                ? ((g.fragment = ""), (_ = vo))
                : s != Ci && (g.path[0] += ss(s, uv));
              break;
            case yu:
              n || s != "#"
                ? s != Ci &&
                  (s == "'" && g.isSpecial()
                    ? (g.query += "%27")
                    : (g.query += s == "#" ? "%23" : ss(s, uv)))
                : ((g.fragment = ""), (_ = vo));
              break;
            case vo:
              s != Ci && (g.fragment += ss(s, dR));
          }
          b++;
        }
      },
      parseHost: function (e) {
        var n, a, c;
        if (Oi(e, 0) == "[") {
          if (
            Oi(e, e.length - 1) != "]" ||
            ((n = (function (s) {
              var l,
                h,
                v,
                g,
                _,
                b,
                C,
                N = [0, 0, 0, 0, 0, 0, 0, 0],
                z = 0,
                F = null,
                U = 0,
                E = function () {
                  return Oi(s, U);
                };
              if (E() == ":") {
                if (Oi(s, 1) != ":") return;
                (U += 2), (F = ++z);
              }
              for (; E(); ) {
                if (z == 8) return;
                if (E() != ":") {
                  for (l = h = 0; h < 4 && Zi(lR, E()); )
                    (l = 16 * l + ov(E(), 16)), U++, h++;
                  if (E() == ".") {
                    if (h == 0 || ((U -= h), z > 6)) return;
                    for (v = 0; E(); ) {
                      if (((g = null), v > 0)) {
                        if (!(E() == "." && v < 4)) return;
                        U++;
                      }
                      if (!Zi(g1, E())) return;
                      for (; Zi(g1, E()); ) {
                        if (((_ = ov(E(), 10)), g === null)) g = _;
                        else {
                          if (g == 0) return;
                          g = 10 * g + _;
                        }
                        if (g > 255) return;
                        U++;
                      }
                      (N[z] = 256 * N[z] + g), (++v != 2 && v != 4) || z++;
                    }
                    if (v != 4) return;
                    break;
                  }
                  if (E() == ":") {
                    if ((U++, !E())) return;
                  } else if (E()) return;
                  N[z++] = l;
                } else {
                  if (F !== null) return;
                  U++, (F = ++z);
                }
              }
              if (F !== null)
                for (b = z - F, z = 7; z != 0 && b > 0; )
                  (C = N[z]), (N[z--] = N[F + b - 1]), (N[F + --b] = C);
              else if (z != 8) return;
              return N;
            })(ch(e, 1, -1))),
            !n)
          )
            return _u;
          this.host = n;
        } else if (this.isSpecial()) {
          if (
            ((e = Cj(e)),
            Zi(Wj, e) ||
              ((n = (function (s) {
                var l,
                  h,
                  v,
                  g,
                  _,
                  b,
                  C,
                  N = Vj(s, ".");
                if (
                  (N.length && N[N.length - 1] == "" && N.length--,
                  (l = N.length) > 4)
                )
                  return s;
                for (h = [], v = 0; v < l; v++) {
                  if ((g = N[v]) == "") return s;
                  if (
                    ((_ = 10),
                    g.length > 1 &&
                      Oi(g, 0) == "0" &&
                      ((_ = Zi(Bj, g) ? 16 : 8), (g = ch(g, _ == 8 ? 1 : 2))),
                    g === "")
                  )
                    b = 0;
                  else {
                    if (!Zi(_ == 10 ? Hj : _ == 8 ? zj : lR, g)) return s;
                    b = ov(g, _);
                  }
                  el(h, b);
                }
                for (v = 0; v < l; v++)
                  if (((b = h[v]), v == l - 1)) {
                    if (b >= oR(256, 5 - l)) return null;
                  } else if (b > 255) return null;
                for (C = Mj(h), v = 0; v < h.length; v++)
                  C += h[v] * oR(256, 3 - v);
                return C;
              })(e)),
              n === null))
          )
            return _u;
          this.host = n;
        } else {
          if (Zi(Gj, e)) return _u;
          for (n = "", a = Xc(e), c = 0; c < a.length; c++) n += ss(a[c], uv);
          this.host = n;
        }
      },
      cannotHaveUsernamePasswordPort: function () {
        return !this.host || this.cannotBeABaseURL || this.scheme == "file";
      },
      includesCredentials: function () {
        return this.username != "" || this.password != "";
      },
      isSpecial: function () {
        return f1(cv, this.scheme);
      },
      shortenPath: function () {
        var e = this.path,
          n = e.length;
        !n || (this.scheme == "file" && n == 1 && dh(e[0], !0)) || e.length--;
      },
      serialize: function () {
        var e = this,
          n = e.scheme,
          a = e.username,
          c = e.password,
          s = e.host,
          l = e.port,
          h = e.path,
          v = e.query,
          g = e.fragment,
          _ = n + ":";
        return (
          s !== null
            ? ((_ += "//"),
              e.includesCredentials() && (_ += a + (c ? ":" + c : "") + "@"),
              (_ += lh(s)),
              l !== null && (_ += ":" + l))
            : n == "file" && (_ += "//"),
          (_ += e.cannotBeABaseURL ? h[0] : h.length ? "/" + uh(h, "/") : ""),
          v !== null && (_ += "?" + v),
          g !== null && (_ += "#" + g),
          _
        );
      },
      setHref: function (e) {
        var n = this.parse(e);
        if (n) throw v1(n);
        this.searchParams.update();
      },
      getOrigin: function () {
        var e = this.scheme,
          n = this.port;
        if (e == "blob")
          try {
            return new nl(e.path[0]).origin;
          } catch (a) {
            return "null";
          }
        return e != "file" && this.isSpecial()
          ? e + "://" + lh(this.host) + (n !== null ? ":" + n : "")
          : "null";
      },
      getProtocol: function () {
        return this.scheme + ":";
      },
      setProtocol: function (e) {
        this.parse(po(e) + ":", y1);
      },
      getUsername: function () {
        return this.username;
      },
      setUsername: function (e) {
        var n = Xc(po(e));
        if (!this.cannotHaveUsernamePasswordPort()) {
          this.username = "";
          for (var a = 0; a < n.length; a++) this.username += ss(n[a], _1);
        }
      },
      getPassword: function () {
        return this.password;
      },
      setPassword: function (e) {
        var n = Xc(po(e));
        if (!this.cannotHaveUsernamePasswordPort()) {
          this.password = "";
          for (var a = 0; a < n.length; a++) this.password += ss(n[a], _1);
        }
      },
      getHost: function () {
        var e = this.host,
          n = this.port;
        return e === null ? "" : n === null ? lh(e) : lh(e) + ":" + n;
      },
      setHost: function (e) {
        this.cannotBeABaseURL || this.parse(e, w1);
      },
      getHostname: function () {
        var e = this.host;
        return e === null ? "" : lh(e);
      },
      setHostname: function (e) {
        this.cannotBeABaseURL || this.parse(e, k1);
      },
      getPort: function () {
        var e = this.port;
        return e === null ? "" : po(e);
      },
      setPort: function (e) {
        this.cannotHaveUsernamePasswordPort() ||
          ((e = po(e)) == "" ? (this.port = null) : this.parse(e, T1));
      },
      getPathname: function () {
        var e = this.path;
        return this.cannotBeABaseURL ? e[0] : e.length ? "/" + uh(e, "/") : "";
      },
      setPathname: function (e) {
        this.cannotBeABaseURL || ((this.path = []), this.parse(e, tl));
      },
      getSearch: function () {
        var e = this.query;
        return e ? "?" + e : "";
      },
      setSearch: function (e) {
        (e = po(e)) == ""
          ? (this.query = null)
          : (Oi(e, 0) == "?" && (e = ch(e, 1)),
            (this.query = ""),
            this.parse(e, yu)),
          this.searchParams.update();
      },
      getSearchParams: function () {
        return this.searchParams.facade;
      },
      getHash: function () {
        var e = this.fragment;
        return e ? "#" + e : "";
      },
      setHash: function (e) {
        (e = po(e)) != ""
          ? (Oi(e, 0) == "#" && (e = ch(e, 1)),
            (this.fragment = ""),
            this.parse(e, vo))
          : (this.fragment = null);
      },
      update: function () {
        this.query = this.searchParams.serialize() || null;
      },
    };
    var nl = function (e) {
        var n = Ij(this, Hr),
          a = xj(arguments.length, 1) > 1 ? arguments[1] : void 0,
          c = Oj(n, new R1(e, !1, a));
        d1 ||
          ((n.href = c.serialize()),
          (n.origin = c.getOrigin()),
          (n.protocol = c.getProtocol()),
          (n.username = c.getUsername()),
          (n.password = c.getPassword()),
          (n.host = c.getHost()),
          (n.hostname = c.getHostname()),
          (n.port = c.getPort()),
          (n.pathname = c.getPathname()),
          (n.search = c.getSearch()),
          (n.searchParams = c.getSearchParams()),
          (n.hash = c.getHash()));
      },
      Hr = nl.prototype,
      Pi = function (e, n) {
        return {
          get: function () {
            return av(this)[e]();
          },
          set:
            n &&
            function (a) {
              return av(this)[n](a);
            },
          configurable: !0,
          enumerable: !0,
        };
      };
    if (
      (d1 &&
        (xi(Hr, "href", Pi("serialize", "setHref")),
        xi(Hr, "origin", Pi("getOrigin")),
        xi(Hr, "protocol", Pi("getProtocol", "setProtocol")),
        xi(Hr, "username", Pi("getUsername", "setUsername")),
        xi(Hr, "password", Pi("getPassword", "setPassword")),
        xi(Hr, "host", Pi("getHost", "setHost")),
        xi(Hr, "hostname", Pi("getHostname", "setHostname")),
        xi(Hr, "port", Pi("getPort", "setPort")),
        xi(Hr, "pathname", Pi("getPathname", "setPathname")),
        xi(Hr, "search", Pi("getSearch", "setSearch")),
        xi(Hr, "searchParams", Pi("getSearchParams")),
        xi(Hr, "hash", Pi("getHash", "setHash"))),
      iv(
        Hr,
        "toJSON",
        function () {
          return av(this).serialize();
        },
        { enumerable: !0 }
      ),
      iv(
        Hr,
        "toString",
        function () {
          return av(this).serialize();
        },
        { enumerable: !0 }
      ),
      sh)
    ) {
      var SR = sh.createObjectURL,
        wR = sh.revokeObjectURL;
      SR && iv(nl, "createObjectURL", rR(SR, sh)),
        wR && iv(nl, "revokeObjectURL", rR(wR, sh));
    }
    Aj(nl, "URL"),
      Tj({ global: !0, constructor: !0, forced: !Ej, sham: !d1 }, { URL: nl });
    var bu,
      hv,
      $j = new Blob(
        [
          "class VolumeMeter extends AudioWorkletProcessor{constructor(){super();this.volume=0;this.intervalTime=200;this.tick=this.intervalTime;this.isStop=false;this.port.onmessage=event=>{const{data}=event;switch(data.name){case'setIntervalTime':this.intervalTime=data.intervalTime;break;case'stop':this.isStop=true;break}}}process(inputs){const input=inputs[0];if(this.isStop){return false}if(input.length>0){const firstChannel=input[0];let sum=0;let rms;for(let i=0;i<firstChannel.length;++i){sum+=firstChannel[i]*firstChannel[i]}rms=Math.sqrt(sum/firstChannel.length);this.volume=Math.max(rms,this.volume*0.95);this.tick-=firstChannel.length;if(this.tick<0){this.tick+=(this.intervalTime/1000)*sampleRate;this.port.postMessage({volume:this.volume})}}return true}}registerProcessor('volume-meter',VolumeMeter);",
        ],
        { type: "application/javascript" }
      ),
      kR = !1,
      Yj = (function () {
        function u(n) {
          B(this, u), (this.context_ = n.context), this.addModuleToContext();
        }
        var e;
        return (
          oe(u, [
            {
              key: "addModuleToContext",
              value:
                ((e = I(
                  m().mark(function n() {
                    return m().wrap(
                      function (a) {
                        for (;;)
                          switch ((a.prev = a.next)) {
                            case 0:
                              return (
                                (a.prev = 0),
                                (a.next = 3),
                                this.context_.audioWorklet.addModule(
                                  URL.createObjectURL($j)
                                )
                              );
                            case 3:
                              ft.info("worklet addModule success"),
                                Ee.emit(Ay),
                                (kR = !0),
                                (a.next = 12);
                              break;
                            case 8:
                              (a.prev = 8),
                                (a.t0 = a.catch(0)),
                                ft.info(
                                  "worklet addModule catch error. ".concat(
                                    a.t0.message
                                  )
                                ),
                                Ee.emit(xy);
                            case 12:
                            case "end":
                              return a.stop();
                          }
                      },
                      n,
                      this,
                      [[0, 8]]
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "initWorkletSuccess",
              get: function () {
                return kR;
              },
            },
          ]),
          u
        );
      })(),
      hh = 0,
      Zj = (function () {
        function u(e) {
          B(this, u);
          var n = e.track,
            a = e.log,
            c = e.stream;
          (this.volume_ = 0),
            (this.log_ = a),
            (this.track_ = n),
            (this.stream_ = c),
            (hh += 1),
            bu || (bu = ME()),
            (this.audioCtx_ = bu),
            (this.destination_ = this.audioCtx_.destination);
          var s = new MediaStream();
          s.addTrack(this.track_),
            (this.streamSource_ = this.audioCtx_.createMediaStreamSource(s)),
            (this.audioWorkletNode_ = null),
            (this.scriptProcessorNode_ = null),
            (this.interval_ = 200),
            Ee.on(eh, this.resume, this),
            Ee.on(fy, this.handleAudioLevelInterval, this),
            wV
              ? (Ee.on(Ay, this.initAudioWorklet, this),
                Ee.on(xy, this.initScriptProcessor, this),
                this.preload())
              : this.initScriptProcessor();
        }
        return (
          oe(u, [
            {
              key: "preload",
              value: function () {
                hv
                  ? hv.initWorkletSuccess && this.initAudioWorklet()
                  : (hv = new Yj({ context: bu }));
              },
            },
            {
              key: "initAudioWorklet",
              value: function () {
                var n = this;
                if (!this.audioWorkletNode_)
                  try {
                    (this.audioWorkletNode_ = new AudioWorkletNode(
                      this.audioCtx_,
                      "volume-meter"
                    )),
                      (this.audioWorkletNode_.port.onmessage = function (a) {
                        n.volume_ = a.data.volume || 0;
                      }),
                      this.streamSource_
                        .connect(this.audioWorkletNode_)
                        .connect(this.destination_),
                      this.handleAudioLevelInterval({
                        interval: this.interval_,
                      });
                  } catch (a) {
                    this.log_.warn(
                      "load volume meter failed, load again. error: " + a
                    ),
                      this.initScriptProcessor();
                  }
              },
            },
            {
              key: "initScriptProcessor",
              value: function () {
                var n = this;
                if (!this.scriptProcessorNode_)
                  try {
                    (this.scriptProcessorNode_ =
                      this.audioCtx_.createScriptProcessor(2048, 1, 1)),
                      (this.scriptProcessorNode_.onaudioprocess = function (a) {
                        for (
                          var c = a.inputBuffer.getChannelData(0), s = 0, l = 0;
                          l < c.length;
                          ++l
                        )
                          s += c[l] * c[l];
                        n.volume_ = Math.sqrt(s / c.length) || 0;
                      }),
                      this.streamSource_.connect(this.scriptProcessorNode_),
                      this.scriptProcessorNode_.connect(this.destination_);
                  } catch (a) {
                    this.log_.error(
                      "volumeMeter init script processor error: " + a
                    ),
                      (hh -= 1);
                  }
              },
            },
            {
              key: "destroy",
              value: function () {
                var n;
                this.streamSource_ && this.streamSource_.disconnect(),
                  this.scriptProcessorNode_ &&
                    ((this.scriptProcessorNode_.onaudioprocess = null),
                    this.scriptProcessorNode_.disconnect()),
                  this.audioWorkletNode_ &&
                    (this.audioWorkletNode_.port.postMessage({ name: "stop" }),
                    (this.audioWorkletNode_.port.onmessage = null),
                    this.audioWorkletNode_.disconnect()),
                  (this.audioWorkletNode_ = null),
                  (this.scriptProcessorNode_ = null),
                  (this.audioCtx_ = null),
                  Ee.off(eh, this.resume, this),
                  Ee.off(fy, this.handleAudioLevelInterval, this),
                  Ee.off(Ay, this.initAudioWorklet, this),
                  Ee.off(xy, this.initScriptProcessor, this),
                  hh > 0 && (hh -= 1),
                  hh === 0 &&
                    ((n = bu) === null || n === void 0 || n.close(),
                    (bu = null),
                    (hv = null));
              },
            },
            {
              key: "resume",
              value: function () {
                var n;
                (n = bu) === null || n === void 0 || n.resume();
              },
            },
            {
              key: "getInternalAudioLevel",
              value: function () {
                return this.volume_;
              },
            },
            {
              key: "getCalculatedVolume",
              value: function () {
                return this.volume_.toFixed(2);
              },
            },
            {
              key: "handleAudioLevelInterval",
              value: function (n) {
                var a,
                  c = n.interval;
                (this.interval_ = c),
                  (a = this.audioWorkletNode_) === null ||
                    a === void 0 ||
                    a.port.postMessage({
                      name: "setIntervalTime",
                      intervalTime: c,
                    });
              },
            },
          ]),
          u
        );
      })(),
      Qj = (function () {
        function u(s) {
          B(this, u),
            (this.stream_ = s.stream),
            (this.userId_ = s.stream.getUserId()),
            (this.log_ = this.stream_.getLogger()),
            (this.track_ = s.track),
            s.gainedTrack && (this.gainedTrack_ = s.gainedTrack),
            (this.div_ = s.div),
            (this.muted_ = s.muted),
            (this.outputDeviceId_ = s.outputDeviceId),
            (this.volume_ = s.volume),
            (this.pausedRetryCount_ = 5),
            (this.emitter_ = new rs()),
            this.initializeElement(),
            (this.state_ = "NONE"),
            (this.volumeMeter_ = new Zj({
              stream: this.stream_,
              track: this.gainedTrack_ || this.track_,
              log: this.log_,
            }));
        }
        var e, n, a, c;
        return (
          oe(u, [
            {
              key: "isPlaying",
              get: function () {
                return this.state_ === Mc;
              },
            },
            {
              key: "initializeElement",
              value: function () {
                if (this.isAudioElementInit()) {
                  var l = new MediaStream();
                  l.addTrack(this.gainedTrack_ || this.track_);
                  var h = document.createElement(Ct);
                  (h.srcObject = l),
                    (h.muted = this.muted_),
                    h.setAttribute("id", "audio_".concat(this.stream_.getId())),
                    h.setAttribute("autoplay", "autoplay"),
                    h.setAttribute("playsinline", "playsinline"),
                    this.div_.appendChild(h),
                    (this.element_ = h);
                }
                this.handleEvents();
              },
            },
            {
              key: "setMuted",
              value: function (l) {
                this.element_ && ((this.element_.muted = l), (this.muted_ = l));
              },
            },
            {
              key: "play",
              value:
                ((c = I(
                  m().mark(function s() {
                    var l;
                    return m().wrap(
                      function (h) {
                        for (;;)
                          switch ((h.prev = h.next)) {
                            case 0:
                              if (!this.outputDeviceId_ || !this.element_) {
                                h.next = 3;
                                break;
                              }
                              return (
                                (h.next = 3),
                                this.element_.setSinkId(this.outputDeviceId_)
                              );
                            case 3:
                              if (
                                (this.setVolume(this.volume_),
                                (h.prev = 4),
                                !this.element_)
                              ) {
                                h.next = 8;
                                break;
                              }
                              return (h.next = 8), this.element_.play();
                            case 8:
                              h.next = 16;
                              break;
                            case 10:
                              if (
                                ((h.prev = 10),
                                (h.t0 = h.catch(4)),
                                (l = Fe({
                                  key: D0,
                                  data: { media: "Audio", error: h.t0 },
                                })),
                                this.log_.warn(l),
                                !l.includes("NotAllowedError"))
                              ) {
                                h.next = 16;
                                break;
                              }
                              throw new De({
                                code: Oe.PLAY_NOT_ALLOWED,
                                message: l,
                              });
                            case 16:
                            case "end":
                              return h.stop();
                          }
                      },
                      s,
                      this,
                      [[4, 10]]
                    );
                  })
                )),
                function () {
                  return c.apply(this, arguments);
                }),
            },
            {
              key: "handleEvents",
              value: function () {
                (this.handleElementEvent = this.handleElementEvent.bind(this)),
                  (this.handleTrackEvent = this.handleTrackEvent.bind(this)),
                  this.element_ &&
                    (this.element_.addEventListener(
                      Ko,
                      this.handleElementEvent
                    ),
                    this.element_.addEventListener(sr, this.handleElementEvent),
                    this.element_.addEventListener(Jo, this.handleElementEvent),
                    this.element_.addEventListener(
                      Lc,
                      this.handleElementEvent
                    )),
                  this.track_.addEventListener(sr, this.handleTrackEvent),
                  this.track_.addEventListener(Ar, this.handleTrackEvent),
                  this.track_.addEventListener(Ca, this.handleTrackEvent),
                  this.track_.readyState === sr &&
                    this.handleTrackEvent({ type: sr }),
                  this.track_.muted && this.handleTrackEvent({ type: Ar });
              },
            },
            {
              key: "handleElementEvent",
              value:
                ((a = I(
                  m().mark(function s(l) {
                    var h,
                      v,
                      g,
                      _,
                      b,
                      C,
                      N,
                      z = this;
                    return m().wrap(
                      function (F) {
                        for (;;)
                          switch ((F.prev = F.next)) {
                            case 0:
                              (h = l.type),
                                (F.t0 = h),
                                (F.next =
                                  F.t0 === Ko
                                    ? 4
                                    : F.t0 === sr
                                    ? 9
                                    : F.t0 === Jo
                                    ? 12
                                    : F.t0 === Lc
                                    ? 21
                                    : 33);
                              break;
                            case 4:
                              return (
                                this.log_.info("audio player is playing"),
                                (this.state_ = Mc),
                                Ee.emit(vy, { stream: this.stream_ }),
                                this.emitter_.emit(ei, {
                                  state: this.state_,
                                  reason: Ko,
                                }),
                                F.abrupt("break", 33)
                              );
                            case 9:
                              return (
                                this.log_.info("audio player is ended"),
                                this.state_ !== $o &&
                                  ((this.state_ = $o),
                                  this.emitter_.emit(ei, {
                                    state: this.state_,
                                    reason: sr,
                                  })),
                                F.abrupt("break", 33)
                              );
                            case 12:
                              return (
                                this.log_.info("audio player is paused"),
                                (this.state_ = Aa),
                                this.emitter_.emit(ei, {
                                  state: this.state_,
                                  reason: Jo,
                                }),
                                (v =
                                  this.div_ &&
                                  document.getElementById(this.div_.id)) ||
                                  this.log_.warn(
                                    "audio player has been remove, element ID: ".concat(
                                      this.div_.id
                                    )
                                  ),
                                (g = zc()),
                                this.pausedRetryCount_ > 0 &&
                                  ((Ki(g) && g <= 70) || !v) &&
                                  (this.resume(), this.pausedRetryCount_--),
                                Xo &&
                                  (this.interval_ = Nn.run(
                                    function () {
                                      z.element_ &&
                                        z.state_ === Aa &&
                                        z.resume();
                                    },
                                    { delay: 3e3 }
                                  )),
                                F.abrupt("break", 33)
                              );
                            case 21:
                              if (!this.element_ || !this.element_.error) {
                                F.next = 32;
                                break;
                              }
                              return (
                                (_ = ""
                                  .concat(n1(), "/")
                                  .concat(du().name, "/")
                                  .concat(du().version)),
                                (F.next = 25),
                                $n.getSpeakers()
                              );
                            case 25:
                              (b = F.sent),
                                (C = b[0].label),
                                (N = b.find(function (U) {
                                  return U.deviceId === z.outputDeviceId_;
                                })) && (C = N.label),
                                this.log_.error(
                                  "audio player error observed. code: "
                                    .concat(
                                      this.element_.error.code,
                                      " message: "
                                    )
                                    .concat(
                                      this.element_.error.message,
                                      " deviceInfo: "
                                    )
                                    .concat(_, " speaker: ")
                                    .concat(C)
                                ),
                                gt.uploadEvent({
                                  log: "stat-"
                                    .concat(this.stream_.getType(), "-audio-")
                                    .concat(LT, "-")
                                    .concat(this.element_.error.code, "-")
                                    .concat(_, "-")
                                    .concat(C),
                                  userId: this.userId_,
                                  error: this.element_.error,
                                }),
                                this.emitter_.emit(BI, this.element_.error);
                            case 32:
                              return F.abrupt("break", 33);
                            case 33:
                            case "end":
                              return F.stop();
                          }
                      },
                      s,
                      this
                    );
                  })
                )),
                function (s) {
                  return a.apply(this, arguments);
                }),
            },
            {
              key: "handleTrackEvent",
              value: function (l) {
                var h = l.type;
                switch (h) {
                  case sr:
                    this.log_.info("audio track is ended"),
                      this.state_ !== $o &&
                        ((this.state_ = $o),
                        this.emitter_.emit(ei, {
                          state: this.state_,
                          reason: sr,
                        })),
                      Ee.emit(Iy, { stream: this.stream_, type: h });
                    break;
                  case Ar:
                    this.log_.info(
                      "audio track is unable to provide media output"
                    ),
                      this.stream_.isRemote() || LE(),
                      this.state_ !== Aa &&
                        ((this.state_ = Aa),
                        this.emitter_.emit(ei, {
                          state: this.state_,
                          reason: Ar,
                        })),
                      Ee.emit(Ey, { stream: this.stream_, type: h });
                    break;
                  case Ca:
                    this.log_.info(
                      "audio track is able to provide media output"
                    ),
                      this.state_ === Aa &&
                        ((this.state_ = Mc),
                        this.emitter_.emit(ei, {
                          state: this.state_,
                          reason: Ca,
                        }));
                }
              },
            },
            {
              key: "unbindEvents",
              value: function () {
                this.element_ &&
                  (this.element_.removeEventListener(
                    Ko,
                    this.handleElementEvent
                  ),
                  this.element_.removeEventListener(
                    sr,
                    this.handleElementEvent
                  ),
                  this.element_.removeEventListener(
                    Jo,
                    this.handleElementEvent
                  ),
                  this.element_.removeEventListener(
                    Lc,
                    this.handleElementEvent
                  )),
                  this.track_ &&
                    (this.track_.removeEventListener(sr, this.handleTrackEvent),
                    this.track_.removeEventListener(Ar, this.handleTrackEvent),
                    this.track_.removeEventListener(Ca, this.handleTrackEvent));
              },
            },
            {
              key: "setSinkId",
              value:
                ((n = I(
                  m().mark(function s(l) {
                    return m().wrap(
                      function (h) {
                        for (;;)
                          switch ((h.prev = h.next)) {
                            case 0:
                              if (this.outputDeviceId_ === l) {
                                h.next = 5;
                                break;
                              }
                              if (!this.element_) {
                                h.next = 4;
                                break;
                              }
                              return (h.next = 4), this.element_.setSinkId(l);
                            case 4:
                              this.outputDeviceId_ = l;
                            case 5:
                            case "end":
                              return h.stop();
                          }
                      },
                      s,
                      this
                    );
                  })
                )),
                function (s) {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "setVolume",
              value: function (l) {
                this.element_ &&
                  (this.log_.info("audioElement setVolume to : ".concat(l)),
                  (this.element_.volume = l));
              },
            },
            {
              key: "getAudioLevel",
              value: function () {
                return this.volumeMeter_.getCalculatedVolume();
              },
            },
            {
              key: "getInternalAudioLevel",
              value: function () {
                return this.volumeMeter_.getInternalAudioLevel();
              },
            },
            {
              key: "stop",
              value: function () {
                this.unbindEvents(),
                  this.element_ &&
                    (this.div_.removeChild(this.element_),
                    (this.element_.srcObject = null),
                    (this.element_ = null)),
                  this.volumeMeter_ &&
                    (this.volumeMeter_.destroy(), (this.volumeMeter_ = null)),
                  this.interval_ > 0 && Nn.clearTask(this.interval_);
              },
            },
            {
              key: "resume",
              value:
                ((e = I(
                  m().mark(function s() {
                    var l;
                    return m().wrap(
                      function (h) {
                        for (;;)
                          switch ((h.prev = h.next)) {
                            case 0:
                              if (
                                ((h.prev = 0),
                                this.volumeMeter_ && this.volumeMeter_.resume(),
                                !this.element_)
                              ) {
                                h.next = 5;
                                break;
                              }
                              return (h.next = 5), this.element_.play();
                            case 5:
                              h.next = 13;
                              break;
                            case 7:
                              if (
                                ((h.prev = 7),
                                (h.t0 = h.catch(0)),
                                (l = Fe({
                                  key: D0,
                                  data: { media: "Audio", error: h.t0 },
                                })),
                                this.log_.warn(l),
                                !l.includes("NotAllowedError"))
                              ) {
                                h.next = 13;
                                break;
                              }
                              throw new De({
                                code: Oe.PLAY_NOT_ALLOWED,
                                message: l,
                              });
                            case 13:
                            case "end":
                              return h.stop();
                          }
                      },
                      s,
                      this,
                      [[0, 7]]
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "on",
              value: function (l, h) {
                this.emitter_.on(l, h);
              },
            },
            {
              key: "isAudioElementInit",
              value: function () {
                return (
                  !(es === "15.2" || es === "15.3" || es === "15.4") ||
                  this.stream_.getType() !== "local" ||
                  !this.muted_ ||
                  (this.log_.info("audioElement is muted."), !1)
                );
              },
            },
            {
              key: "getTrack",
              value: function () {
                return this.track_;
              },
            },
          ]),
          u
        );
      })(),
      Xj = pa.PROPER,
      eB = st,
      TR = n2,
      tB = pp.trim;
    Ut(
      {
        target: "String",
        proto: !0,
        forced: (function (u) {
          return eB(function () {
            return !!TR[u]() || "​᠎"[u]() !== "​᠎" || (Xj && TR[u].name !== u);
          });
        })("trim"),
      },
      {
        trim: function () {
          return tB(this);
        },
      }
    );
    var mo = "trtc_autoplay",
      C1 = "".concat(mo, "_mask"),
      rl = "".concat(mo, "_wrapper"),
      ER = "".concat(mo, "_header"),
      A1 = "".concat(mo, "_content"),
      fv = "".concat(mo, "_action_wrapper"),
      x1 = "".concat(mo, "_question"),
      O1 = "".concat(mo, "_collapse"),
      pv = "".concat(mo, "_action_confirm"),
      IR = "".concat(mo, "_detail"),
      RR = "#2473E8",
      P1 = "dialog",
      nB = "".concat(P1, "-show"),
      rB = "".concat(P1, "-1"),
      iB = "".concat(P1, "-2"),
      CR = !1,
      AR = function () {
        return !!document.querySelector(".".concat(rl));
      },
      xR = ""
        .concat(Fc, "/")
        .concat(
          hu() ? "zh-cn" : "en",
          "/tutorial-21-advanced-auto-play-policy.html"
        ),
      OR = "<br><a href='"
        .concat(xR, "' target='_blank'>")
        .concat(hu() ? "其他方案？" : "Any other solution?", "</a>"),
      aB = "".concat(
        hu()
          ? "浏览器自动播放策略：在用户与页面产生交互（点击、触摸）之前，浏览器禁止播放有声媒体。该弹窗用于帮助用户恢复音视频播放。".concat(
              OR
            )
          : "Autoplay Policy: Before user interacts with the web page (clicking, touching), page will not be allowed to play media with sound. This Dialog is used to help users resume playback. ".concat(
              OR
            )
      ),
      PR = (function () {
        function u() {
          if (
            (B(this, u),
            (this.dialogNode_ = null),
            (this.bodyPosition_ = ""),
            (this.content = "音视频播放被浏览器拦截，请点击“恢复播放”。"),
            hu() ||
              (this.content =
                'Media playback failed. Click the "Resume" to resume playback.'),
            !CR)
          ) {
            var e = document.createElement("style");
            (e.innerHTML = "."
              .concat(
                C1,
                "{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}."
              )
              .concat(C1, " div:not(.")
              .concat(fv, "){display:block !important;}.")
              .concat(
                rl,
                "{padding:14px;background:#fff;border-radius:3px;box-shadow:0px 3px 15px #434343;border:1px solid #d1cfcf;max-width:500px;}."
              )
              .concat(rl, " a{color:")
              .concat(RR, ";}.")
              .concat(
                ER,
                "{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}."
              )
              .concat(A1, "{margin:8px 0;}.")
              .concat(
                fv,
                "{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}."
              )
              .concat(O1, "{margin-right:auto;cursor:pointer}.")
              .concat(x1, "{height:100%;line-height:16px;cursor:pointer;}.")
              .concat(pv, "{margin-left:8px;color:#fff;background:")
              .concat(
                RR,
                ";padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}."
              )
              .concat(pv, ":hover{opacity:0.9;}.")
              .concat(O1, ",.")
              .concat(pv, ",.")
              .concat(A1, ",.")
              .concat(
                x1,
                "{font-size:14px;}@media screen and (max-width:750px){."
              )
              .concat(rl, "{width:80vw;}}")),
              document.head.appendChild(e),
              (CR = !0);
          }
          (this.showDetail_ = !1),
            (this.isCollapseClicked_ = !1),
            (this.isQuestionClicked_ = !1),
            this.addDiaLog();
        }
        return (
          oe(u, [
            {
              key: "createDiaLog",
              value: function () {
                var n = document.createElement("template");
                n.innerHTML = '<div class="'
                  .concat(C1, `"><div class='`)
                  .concat(rl, "'><div class='")
                  .concat(ER, "'>")
                  .concat(location.host, "</div><div class='")
                  .concat(A1, "'>")
                  .concat(this.content, "</div><div class='")
                  .concat(
                    IR,
                    `' style="visibility:hidden;width:100%;height:0;font-size:12px;color:gray;">`
                  )
                  .concat(aB, "</div><div class='")
                  .concat(fv, "'></div></div></div>")
                  .trim();
                var a = document.createElement("button");
                (a.className = pv),
                  (a.innerText = hu() ? "恢复播放" : "Resume"),
                  (a.onclick = this.onConfirm.bind(this));
                var c = document.createElement("div");
                (c.className = x1),
                  (c.innerHTML = `<?xml version="1.0" encoding="UTF-8"?>
    <svg class="icon" width="18" height="18" p-id="2030" t="1639646523624" version="1.1" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
    <path d="m464 784.35c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z" p-id="2031"/>
    <path d="m512 960c-247.04 0-448-200.96-448-448s200.96-448 448-448 448 200.96 448 448-200.96 448-448 448zm0-831.71c-211.58 0-383.71 172.13-383.71 383.71 0 211.55 172.13 383.71 383.71 383.71 211.55 0 383.71-172.16 383.71-383.71 0-211.58-172.16-383.71-383.71-383.71z" p-id="2032"/>
    <path d="m512 673.7c-17.665 0-32.001-14.336-32.001-31.999v-54.112c0-52.353 40-92.352 75.328-127.65 25.887-25.92 52.672-52.672 52.672-74.017 0-53.343-43.072-96.735-95.999-96.735-53.823 0-95.999 41.536-95.999 94.559 0 17.665-14.336 31.999-32.001 31.999s-32.001-14.336-32.001-31.999c0-87.424 71.775-158.56 160-158.56s160 72.095 160 160.74c0 47.904-36.32 84.192-71.424 119.3-27.84 27.776-56.576 56.512-56.576 82.336v54.112c0 17.665-14.336 32.032-32.001 32.032z" p-id="2033"/>
    </svg>
    `),
                  (c.onclick = this.onQuestionClick.bind(this));
                var s = document.createElement("div");
                (s.className = O1),
                  (s.innerText = "".concat(hu() ? "详情 >" : "Detail >")),
                  (s.onclick = this.onCollapseClick.bind(this));
                var l = n.content.firstChild,
                  h = l.querySelector(".".concat(fv));
                return h.appendChild(s), h.appendChild(c), h.appendChild(a), l;
              },
            },
            {
              key: "addDiaLog",
              value: function () {
                AR() ||
                  ((this.dialogNode_ = this.createDiaLog()),
                  document.body.appendChild(this.dialogNode_),
                  (this.dialogNode_.onclick = this.onConfirm.bind(this)),
                  (this.dialogNode_.querySelector(".".concat(rl)).onclick =
                    function (n) {
                      return n.stopPropagation();
                    }),
                  (this.bodyPosition_ = document.body.style.position),
                  (document.body.style.position = "fixed"),
                  ft.info("show autoplay dialog"),
                  gt.uploadEvent({ log: nB }));
              },
            },
            {
              key: "deleteDiaLog",
              value: function () {
                this.dialogNode_ &&
                  (document.body.removeChild(this.dialogNode_),
                  (document.body.style.position = this.bodyPosition_),
                  (this.dialogNode_ = null));
              },
            },
            {
              key: "onConfirm",
              value: function () {
                ft.warn("confirm clicked, try resume stream"),
                  Ee.emit(eh),
                  this.deleteDiaLog();
              },
            },
            {
              key: "onCollapseClick",
              value: function () {
                var n = this.dialogNode_.querySelector(".".concat(IR));
                (n.style.visibility = "".concat(
                  this.showDetail_ ? "hidden" : "visible"
                )),
                  (n.style.height = "".concat(
                    this.showDetail_ ? 0 : "fit-content"
                  )),
                  (this.showDetail_ = !this.showDetail_),
                  this.isCollapseClicked_ || gt.uploadEvent({ log: rB }),
                  (this.isCollapseClicked_ = !0);
              },
            },
            {
              key: "onQuestionClick",
              value: function () {
                window.open(xR, "_blank"),
                  this.isQuestionClicked_ || gt.uploadEvent({ log: iB }),
                  (this.isQuestionClicked_ = !0);
              },
            },
          ]),
          u
        );
      })(),
      DR = (function () {
        function u(n) {
          B(this, u),
            (this.stream_ = n.stream),
            (this.userId_ = n.stream.getUserId()),
            (this.log_ = this.stream_.getLogger()),
            (this.track_ = n.track),
            (this.div_ = n.div),
            (this.muted_ = n.muted),
            (this.objectFit_ = n.objectFit),
            (this.mirror_ = n.mirror),
            (this.emitter_ = new rs()),
            this.initializeElement(),
            (this.state_ = "NONE"),
            (this.pausedRetryCount_ = 5);
        }
        var e;
        return (
          oe(u, [
            {
              key: "isPlaying",
              get: function () {
                return this.state_ === Mc;
              },
            },
            {
              key: "initializeElement",
              value: function () {
                var a = new MediaStream();
                a.addTrack(this.track_);
                var c = document.createElement(wt);
                (c.srcObject = a), (c.muted = !0);
                var s = "width: 100%; height: 100%; object-fit: ".concat(
                  this.objectFit_,
                  ";"
                );
                this.mirror_ && (s += "transform: scaleX(-1);"),
                  c.setAttribute("id", "video_".concat(this.stream_.getId())),
                  c.setAttribute("style", s),
                  c.setAttribute("autoplay", "autoplay"),
                  c.setAttribute("playsinline", "playsinline"),
                  (this.element_ = c),
                  CE === 17 && this.initCanvasElement(s),
                  this.div_ && this.div_.appendChild(this.canvas_ || c),
                  this.handleEvents();
              },
            },
            {
              key: "initCanvasElement",
              value: function (a) {
                var c = this;
                if (this.track_ && !this.stream_.isRemote()) {
                  var s = document.createElement("canvas"),
                    l = function () {
                      var g,
                        _ =
                          (g = c.track_) === null || g === void 0
                            ? void 0
                            : g.getSettings();
                      _ &&
                        _.width &&
                        _.height &&
                        ((s.width = _.width), (s.height = _.height));
                    };
                  l(), s.setAttribute("style", a);
                  var h = s.getContext("2d");
                  (this.canvasTimerId_ = Nn.run(
                    "raf",
                    function () {
                      c.element_ &&
                        h &&
                        (l(), h.drawImage(c.element_, 0, 0, s.width, s.height));
                    },
                    { backgroundTask: !1 }
                  )),
                    this.log_.warn("use canvas for playback"),
                    (this.canvas_ = s);
                }
              },
            },
            {
              key: "setRect",
              value: function (a) {
                var c = a.width,
                  s = a.height;
                this.element_ &&
                  ((this.element_.style.width = c + "px"),
                  (this.element_.style.height = s + "px"));
              },
            },
            {
              key: "setMirror",
              value: function (a) {
                this.element_ &&
                  ((this.element_.style.transform = a ? "scaleX(-1)" : ""),
                  (this.mirror_ = a));
              },
            },
            {
              key: "setObjectFit",
              value: function (a) {
                this.element_ &&
                  ((this.element_.style.objectFit = "".concat(a)),
                  (this.objectFit_ = a));
              },
            },
            {
              key: "play",
              value:
                ((e = I(
                  m().mark(function n() {
                    var a;
                    return m().wrap(
                      function (c) {
                        for (;;)
                          switch ((c.prev = c.next)) {
                            case 0:
                              return (
                                (c.prev = 0), (c.next = 3), this.element_.play()
                              );
                            case 3:
                              c.next = 11;
                              break;
                            case 5:
                              if (
                                ((c.prev = 5),
                                (c.t0 = c.catch(0)),
                                (a = Fe({
                                  key: D0,
                                  data: { media: "Video", error: c.t0 },
                                })),
                                this.log_.warn(a),
                                !a.includes("NotAllowedError"))
                              ) {
                                c.next = 11;
                                break;
                              }
                              throw new De({
                                code: Oe.PLAY_NOT_ALLOWED,
                                message: a,
                              });
                            case 11:
                            case "end":
                              return c.stop();
                          }
                      },
                      n,
                      this,
                      [[0, 5]]
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "handleEvents",
              value: function () {
                (this.handleElementEvent = this.handleElementEvent.bind(this)),
                  (this.handleTrackEvent = this.handleTrackEvent.bind(this)),
                  this.element_.addEventListener(Ko, this.handleElementEvent),
                  this.element_.addEventListener(sr, this.handleElementEvent),
                  this.element_.addEventListener(Jo, this.handleElementEvent),
                  this.element_.addEventListener(Lc, this.handleElementEvent),
                  this.element_.addEventListener(d0, this.handleElementEvent),
                  this.track_.addEventListener(sr, this.handleTrackEvent),
                  this.track_.addEventListener(Ar, this.handleTrackEvent),
                  this.track_.addEventListener(Ca, this.handleTrackEvent),
                  this.track_.readyState === sr &&
                    this.handleTrackEvent({ type: sr }),
                  this.track_.muted && this.handleTrackEvent({ type: Ar });
              },
            },
            {
              key: "handleElementEvent",
              value: function (a) {
                var c = this;
                switch (a.type) {
                  case Ko:
                    this.log_.info("video player is playing"),
                      (this.state_ = Mc),
                      Ee.emit(Qd, { stream: this.stream_ }),
                      this.emitter_.emit(ei, {
                        state: this.state_,
                        reason: Ko,
                      }),
                      this.interval_ &&
                        (Nn.clearTask(this.interval_), (this.interval_ = null));
                    break;
                  case sr:
                    this.log_.info("video player is ended"),
                      this.state_ !== $o &&
                        ((this.state_ = $o),
                        this.emitter_.emit(ei, {
                          state: this.state_,
                          reason: sr,
                        }));
                    break;
                  case Jo:
                    this.log_.info("video player is paused"),
                      this.div_ &&
                        !document.getElementById(this.div_.id) &&
                        this.log_.warn(
                          "video player has been remove, element ID: ".concat(
                            this.div_.id
                          )
                        ),
                      (this.state_ = Aa),
                      this.emitter_.emit(ei, {
                        state: this.state_,
                        reason: Jo,
                      }),
                      this.pausedRetryCount_ > 0 &&
                        !AR() &&
                        (this.log_.info(
                          "video player auto resume when video paused"
                        ),
                        this.resume(),
                        this.pausedRetryCount_--),
                      Xo &&
                        (this.interval_ = Nn.run(
                          function () {
                            c.element_ && c.state_ === Aa && c.resume();
                          },
                          { delay: 3e3 }
                        ));
                    break;
                  case Lc:
                    if (this.element_ && this.element_.error) {
                      var s = ""
                        .concat(n1(), "/")
                        .concat(du().name, "/")
                        .concat(du().version);
                      this.log_.error(
                        "video player error observed. code: "
                          .concat(this.element_.error.code, " message: ")
                          .concat(this.element_.error.message, " deviceInfo: ")
                          .concat(s)
                      ),
                        gt.uploadEvent({
                          log: "stat-"
                            .concat(this.stream_.getType(), "-video-")
                            .concat(LT, "-")
                            .concat(this.element_.error.code, "-")
                            .concat(s),
                          userId: this.userId_,
                          error: this.element_.error,
                        });
                    }
                    break;
                  case d0:
                    Ee.emit(wy, { stream: this.stream_ });
                }
              },
            },
            {
              key: "handleTrackEvent",
              value: function (a) {
                var c = a.type;
                switch (c) {
                  case sr:
                    this.log_.info("video track is ended"),
                      Ee.emit(Ty, { stream: this.stream_, type: c }),
                      this.state_ !== $o &&
                        ((this.state_ = $o),
                        this.emitter_.emit(ei, {
                          state: this.state_,
                          reason: sr,
                        }));
                    break;
                  case Ar:
                    this.log_.info(
                      "video track is unable to provide media output"
                    ),
                      this.stream_.isRemote() || LE(),
                      Ee.emit(Xd, { stream: this.stream_, type: c }),
                      this.state_ !== Aa &&
                        ((this.state_ = Aa),
                        this.emitter_.emit(ei, {
                          state: this.state_,
                          reason: Ar,
                        }));
                    break;
                  case Ca:
                    this.log_.info(
                      "video track is able to provide media output"
                    ),
                      Ee.emit(by, { stream: this.stream_ }),
                      this.state_ === Aa &&
                        ((this.state_ = Mc),
                        this.emitter_.emit(ei, {
                          state: this.state_,
                          reason: Ca,
                        }));
                }
              },
            },
            {
              key: "unbindEvents",
              value: function () {
                this.element_ &&
                  (this.element_.removeEventListener(
                    Ko,
                    this.handleElementEvent
                  ),
                  this.element_.removeEventListener(
                    sr,
                    this.handleElementEvent
                  ),
                  this.element_.removeEventListener(
                    Jo,
                    this.handleElementEvent
                  ),
                  this.element_.removeEventListener(
                    Lc,
                    this.handleElementEvent
                  ),
                  this.element_.removeEventListener(
                    d0,
                    this.handleElementEvent
                  )),
                  this.track_ &&
                    (this.track_.removeEventListener(sr, this.handleTrackEvent),
                    this.track_.removeEventListener(Ar, this.handleTrackEvent),
                    this.track_.removeEventListener(Ca, this.handleTrackEvent));
              },
            },
            {
              key: "stop",
              value: function () {
                this.unbindEvents(),
                  this.element_ &&
                    (this.element_.remove(),
                    (this.element_.srcObject = null),
                    (this.element_ = null)),
                  this.interval_ && Nn.clearTask(this.interval_),
                  this.canvasTimerId_ && Nn.clearTask(this.canvasTimerId_),
                  this.canvas_ &&
                    (this.canvas_.remove(), (this.canvas_ = null));
              },
            },
            {
              key: "resume",
              value: function () {
                return this.play();
              },
            },
            {
              key: "getVideoFrame",
              value: function () {
                var a = document.createElement("canvas");
                return (
                  (a.width = this.element_.videoWidth),
                  (a.height = this.element_.videoHeight),
                  a.getContext("2d").drawImage(this.element_, 0, 0),
                  a.toDataURL("image/png")
                );
              },
            },
            {
              key: "on",
              value: function (a, c) {
                this.emitter_.on(a, c);
              },
            },
            {
              key: "getElement",
              value: function () {
                return this.element_ ? this.element_ : null;
              },
            },
            {
              key: "getTrack",
              value: function () {
                return this.track_;
              },
            },
          ]),
          u
        );
      })(),
      D1 = typeof ArrayBuffer != "undefined" && typeof DataView != "undefined",
      oB = Lr,
      sB = Pn,
      uB = RangeError,
      NR = function (e) {
        if (e === void 0) return 0;
        var n = oB(e),
          a = sB(n);
        if (n !== a) throw uB("Wrong length or index");
        return a;
      },
      cB = Array,
      lB = Math.abs,
      go = Math.pow,
      dB = Math.floor,
      hB = Math.log,
      fB = Math.LN2,
      pB = {
        pack: function (e, n, a) {
          var c,
            s,
            l,
            h = cB(a),
            v = 8 * a - n - 1,
            g = (1 << v) - 1,
            _ = g >> 1,
            b = n === 23 ? go(2, -24) - go(2, -77) : 0,
            C = e < 0 || (e === 0 && 1 / e < 0) ? 1 : 0,
            N = 0;
          for (
            (e = lB(e)) != e || e === 1 / 0
              ? ((s = e != e ? 1 : 0), (c = g))
              : ((c = dB(hB(e) / fB)),
                e * (l = go(2, -c)) < 1 && (c--, (l *= 2)),
                (e += c + _ >= 1 ? b / l : b * go(2, 1 - _)) * l >= 2 &&
                  (c++, (l /= 2)),
                c + _ >= g
                  ? ((s = 0), (c = g))
                  : c + _ >= 1
                  ? ((s = (e * l - 1) * go(2, n)), (c += _))
                  : ((s = e * go(2, _ - 1) * go(2, n)), (c = 0)));
            n >= 8;

          )
            (h[N++] = 255 & s), (s /= 256), (n -= 8);
          for (c = (c << n) | s, v += n; v > 0; )
            (h[N++] = 255 & c), (c /= 256), (v -= 8);
          return (h[--N] |= 128 * C), h;
        },
        unpack: function (e, n) {
          var a,
            c = e.length,
            s = 8 * c - n - 1,
            l = (1 << s) - 1,
            h = l >> 1,
            v = s - 7,
            g = c - 1,
            _ = e[g--],
            b = 127 & _;
          for (_ >>= 7; v > 0; ) (b = 256 * b + e[g--]), (v -= 8);
          for (a = b & ((1 << -v) - 1), b >>= -v, v += n; v > 0; )
            (a = 256 * a + e[g--]), (v -= 8);
          if (b === 0) b = 1 - h;
          else {
            if (b === l) return a ? NaN : _ ? -1 / 0 : 1 / 0;
            (a += go(2, n)), (b -= h);
          }
          return (_ ? -1 : 1) * a * go(2, b - n);
        },
      },
      vB = mr,
      LR = si,
      mB = Zn,
      MR = function (e) {
        for (
          var n = vB(this),
            a = mB(n),
            c = arguments.length,
            s = LR(c > 1 ? arguments[1] : void 0, a),
            l = c > 2 ? arguments[2] : void 0,
            h = l === void 0 ? a : LR(l, a);
          h > s;

        )
          n[s++] = e;
        return n;
      },
      vv = ot,
      N1 = He,
      L1 = ct,
      gB = D1,
      UR = pa,
      VR = Zr,
      FR = Rd,
      M1 = st,
      mv = zo,
      _B = Lr,
      yB = Pn,
      gv = NR,
      jR = pB,
      bB = Js,
      BR = Z,
      SB = dn.f,
      wB = Hn.f,
      kB = MR,
      TB = gc,
      zR = En,
      EB = UR.PROPER,
      HR = UR.CONFIGURABLE,
      il = On.get,
      WR = On.set,
      U1 = "ArrayBuffer",
      IB = "DataView",
      GR = "Wrong index",
      Di = vv.ArrayBuffer,
      Qi = Di,
      al = Qi && Qi.prototype,
      Da = vv.DataView,
      Su = Da && Da.prototype,
      qR = Object.prototype,
      RB = vv.Array,
      _v = vv.RangeError,
      CB = N1(kB),
      AB = N1([].reverse),
      KR = jR.pack,
      JR = jR.unpack,
      $R = function (e) {
        return [255 & e];
      },
      YR = function (e) {
        return [255 & e, (e >> 8) & 255];
      },
      ZR = function (e) {
        return [255 & e, (e >> 8) & 255, (e >> 16) & 255, (e >> 24) & 255];
      },
      QR = function (e) {
        return (e[3] << 24) | (e[2] << 16) | (e[1] << 8) | e[0];
      },
      xB = function (e) {
        return KR(e, 23, 4);
      },
      OB = function (e) {
        return KR(e, 52, 8);
      },
      yv = function (e, n) {
        wB(e.prototype, n, {
          get: function () {
            return il(this)[n];
          },
        });
      },
      us = function (e, n, a, c) {
        var s = gv(a),
          l = il(e);
        if (s + n > l.byteLength) throw _v(GR);
        var h = il(l.buffer).bytes,
          v = s + l.byteOffset,
          g = TB(h, v, v + n);
        return c ? g : AB(g);
      },
      cs = function (e, n, a, c, s, l) {
        var h = gv(a),
          v = il(e);
        if (h + n > v.byteLength) throw _v(GR);
        for (
          var g = il(v.buffer).bytes, _ = h + v.byteOffset, b = c(+s), C = 0;
          C < n;
          C++
        )
          g[_ + C] = b[l ? C : n - C - 1];
      };
    if (gB) {
      var XR = EB && Di.name !== U1;
      if (
        M1(function () {
          Di(1);
        }) &&
        M1(function () {
          new Di(-1);
        }) &&
        !M1(function () {
          return (
            new Di(), new Di(1.5), new Di(NaN), Di.length != 1 || (XR && !HR)
          );
        })
      )
        XR && HR && VR(Di, "name", U1);
      else {
        (Qi = function (e) {
          return mv(this, al), new Di(gv(e));
        }).prototype = al;
        for (var V1, eC = SB(Di), tC = 0; eC.length > tC; )
          (V1 = eC[tC++]) in Qi || VR(Qi, V1, Di[V1]);
        al.constructor = Qi;
      }
      BR && bB(Su) !== qR && BR(Su, qR);
      var bv = new Da(new Qi(2)),
        nC = N1(Su.setInt8);
      bv.setInt8(0, 2147483648),
        bv.setInt8(1, 2147483649),
        (!bv.getInt8(0) && bv.getInt8(1)) ||
          FR(
            Su,
            {
              setInt8: function (e, n) {
                nC(this, e, (n << 24) >> 24);
              },
              setUint8: function (e, n) {
                nC(this, e, (n << 24) >> 24);
              },
            },
            { unsafe: !0 }
          );
    } else
      (al = (Qi = function (e) {
        mv(this, al);
        var n = gv(e);
        WR(this, { bytes: CB(RB(n), 0), byteLength: n }),
          L1 || (this.byteLength = n);
      }).prototype),
        (Da = function (e, n, a) {
          mv(this, Su), mv(e, al);
          var c = il(e).byteLength,
            s = _B(n);
          if (s < 0 || s > c) throw _v("Wrong offset");
          if (s + (a = a === void 0 ? c - s : yB(a)) > c)
            throw _v("Wrong length");
          WR(this, { buffer: e, byteLength: a, byteOffset: s }),
            L1 ||
              ((this.buffer = e), (this.byteLength = a), (this.byteOffset = s));
        }),
        (Su = Da.prototype),
        L1 &&
          (yv(Qi, "byteLength"),
          yv(Da, "buffer"),
          yv(Da, "byteLength"),
          yv(Da, "byteOffset")),
        FR(Su, {
          getInt8: function (e) {
            return (us(this, 1, e)[0] << 24) >> 24;
          },
          getUint8: function (e) {
            return us(this, 1, e)[0];
          },
          getInt16: function (e) {
            var n = us(
              this,
              2,
              e,
              arguments.length > 1 ? arguments[1] : void 0
            );
            return (((n[1] << 8) | n[0]) << 16) >> 16;
          },
          getUint16: function (e) {
            var n = us(
              this,
              2,
              e,
              arguments.length > 1 ? arguments[1] : void 0
            );
            return (n[1] << 8) | n[0];
          },
          getInt32: function (e) {
            return QR(
              us(this, 4, e, arguments.length > 1 ? arguments[1] : void 0)
            );
          },
          getUint32: function (e) {
            return (
              QR(
                us(this, 4, e, arguments.length > 1 ? arguments[1] : void 0)
              ) >>> 0
            );
          },
          getFloat32: function (e) {
            return JR(
              us(this, 4, e, arguments.length > 1 ? arguments[1] : void 0),
              23
            );
          },
          getFloat64: function (e) {
            return JR(
              us(this, 8, e, arguments.length > 1 ? arguments[1] : void 0),
              52
            );
          },
          setInt8: function (e, n) {
            cs(this, 1, e, $R, n);
          },
          setUint8: function (e, n) {
            cs(this, 1, e, $R, n);
          },
          setInt16: function (e, n) {
            cs(this, 2, e, YR, n, arguments.length > 2 ? arguments[2] : void 0);
          },
          setUint16: function (e, n) {
            cs(this, 2, e, YR, n, arguments.length > 2 ? arguments[2] : void 0);
          },
          setInt32: function (e, n) {
            cs(this, 4, e, ZR, n, arguments.length > 2 ? arguments[2] : void 0);
          },
          setUint32: function (e, n) {
            cs(this, 4, e, ZR, n, arguments.length > 2 ? arguments[2] : void 0);
          },
          setFloat32: function (e, n) {
            cs(this, 4, e, xB, n, arguments.length > 2 ? arguments[2] : void 0);
          },
          setFloat64: function (e, n) {
            cs(this, 8, e, OB, n, arguments.length > 2 ? arguments[2] : void 0);
          },
        });
    zR(Qi, U1), zR(Da, IB);
    var fh = { ArrayBuffer: Qi, DataView: Da },
      PB = Ut,
      F1 = He,
      DB = st,
      rC = Wn,
      iC = si,
      NB = Pn,
      LB = gp,
      j1 = fh.ArrayBuffer,
      B1 = fh.DataView,
      aC = B1.prototype,
      oC = F1(j1.prototype.slice),
      MB = F1(aC.getUint8),
      UB = F1(aC.setUint8);
    PB(
      {
        target: "ArrayBuffer",
        proto: !0,
        unsafe: !0,
        forced: DB(function () {
          return !new j1(2).slice(1, void 0).byteLength;
        }),
      },
      {
        slice: function (e, n) {
          if (oC && n === void 0) return oC(rC(this), e);
          for (
            var a = rC(this).byteLength,
              c = iC(e, a),
              s = iC(n === void 0 ? a : n, a),
              l = new (LB(this, j1))(NB(s - c)),
              h = new B1(this),
              v = new B1(l),
              g = 0;
            c < s;

          )
            UB(v, g++, MB(h, c++));
          return l;
        },
      }
    ),
      Ut(
        { global: !0, constructor: !0, forced: !D1 },
        { DataView: fh.DataView }
      );
    var VB = Ut,
      FB = bc,
      jB = He([].reverse),
      sC = [1, 2];
    VB(
      {
        target: "Array",
        proto: !0,
        forced: String(sC) === String(sC.reverse()),
      },
      {
        reverse: function () {
          return FB(this) && (this.length = this.length), jB(this);
        },
      }
    );
    var BB = Dr,
      zB = mr,
      HB = St,
      WB = Zn,
      GB = TypeError,
      uC = function (e) {
        return function (n, a, c, s) {
          BB(a);
          var l = zB(n),
            h = HB(l),
            v = WB(l),
            g = e ? v - 1 : 0,
            _ = e ? -1 : 1;
          if (c < 2)
            for (;;) {
              if (g in h) {
                (s = h[g]), (g += _);
                break;
              }
              if (((g += _), e ? g < 0 : v <= g))
                throw GB("Reduce of empty array with no initial value");
            }
          for (; e ? g >= 0 : v > g; g += _) g in h && (s = a(s, h[g], g, l));
          return s;
        };
      },
      z1 = { left: uC(!1), right: uC(!0) },
      qB = z1.left,
      cC = da,
      KB = Vd;
    Ut(
      {
        target: "Array",
        proto: !0,
        forced: !Dd("reduce") || (!KB && cC > 79 && cC < 83),
      },
      {
        reduce: function (e) {
          var n = arguments.length;
          return qB(this, e, n, n > 1 ? arguments[1] : void 0);
        },
      }
    );
    var JB = Cd,
      $B = "ArrayBuffer",
      lC = fh.ArrayBuffer;
    Ut(
      { global: !0, constructor: !0, forced: ot.ArrayBuffer !== lC },
      { ArrayBuffer: lC }
    ),
      JB($B);
    var YB = Ut,
      dC = bc,
      ZB = rp,
      QB = nn,
      hC = si,
      XB = Zn,
      ez = on,
      tz = Wi,
      nz = In,
      rz = yc,
      iz = Pd("slice"),
      az = nz("species"),
      H1 = Array,
      oz = Math.max;
    YB(
      { target: "Array", proto: !0, forced: !iz },
      {
        slice: function (e, n) {
          var a,
            c,
            s,
            l = ez(this),
            h = XB(l),
            v = hC(e, h),
            g = hC(n === void 0 ? h : n, h);
          if (
            dC(l) &&
            ((a = l.constructor),
            ((ZB(a) && (a === H1 || dC(a.prototype))) ||
              (QB(a) && (a = a[az]) === null)) &&
              (a = void 0),
            a === H1 || a === void 0)
          )
            return rz(l, v, g);
          for (
            c = new (a === void 0 ? H1 : a)(oz(g - v, 0)), s = 0;
            v < g;
            v++, s++
          )
            v in l && tz(c, s, l[v]);
          return (c.length = s), c;
        },
      }
    );
    var fC = ot,
      sz = st,
      uz = He,
      cz = _r,
      lz = pp.trim,
      pC = n2,
      ph = fC.parseInt,
      vC = fC.Symbol,
      mC = vC && vC.iterator,
      gC = /^[+-]?0x/i,
      dz = uz(gC.exec),
      _C =
        ph(pC + "08") !== 8 ||
        ph(pC + "0x16") !== 22 ||
        (mC &&
          !sz(function () {
            ph(Object(mC));
          }))
          ? function (u, e) {
              var n = lz(cz(u));
              return ph(n, e >>> 0 || (dz(gC, n) ? 16 : 10));
            }
          : ph;
    Ut({ global: !0, forced: parseInt != _C }, { parseInt: _C });
    var ti,
      ol,
      Sv,
      W1 = { exports: {} },
      hz = D1,
      G1 = ct,
      Wr = ot,
      yC = Ft,
      wv = nn,
      ls = Jn,
      q1 = di,
      fz = Pr,
      pz = Zr,
      K1 = fr,
      vz = Hn.f,
      mz = nr,
      kv = Js,
      sl = Z,
      gz = In,
      _z = zu,
      bC = On.enforce,
      yz = On.get,
      Tv = Wr.Int8Array,
      J1 = Tv && Tv.prototype,
      SC = Wr.Uint8ClampedArray,
      wC = SC && SC.prototype,
      Na = Tv && kv(Tv),
      Xi = J1 && kv(J1),
      bz = Object.prototype,
      $1 = Wr.TypeError,
      kC = gz("toStringTag"),
      Y1 = _z("TYPED_ARRAY_TAG"),
      Sz = "TypedArrayConstructor",
      _o = hz && !!sl && q1(Wr.opera) !== "Opera",
      TC = !1,
      yo = {
        Int8Array: 1,
        Uint8Array: 1,
        Uint8ClampedArray: 1,
        Int16Array: 2,
        Uint16Array: 2,
        Int32Array: 4,
        Uint32Array: 4,
        Float32Array: 4,
        Float64Array: 8,
      },
      Z1 = { BigInt64Array: 8, BigUint64Array: 8 },
      EC = function (e) {
        var n = kv(e);
        if (wv(n)) {
          var a = yz(n);
          return a && ls(a, Sz) ? a.TypedArrayConstructor : EC(n);
        }
      },
      IC = function (e) {
        if (!wv(e)) return !1;
        var n = q1(e);
        return ls(yo, n) || ls(Z1, n);
      };
    for (ti in yo)
      (Sv = (ol = Wr[ti]) && ol.prototype)
        ? (bC(Sv).TypedArrayConstructor = ol)
        : (_o = !1);
    for (ti in Z1)
      (Sv = (ol = Wr[ti]) && ol.prototype) &&
        (bC(Sv).TypedArrayConstructor = ol);
    if (
      (!_o || !yC(Na) || Na === Function.prototype) &&
      ((Na = function () {
        throw $1("Incorrect invocation");
      }),
      _o)
    )
      for (ti in yo) Wr[ti] && sl(Wr[ti], Na);
    if ((!_o || !Xi || Xi === bz) && ((Xi = Na.prototype), _o))
      for (ti in yo) Wr[ti] && sl(Wr[ti].prototype, Xi);
    if ((_o && kv(wC) !== Xi && sl(wC, Xi), G1 && !ls(Xi, kC)))
      for (ti in ((TC = !0),
      vz(Xi, kC, {
        get: function () {
          return wv(this) ? this[Y1] : void 0;
        },
      }),
      yo))
        Wr[ti] && pz(Wr[ti], Y1, ti);
    var en = {
        NATIVE_ARRAY_BUFFER_VIEWS: _o,
        TYPED_ARRAY_TAG: TC && Y1,
        aTypedArray: function (e) {
          if (IC(e)) return e;
          throw $1("Target is not a typed array");
        },
        aTypedArrayConstructor: function (e) {
          if (yC(e) && (!sl || mz(Na, e))) return e;
          throw $1(fz(e) + " is not a typed array constructor");
        },
        exportTypedArrayMethod: function (e, n, a, c) {
          if (G1) {
            if (a)
              for (var s in yo) {
                var l = Wr[s];
                if (l && ls(l.prototype, e))
                  try {
                    delete l.prototype[e];
                  } catch (h) {
                    try {
                      l.prototype[e] = n;
                    } catch (v) {}
                  }
              }
            (Xi[e] && !a) || K1(Xi, e, a ? n : (_o && J1[e]) || n, c);
          }
        },
        exportTypedArrayStaticMethod: function (e, n, a) {
          var c, s;
          if (G1) {
            if (sl) {
              if (a) {
                for (c in yo)
                  if ((s = Wr[c]) && ls(s, e))
                    try {
                      delete s[e];
                    } catch (l) {}
              }
              if (Na[e] && !a) return;
              try {
                return K1(Na, e, a ? n : (_o && Na[e]) || n);
              } catch (l) {}
            }
            for (c in yo) !(s = Wr[c]) || (s[e] && !a) || K1(s, e, n);
          }
        },
        getTypedArrayConstructor: EC,
        isView: function (e) {
          if (!wv(e)) return !1;
          var n = q1(e);
          return n === "DataView" || ls(yo, n) || ls(Z1, n);
        },
        isTypedArray: IC,
        TypedArray: Na,
        TypedArrayPrototype: Xi,
      },
      RC = ot,
      Q1 = st,
      wz = ep,
      kz = en.NATIVE_ARRAY_BUFFER_VIEWS,
      Tz = RC.ArrayBuffer,
      wu = RC.Int8Array,
      Ez =
        !kz ||
        !Q1(function () {
          wu(1);
        }) ||
        !Q1(function () {
          new wu(-1);
        }) ||
        !wz(function (u) {
          new wu(), new wu(null), new wu(1.5), new wu(u);
        }, !0) ||
        Q1(function () {
          return new wu(new Tz(2), 1, void 0).length !== 1;
        }),
      Iz = Lr,
      Rz = RangeError,
      Cz = function (e) {
        var n = Iz(e);
        if (n < 0) throw Rz("The argument can't be less than 0");
        return n;
      },
      Az = RangeError,
      CC = function (e, n) {
        var a = Cz(e);
        if (a % n) throw Az("Wrong offset");
        return a;
      },
      xz = di,
      Oz = He("".slice),
      Pz = Ts,
      Dz = TypeError,
      AC = function (e) {
        var n = Pz(e, "number");
        if (typeof n == "number") throw Dz("Can't convert number to bigint");
        return BigInt(n);
      },
      Nz = ao,
      Lz = Re,
      Mz = y2,
      Uz = mr,
      Vz = Zn,
      Fz = Qf,
      jz = Ed,
      Bz = zg,
      zz = function (e) {
        return Oz(xz(e), 0, 3) === "Big";
      },
      Hz = en.aTypedArrayConstructor,
      Wz = AC,
      xC = Ut,
      OC = ot,
      PC = Re,
      Gz = ct,
      qz = Ez,
      ul = en,
      DC = fh,
      NC = zo,
      Kz = me,
      vh = Zr,
      Jz = qE,
      $z = Pn,
      LC = NR,
      X1 = CC,
      MC = Is,
      mh = Jn,
      Yz = di,
      eb = nn,
      Zz = Io,
      Qz = Ga,
      Xz = nr,
      Ev = Z,
      eH = dn.f,
      UC = function (e) {
        var n,
          a,
          c,
          s,
          l,
          h,
          v,
          g,
          _ = Mz(this),
          b = Uz(e),
          C = arguments.length,
          N = C > 1 ? arguments[1] : void 0,
          z = N !== void 0,
          F = jz(b);
        if (F && !Bz(F))
          for (g = (v = Fz(b, F)).next, b = []; !(h = Lz(g, v)).done; )
            b.push(h.value);
        for (
          z && C > 2 && (N = Nz(N, arguments[2])),
            a = Vz(b),
            c = new (Hz(_))(a),
            s = zz(c),
            n = 0;
          a > n;
          n++
        )
          (l = z ? N(b[n], n) : b[n]), (c[n] = s ? Wz(l) : +l);
        return c;
      },
      tH = Mr.forEach,
      nH = Cd,
      VC = Hn,
      FC = zt,
      rH = tp,
      tb = On.get,
      iH = On.set,
      aH = On.enforce,
      nb = VC.f,
      oH = FC.f,
      sH = Math.round,
      rb = OC.RangeError,
      jC = DC.ArrayBuffer,
      uH = jC.prototype,
      cH = DC.DataView,
      Iv = ul.NATIVE_ARRAY_BUFFER_VIEWS,
      BC = ul.TYPED_ARRAY_TAG,
      zC = ul.TypedArray,
      gh = ul.TypedArrayPrototype,
      lH = ul.aTypedArrayConstructor,
      ib = ul.isTypedArray,
      Rv = "BYTES_PER_ELEMENT",
      ab = "Wrong length",
      HC = function (e, n) {
        lH(e);
        for (var a = 0, c = n.length, s = new e(c); c > a; ) s[a] = n[a++];
        return s;
      },
      Cv = function (e, n) {
        nb(e, n, {
          get: function () {
            return tb(this)[n];
          },
        });
      },
      WC = function (e) {
        var n;
        return (
          Xz(uH, e) || (n = Yz(e)) == "ArrayBuffer" || n == "SharedArrayBuffer"
        );
      },
      GC = function (e, n) {
        return ib(e) && !Zz(n) && n in e && Jz(+n) && n >= 0;
      },
      qC = function (e, n) {
        return (n = MC(n)), GC(e, n) ? Kz(2, e[n]) : oH(e, n);
      },
      KC = function (e, n, a) {
        return (
          (n = MC(n)),
          !(GC(e, n) && eb(a) && mh(a, "value")) ||
          mh(a, "get") ||
          mh(a, "set") ||
          a.configurable ||
          (mh(a, "writable") && !a.writable) ||
          (mh(a, "enumerable") && !a.enumerable)
            ? nb(e, n, a)
            : ((e[n] = a.value), e)
        );
      };
    Gz
      ? (Iv ||
          ((FC.f = qC),
          (VC.f = KC),
          Cv(gh, "buffer"),
          Cv(gh, "byteOffset"),
          Cv(gh, "byteLength"),
          Cv(gh, "length")),
        xC(
          { target: "Object", stat: !0, forced: !Iv },
          { getOwnPropertyDescriptor: qC, defineProperty: KC }
        ),
        (W1.exports = function (u, e, n) {
          var a = u.match(/\d+$/)[0] / 8,
            c = u + (n ? "Clamped" : "") + "Array",
            s = "get" + u,
            l = "set" + u,
            h = OC[c],
            v = h,
            g = v && v.prototype,
            _ = {},
            b = function (z, F) {
              nb(z, F, {
                get: function () {
                  return (function (E, A) {
                    var L = tb(E);
                    return L.view[s](A * a + L.byteOffset, !0);
                  })(this, F);
                },
                set: function (E) {
                  return (function (A, L, $) {
                    var te = tb(A);
                    n && ($ = ($ = sH($)) < 0 ? 0 : $ > 255 ? 255 : 255 & $),
                      te.view[l](L * a + te.byteOffset, $, !0);
                  })(this, F, E);
                },
                enumerable: !0,
              });
            };
          Iv
            ? qz &&
              ((v = e(function (N, z, F, U) {
                return (
                  NC(N, g),
                  rH(
                    eb(z)
                      ? WC(z)
                        ? U !== void 0
                          ? new h(z, X1(F, a), U)
                          : F !== void 0
                          ? new h(z, X1(F, a))
                          : new h(z)
                        : ib(z)
                        ? HC(v, z)
                        : PC(UC, v, z)
                      : new h(LC(z)),
                    N,
                    v
                  )
                );
              })),
              Ev && Ev(v, zC),
              tH(eH(h), function (N) {
                N in v || vh(v, N, h[N]);
              }),
              (v.prototype = g))
            : ((v = e(function (N, z, F, U) {
                NC(N, g);
                var E,
                  A,
                  L,
                  $ = 0,
                  te = 0;
                if (eb(z)) {
                  if (!WC(z)) return ib(z) ? HC(v, z) : PC(UC, v, z);
                  (E = z), (te = X1(F, a));
                  var X = z.byteLength;
                  if (U === void 0) {
                    if (X % a || (A = X - te) < 0) throw rb(ab);
                  } else if ((A = $z(U) * a) + te > X) throw rb(ab);
                  L = A / a;
                } else (L = LC(z)), (E = new jC((A = L * a)));
                for (
                  iH(N, {
                    buffer: E,
                    byteOffset: te,
                    byteLength: A,
                    length: L,
                    view: new cH(E),
                  });
                  $ < L;

                )
                  b(N, $++);
              })),
              Ev && Ev(v, zC),
              (g = v.prototype = Qz(gh))),
            g.constructor !== v && vh(g, "constructor", v),
            (aH(g).TypedArrayConstructor = v),
            BC && vh(g, BC, c);
          var C = v != h;
          (_[c] = v),
            xC({ global: !0, constructor: !0, forced: C, sham: !Iv }, _),
            Rv in v || vh(v, Rv, a),
            Rv in g || vh(g, Rv, a),
            nH(c);
        }))
      : (W1.exports = function () {}),
      (0, W1.exports)("Uint8", function (u) {
        return function (e, n, a) {
          return u(this, e, n, a);
        };
      });
    var dH = mr,
      ob = si,
      hH = Zn,
      fH = jw,
      pH = Math.min,
      vH =
        [].copyWithin ||
        function (u, e) {
          var n = dH(this),
            a = hH(n),
            c = ob(u, a),
            s = ob(e, a),
            l = arguments.length > 2 ? arguments[2] : void 0,
            h = pH((l === void 0 ? a : ob(l, a)) - s, a - c),
            v = 1;
          for (
            s < c && c < s + h && ((v = -1), (s += h - 1), (c += h - 1));
            h-- > 0;

          )
            s in n ? (n[c] = n[s]) : fH(n, c), (c += v), (s += v);
          return n;
        },
      JC = en,
      mH = He(vH),
      gH = JC.aTypedArray;
    (0, JC.exportTypedArrayMethod)("copyWithin", function (u, e) {
      return mH(gH(this), u, e, arguments.length > 2 ? arguments[2] : void 0);
    });
    var _H = Mr.every,
      yH = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("every", function (u) {
      return _H(yH(this), u, arguments.length > 1 ? arguments[1] : void 0);
    });
    var bH = MR,
      SH = AC,
      wH = di,
      kH = Re,
      TH = st,
      EH = en.aTypedArray,
      IH = en.exportTypedArrayMethod,
      RH = He("".slice);
    IH(
      "fill",
      function (u) {
        var e = arguments.length;
        EH(this);
        var n = RH(wH(this), 0, 3) === "Big" ? SH(u) : +u;
        return kH(
          bH,
          this,
          n,
          e > 1 ? arguments[1] : void 0,
          e > 2 ? arguments[2] : void 0
        );
      },
      TH(function () {
        var u = 0;
        return (
          new Int8Array(2).fill({
            valueOf: function () {
              return u++;
            },
          }),
          u !== 1
        );
      })
    );
    var CH = Zn,
      AH = gp,
      xH = en.aTypedArrayConstructor,
      OH = en.getTypedArrayConstructor,
      Av = function (e) {
        return xH(AH(e, OH(e)));
      },
      PH = function (e, n) {
        for (var a = 0, c = CH(n), s = new e(c); c > a; ) s[a] = n[a++];
        return s;
      },
      DH = Av,
      NH = Mr.filter,
      LH = function (e, n) {
        return PH(DH(e), n);
      },
      MH = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("filter", function (u) {
      var e = NH(MH(this), u, arguments.length > 1 ? arguments[1] : void 0);
      return LH(this, e);
    });
    var UH = Mr.find,
      VH = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("find", function (u) {
      return UH(VH(this), u, arguments.length > 1 ? arguments[1] : void 0);
    });
    var FH = Mr.findIndex,
      jH = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("findIndex", function (u) {
      return FH(jH(this), u, arguments.length > 1 ? arguments[1] : void 0);
    });
    var BH = Mr.forEach,
      zH = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("forEach", function (u) {
      BH(zH(this), u, arguments.length > 1 ? arguments[1] : void 0);
    });
    var HH = ui.includes,
      WH = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("includes", function (u) {
      return HH(WH(this), u, arguments.length > 1 ? arguments[1] : void 0);
    });
    var GH = ui.indexOf,
      qH = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("indexOf", function (u) {
      return GH(qH(this), u, arguments.length > 1 ? arguments[1] : void 0);
    });
    var KH = ot,
      JH = st,
      sb = He,
      YC = en,
      ub = Ea,
      cb = In("iterator"),
      ZC = KH.Uint8Array,
      $H = sb(ub.values),
      YH = sb(ub.keys),
      ZH = sb(ub.entries),
      lb = YC.aTypedArray,
      xv = YC.exportTypedArrayMethod,
      cl = ZC && ZC.prototype,
      Ov = !JH(function () {
        cl[cb].call([1]);
      }),
      QC =
        !!cl &&
        cl.values &&
        cl[cb] === cl.values &&
        cl.values.name === "values",
      XC = function () {
        return $H(lb(this));
      };
    xv(
      "entries",
      function () {
        return ZH(lb(this));
      },
      Ov
    ),
      xv(
        "keys",
        function () {
          return YH(lb(this));
        },
        Ov
      ),
      xv("values", XC, Ov || !QC, { name: "values" }),
      xv(cb, XC, Ov || !QC, { name: "values" });
    var QH = en.aTypedArray,
      XH = en.exportTypedArrayMethod,
      eW = He([].join);
    XH("join", function (u) {
      return eW(QH(this), u);
    });
    var tW = Xs,
      nW = on,
      rW = Lr,
      iW = Zn,
      aW = Dd,
      oW = Math.min,
      db = [].lastIndexOf,
      eA = !!db && 1 / [1].lastIndexOf(1, -0) < 0,
      sW = aW("lastIndexOf"),
      uW =
        eA || !sW
          ? function (u) {
              if (eA) return tW(db, this, arguments) || 0;
              var e = nW(this),
                n = iW(e),
                a = n - 1;
              for (
                arguments.length > 1 && (a = oW(a, rW(arguments[1]))),
                  a < 0 && (a = n + a);
                a >= 0;
                a--
              )
                if (a in e && e[a] === u) return a || 0;
              return -1;
            }
          : db,
      cW = Xs,
      lW = uW,
      dW = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("lastIndexOf", function (u) {
      var e = arguments.length;
      return cW(lW, dW(this), e > 1 ? [u, arguments[1]] : [u]);
    });
    var hW = Mr.map,
      fW = Av,
      pW = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("map", function (u) {
      return hW(
        pW(this),
        u,
        arguments.length > 1 ? arguments[1] : void 0,
        function (e, n) {
          return new (fW(e))(n);
        }
      );
    });
    var vW = z1.left,
      mW = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("reduce", function (u) {
      var e = arguments.length;
      return vW(mW(this), u, e, e > 1 ? arguments[1] : void 0);
    });
    var gW = z1.right,
      _W = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("reduceRight", function (u) {
      var e = arguments.length;
      return gW(_W(this), u, e, e > 1 ? arguments[1] : void 0);
    });
    var yW = en.aTypedArray,
      bW = en.exportTypedArrayMethod,
      SW = Math.floor;
    bW("reverse", function () {
      for (var u, e = this, n = yW(e).length, a = SW(n / 2), c = 0; c < a; )
        (u = e[c]), (e[c++] = e[--n]), (e[n] = u);
      return e;
    });
    var tA = ot,
      nA = Re,
      hb = en,
      wW = Zn,
      kW = CC,
      TW = mr,
      rA = st,
      EW = tA.RangeError,
      fb = tA.Int8Array,
      iA = fb && fb.prototype,
      aA = iA && iA.set,
      IW = hb.aTypedArray,
      RW = hb.exportTypedArrayMethod,
      pb = !rA(function () {
        var u = new Uint8ClampedArray(2);
        return nA(aA, u, { length: 1, 0: 3 }, 1), u[1] !== 3;
      }),
      CW =
        pb &&
        hb.NATIVE_ARRAY_BUFFER_VIEWS &&
        rA(function () {
          var u = new fb(2);
          return u.set(1), u.set("2", 1), u[0] !== 0 || u[1] !== 2;
        });
    RW(
      "set",
      function (u) {
        IW(this);
        var e = kW(arguments.length > 1 ? arguments[1] : void 0, 1),
          n = TW(u);
        if (pb) return nA(aA, this, n, e);
        var a = this.length,
          c = wW(n),
          s = 0;
        if (c + e > a) throw EW("Wrong length");
        for (; s < c; ) this[e + s] = n[s++];
      },
      !pb || CW
    );
    var AW = Av,
      xW = yc,
      OW = en.aTypedArray;
    (0, en.exportTypedArrayMethod)(
      "slice",
      function (u, e) {
        for (
          var n = xW(OW(this), u, e),
            a = AW(this),
            c = 0,
            s = n.length,
            l = new a(s);
          s > c;

        )
          l[c] = n[c++];
        return l;
      },
      st(function () {
        new Int8Array(1).slice();
      })
    );
    var PW = Mr.some,
      DW = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("some", function (u) {
      return PW(DW(this), u, arguments.length > 1 ? arguments[1] : void 0);
    });
    var oA = zn.match(/firefox\/(\d+)/i),
      NW = !!oA && +oA[1],
      LW = /MSIE|Trident/.test(zn),
      sA = zn.match(/AppleWebKit\/(\d+)\./),
      MW = !!sA && +sA[1],
      UW = He,
      vb = st,
      VW = Dr,
      FW = Sk,
      uA = NW,
      jW = LW,
      cA = da,
      lA = MW,
      BW = en.aTypedArray,
      zW = en.exportTypedArrayMethod,
      _h = ot.Uint16Array,
      ll = _h && UW(_h.prototype.sort),
      HW = !(
        !ll ||
        (vb(function () {
          ll(new _h(2), null);
        }) &&
          vb(function () {
            ll(new _h(2), {});
          }))
      ),
      dA =
        !!ll &&
        !vb(function () {
          if (cA) return cA < 74;
          if (uA) return uA < 67;
          if (jW) return !0;
          if (lA) return lA < 602;
          var u,
            e,
            n = new _h(516),
            a = Array(516);
          for (u = 0; u < 516; u++)
            (e = u % 4), (n[u] = 515 - u), (a[u] = u - 2 * e + 3);
          for (
            ll(n, function (c, s) {
              return ((c / 4) | 0) - ((s / 4) | 0);
            }),
              u = 0;
            u < 516;
            u++
          )
            if (n[u] !== a[u]) return !0;
        });
    zW(
      "sort",
      function (u) {
        return (
          u !== void 0 && VW(u),
          dA
            ? ll(this, u)
            : FW(
                BW(this),
                (function (e) {
                  return function (n, a) {
                    return e !== void 0
                      ? +e(n, a) || 0
                      : a != a
                      ? -1
                      : n != n
                      ? 1
                      : n === 0 && a === 0
                      ? 1 / n > 0 && 1 / a < 0
                        ? 1
                        : -1
                      : n > a;
                  };
                })(u)
              )
        );
      },
      !dA || HW
    );
    var WW = Pn,
      hA = si,
      GW = Av,
      qW = en.aTypedArray;
    (0, en.exportTypedArrayMethod)("subarray", function (u, e) {
      var n = qW(this),
        a = n.length,
        c = hA(u, a);
      return new (GW(n))(
        n.buffer,
        n.byteOffset + c * n.BYTES_PER_ELEMENT,
        WW((e === void 0 ? a : hA(e, a)) - c)
      );
    });
    var KW = Xs,
      fA = en,
      mb = st,
      pA = yc,
      Pv = ot.Int8Array,
      vA = fA.aTypedArray,
      JW = fA.exportTypedArrayMethod,
      mA = [].toLocaleString,
      $W =
        !!Pv &&
        mb(function () {
          mA.call(new Pv(1));
        });
    JW(
      "toLocaleString",
      function () {
        return KW(mA, $W ? pA(vA(this)) : vA(this), pA(arguments));
      },
      mb(function () {
        return [1, 2].toLocaleString() != new Pv([1, 2]).toLocaleString();
      }) ||
        !mb(function () {
          Pv.prototype.toLocaleString.call([1, 2]);
        })
    );
    var YW = en.exportTypedArrayMethod,
      ZW = st,
      QW = He,
      gA = ot.Uint8Array,
      XW = (gA && gA.prototype) || {},
      Dv = [].toString,
      eG = QW([].join);
    ZW(function () {
      Dv.call({});
    }) &&
      (Dv = function () {
        return eG(this);
      });
    var tG = XW.toString != Dv;
    YW("toString", Dv, tG);
    var nG = (function () {
        function u(e, n, a) {
          B(this, u),
            (this.isUplink_ = a),
            (this.connection_ = e),
            (this.log_ = n),
            (this.seiMessageList_ = []),
            (this.smallVideoSeiMessageList_ = []),
            (this.seiPayloadType_ = 243),
            (this.runningAbortMap_ = /* @__PURE__ */ new Map()),
            (this.abortMap_ = /* @__PURE__ */ new Map()),
            (this.onSEIMessage = null);
        }
        return (
          oe(u, [
            {
              key: "isRunning",
              get: function () {
                return !!this.runningAbortMap_.size > 0;
              },
            },
            {
              key: "start",
              value: function (n) {
                var a = this,
                  c =
                    arguments.length > 1 && arguments[1] !== void 0
                      ? arguments[1]
                      : this.seiMessageList_,
                  s = n.createEncodedStreams(),
                  l = s.readable,
                  h = s.writable,
                  v = new TransformStream({
                    transform: this.isUplink_
                      ? function (_, b) {
                          return a.encodeVideoFrame(_, b, c);
                        }
                      : function (_, b) {
                          var C, N;
                          return a.decodeVideoFrame(
                            _,
                            b,
                            n ===
                              ((C = a.connection_) === null ||
                              C === void 0 ||
                              (N = C.getPeerConnection()) === null ||
                              N === void 0
                                ? void 0
                                : N.getReceivers()[YT])
                          );
                        },
                  }),
                  g = new AbortController();
                l
                  .pipeThrough(v)
                  .pipeTo(h, { signal: g.signal })
                  .catch(function () {}),
                  this.runningAbortMap_.set(n, g);
              },
            },
            {
              key: "restart",
              value: function (n, a) {
                this.stop(), this.start(n, a);
              },
            },
            {
              key: "stop",
              value: function (n) {
                var a;
                (a = this.runningAbortMap_.get(n)) === null ||
                  a === void 0 ||
                  a.abort(),
                  this.runningAbortMap_.delete(n);
              },
            },
            {
              key: "destroy",
              value: function () {
                this.stop(),
                  this.runningAbortMap_.forEach(function (n) {
                    return n.abort();
                  }),
                  this.runningAbortMap_.clear(),
                  this.abortMap_.forEach(function (n) {
                    return n.abort();
                  }),
                  this.abortMap_.clear(),
                  (this.log_ = null),
                  (this.onSEIMessage = null),
                  (this.connection_ = null);
              },
            },
            {
              key: "handleEncodedStreams",
              value: function () {
                var n = this;
                try {
                  var a = this.connection_.getPeerConnection();
                  this.clearUnusedSenderOrReceiver(a),
                    this.isUplink_
                      ? a.getSenders().forEach(function (c, s) {
                          if (!n.runningAbortMap_.has(c) && !n.abortMap_.has(c))
                            if (s === n7 || s === $T) {
                              var l =
                                s === $T
                                  ? n.smallVideoSeiMessageList_
                                  : n.seiMessageList_;
                              n.isRunning ? n.restart(c, l) : n.start(c, l);
                            } else n.pipeSenderOrReceiver(c);
                        })
                      : a.getReceivers().forEach(function (c, s) {
                          var l;
                          n.runningAbortMap_.has(c) ||
                            n.abortMap_.has(c) ||
                            ((s !== r7 && s !== YT) ||
                            ((l = c.track) === null || l === void 0
                              ? void 0
                              : l.kind) !== wt
                              ? n.pipeSenderOrReceiver(c)
                              : n.isRunning
                              ? n.restart(c)
                              : n.start(c));
                        });
                } catch (c) {
                  this.log_.warn(c);
                }
              },
            },
            {
              key: "pipeSenderOrReceiver",
              value: function (n) {
                var a = n.createEncodedStreams(),
                  c = a.readable,
                  s = a.writable,
                  l = new AbortController();
                this.abortMap_.set(n, l),
                  c.pipeTo(s, { signal: l.signal }).catch(function () {});
              },
            },
            {
              key: "clearUnusedSenderOrReceiver",
              value: function (n) {
                var a = this;
                this.abortMap_.forEach(function (c, s) {
                  (a.isUplink_ ? n.getSenders() : n.getReceivers()).find(
                    function (l) {
                      return l === s;
                    }
                  ) || (c.abort(), a.abortMap_.delete(s));
                });
              },
            },
            {
              key: "push",
              value: function (n, a) {
                a &&
                  a.seiPayloadType &&
                  (this.seiPayloadType_ = a.seiPayloadType),
                  this.seiMessageList_.push(n),
                  this.smallVideoSeiMessageList_.push(n);
              },
            },
            {
              key: "hasSEI",
              value: function (n) {
                var a = new DataView(n);
                return a.getInt32(0) === 1 && a.getInt8(4) === 6;
              },
            },
            {
              key: "isEmptyFrame",
              value: function (n) {
                return n.type === "empty" || n.data.byteLength === 0;
              },
            },
            {
              key: "getNaluCount",
              value: function (n) {
                for (
                  var a = 0, c = 0, s = new DataView(n), l = 0;
                  l < n.byteLength;
                  l++
                )
                  switch (s.getUint8(l)) {
                    case 0:
                      a++;
                      break;
                    case 1:
                      (a !== 2 && a !== 3) || c++, (a = 0);
                      break;
                    default:
                      a = 0;
                  }
                return c;
              },
            },
            {
              key: "encodeVideoFrame",
              value: function (n, a, c) {
                try {
                  if (
                    this.connection_.isH264 &&
                    c.length > 0 &&
                    !this.isEmptyFrame(n)
                  ) {
                    var s = 9 - this.getNaluCount(n.data);
                    if (s <= 0) return;
                    for (
                      var l = c
                          .splice(0, s)
                          .reverse()
                          .map(this.encodeSEINalu.bind(this)),
                        h = l.reduce(function (F, U) {
                          return F + U.dataView.byteLength;
                        }, 0),
                        v = new ArrayBuffer(h + n.data.byteLength),
                        g = new DataView(v),
                        _ = new DataView(n.data),
                        b = 0,
                        C = 0;
                      C < l.length;
                      C++
                    )
                      for (var N = 0; N < l[C].dataView.byteLength; N++)
                        g.setInt8(b++, l[C].dataView.getInt8(N));
                    for (var z = 0; z < n.data.byteLength; z++)
                      g.setInt8(b++, _.getInt8(z));
                    (n.data = v),
                      this.log_.debug("".concat(l.length, " sei sent"));
                  }
                } catch (F) {
                  this.log_.warn(F);
                }
                a.enqueue(n);
              },
            },
            {
              key: "decodeVideoFrame",
              value: function (n, a) {
                var c = this,
                  s =
                    arguments.length > 2 &&
                    arguments[2] !== void 0 &&
                    arguments[2];
                try {
                  if (
                    this.connection_.isH264 &&
                    !this.isEmptyFrame(n) &&
                    this.hasSEI(n.data)
                  ) {
                    for (
                      var l = [],
                        h = new DataView(n.data),
                        v = 0,
                        g = -1,
                        _ = -1,
                        b = 0;
                      b < n.data.byteLength;
                      b++
                    ) {
                      var C = h.getUint8(b);
                      if (C === 0) v++;
                      else if (C === 1) {
                        if (v === 2 || v === 3) {
                          var N = b - v;
                          g === -1
                            ? (g = N)
                            : _ === -1 &&
                              ((_ = N),
                              l.push(
                                new _A(new DataView(h.buffer.slice(g, _)))
                              ),
                              (g = N),
                              (_ = -1));
                          var z = h.getUint8(b + 1) === 6;
                          if (!z) {
                            n.data = new DataView(h.buffer.slice(N)).buffer;
                            break;
                          }
                        }
                        v = 0;
                      } else v = 0;
                    }
                    this.log_.debug("".concat(l.length, " sei received")),
                      zr(this.onSEIMessage) &&
                        l.reverse().forEach(function (F) {
                          c.onSEIMessage({
                            seiPayloadType: F.seiPayloadType,
                            data: F.seiPayload.buffer,
                            isFromAuxiliary: s,
                          });
                        });
                  }
                } catch (F) {
                  this.log_.warn(F);
                }
                a.enqueue(n);
              },
            },
            {
              key: "encodeSEINalu",
              value: function (n) {
                var a = n.byteLength,
                  c = parseInt(a / 255),
                  s = a % 255,
                  l = [];
                l.push(0, 0, 0, 1, 6, this.seiPayloadType_);
                for (var h = 0; h < c; h++) l.push(255);
                l.push(s);
                var v = new DataView(n);
                return (
                  l.push.apply(l, Ze(new Uint8Array(v.buffer))),
                  l.push(128),
                  new _A(new DataView(new Uint8Array(l).buffer), !0)
                );
              },
            },
          ]),
          u
        );
      })(),
      _A = (function () {
        function u(e) {
          var n =
            arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
          B(this, u),
            (this.dataView = e),
            this.isSEI &&
              (n ? this.addPreventionByte() : this.removePreventionByte());
        }
        return (
          oe(u, [
            {
              key: "addPreventionByte",
              value: function () {
                for (
                  var n = this.seiPayloadStartIndex,
                    a = this.dataView.byteLength - 2,
                    c = [],
                    s = 0,
                    l = n;
                  l <= a;
                  l++
                ) {
                  var h = this.dataView.getInt8(l);
                  switch (h) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                      s === 2 && (c.push(3), (s = 0)),
                        h == 0 ? s++ : (s = 0),
                        c.push(h);
                      break;
                    default:
                      (s = 0), c.push(h);
                  }
                }
                c.push(this.dataView.getInt8(this.dataView.byteLength - 1));
                var v = new DataView(
                  new Uint8Array(
                    [].concat(
                      Ze(new Uint8Array(this.dataView.buffer).slice(0, n)),
                      c
                    )
                  ).buffer
                );
                this.dataView = v;
              },
            },
            {
              key: "removePreventionByte",
              value: function () {
                for (
                  var n = this.seiPayloadStartIndex,
                    a = this.dataView.byteLength - 1,
                    c = [],
                    s = 0,
                    l = n;
                  l <= a;
                  l++
                )
                  switch (this.dataView.getInt8(l)) {
                    case 0:
                      s++, c.push(this.dataView.getInt8(l));
                      break;
                    case 3:
                      s !== 2 && c.push(this.dataView.getInt8(l)), (s = 0);
                      break;
                    default:
                      c.push(this.dataView.getInt8(l)), (s = 0);
                  }
                var h = new DataView(
                  new Uint8Array(
                    [].concat(
                      Ze(new Uint8Array(this.dataView.buffer).slice(0, n)),
                      c
                    )
                  ).buffer
                );
                this.dataView = h;
              },
            },
            {
              key: "isSEI",
              get: function () {
                return this.dataView.getUint8(4) === 6;
              },
            },
            {
              key: "seiPayloadStartIndex",
              get: function () {
                for (
                  var n = 6, a = 6;
                  a < this.dataView.buffer.byteLength &&
                  (n++, this.dataView.getUint8(a) === 255);
                  a++
                );
                return n;
              },
            },
            {
              key: "seiPayloadType",
              get: function () {
                return this.isSEI ? this.dataView.getUint8(5) : null;
              },
            },
            {
              key: "seiPayload",
              get: function () {
                if (!this.isSEI) return null;
                for (
                  var n = 0, a = 6, c = 6;
                  c < this.dataView.buffer.byteLength;
                  c++
                ) {
                  var s = this.dataView.getUint8(c);
                  if ((a++, s !== 255)) {
                    n += s;
                    break;
                  }
                  n += 255;
                }
                for (
                  var l = new ArrayBuffer(n), h = new DataView(l), v = 0;
                  v < l.byteLength;
                  v++, a++
                )
                  h.setInt8(v, this.dataView.getInt8(a));
                return h;
              },
            },
          ]),
          u
        );
      })(),
      gb = (function () {
        function u(n) {
          B(this, u),
            (this.userId_ = n.userId),
            (this.tinyId_ = n.tinyId),
            (this.client_ = n.client),
            (this.sdpSemantics_ = n.client.getSdpSemantics()),
            (this.isUplink_ = n.isUplink),
            (this.log_ = ft.createLogger({
              id: "n|" + this.userId_,
              userId: this.client_.getUserId(),
              sdkAppId: this.client_.getSDKAppId(),
              isLocal: this.isUplink_,
            })),
            (this.signalChannel_ = n.signalChannel),
            (this.peerConnection_ = null),
            (this.isErrorObserved_ = !1),
            (this.emitter_ = new rs()),
            (this.currentState_ = Vr),
            (this.waitForPeerConnectionConnectedPromise_ = null),
            (this.isReconnecting_ = !1),
            (this.reconnectionCount_ = 0),
            (this.reconnectionTimer_ = -1),
            (this.isFirstConnection_ = !0),
            (this.delay_ = { audioDelay: 0, videoDelay: 0 }),
            (this.enableSEI_ = n.enableSEI),
            this.enableSEI_ &&
              e1 &&
              (this.sei_ = new nG(this, this.log_, this.isUplink_));
        }
        var e;
        return (
          oe(u, [
            {
              key: "initialize",
              value: function () {
                var a = {
                  encodedInsertableStreams: this.enableSEI_ && e1,
                  iceServers: this.client_.getIceServers(),
                  iceTransportPolicy: this.client_.getIceTransportPolicy(),
                  sdpSemantics: this.sdpSemantics_,
                  bundlePolicy: "max-bundle",
                  rtcpMuxPolicy: "require",
                  tcpCandidatePolicy: "disable",
                  IceTransportsType: "nohost",
                };
                (this.peerConnection_ = new RTCPeerConnection(a)),
                  (this.peerConnection_.onconnectionstatechange =
                    this.onConnectionStateChange.bind(this));
              },
            },
            {
              key: "close",
              value: function () {
                this.log_.info("closing connection"),
                  this.closePeerConnection(),
                  this.sei_ && (this.sei_.destroy(), (this.sei_ = null));
              },
            },
            {
              key: "closePeerConnection",
              value: function () {
                var a =
                  arguments.length > 0 &&
                  arguments[0] !== void 0 &&
                  arguments[0];
                this.peerConnection_ &&
                  ((this.peerConnection_.onconnectionstatechange =
                    function () {}),
                  this.peerConnection_.close(),
                  (this.peerConnection_ = null),
                  a && this.emitConnectionStateChangedEvent(Vr));
              },
            },
            {
              key: "getDTLSTransportState",
              value: function () {
                if (!this.peerConnection_) return Ap;
                var a = null;
                if (this.isUplink_) {
                  if (!Xp() || this.peerConnection_.getSenders().length === 0)
                    return Ap;
                  a = this.peerConnection_.getSenders()[0].transport;
                } else {
                  if (!MI() || this.peerConnection_.getReceivers().length === 0)
                    return Ap;
                  a = this.peerConnection_.getReceivers()[0].transport;
                }
                return a ? a.state : Ap;
              },
            },
            {
              key: "onConnectionStateChange",
              value: function (a) {
                var c = this.peerConnection_.iceConnectionState,
                  s = this.getDTLSTransportState();
                if (
                  (this.log_.info(
                    "onConnectionStateChange() connectionState: " +
                      a.target.connectionState
                  ),
                  this.log_.info(
                    "ICE Transport state: "
                      .concat(c, ", DTLS Transport state: ")
                      .concat(s)
                  ),
                  a.target.connectionState === xp &&
                    this.emitConnectionStateChangedEvent(vT),
                  a.target.connectionState === mT ||
                    a.target.connectionState === g0)
                ) {
                  var l = ""
                      .concat(
                        this.isUplink_ ? "uplink" : "downlink",
                        " ICE/DTLS Transport connection "
                      )
                      .concat(
                        a.target.connectionState,
                        ". ICE Transport state: "
                      )
                      .concat(c, ", DTLS Transport state: ")
                      .concat(s),
                    h = new De({ message: l, code: Oe.ICE_TRANSPORT_ERROR });
                  gt.logFailedEvent({
                    userId: this.client_.getUserId(),
                    eventType: AT,
                    error: h,
                  }),
                    this.emitConnectionStateChangedEvent(Vr),
                    this.isErrorObserved_ || this.emitter_.emit(_n.ERROR, h);
                }
                (a.target.connectionState !== gT &&
                  a.target.connectionState !== GM) ||
                  (this.logSelectedCandidate(),
                  gt.logSuccessEvent({
                    userId: this.client_.getUserId(),
                    eventType: AT,
                  }),
                  this.emitConnectionStateChangedEvent(Fr));
              },
            },
            {
              key: "emitConnectionStateChangedEvent",
              value: function (a) {
                a !== this.currentState_ &&
                  ((this.currentState_ === m0 && a === vT) ||
                    (Ee.emit(Yp, {
                      client: this.client_,
                      connection: this,
                      prevState: this.currentState_,
                      state: a,
                    }),
                    this.emitter_.emit(_n.CONNECTION_STATE_CHANGED, {
                      prevState: this.currentState_,
                      state: a,
                    }),
                    (this.currentState_ = a)));
              },
            },
            {
              key: "hitTest",
              value: function (a) {
                return (
                  ((a === 0 || a === "0") && this.isUplink_) ||
                  a === this.tinyId_
                );
              },
            },
            {
              key: "addEventInternal",
              value: function (a, c) {
                var s = this.client_.getUserId(),
                  l = {
                    eventId: a,
                    eventDesc: c,
                    timestamp: Ur(),
                    userId: s,
                    tinyId: this.client_.getTinyId(),
                  };
                this.isUplink_ ||
                  ((l.remoteUserId = this.userId_),
                  (l.remoteTinyId = this.tinyId_)),
                  Xr(s, l);
              },
            },
            {
              key: "getPeerConnection",
              value: function () {
                return this.peerConnection_;
              },
            },
            {
              key: "getClient",
              value: function () {
                return this.client_;
              },
            },
            {
              key: "getUserId",
              value: function () {
                return this.userId_;
              },
            },
            {
              key: "getTinyId",
              value: function () {
                return this.tinyId_;
              },
            },
            {
              key: "logSelectedCandidate",
              value:
                ((e = I(
                  m().mark(function n() {
                    var a, c, s, l, h, v, g;
                    return m().wrap(
                      function (_) {
                        for (;;)
                          switch ((_.prev = _.next)) {
                            case 0:
                              if (this.peerConnection_) {
                                _.next = 2;
                                break;
                              }
                              return _.abrupt("return");
                            case 2:
                              return (
                                (_.next = 4), this.peerConnection_.getStats()
                              );
                            case 4:
                              (a = _.sent), (c = nt(a)), (_.prev = 6), c.s();
                            case 8:
                              if ((s = c.n()).done) {
                                _.next = 18;
                                break;
                              }
                              if (((l = Et(s.value, 2))[0], !t1((h = l[1])))) {
                                _.next = 16;
                                break;
                              }
                              return (
                                (v = a.get(h.localCandidateId)),
                                (g = a.get(h.remoteCandidateId)),
                                v &&
                                  this.log_.info(
                                    "local candidate: "
                                      .concat(v.candidateType, " ")
                                      .concat(v.protocol, ":")
                                      .concat(v.ip || v.address, ":")
                                      .concat(v.port, " ")
                                      .concat(v.networkType || "", " ")
                                      .concat(
                                        v.candidateType === "relay"
                                          ? "relayProtocol:" + v.relayProtocol
                                          : ""
                                      )
                                  ),
                                g &&
                                  this.log_.info(
                                    "remote candidate: "
                                      .concat(g.candidateType, " ")
                                      .concat(g.protocol, ":")
                                      .concat(g.ip || g.address, ":")
                                      .concat(g.port)
                                  ),
                                _.abrupt("break", 18)
                              );
                            case 16:
                              _.next = 8;
                              break;
                            case 18:
                              _.next = 23;
                              break;
                            case 20:
                              (_.prev = 20), (_.t0 = _.catch(6)), c.e(_.t0);
                            case 23:
                              return (_.prev = 23), c.f(), _.finish(23);
                            case 26:
                            case "end":
                              return _.stop();
                          }
                      },
                      n,
                      this,
                      [[6, 20, 23, 26]]
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "getCurrentState",
              value: function () {
                return this.currentState_;
              },
            },
            {
              key: "waitForPeerConnectionConnected",
              value: function () {
                var a = this;
                return (
                  this.waitForPeerConnectionConnectedPromise_ ||
                    ((this.waitForPeerConnectionConnectedPromise_ = new Promise(
                      function (c, s) {
                        if (a.currentState_ === Fr) return c();
                        var l = -1,
                          h = function (b) {
                            b.state === Fr && (clearTimeout(l), g(), c());
                          },
                          v = function (b) {
                            b.client === a.client_ &&
                              (clearTimeout(l),
                              g(),
                              s(
                                new De({
                                  code: Oe.API_CALL_ABORTED,
                                  message: Fe({ key: $U, data: "leave room" }),
                                })
                              ));
                          },
                          g = function () {
                            Ee.off(qc, v, a),
                              a.emitter_.off(_n.CONNECTION_STATE_CHANGED, h, a);
                          };
                        (l = setTimeout(function () {
                          g();
                          var _ = new De({
                            code: Oe.API_CALL_TIMEOUT,
                            message: "connection timeout",
                          });
                          s(_);
                        }, 1e4)),
                          Ee.on(qc, v, a),
                          a.emitter_.on(_n.CONNECTION_STATE_CHANGED, h, a);
                      }
                    )),
                    (this.waitForPeerConnectionConnectedPromise_ =
                      this.waitForPeerConnectionConnectedPromise_
                        .then(function (c) {
                          return (
                            (a.waitForPeerConnectionConnectedPromise_ = null), c
                          );
                        })
                        .catch(function (c) {
                          throw (
                            ((a.waitForPeerConnectionConnectedPromise_ = null),
                            c)
                          );
                        }))),
                  this.waitForPeerConnectionConnectedPromise_
                );
              },
            },
            {
              key: "getReconnectionCount",
              value: function () {
                return this.reconnectionCount_;
              },
            },
            {
              key: "startReconnection",
              value: function () {
                (this.isReconnecting_ = !0),
                  this.emitConnectionStateChangedEvent(m0),
                  this.reconnect(),
                  this.addEventInternal(
                    this.isUplink_ ? aF : uF,
                    "".concat(
                      this.isUplink_ ? "uplink" : "downlink",
                      "-connection is reconnecting"
                    )
                  );
              },
            },
            {
              key: "stopReconnection",
              value: function () {
                this.log_.info("stop reconnection"),
                  (this.isReconnecting_ = !1),
                  (this.reconnectionCount_ = 0),
                  this.clearReconnectionTimer(),
                  this.signalChannel_.off(nh, this.reconnect, this);
              },
            },
            {
              key: "on",
              value: function (a, c, s) {
                this.emitter_.on(a, c, s);
              },
            },
            {
              key: "off",
              value: function (a, c, s) {
                this.emitter_.off(a, c, s);
              },
            },
            {
              key: "setDelay",
              value: function (a) {
                var c = a.audioDelay,
                  s = a.videoDelay;
                this.delay_ = { audioDelay: c, videoDelay: s };
              },
            },
            {
              key: "getDelay",
              value: function () {
                return this.delay_;
              },
            },
            {
              key: "isH264",
              get: function () {
                var a, c;
                if (
                  (a = this.peerConnection_) !== null &&
                  a !== void 0 &&
                  (c = a.remoteDescription) !== null &&
                  c !== void 0 &&
                  c.sdp
                )
                  return !!this.peerConnection_.remoteDescription.sdp.includes(
                    "H264"
                  );
                var s = this.client_.getSystemResult().detail,
                  l = s.isH264EncodeSupported,
                  h = s.isH264DecodeSupported;
                return this.isUplink_ ? l : h;
              },
            },
          ]),
          u
        );
      })(),
      rG = (function () {
        function u() {
          B(this, u),
            (this.set_ = /* @__PURE__ */ new Set()),
            Ee.on(Kp, this.add, this),
            Ee.on(Gc, this.add, this),
            Ee.on(fu, this.delete, this),
            Ee.on(qc, this.delete, this);
        }
        return (
          oe(u, [
            {
              key: "add",
              value: function (n) {
                var a = n.client,
                  c = n.roomId,
                  s = this.getKey(
                    a.getUserId(),
                    c || a.getRoomId(),
                    a.getSDKAppId(),
                    a.getUseStringRoomId()
                  );
                this.set_.add(s);
              },
            },
            {
              key: "delete",
              value: function (n) {
                var a = n.client,
                  c = this.getKey(
                    a.getUserId(),
                    a.getRoomId(),
                    a.getSDKAppId(),
                    a.getUseStringRoomId()
                  );
                this.set_.delete(c);
              },
            },
            {
              key: "getKey",
              value: function (n, a, c, s) {
                return ""
                  .concat(c, "_")
                  .concat(a, "_")
                  .concat(n, "_")
                  .concat(s);
              },
            },
            {
              key: "isJoined",
              value: function (n) {
                var a = n.userId,
                  c = n.roomId,
                  s = n.sdkAppId,
                  l = n.client;
                return this.set_.has(
                  this.getKey(a, c, s, l.getUseStringRoomId())
                );
              },
            },
          ]),
          u
        );
      })(),
      iG = new rG();
    function yA(u, e, n, a) {
      if (this.useStringRoomId_) {
        if (
          !(vr(u) && /^[A-Za-z\d\s!#$%&()+\-:;<=.>?@[\]^_{}|~,]{1,64}$/.test(u))
        )
          throw new De({
            code: Oe.INVALID_PARAMETER,
            message: Fe({
              key: x7,
              data: e,
              link: { className: a, fnName: n },
            }),
          });
      } else if (!(Ki(u) && /^[1-9]\d*$/.test(String(u)) && u < 4294967295)) throw new De({ code: Oe.INVALID_PARAMETER, message: Fe({ key: O7, data: e, link: { className: a, fnName: n } }) });
    }
    function bA(u, e, n, a) {
      if (!/^[A-Za-z\d_-]*$/.test(u))
        throw new De({
          code: Oe.INVALID_PARAMETER,
          message: Fe({ key: K7, data: e, link: { className: a, fnName: n } }),
        });
    }
    var aG = {
        createClient: {
          name: "clientConfig",
          required: !0,
          type: vi,
          properties: {
            sdkAppId: { required: !0, type: Xn, allowEmpty: !1 },
            userId: { required: !0, type: Dn, allowEmpty: !1 },
            userSig: { required: !0, type: Dn, allowEmpty: !1 },
            mode: { required: !0, type: Dn, values: ["rtc", Cp] },
            useStringRoomId: { type: yr },
            autoSubscribe: { type: yr },
            enableAutoPlayDialog: { type: yr },
            streamId: { type: Dn },
            userDefineRecordId: { type: Dn },
            pureAudioPushMode: { type: Xn, values: [1, 2] },
            enableSEI: { type: yr },
          },
        },
        createStream: {
          name: "streamConfig",
          required: !0,
          type: vi,
          properties: {
            userId: { type: Dn },
            audio: { type: yr },
            video: { type: yr },
            screen: { type: yr },
            screenAudio: { type: yr },
            microphoneId: { type: Dn },
            cameraId: { type: Dn },
            facingMode: { type: [Dn, vi] },
            audioSource: { instanceOf: window.MediaStreamTrack },
            videoSource: { instanceOf: window.MediaStreamTrack },
          },
          validate: function (e) {
            if (
              (!ht(e.screen) && e.screen && ht(e.audio) && (e.audio = !1),
              !(
                (ht(e.audio) && ht(e.video)) ||
                (ht(e.audioSource) && ht(e.videoSource))
              ))
            )
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: AU }),
              });
            if (!ht(e.screen) && e.screen === !0 && e.video === !0)
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: xU }),
              });
            if (e.audio && e.screenAudio)
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: OU }),
              });
            if (e.screen !== !0 && e.screenAudio === !0)
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: PU }),
              });
            if (
              !ht(e.screen) &&
              e.screen === !0 &&
              !this.isScreenShareSupported()
            )
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: LU }),
              });
          },
        },
      },
      oG = {
        join: {
          name: "options",
          required: !0,
          type: vi,
          properties: {
            roomId: {
              required: !0,
              type: [Xn, Dn],
              allowEmpty: !1,
              validate: yA,
            },
            role: { type: [Dn], values: [xa, ou] },
            privateMapKey: { type: [Dn] },
          },
          validate: function (e) {
            if (this.isJoined_)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: A7 }),
              });
            if (
              (this.checkDestroy(),
              iG.isJoined({
                userId: this.userId_,
                roomId: e.roomId,
                sdkAppId: this.sdkAppId_,
                client: this,
              }))
            )
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: mU, data: this.userId_ }),
              });
          },
        },
        publish: [
          {
            name: "stream",
            required: !0,
            instanceOf: Zo,
            validate: function (e) {
              if (!this.isJoined_)
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: L7 }),
                });
              if (this.mode_ === Cp && this.role_ === ou)
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: U7 }),
                });
              if (!e.getIsReadyToPublish())
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: V7 }),
                });
              if (this.notPublishWithoutH264Supported_)
                throw new De({
                  code: Oe.NOT_SUPPORTED_H264,
                  message: Fe({ key: hE }),
                });
            },
          },
          {
            name: "options",
            type: vi,
            defaultValue: { isAuxiliary: !1 },
            properties: {
              isAuxiliary: {
                type: yr,
                defaultValue: !1,
                validate: function () {
                  var e =
                    arguments.length > 0 &&
                    arguments[0] !== void 0 &&
                    arguments[0];
                  if (e && !ev())
                    throw new De({
                      code: Oe.NOT_SUPPORTED,
                      message: Fe({ key: MU }),
                    });
                  if (
                    this.uplinkConnection_ &&
                    ((e && this.uplinkConnection_.isAuxStreamPublished) ||
                      (!e && this.uplinkConnection_.isMainStreamPublished))
                  )
                    throw new De({
                      code: Oe.INVALID_OPERATION,
                      message: Fe({ key: F7, data: e ? Vn : "local" }),
                    });
                  var n =
                    this.localScreenStream_ ||
                    Ze(this.connections_.values()).findIndex(function (a) {
                      return a.getTrackState().auxiliary;
                    }) >= 0;
                  if (!this.enableMultiAuxStream_ && e && n)
                    throw new De({
                      code: Oe.INVALID_OPERATION,
                      message: Fe({ key: YU }),
                    });
                },
              },
            },
          },
        ],
        unpublish: {
          name: "stream",
          required: !0,
          instanceOf: Zo,
          validate: function (e) {
            if (e !== this.localStream_ && e !== this.localAuxStream_) {
              if (this.localStream_ || this.localAuxStream_)
                throw new De({
                  code: Oe.INVALID_PARAMETER,
                  message: Fe({ key: M7 }),
                });
              this.log_.warn(
                "Client currently has no published stream, please call publish() first."
              );
            }
          },
        },
        subscribe: [
          {
            name: "stream",
            required: !0,
            instanceOf: I0,
            validate: function (e) {
              if (!e.getConnection())
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: O0 }),
                });
              if (this.notSubscribeWithoutH264Supported_)
                throw new De({
                  code: Oe.NOT_SUPPORTED_H264,
                  message: Fe({ key: fE }),
                });
            },
          },
          {
            name: "options",
            type: vi,
            properties: {
              audio: { type: yr },
              video: { type: yr },
              smallVideo: { type: yr },
            },
            validate: function (e) {
              var n = e.audio,
                a = e.video,
                c = e.smallVideo;
              if (n === !1 && a === !1 && (ht(c) || c === !1))
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: zU }),
                });
            },
          },
        ],
        unsubscribe: {
          name: "stream",
          required: !0,
          instanceOf: I0,
          validate: function (e) {
            if (!e.getConnection())
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: O0 }),
              });
          },
        },
        switchRole: {
          name: "role",
          required: !0,
          values: [xa, ou],
          validate: function () {
            if (this.mode_ !== Cp)
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: B7 }),
              });
            if (!this.isJoined_)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: z7 }),
              });
          },
        },
        startPublishCDNStream: {
          name: "options",
          required: !1,
          properties: {
            streamId: { type: Dn, validate: bA },
            streamType: { type: Dn, values: ["main", "auxiliary"] },
            appId: { type: Xn, allowEmpty: !1 },
            bizId: { type: Xn, allowEmpty: !1 },
            url: { type: Dn, allowEmpty: !1 },
          },
          validate: function () {
            if (this.isDestroyed_)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({
                  key: P0,
                  data: { funName: "startPublishCDNStream" },
                }),
              });
          },
        },
        startMixTranscode: {
          name: "config",
          required: !0,
          type: vi,
          properties: {
            mode: { type: Dn, values: ["preset-layout", "manual"] },
            streamId: { type: Dn, validate: bA },
            videoWidth: { type: Xn, notLessThanZero: !0 },
            videoHeight: { type: Xn, notLessThanZero: !0 },
            videoBitrate: { type: Xn, notLessThanZero: !0, allowEmpty: !1 },
            videoFramerate: {
              type: Xn,
              validate: function (e, n, a, c) {
                if (e <= 0 || e > 30)
                  throw new De({
                    code: Oe.INVALID_PARAMETER,
                    message: Fe({ key: SU, link: { className: c, fnName: a } }),
                  });
              },
            },
            videoGOP: {
              type: Xn,
              validate: function (e, n, a, c) {
                if (e < 1 || e > 8)
                  throw new De({
                    code: Oe.INVALID_PARAMETER,
                    message: Fe({ key: wU, link: { className: c, fnName: a } }),
                  });
              },
            },
            audioSampleRate: { type: Xn, notLessThanZero: !0 },
            audioBitrate: {
              type: Xn,
              validate: function (e, n, a, c) {
                if (e < 32 || e > 192)
                  throw new De({
                    code: Oe.INVALID_PARAMETER,
                    message: Fe({ key: kU, link: { className: c, fnName: a } }),
                  });
              },
            },
            audioChannels: { type: Xn, values: [1, 2] },
            backgroundColor: { type: Xn },
            backgroundImage: { type: Dn },
            mixUsers: {
              required: !0,
              type: FT,
              arrayItem: {
                require: !0,
                type: vi,
                properties: {
                  userId: { required: !0, type: Dn },
                  roomId: { type: [Dn, Xn], validate: yA },
                  pureAudio: { type: yr },
                  width: { type: Xn, notLessThanZero: !0 },
                  height: { type: Xn, notLessThanZero: !0 },
                  locationX: { type: Xn, notLessThanZero: !0 },
                  locationY: { type: Xn, notLessThanZero: !0 },
                  zOrder: { type: Xn },
                  streamType: { type: Dn, values: ["main", "auxiliary"] },
                  renderMode: { type: Xn, values: [0, 1, 2, 4] },
                },
              },
            },
          },
          validate: function (e, n, a, c, s) {
            var l = 0,
              h = 0,
              v = e.mixUsers,
              g = [];
            if (
              (v.forEach(function (_, b) {
                if ((g.push(_.userId), !_.pureAudio)) {
                  if (!_.zOrder || _.zOrder < 1 || _.zOrder > 15)
                    throw new De({
                      code: Oe.INVALID_PARAMETER,
                      message: Fe({
                        key: TU,
                        data: "config.mixUsers[".concat(b, "].zOrder"),
                        link: { className: c, fnName: a },
                      }),
                    });
                  _.width + _.locationX > l && (l = _.width + _.locationX),
                    _.height + _.locationY > h && (h = _.height + _.locationY);
                }
              }),
              g.indexOf(this.getUserId()) < 0)
            )
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: EU, link: { className: c, fnName: a } }),
              });
            if (e.videoWidth < l || e.videoHeight < h)
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: IU, link: { className: c, fnName: a } }),
              });
          },
        },
        sendSEIMessage: [
          {
            name: "buffer",
            required: !0,
            instanceOf: ArrayBuffer,
            validate: function (e) {
              if (!e1)
                throw new De({
                  code: Oe.NOT_SUPPORTED,
                  message: Fe({ key: vE }),
                });
              if (!this.enableSEI_)
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: HU }),
                });
              if (e.byteLength > 1e3)
                throw new De({
                  code: Oe.INVALID_PARAMETER,
                  message: Fe({ key: GU, data: e.byteLength }),
                });
              if (e.byteLength === 0)
                throw new De({
                  code: Oe.INVALID_PARAMETER,
                  message: Fe({ key: WU }),
                });
              if (!this.uplinkConnection_ || !this.localStream_)
                throw new De({
                  code: Oe.INVALID_PARAMETER,
                  message: Fe({ key: qU }),
                });
              if (!this.localStream_.hasVideo())
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: KU }),
                });
              var n = this.uplinkConnection_.isH264;
              if (!n)
                throw new De({
                  code: Oe.NOT_SUPPORTED,
                  message: Fe({ key: vE, data: n }),
                });
            },
          },
          {
            name: "options",
            type: vi,
            properties: { seiPayloadType: { type: Xn, values: [5, 243] } },
          },
        ],
      },
      sG = {
        switchDevice: [
          { name: "type", required: !0, type: Dn, values: [Ct, wt] },
          {
            name: "deviceId",
            required: !0,
            type: Dn,
            validate: function () {
              if (
                (this.screen_ && !this.audio_) ||
                this.audioSource_ ||
                this.videoSource_
              )
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: nU }),
                });
              if (this.publishState_ === $d)
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: rU }),
                });
              if (!Xy())
                throw new De({
                  code: Oe.NOT_SUPPORTED,
                  message: Fe({ key: NU }),
                });
            },
          },
        ],
        setAudioCaptureVolume: { name: "volume", type: Xn },
      },
      uG = {
        play: [
          {
            name: "elementId",
            required: !0,
            type: [Dn, "HTMLDivElement"],
            validate: function (e, n, a) {
              if (vr(e)) {
                var c = document.getElementById(e);
                if (!c)
                  throw new De({
                    code: Oe.INVALID_PARAMETER,
                    message: Fe({ key: RU, data: { key: n, fnName: a } }),
                  });
                if (!(c instanceof HTMLDivElement))
                  throw new De({
                    code: Oe.INVALID_PARAMETER,
                    message: Fe({
                      key: CU,
                      data: { key: n, fnName: a, type: ns(c) },
                    }),
                  });
              }
            },
          },
          {
            name: "options",
            type: vi,
            properties: {
              objectFit: { type: Dn, values: ["contain", "cover", "fill"] },
              muted: { type: yr },
              mirror: { type: yr },
            },
          },
        ],
        addTrack: {
          name: f0,
          instanceOf: window.MediaStreamTrack,
          validate: function (e) {
            if (this.isAddingTrack_)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: aU }),
              });
            if (this.isRemovingTrack_)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: oU }),
              });
            if (this.publishState_ === $d)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: sU }),
              });
            var n = this.getMediaStream();
            if (!n)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: cE }),
              });
            if (
              (e.kind === Ct && n.getAudioTracks().length > 0) ||
              (e.kind === wt && n.getVideoTracks().length > 0)
            )
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: uU }),
              });
            if (!as() && !Xp())
              throw new De({
                code: Oe.NOT_SUPPORTED,
                message: Fe({ key: N0, data: hT }),
              });
          },
        },
        removeTrack: {
          name: f0,
          instanceOf: window.MediaStreamTrack,
          validate: function (e) {
            if (this.isAddingTrack_)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: lU }),
              });
            if (this.isRemovingTrack_)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: dU }),
              });
            if (this.publishState_ === $d)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: hU }),
              });
            var n = this.getMediaStream();
            if (!n)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: cE }),
              });
            if (n.getTracks().indexOf(e) === -1)
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: fU }),
              });
            if (!as()) {
              if (n.getTracks().length === 1)
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({ key: pU }),
                });
              if (e.kind === Ct)
                throw new De({
                  code: Oe.INVALID_PARAMETER,
                  message: Fe({ key: cU }),
                });
              if (!Xp())
                throw new De({
                  code: Oe.NOT_SUPPORTED,
                  message: Fe({ key: N0, data: fT }),
                });
            }
          },
        },
        replaceTrack: {
          name: f0,
          instanceOf: window.MediaStreamTrack,
          validate: function (e) {
            var n = this.getMediaStream();
            if (!n)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: iU }),
              });
            if (this.publishState_ === $d)
              throw new De({
                code: Oe.INVALID_OPERATION,
                message: Fe({ key: uE }),
              });
            if (
              (e.kind === Ct && n.getAudioTracks().length <= 0) ||
              (e.kind === wt && n.getVideoTracks().length <= 0)
            )
              throw new De({
                code: Oe.INVALID_PARAMETER,
                message: Fe({ key: vU, data: e }),
              });
            if (!Xy())
              throw new De({
                code: Oe.NOT_SUPPORTED,
                message: Fe({ key: N0, data: DM }),
              });
          },
        },
      },
      Tr = { TRTC: aG, CLIENT: oG, LOCAL_STREAM: sG, STREAM: uG };
    function Nv() {
      for (var u = arguments.length, e = new Array(u), n = 0; n < u; n++)
        e[n] = arguments[n];
      return function (a, c, s) {
        var l = s.value;
        return (
          (s.value = function () {
            for (var h = arguments.length, v = new Array(h), g = 0; g < h; g++)
              v[g] = arguments[g];
            return SA.call(this, e, v, c, this.name_), l.apply(this, v);
          }),
          s
        );
      };
    }
    function Gr() {
      for (var u = arguments.length, e = new Array(u), n = 0; n < u; n++)
        e[n] = arguments[n];
      return function (a, c, s) {
        var l = s.value;
        return (
          (s.value = I(
            m().mark(function h() {
              var v,
                g,
                _,
                b = arguments;
              return m().wrap(
                function (C) {
                  for (;;)
                    switch ((C.prev = C.next)) {
                      case 0:
                        for (v = b.length, g = new Array(v), _ = 0; _ < v; _++)
                          g[_] = b[_];
                        return (
                          SA.call(this, e, g, c, this.name_),
                          C.abrupt("return", l.apply(this, g))
                        );
                      case 3:
                      case "end":
                        return C.stop();
                    }
                },
                h,
                this
              );
            })
          )),
          s
        );
      };
    }
    function SA(u, e, n, a) {
      try {
        for (var c = 0; c < u.length; c++)
          _b.call(this, {
            rule: u[c],
            value: e[c],
            key: u[c].name,
            fnName: n,
            className: a,
          });
      } catch (s) {
        throw (ft.error(s), s);
      }
    }
    function _b(u) {
      var e = this,
        n = u.rule,
        a = u.value,
        c = u.key,
        s = u.fnName,
        l = u.className;
      if (ht(a)) {
        if (n.required)
          throw new De({
            code: Oe.INVALID_PARAMETER,
            message: Fe({
              key: f7,
              data: { key: c, rule: n, fnName: s, value: a },
              link: { className: l, fnName: s },
            }),
          });
        if (ht(n.defaultValue)) return;
        a = n.defaultValue;
      }
      if (Array.isArray(n.type)) {
        if (
          !n.type
            .map(function (b) {
              return b.toLowerCase();
            })
            .includes(ns(a))
        )
          throw new De({
            code: Oe.INVALID_PARAMETER,
            message: Fe({
              key: nE,
              data: { key: c, rule: n, fnName: s, value: a },
              link: { className: l, fnName: s },
            }),
          });
      } else if (!ht(n.type) && ns(a) !== n.type) throw new De({ code: Oe.INVALID_PARAMETER, message: Fe({ key: nE, data: { key: c, rule: n, fnName: s, value: a }, link: { className: l, fnName: s } }) });
      if (n.allowEmpty === !1) {
        var h = Ki(a) && (a === 0 || Number.isNaN(a)),
          v = vr(a) && a.trim() === "";
        if (h || v)
          throw new De({
            code: Oe.INVALID_PARAMETER,
            message: Fe({
              key: p7,
              data: { key: c, rule: n, fnName: s, value: a },
              link: { className: l, fnName: s },
            }),
          });
      }
      if (n.notLessThanZero && Ki(a) && a < 0)
        throw new De({
          code: Oe.INVALID_PARAMETER,
          message: Fe({
            key: bU,
            data: { key: c, rule: n, fnName: s, value: a },
            link: { className: l, fnName: s },
          }),
        });
      if (vr(n.instanceOf)) {
        if (!a || a.name_ !== n.instanceOf)
          throw new De({
            code: Oe.INVALID_PARAMETER,
            message: Fe({
              key: rE,
              data: { key: c, rule: n, fnName: s, value: a },
              link: { className: l, fnName: s },
            }),
          });
      } else if (zr(n.instanceOf) && !(a instanceof n.instanceOf)) throw new De({ code: Oe.INVALID_PARAMETER, message: Fe({ key: rE, data: { key: c, rule: n, fnName: s, value: a }, link: { className: l, fnName: s } }) });
      if (n.values && !n.values.includes(a))
        throw new De({
          code: Oe.INVALID_PARAMETER,
          message: Fe({
            key: v7,
            data: { key: c, rule: n, fnName: s, value: a },
            link: { className: l, fnName: s },
          }),
        });
      var g = n.properties;
      ts(g) &&
        PE(a) &&
        Object.keys(g).forEach(function (b) {
          _b.call(e, {
            rule: g[b],
            value: a && a[b],
            key: "".concat(c, ".").concat(b),
            fnName: s,
            className: l,
          });
        });
      var _ = n.arrayItem;
      ts(_) &&
        Hc(a) &&
        a.forEach(function (b, C) {
          _b.call(e, {
            rule: _,
            value: b,
            key: "".concat(c, "[").concat(C, "]"),
            fnName: s,
            className: l,
          });
        }),
        zr(n.validate) && n.validate.call(this, a, c, s, l, this);
    }
    Ut(
      { target: "Number", stat: !0 },
      {
        isNaN: function (e) {
          return e != e;
        },
      }
    );
    var cG = Ut,
      lG = st,
      dG = no.f;
    cG(
      {
        target: "Object",
        stat: !0,
        forced: lG(function () {
          return !Object.getOwnPropertyNames(1);
        }),
      },
      { getOwnPropertyNames: dG }
    );
    var wA,
      yh,
      hG = YI;
    function dl() {
      var u =
        arguments.length > 0 && arguments[0] !== void 0
          ? arguments[0]
          : { retries: 5, timeout: 2e3 };
      return function (e, n, a) {
        var c = th({
          retryFunction: a.value,
          settings: u,
          onError: u.onError,
          onRetrying: u.onRetrying,
          onRetryFailed: u.onRetryFailed,
        });
        return (
          (a.value = function () {
            for (var s = arguments.length, l = new Array(s), h = 0; h < s; h++)
              l[h] = arguments[h];
            return c.apply(this, l);
          }),
          a
        );
      };
    }
    Ut(
      {
        target: "Array",
        stat: !0,
        forced: !ep(function (u) {
          Array.from(u);
        }),
      },
      { from: hG }
    );
    var kA,
      TA,
      EA,
      ea,
      ku = 5e3,
      fG = {
        msg_user_info: 0,
        uint32_video_avg_fps: 0,
        uint32_video_width: 0,
        uint32_video_height: 0,
        uint32_video_avg_bitrate: 0,
        uint32_video_block_time: 0,
        uint32_video_play_time: 0,
        uint32_audio_block_time: 0,
        uint32_audio_play_time: 0,
        uint32_audio_play_db: 0,
        uint32_avg_down_loss: 0,
        uint32_stream_type: 0,
        uint32_video_render_first: 0,
        uint32_video_block_count: 0,
        uint32_audio_block_count: 0,
        uint32_audio_bitrate: 0,
        uint32_video_black_screen_subjective: 0,
        uint32_audio_recv_bitrate: 0,
        uint32_video_external_block_time: 0,
      },
      yb = oe(function u(e) {
        B(this, u),
          (this.str_identifier = String(e.userId)),
          (this.uint64_tinyid = Number(e.tinyId)),
          (this.uint32_role = e.role);
      }),
      pG =
        ((wA = dl({ timeout: 500, retries: 3 })),
        (yh = (function () {
          function u(c) {
            var s = this;
            B(this, u),
              (this.frameWorkType_ = c.frameWorkType || 30),
              (this.component_ = c.component || 0),
              (this.client_ = c.client),
              (this.keyPrefix_ = "key_point"),
              (this.storageKey_ = ""
                .concat(this.keyPrefix_, "_")
                .concat(this.client_.getUserId())),
              (this.log_ = ft.createLogger({
                id: "kpm|" + this.client_.getUserId(),
                userId: this.client_.getUserId(),
                sdkAppId: this.client_.getSDKAppId(),
              })),
              Object.getOwnPropertyNames(this.__proto__).forEach(function (l) {
                l.startsWith("handle") &&
                  zr(s[l]) &&
                  (s[l] = (function (h) {
                    var v = h.fn,
                      g = h.context;
                    return I(
                      m().mark(function _() {
                        var b,
                          C,
                          N,
                          z = arguments;
                        return m().wrap(
                          function (F) {
                            for (;;)
                              switch ((F.prev = F.next)) {
                                case 0:
                                  for (
                                    F.prev = 0,
                                      b = z.length,
                                      C = new Array(b),
                                      N = 0;
                                    N < b;
                                    N++
                                  )
                                    C[N] = z[N];
                                  return (F.next = 4), v.apply(g || this, C);
                                case 4:
                                  return F.abrupt("return", F.sent);
                                case 7:
                                  (F.prev = 7),
                                    (F.t0 = F.catch(0)),
                                    ft.error(
                                      "".concat(v.name, "() error observed ") +
                                        F.t0
                                    );
                                case 10:
                                case "end":
                                  return F.stop();
                              }
                          },
                          _,
                          this,
                          [[0, 7]]
                        );
                      })
                    );
                  })({ fn: s[l], context: s }));
              }),
              this.initData(),
              this.installEvents(),
              (this.intervalId_ = Nn.run(jc, this.setStorage.bind(this), {
                delay: 2e4,
              }));
          }
          var e, n, a;
          return (
            oe(u, [
              {
                key: "initData",
                value: function () {
                  var s;
                  (this.firstPublishedUserList_ = []),
                    (this.networkQuality_ = {
                      totalUplinkRTT: 0,
                      totalUplinkLoss: 0,
                      count: 0,
                      totalDownlinkRTTAndLossMap: /* @__PURE__ */ new Map(),
                    }),
                    (this.basicInfo = {
                      string_sdk_version: ba,
                      uint32_os_type: 15,
                      string_device_name: "",
                      string_http_user_agent: navigator.userAgent,
                      string_os_version: "",
                      string_domain: location.host,
                      uint32_avg_rtt: 0,
                      uint32_avg_up_loss: 0,
                      uint32_scene:
                        ((s = this.client_) === null || s === void 0
                          ? void 0
                          : s.getMode()) === "live"
                          ? 1
                          : 0,
                      uint32_joining_duration: 0,
                      uint32_networkType: T0[ey()],
                      uint32_framework: this.frameWorkType_,
                      uint32_component: this.component_,
                    }),
                    (this.pathJoinRoom_ = {
                      uint64_start_time: 0,
                      uint64_init_audio_start_time: 0,
                      uint64_init_audio_end_time: 0,
                      uint64_init_camera_start_time: 0,
                      uint64_init_camera_end_time: 0,
                      uint64_send_request_acc_ip_cmd_start_time: 0,
                      uint64_send_request_acc_ip_cmd_end_time: 0,
                      uint64_send_request_enter_room_cmd_start_time: 0,
                      uint64_send_request_enter_room_cmd_end_time: 0,
                      uint64_send_first_video_frame_time: 0,
                      uint64_recv_userlist_time: 0,
                      uint64_end_time: 0,
                      int32_init_audio_ret: 0,
                      int32_init_camera_ret: 0,
                      int32_send_request_acc_ip_cmd_ret: 0,
                      int32_send_request_enter_room_cmd_ret: 0,
                      int32_end_ret: 0,
                    }),
                    (this.pathLeaveRoom_ = {
                      uint64_start_time: 0,
                      uint64_send_request_exit_room_cmd_start_time: 0,
                      uint64_send_request_exit_room_cmd_end_time: 0,
                      uint64_end_time: 0,
                      int32_send_request_exit_room_cmd_ret: 0,
                      int32_end_ret: 0,
                    }),
                    (this.pathMainVideoMap_ = /* @__PURE__ */ new Map()),
                    (this.pathMainAudioMap_ = /* @__PURE__ */ new Map()),
                    (this.pathAuxiliaryMap_ = /* @__PURE__ */ new Map()),
                    (this.localStreamStats_ = {
                      totalVideoBitrate: 0,
                      totalVideoFPS: 0,
                      totalVideoHeight: 0,
                      totalVideoWidth: 0,
                      totalAudioLevel: 0,
                      videoCount: 0,
                      audioLevelCount: 0,
                      publishStartTime: 0,
                      statsToReport: {
                        uint32_audio_capture_db: 0,
                        uint32_video_big_capture_fps: 0,
                        uint32_video_big_bitrate: 0,
                        uint32_video_big_resolution: 0,
                      },
                    }),
                    (this.remoteStreamStatsMap_ = /* @__PURE__ */ new Map());
                },
              },
              {
                key: "installEvents",
                value: function () {
                  Ee.on(Kp, this.handleJoinStart, this),
                    Ee.on(hy, this.handleWSStart, this),
                    Ee.on(Jp, this.handleWSEnd, this),
                    Ee.on(ay, this.handleJoinSendCMD, this),
                    Ee.on(oy, this.handleJoinReceivedCMDResponce, this),
                    Ee.on(Gc, this.handleJoinSuccess, this),
                    Ee.on(fu, this.handleJoinFailed, this),
                    Ee.on(ly, this.handleReceivedPublishUserList, this),
                    Ee.on(Yp, this.handleConnectionStateChanged, this),
                    Ee.on(sy, this.handleLeaveStart, this),
                    Ee.on(qc, this.handleLeaveSuccess, this),
                    Ee.on(uy, this.handleLeaveSendCMD, this),
                    Ee.on(Ry, this.handleSendSubscribeCMD, this),
                    Ee.on(Qd, this.handleVideoPlaying, this),
                    Ee.on(vy, this.handleAudioPlaying, this),
                    Ee.on(Cy, this.handleNetworkQuality, this),
                    Ee.on(cy, this.handleHeartbeatStats, this),
                    Ee.on($p, this.handleRemoteStreamAdded, this),
                    Ee.on(my, this.handleRemoteStreamSubscribeStart, this),
                    Ee.on(uo, this.handleRemoteStreamSubscribed, this),
                    Ee.on(pu, this.handleRemoteStreamRemoved, this),
                    Ee.on(wy, this.handleVideoLoadedData, this),
                    Ee.on(Sy, this.handlePlayStream, this),
                    Ee.on(dy, this.handlePublishStart, this),
                    Ee.on(gy, this.handleLocalStreamInitStart, this),
                    Ee.on(_y, this.handleLocalStreamInitEnd, this),
                    Ee.on(yy, this.handleLocalStreamInitFailed, this);
                },
              },
              {
                key: "uninstallEvents",
                value: function () {
                  Ee.off(Kp, this.handleJoinStart, this),
                    Ee.off(hy, this.handleWSStart, this),
                    Ee.off(Jp, this.handleWSEnd, this),
                    Ee.off(ay, this.handleJoinSendCMD, this),
                    Ee.off(oy, this.handleJoinReceivedCMDResponce, this),
                    Ee.off(ly, this.handleReceivedPublishUserList, this),
                    Ee.off(Yp, this.handleConnectionStateChanged, this),
                    Ee.off(sy, this.handleLeaveStart, this),
                    Ee.off(qc, this.handleLeaveSuccess, this),
                    Ee.off(Gc, this.handleJoinSuccess, this),
                    Ee.off(fu, this.handleJoinFailed, this),
                    Ee.off(uy, this.handleLeaveSendCMD, this),
                    Ee.off(Ry, this.handleSendSubscribeCMD, this),
                    Ee.off(Qd, this.handleVideoPlaying, this),
                    Ee.off(vy, this.handleAudioPlaying, this),
                    Ee.off(Cy, this.handleNetworkQuality, this),
                    Ee.off(cy, this.handleHeartbeatStats, this),
                    Ee.off($p, this.handleRemoteStreamAdded, this),
                    Ee.off(my, this.handleRemoteStreamSubscribeStart, this),
                    Ee.off(uo, this.handleRemoteStreamSubscribed, this),
                    Ee.off(pu, this.handleRemoteStreamRemoved, this),
                    Ee.off(wy, this.handleVideoLoadedData, this),
                    Ee.off(Sy, this.handlePlayStream, this),
                    Ee.off(dy, this.handlePublishStart, this),
                    Ee.off(gy, this.handleLocalStreamInitStart, this),
                    Ee.off(_y, this.handleLocalStreamInitEnd, this),
                    Ee.off(yy, this.handleLocalStreamInitFailed, this);
                },
              },
              {
                key: "destroy",
                value: function () {
                  this.uninstallEvents(),
                    Nn.clearTask(this.intervalId_),
                    (this.client_ = null);
                },
              },
              {
                key: "handleJoinStart",
                value: function (s) {
                  this.hitTest(s.client) &&
                    this.pathJoinRoom_.uint64_start_time === 0 &&
                    ((this.pathJoinRoom_.uint64_start_time = Date.now()),
                    this.checkStorage());
                },
              },
              {
                key: "handleWSStart",
                value: function (s) {
                  var l = s.client;
                  this.hitTest(l) &&
                    this.pathJoinRoom_
                      .uint64_send_request_acc_ip_cmd_start_time === 0 &&
                    (this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time =
                      Date.now());
                },
              },
              {
                key: "handleWSEnd",
                value: function (s) {
                  var l = s.client,
                    h = s.error;
                  this.hitTest(l) &&
                    this.pathJoinRoom_
                      .uint64_send_request_acc_ip_cmd_end_time === 0 &&
                    ((this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time =
                      Date.now()),
                    h &&
                      ((this.pathJoinRoom_.int32_send_request_acc_ip_cmd_ret =
                        h instanceof De
                          ? Number(h.getExtraCode() || h.getCode())
                          : Oe.UNKNOWN),
                      (this.pathJoinRoom_.int32_end_ret = 2)));
                },
              },
              {
                key: "handleJoinSendCMD",
                value: function (s) {
                  this.hitTest(s.client) &&
                    this.pathJoinRoom_
                      .uint64_send_request_enter_room_cmd_start_time === 0 &&
                    (this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time =
                      Date.now());
                },
              },
              {
                key: "handleJoinReceivedCMDResponce",
                value: function (s) {
                  this.hitTest(s.client) &&
                    this.pathJoinRoom_
                      .uint64_send_request_enter_room_cmd_end_time === 0 &&
                    ((this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time =
                      Date.now()),
                    (this.pathJoinRoom_.int32_send_request_enter_room_cmd_ret =
                      s.code),
                    s.code !== 0 && (this.pathJoinRoom_.int32_end_ret = 3));
                },
              },
              {
                key: "handleJoinSuccess",
                value: function (s) {
                  this.hitTest(s.client) &&
                    this.pathJoinRoom_.uint64_end_time === 0 &&
                    ((this.pathJoinRoom_.uint64_end_time = Date.now()),
                    (this.pathJoinRoom_.int32_end_ret = 0));
                },
              },
              {
                key: "handleJoinFailed",
                value: function (s) {
                  var l = s.client;
                  this.hitTest(l) &&
                    ((this.pathJoinRoom_.uint64_end_time = Date.now()),
                    this.pathJoinRoom_.int32_end_ret === 0 &&
                      (this.pathJoinRoom_.int32_end_ret = 3),
                    this.prepareReport(),
                    this.report());
                },
              },
              {
                key: "handleReceivedPublishUserList",
                value: function (s) {
                  this.hitTest(s.client) &&
                    this.pathJoinRoom_.uint64_recv_userlist_time === 0 &&
                    ((this.pathJoinRoom_.uint64_recv_userlist_time =
                      Date.now()),
                    (this.firstPublishedUserList_ =
                      (s.data.data && s.data.data.userList) || []));
                },
              },
              {
                key: "handleConnectionStateChanged",
                value: function (s) {
                  var l = s.client,
                    h = s.state,
                    v = s.connection;
                  if (this.hitTest(l) && h === Fr) {
                    this.client_.getUplinkConnection() === v &&
                      this.pathJoinRoom_.uint64_send_first_video_frame_time ===
                        0 &&
                      this.localStreamStats_.publishStartTime >
                        this.pathJoinRoom_.uint64_end_time &&
                      this.localStreamStats_.publishStartTime -
                        this.pathJoinRoom_.uint64_end_time <=
                        100 &&
                      (this.pathJoinRoom_.uint64_send_first_video_frame_time =
                        Date.now());
                    var g = this.pathMainVideoMap_.get(
                      "".concat(v.getUserId(), "_").concat(Bn)
                    );
                    g &&
                      g.statsToReport.uint64_pc_connected_time === 0 &&
                      (g.statsToReport.uint64_pc_connected_time = Date.now());
                  }
                },
              },
              {
                key: "handleLeaveStart",
                value: function (s) {
                  this.hitTest(s.client) &&
                    (this.pathLeaveRoom_.uint64_start_time = Date.now());
                },
              },
              {
                key: "handleLeaveSuccess",
                value: function (s) {
                  this.hitTest(s.client) &&
                    this.pathLeaveRoom_.uint64_end_time === 0 &&
                    ((this.pathLeaveRoom_.uint64_end_time = Date.now()),
                    this.pathJoinRoom_.uint64_end_time !== 0
                      ? (this.basicInfo.uint32_joining_duration =
                          this.pathLeaveRoom_.uint64_end_time -
                          this.pathJoinRoom_.uint64_end_time)
                      : this.log_.warn("pathJoinRoom endTime is 0"),
                    this.report());
                },
              },
              {
                key: "handleLeaveSendCMD",
                value: function (s) {
                  this.hitTest(s.client) &&
                    ((this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_start_time =
                      Date.now()),
                    (this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_end_time =
                      Date.now()));
                },
              },
              {
                key: "handleRemoteStreamAdded",
                value: function (s) {
                  var l = s.client,
                    h = s.stream;
                  if (this.hitTest(l)) {
                    var v = h.getUserId(),
                      g = h.getType(),
                      _ = "".concat(v, "_").concat(g),
                      b = this.remoteStreamStatsMap_.get(_);
                    if (b) b.stream = h;
                    else {
                      var C = {
                        userId: v,
                        totalVideoFPS: 0,
                        totalVideoBitrate: 0,
                        totalAudioLevel: 0,
                        totalAudioBitrate: 0,
                        totalLoss: 0,
                        audioCount: 0,
                        audioLevelCount: 0,
                        videoCount: 0,
                        networkQualityCount: 0,
                        streamAddedTime: Date.now(),
                        subscribeStartTime: 0,
                        subscribedTime: 0,
                        playStreamTime: 0,
                        statsToReport: p({}, fG),
                        stream: h,
                      };
                      (C.statsToReport.msg_user_info = new yb({
                        userId: v,
                        tinyId: h.getTinyId(),
                        role: Vc,
                      })),
                        (C.statsToReport.uint32_stream_type = g === Bn ? 2 : 7),
                        this.remoteStreamStatsMap_.set(_, C);
                    }
                  }
                },
              },
              {
                key: "handleRemoteStreamSubscribeStart",
                value: function (s) {
                  var l = s.client,
                    h = s.stream;
                  if (this.hitTest(l)) {
                    var v = h.getUserId(),
                      g = h.getType(),
                      _ = "".concat(v, "_").concat(g),
                      b = this.remoteStreamStatsMap_.get(_);
                    b &&
                      b.subscribeStartTime === 0 &&
                      (b.subscribeStartTime = Date.now());
                  }
                },
              },
              {
                key: "handleSendSubscribeCMD",
                value: function (s) {
                  if (this.hitTest(s.client)) {
                    var l = new yb(s),
                      h = Date.now(),
                      v = "".concat(s.userId, "_").concat(Bn);
                    s.trackState.video &&
                      s.subscribeState.video &&
                      !this.pathMainVideoMap_.has(v) &&
                      this.pathMainVideoMap_.set(v, {
                        statsToReport: {
                          msg_user_info: l,
                          uint64_start_enter_time:
                            this.pathJoinRoom_.uint64_start_time,
                          uint64_render_first_frame_time: 0,
                          uint64_combine_first_frame_time: 0,
                          uint64_pc_connected_time: 0,
                        },
                        userId: s.userId,
                        sendSubscribeCMDTime: h,
                      }),
                      s.trackState.audio &&
                        s.subscribeState.audio &&
                        !this.pathMainAudioMap_.has(v) &&
                        this.pathMainAudioMap_.set(v, {
                          statsToReport: {
                            msg_user_info: l,
                            uint64_start_enter_time:
                              this.pathJoinRoom_.uint64_start_time,
                            uint64_play_first_frame_time: 0,
                          },
                          userId: s.userId,
                          sendSubscribeCMDTime: h,
                        });
                    var g = "".concat(s.userId, "_").concat(ir);
                    s.trackState.auxiliary &&
                      s.subscribeState.auxiliary &&
                      !this.pathAuxiliaryMap_.has(g) &&
                      this.pathAuxiliaryMap_.set(g, {
                        sendSubscribeCMDTime: h,
                      });
                  }
                },
              },
              {
                key: "handleRemoteStreamSubscribed",
                value: function (s) {
                  var l = s.client,
                    h = s.stream;
                  if (this.hitTest(l)) {
                    var v = h.getUserId(),
                      g = h.getType(),
                      _ = "".concat(v, "_").concat(g),
                      b = this.remoteStreamStatsMap_.get(_);
                    b &&
                      b.subscribedTime === 0 &&
                      ((b.subscribedTime = Date.now()), (b.stream = h));
                  }
                },
              },
              {
                key: "handleRemoteStreamRemoved",
                value: function (s) {
                  var l = s.client,
                    h = s.stream;
                  if (this.hitTest(l)) {
                    var v = h.getUserId(),
                      g = h.getType(),
                      _ = this.remoteStreamStatsMap_.get(
                        "".concat(v, "_").concat(g)
                      );
                    _ && (_.stream = null);
                  }
                },
              },
              {
                key: "handlePlayStream",
                value: function (s) {
                  var l = s.stream;
                  if (
                    l.isRemote() &&
                    l.getConnection() &&
                    this.hitTest(l.getConnection().getClient())
                  ) {
                    var h = l.getConnection().getUserId(),
                      v = "".concat(h, "_").concat(l.getType());
                    if (this.remoteStreamStatsMap_.has(v)) {
                      var g = this.remoteStreamStatsMap_.get(v);
                      g.playStreamTime === 0 && (g.playStreamTime = Date.now());
                    }
                  }
                },
              },
              {
                key: "handleVideoLoadedData",
                value: function (s) {
                  var l = s.stream;
                  if (
                    l.isRemote() &&
                    l.getConnection() &&
                    this.hitTest(l.getConnection().getClient())
                  ) {
                    var h = l.getConnection().getUserId(),
                      v = "".concat(h, "_").concat(l.getType());
                    if (this.pathMainVideoMap_.has(v)) {
                      var g = this.pathMainVideoMap_.get(v);
                      g.statsToReport.uint64_combine_first_frame_time === 0 &&
                        (g.statsToReport.uint64_combine_first_frame_time =
                          Date.now());
                    }
                  }
                },
              },
              {
                key: "handleVideoPlaying",
                value: function (s) {
                  var l = s.stream;
                  if (
                    l.isRemote() &&
                    l.getConnection() &&
                    this.hitTest(l.getConnection().getClient())
                  ) {
                    var h = l.getConnection().getUserId(),
                      v = "".concat(h, "_").concat(l.getType()),
                      g = Date.now();
                    if (this.pathMainVideoMap_.has(v)) {
                      var _ = this.pathMainVideoMap_.get(v);
                      if (
                        (_.statsToReport.uint64_render_first_frame_time === 0 &&
                          (_.statsToReport.uint64_render_first_frame_time = g),
                        this.remoteStreamStatsMap_.has(v))
                      ) {
                        var b = this.remoteStreamStatsMap_.get(v),
                          C = b.statsToReport,
                          N = b.playStreamTime,
                          z = b.subscribedTime;
                        C.uint32_video_render_first === 0 &&
                          N - z <= 100 &&
                          (C.uint32_video_render_first =
                            g - _.sendSubscribeCMDTime);
                      }
                    }
                    if (
                      l.getType() === ir &&
                      this.pathAuxiliaryMap_.has(v) &&
                      this.remoteStreamStatsMap_.has(v)
                    ) {
                      var F = this.remoteStreamStatsMap_.get(v),
                        U = F.statsToReport,
                        E = F.playStreamTime,
                        A = F.subscribedTime;
                      U.uint32_video_render_first === 0 &&
                        E - A <= 100 &&
                        (U.uint32_video_render_first =
                          g -
                          this.pathAuxiliaryMap_.get(v).sendSubscribeCMDTime);
                    }
                  }
                },
              },
              {
                key: "handleAudioPlaying",
                value: function (s) {
                  if (
                    s.stream.isRemote() &&
                    s.stream.getConnection() &&
                    this.hitTest(s.stream.getConnection().getClient())
                  ) {
                    var l = s.stream.getConnection().getUserId(),
                      h = "".concat(l, "_").concat(s.stream.getType());
                    if (this.pathMainAudioMap_.has(h)) {
                      var v = this.pathMainAudioMap_.get(h);
                      v.statsToReport.uint64_play_first_frame_time === 0 &&
                        (v.statsToReport.uint64_play_first_frame_time =
                          Date.now());
                    }
                  }
                },
              },
              {
                key: "handleNetworkQuality",
                value: function (s) {
                  var l = this;
                  this.hitTest(s.client) &&
                    ((this.networkQuality_.totalUplinkLoss += s.uplinkLoss),
                    (this.networkQuality_.totalUplinkRTT += s.uplinkRTT),
                    this.networkQuality_.count++,
                    s.downlinkLossAndRTTMap.forEach(function (h) {
                      var v = h.rtt,
                        g = h.loss,
                        _ = h.userId,
                        b = l.networkQuality_.totalDownlinkRTTAndLossMap.get(_);
                      b
                        ? ((b.totalRTT += v), (b.totalLoss += g), b.count++)
                        : l.networkQuality_.totalDownlinkRTTAndLossMap.set(_, {
                            totalRTT: v,
                            totalLoss: g,
                            count: 1,
                          });
                    }));
                },
              },
              {
                key: "handleHeartbeatStats",
                value: function (s) {
                  var l = this;
                  if (this.hitTest(s.client)) {
                    var h = s.stats,
                      v = h.msg_up_stream_info,
                      g = h.msg_down_stream_info;
                    if (v.msg_video_status[0]) {
                      var _ = v.msg_video_status[0],
                        b = _.uint32_video_codec_bitrate,
                        C = _.uint32_video_enc_fps,
                        N = _.uint32_video_width,
                        z = _.uint32_video_height;
                      (this.localStreamStats_.totalVideoBitrate += b),
                        (this.localStreamStats_.totalVideoFPS += C),
                        (this.localStreamStats_.totalVideoWidth += N),
                        (this.localStreamStats_.totalVideoHeight += z),
                        this.localStreamStats_.videoCount++;
                    }
                    if (v.msg_audio_status) {
                      var F = v.msg_audio_status.audioLevel;
                      Math.floor(100 * F) > 0 &&
                        ((this.localStreamStats_.totalAudioLevel += F),
                        this.localStreamStats_.audioLevelCount++);
                    }
                    g.forEach(function (U) {
                      var E = U.msg_user_info,
                        A = U.msg_audio_status,
                        L = U.msg_video_status,
                        $ = E.str_identifier;
                      if (
                        (L.forEach(function (M) {
                          var W = M.uint32_video_stream_type === 2,
                            G = M.uint32_video_stream_type === 7,
                            ne = "".concat($, "_").concat(W ? Bn : ir);
                          if (l.remoteStreamStatsMap_.has(ne)) {
                            var H,
                              R,
                              w = l.remoteStreamStatsMap_.get(ne);
                            ((W &&
                              (H = w.stream) !== null &&
                              H !== void 0 &&
                              H.isMainVideoSubscribed) ||
                              (G &&
                                (R = w.stream) !== null &&
                                R !== void 0 &&
                                R.isAuxVideoSubscribed)) &&
                              ((w.totalVideoFPS += M.uint32_video_receive_fps),
                              (w.totalVideoBitrate +=
                                M.uint32_video_codec_bitrate),
                              w.videoCount++,
                              w.statsToReport.uint32_video_width === 0 &&
                                (w.statsToReport.uint32_video_width =
                                  M.uint32_video_width),
                              w.statsToReport.uint32_video_height === 0 &&
                                (w.statsToReport.uint32_video_height =
                                  M.uint32_video_height));
                          }
                        }),
                        A)
                      ) {
                        var te = "".concat($, "_").concat(Bn);
                        if (l.remoteStreamStatsMap_.has(te)) {
                          var X,
                            D = l.remoteStreamStatsMap_.get(te);
                          (X = D.stream) !== null &&
                            X !== void 0 &&
                            X.isMainAudioSubscribed &&
                            ((D.totalAudioBitrate +=
                              A.uint32_audio_codec_bitrate),
                            D.audioCount++,
                            Math.floor(100 * A.audioLevel) > 0 &&
                              ((D.totalAudioLevel += A.audioLevel),
                              D.audioLevelCount++));
                        }
                      }
                    });
                  }
                },
              },
              {
                key: "handlePublishStart",
                value: function (s) {
                  var l = s.client;
                  this.hitTest(l) &&
                    this.localStreamStats_.publishStartTime === 0 &&
                    (this.localStreamStats_.publishStartTime = Date.now());
                },
              },
              {
                key: "handleLocalStreamInitStart",
                value: function (s) {
                  var l = s.audio,
                    h = s.video;
                  l &&
                    this.pathJoinRoom_.uint64_init_audio_start_time === 0 &&
                    (this.pathJoinRoom_.uint64_init_audio_start_time =
                      Date.now()),
                    h &&
                      this.pathJoinRoom_.uint64_init_camera_start_time === 0 &&
                      (this.pathJoinRoom_.uint64_init_camera_start_time =
                        Date.now());
                },
              },
              {
                key: "handleLocalStreamInitEnd",
                value: function (s) {
                  var l = s.audio,
                    h = s.video;
                  l &&
                    this.pathJoinRoom_.uint64_init_audio_end_time === 0 &&
                    (this.pathJoinRoom_.uint64_init_audio_end_time =
                      Date.now()),
                    h &&
                      this.pathJoinRoom_.uint64_init_camera_end_time === 0 &&
                      (this.pathJoinRoom_.uint64_init_camera_end_time =
                        Date.now());
                },
              },
              {
                key: "handleLocalStreamInitFailed",
                value: function (s) {
                  var l = s.audio,
                    h = s.video,
                    v = s.error,
                    g =
                      v instanceof De
                        ? v.getExtraCode() || v.getCode()
                        : {
                            NotFoundError: 1,
                            NotAllowedError: 2,
                            NotReadableError: 3,
                            OverConstrainedError: 4,
                            AbortError: 5,
                          }[v.name] || Oe.UNKNOWN;
                  l &&
                    this.pathJoinRoom_.uint64_init_audio_end_time === 0 &&
                    ((this.pathJoinRoom_.int32_init_audio_ret = g),
                    (this.pathJoinRoom_.uint64_init_audio_end_time =
                      Date.now())),
                    h &&
                      this.pathJoinRoom_.uint64_init_camera_end_time === 0 &&
                      ((this.pathJoinRoom_.int32_init_camera_ret = g),
                      (this.pathJoinRoom_.uint64_init_camera_end_time =
                        Date.now()));
                },
              },
              {
                key: "hasVideoFlag",
                value: function (s) {
                  return (
                    this.firstPublishedUserList_.findIndex(function (l) {
                      return l.userId === s && 1 & l.flag;
                    }) >= 0
                  );
                },
              },
              {
                key: "hasAudioFlag",
                value: function (s) {
                  return (
                    this.firstPublishedUserList_.findIndex(function (l) {
                      return l.userId === s && 8 & l.flag;
                    }) >= 0
                  );
                },
              },
              {
                key: "hasAuxFlag",
                value: function (s) {
                  return (
                    this.firstPublishedUserList_.findIndex(function (l) {
                      return l.userId === s && 4 & l.flag;
                    }) >= 0
                  );
                },
              },
              {
                key: "hitTest",
                value: function (s) {
                  return s === this.client_;
                },
              },
              {
                key: "checkStorage",
                value:
                  ((a = I(
                    m().mark(function c() {
                      var s;
                      return m().wrap(
                        function (l) {
                          for (;;)
                            switch ((l.prev = l.next)) {
                              case 0:
                                if (
                                  ((l.prev = 0),
                                  !(s = Zc.getItem(this.storageKey_)))
                                ) {
                                  l.next = 6;
                                  break;
                                }
                                return (l.next = 5), this.upload(s);
                              case 5:
                                Zc.deleteItem(this.storageKey_);
                              case 6:
                                l.next = 11;
                                break;
                              case 8:
                                (l.prev = 8),
                                  (l.t0 = l.catch(0)),
                                  this.log_.warn(l.t0);
                              case 11:
                              case "end":
                                return l.stop();
                            }
                        },
                        c,
                        this,
                        [[0, 8]]
                      );
                    })
                  )),
                  function () {
                    return a.apply(this, arguments);
                  }),
              },
              {
                key: "setStorage",
                value: function () {
                  this.prepareReport();
                  var s = this.getReportData();
                  s.msg_path_enter_room.uint64_start_time !== 0 &&
                    Zc.setItem(this.storageKey_, s);
                },
              },
              {
                key: "prepareReport",
                value: function () {
                  var s = this;
                  if (
                    (this.networkQuality_.count > 0 &&
                      ((this.basicInfo.uint32_avg_rtt = Math.floor(
                        this.networkQuality_.totalUplinkRTT /
                          this.networkQuality_.count
                      )),
                      (this.basicInfo.uint32_avg_up_loss = Math.floor(
                        this.networkQuality_.totalUplinkLoss /
                          this.networkQuality_.count
                      ))),
                    this.localStreamStats_.videoCount > 0)
                  ) {
                    (this.localStreamStats_.statsToReport.uint32_video_big_capture_fps =
                      Math.floor(
                        this.localStreamStats_.totalVideoFPS /
                          this.localStreamStats_.videoCount
                      )),
                      (this.localStreamStats_.statsToReport.uint32_video_big_bitrate =
                        Math.floor(
                          this.localStreamStats_.totalVideoBitrate /
                            this.localStreamStats_.videoCount
                        ));
                    var l = Math.floor(
                        this.localStreamStats_.totalVideoWidth /
                          this.localStreamStats_.videoCount
                      ),
                      h = Math.floor(
                        this.localStreamStats_.totalVideoHeight /
                          this.localStreamStats_.videoCount
                      );
                    this.localStreamStats_.statsToReport.uint32_video_big_resolution =
                      (l << 16) | h;
                  }
                  this.localStreamStats_.audioLevelCount > 0 &&
                    (this.localStreamStats_.statsToReport.uint32_audio_capture_db =
                      Math.floor(
                        (this.localStreamStats_.totalAudioLevel /
                          this.localStreamStats_.audioLevelCount) *
                          100
                      )),
                    this.remoteStreamStatsMap_.forEach(function (v, g) {
                      var _ = v.userId;
                      if (s.networkQuality_.totalDownlinkRTTAndLossMap.has(_)) {
                        var b =
                            s.networkQuality_.totalDownlinkRTTAndLossMap.get(_),
                          C = b.totalLoss,
                          N = b.count;
                        v.statsToReport.uint32_avg_down_loss = Math.floor(
                          C / N
                        );
                      }
                      v.videoCount > 0 &&
                        ((v.statsToReport.uint32_video_avg_fps = Math.floor(
                          v.totalVideoFPS / v.videoCount
                        )),
                        (v.statsToReport.uint32_video_avg_bitrate = Math.floor(
                          v.totalVideoBitrate / v.videoCount
                        ))),
                        v.audioCount > 0 &&
                          (v.statsToReport.uint32_audio_recv_bitrate =
                            v.statsToReport.uint32_audio_bitrate =
                              Math.floor(v.totalAudioBitrate / v.audioCount)),
                        v.audioLevelCount > 0 &&
                          (v.statsToReport.uint32_audio_play_db = Math.floor(
                            (v.totalAudioLevel / v.audioLevelCount) * 100
                          ));
                      var z = s.client_.getCallDurationCalculator();
                      z &&
                        ((v.statsToReport.uint32_audio_play_time =
                          z.getDuration(g, Ct)),
                        (v.statsToReport.uint32_video_play_time = z.getDuration(
                          g,
                          wt
                        ))),
                        (v.statsToReport.uint32_video_render_first = Math.min(
                          v.statsToReport.uint32_video_render_first,
                          ku
                        ));
                      var F = s.client_.getBadCaseDetector();
                      if (F) {
                        var U = F.getDataFreezeDuration(g),
                          E = U.dataFreeze,
                          A = U.count,
                          L = F.getRenderFreezeDuration(g).renderFreeze;
                        (v.statsToReport.uint32_video_block_count = A),
                          (v.statsToReport.uint32_video_block_time = Math.min(
                            E,
                            v.statsToReport.uint32_video_play_time
                          )),
                          (v.statsToReport.uint32_video_external_block_time =
                            Math.min(
                              L,
                              v.statsToReport.uint32_video_play_time
                            )),
                          F.isBlackStream(g) &&
                          v.statsToReport.uint32_video_avg_fps === 0
                            ? (v.statsToReport.uint32_video_black_screen_subjective = 1)
                            : (v.statsToReport.uint32_video_black_screen_subjective = 0);
                      }
                      (v.subscribeStartTime === 0 ||
                        v.subscribeStartTime - v.streamAddedTime > 100 ||
                        v.playStreamTime === 0) &&
                        (s.pathMainAudioMap_.delete(g),
                        s.pathMainVideoMap_.delete(g),
                        (v.statsToReport.uint32_video_render_first = 0));
                    }),
                    this.pathMainAudioMap_.forEach(function (v, g) {
                      s.hasAudioFlag(v.userId)
                        ? v.statsToReport.uint64_play_first_frame_time -
                            v.statsToReport.uint64_start_enter_time >
                            ku &&
                          (v.statsToReport.uint64_play_first_frame_time =
                            v.statsToReport.uint64_start_enter_time + ku)
                        : s.pathMainAudioMap_.delete(g);
                    }),
                    this.pathMainVideoMap_.forEach(function (v, g) {
                      s.hasVideoFlag(v.userId)
                        ? v.statsToReport.uint64_render_first_frame_time -
                            v.statsToReport.uint64_start_enter_time >
                            ku &&
                          (v.statsToReport.uint64_render_first_frame_time =
                            v.statsToReport.uint64_start_enter_time + ku)
                        : s.pathMainVideoMap_.delete(g);
                    }),
                    this.pathJoinRoom_.uint64_end_time -
                      this.pathJoinRoom_.uint64_start_time >
                      ku &&
                      (this.pathJoinRoom_.uint64_end_time =
                        this.pathJoinRoom_.uint64_start_time + ku);
                },
              },
              {
                key: "getReportData",
                value: function () {
                  var s = this.client_.getSignalInfo();
                  return {
                    uint32_sdk_app_id: Number(this.client_.getSDKAppId()),
                    msg_user_info: new yb({
                      userId: this.client_.getUserId(),
                      tinyId: this.client_.getTinyId(),
                      role: this.client_.getRole() === xa ? Vc : v0,
                    }),
                    msg_basic_info: this.basicInfo,
                    uint32_acc_ip: ny(s.relayIp),
                    uint32_client_ip: ny(s.clientIp, "small"),
                    uint32_acc_port: 0,
                    uint64_timestamp: Date.now(),
                    uint32_seq: Math.floor(Math.random() * Math.pow(2, 31)),
                    msg_path_enter_room: this.pathJoinRoom_,
                    msg_path_exit_room: this.pathLeaveRoom_,
                    msg_path_recv_video: Ze(
                      this.pathMainVideoMap_.values()
                    ).map(function (l) {
                      return l.statsToReport;
                    }),
                    msg_quality_statistics: Ze(
                      this.remoteStreamStatsMap_.values()
                    ).map(function (l) {
                      return l.statsToReport;
                    }),
                    str_room_name: String(this.client_.getRoomId()),
                    msg_path_recv_audio: Ze(
                      this.pathMainAudioMap_.values()
                    ).map(function (l) {
                      return l.statsToReport;
                    }),
                    uint32_info_client_ip: ny(s.clientIp, "small"),
                    error_code: [],
                    msg_local_statistics: this.localStreamStats_.statsToReport,
                    msg_function_state: ds.getStateArray(),
                  };
                },
              },
              {
                key: "report",
                value:
                  ((n = I(
                    m().mark(function c() {
                      var s;
                      return m().wrap(
                        function (l) {
                          for (;;)
                            switch ((l.prev = l.next)) {
                              case 0:
                                return (
                                  (l.prev = 0),
                                  (s = this.getReportData()),
                                  (l.next = 4),
                                  this.upload(s)
                                );
                              case 4:
                                Zc.deleteItem(this.storageKey_),
                                  ds.clearStateArray(),
                                  this.initData(),
                                  (l.next = 12);
                                break;
                              case 9:
                                (l.prev = 9),
                                  (l.t0 = l.catch(0)),
                                  this.log_.warn(l.t0);
                              case 12:
                              case "end":
                                return l.stop();
                            }
                        },
                        c,
                        this,
                        [[0, 9]]
                      );
                    })
                  )),
                  function () {
                    return n.apply(this, arguments);
                  }),
              },
              {
                key: "upload",
                value:
                  ((e = I(
                    m().mark(function c(s) {
                      var l, h, v;
                      return m().wrap(
                        function (g) {
                          for (;;)
                            switch ((g.prev = g.next)) {
                              case 0:
                                if (
                                  !(
                                    cu ||
                                    s.msg_path_enter_room.uint64_start_time ===
                                      0 ||
                                    [R0, GT, qT].findIndex(function (_) {
                                      return _ === location.host;
                                    }) >= 0
                                  )
                                ) {
                                  g.next = 2;
                                  break;
                                }
                                return g.abrupt("return");
                              case 2:
                                return (
                                  (l = Number(this.client_.getSDKAppId())),
                                  (h = Wp(l, FM)),
                                  (g.next = 6),
                                  qp({ url: h, body: JSON.stringify(s) })
                                );
                              case 6:
                                if ((v = g.sent).data === "ok") {
                                  g.next = 9;
                                  break;
                                }
                                throw "key point upload failed: ".concat(
                                  v.data
                                );
                              case 9:
                              case "end":
                                return g.stop();
                            }
                        },
                        c,
                        this
                      );
                    })
                  )),
                  function (c) {
                    return e.apply(this, arguments);
                  }),
              },
            ]),
            u
          );
        })()),
        Be(
          yh.prototype,
          "upload",
          [wA],
          Object.getOwnPropertyDescriptor(yh.prototype, "upload"),
          yh.prototype
        ),
        yh),
      ds = (function () {
        function u() {
          B(this, u);
        }
        return (
          oe(u, null, [
            {
              key: "handleFunctionState",
              value: function (n) {
                var a,
                  c,
                  s,
                  l,
                  h = n.className,
                  v = n.fnName,
                  g = n.params;
                if (
                  !(
                    cu ||
                    [R0, GT, qT].findIndex(function (N) {
                      return N === location.host;
                    }) >= 0
                  )
                ) {
                  var _,
                    b = [];
                  if (h)
                    switch (v) {
                      case "createClient":
                        (a = g[0]) !== null &&
                          a !== void 0 &&
                          a.mode &&
                          b.push(
                            "".concat(h, ".").concat(v, ".").concat(g[0].mode)
                          ),
                          (c = g[0]) !== null &&
                          c !== void 0 &&
                          c.useStringRoomId
                            ? b.push(
                                "".concat(h, ".").concat(v, ".stringRoomId")
                              )
                            : b.push("".concat(h, ".").concat(v, ".intRoomId")),
                          (s = g[0]) !== null && s !== void 0 && s.autoSubscribe
                            ? b.push(
                                "".concat(h, ".").concat(v, ".autoSubscribe")
                              )
                            : b.push(
                                "".concat(h, ".").concat(v, ".manualSubscribe")
                              );
                        break;
                      case "publish":
                        (l = g[1]) !== null && l !== void 0 && l.isAuxiliary
                          ? b.push("".concat(h, ".").concat(v, ".isAuxiliary"))
                          : b.push("".concat(h, ".").concat(v));
                        break;
                      case "setAudioProfile":
                      case "setVideoProfile":
                      case "setScreenProfile":
                      case "setVideoContentHint":
                        vr(g[0]) &&
                          b.push("".concat(h, ".").concat(v, ".").concat(g[0]));
                        break;
                      default:
                        b.push("".concat(h, ".").concat(v));
                    }
                  else b.push(v);
                  for (var C = 0; C < b.length; C++) {
                    if (!(_ = o7[b[C]])) return;
                    this.stateMap.has(_)
                      ? (this.stateMap.get(_).int32_call_times += 1)
                      : this.stateMap.set(_, {
                          int32_id: _,
                          int32_call_times: 1,
                        });
                  }
                }
              },
            },
            {
              key: "getStateArray",
              value: function () {
                return Array.from(this.stateMap.values());
              },
            },
            {
              key: "clearStateArray",
              value: function () {
                this.stateMap.clear();
              },
            },
          ]),
          u
        );
      })();
    function Gn(u) {
      return function (e, n, a) {
        var c = a.value;
        return (
          (a.value = function () {
            for (var s = arguments.length, l = new Array(s), h = 0; h < s; h++)
              l[h] = arguments[h];
            try {
              u || (u = this.name_),
                ds.handleFunctionState({ className: u, fnName: n, params: l }),
                (u = void 0);
            } catch (v) {
              this.log_.info(v);
            }
            return c.apply(this, l);
          }),
          a
        );
      };
    }
    ie(ds, "stateMap", /* @__PURE__ */ new Map());
    var IA =
        ((kA = Gr.apply(void 0, Ze(Tr.STREAM.play))),
        (TA = Gn()),
        (EA = Gn()),
        (ea = (function () {
          function u(l) {
            B(this, u),
              (this.name_ = t7),
              (this.userId_ = l.userId),
              (this.isRemote_ = l.isRemote),
              (this.type_ = l.type),
              (this.log_ = ft.createLogger({
                id: "s".concat(l.seq ? l.seq : "", "|").concat(this.userId_),
                userId: ht(l.client) ? void 0 : l.client.getUserId(),
                sdkAppId: ht(l.client) ? void 0 : l.client.getSDKAppId(),
                isLocal: !this.isRemote_,
                type: this.isRemote_ ? this.type_ : "",
              })),
              (this.client_ = null),
              ht(l.client) || (this.client_ = l.client),
              (this.mediaStream_ = null),
              (this.div_ = null),
              (this.isPlaying_ = !1),
              (this.connection_ = null),
              (this.audioPlayer_ = null),
              (this.videoPlayer_ = null),
              (this.muted_ = !1),
              (this.objectFit_ = "cover"),
              (this.mirror_ = !1),
              (this.id_ = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
                /[xy]/g,
                function (h) {
                  var v = (16 * Math.random()) | 0;
                  return (h == "x" ? v : (3 & v) | 8).toString(16);
                }
              )),
              (this.audioOutputDeviceId_ = 0),
              (this.audioVolume_ = 1),
              (this.emitter_ = VE(new rs(), this.name_)),
              (this.connectionState_ = Vr),
              this.installEvents(),
              ht(l.mirror) ||
                this.log_.warn(
                  'TRTC.createStream "mirror" option was deprecated since v4.12.1，please use localStream.play to set up preview mirror. refer to '
                    .concat(
                      Fc,
                      "/en/LocalStream.html#play. TRTC.createStream 接口的 mirror 选项从 v4.12.1 开始被废弃，请使用 localStream.play 设置本地流预览镜像，参考文档："
                    )
                    .concat(Fc, "/zh-cn/LocalStream.html#play。")
                ),
              (this.audioPlayerRetryCount_ = 3);
          }
          var e, n, a, c, s;
          return (
            oe(u, [
              {
                key: "installEvents",
                value: function () {
                  Ee.on(eh, this.restartPlayback, this);
                },
              },
              {
                key: "uninstallEvents",
                value: function () {
                  Ee.off(eh, this.restartPlayback, this);
                },
              },
              {
                key: "getType",
                value: function () {
                  return this.type_;
                },
              },
              {
                key: "getLogger",
                value: function () {
                  return this.log_;
                },
              },
              {
                key: "isSubscribed",
                get: function () {
                  return (
                    (this.type_ === Bn &&
                      this.connection_.isMainStreamSubscribed) ||
                    (this.type_ === ir &&
                      this.connection_.isAuxStreamSubscribed)
                  );
                },
              },
              {
                key: "isMainVideoSubscribed",
                get: function () {
                  var h = this.getSubscribedState();
                  return this.type_ === Bn && h && h.video;
                },
              },
              {
                key: "isMainAudioSubscribed",
                get: function () {
                  var h = this.getSubscribedState();
                  return this.type_ === Bn && h && h.audio;
                },
              },
              {
                key: "isAuxVideoSubscribed",
                get: function () {
                  var h = this.getSubscribedState();
                  return this.type_ === ir && h && h.auxiliary;
                },
              },
              {
                key: "isSmallVideoSubscribed",
                get: function () {
                  var h = this.getSubscribedState();
                  return this.type_ === Bn && h && h.smallVideo;
                },
              },
              {
                key: "emitConnectionStateChanged",
                value: function (h) {
                  h.state !== this.connectionState_ &&
                    ((h.state !== Vr && this.isRemote_ && !this.isSubscribed) ||
                      (this.emitter_.emit(ZF, h),
                      (this.connectionState_ = h.state)));
                },
              },
              {
                key: "setConnection",
                value: function (h) {
                  this.connection_ !== h &&
                    (h instanceof gb
                      ? (this.connection_ !== null &&
                          this.connection_.off(
                            _n.CONNECTION_STATE_CHANGED,
                            this.emitConnectionStateChanged,
                            this
                          ),
                        h.on(
                          _n.CONNECTION_STATE_CHANGED,
                          this.emitConnectionStateChanged,
                          this
                        ))
                      : h === null &&
                        this.connection_.off(
                          _n.CONNECTION_STATE_CHANGED,
                          this.emitConnectionStateChanged,
                          this
                        ),
                    (this.connection_ = h));
                },
              },
              {
                key: "getConnection",
                value: function () {
                  return this.connection_;
                },
              },
              {
                key: "play",
                value:
                  ((s = I(
                    m().mark(function l(h, v) {
                      var g, _, b;
                      return m().wrap(
                        function (C) {
                          for (;;)
                            switch ((C.prev = C.next)) {
                              case 0:
                                if (
                                  (this.log_.info(
                                    "stream "
                                      .concat(
                                        this.isPlaying_ ? "update" : "start to",
                                        " play with elementId: "
                                      )
                                      .concat(h, " and options: ")
                                      .concat(JSON.stringify(v), ".")
                                  ),
                                  !this.isPlaying_)
                                ) {
                                  C.next = 9;
                                  break;
                                }
                                return (
                                  v && !ht(v.muted) && (this.muted_ = v.muted),
                                  v &&
                                    !ht(v.objectFit) &&
                                    (this.objectFit_ = v.objectFit),
                                  this.isScreenShare()
                                    ? (this.mirror_ = !1)
                                    : v &&
                                      !ht(v.mirror) &&
                                      (this.mirror_ = v.mirror),
                                  this.audioPlayer_ &&
                                    this.audioPlayer_.setMuted(this.muted_),
                                  this.videoPlayer_ &&
                                    (this.videoPlayer_.setObjectFit(
                                      this.objectFit_
                                    ),
                                    this.videoPlayer_.setMirror(this.mirror_)),
                                  this.elementId_ !== h &&
                                    ((g = h),
                                    vr(h) && (g = document.getElementById(h)),
                                    g.appendChild(this.div_),
                                    (this.elementId_ = h)),
                                  C.abrupt("return")
                                );
                              case 9:
                                return (
                                  (this.isPlaying_ = !0),
                                  (_ =
                                    document.createElement("div")).setAttribute(
                                    "id",
                                    "player_".concat(this.id_)
                                  ),
                                  _.setAttribute(
                                    "style",
                                    "width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"
                                  ),
                                  (b = h),
                                  vr(h) && (b = document.getElementById(h)),
                                  b.appendChild(_),
                                  (this.elementId_ = h),
                                  (this.div_ = _),
                                  this.isRemote_ || (this.muted_ = !0),
                                  v && !ht(v.muted) && (this.muted_ = v.muted),
                                  this.isScreenShare() &&
                                    (this.objectFit_ = "contain"),
                                  v &&
                                    !ht(v.objectFit) &&
                                    (this.objectFit_ = v.objectFit),
                                  this.isScreenShare()
                                    ? (this.mirror_ = !1)
                                    : (this.isRemote_ || (this.mirror_ = !0),
                                      v &&
                                        !ht(v.mirror) &&
                                        (this.mirror_ = v.mirror)),
                                  Ee.emit(Sy, { stream: this }),
                                  (C.next = 26),
                                  Promise.all([
                                    this.playAudio(),
                                    this.playVideo(),
                                  ])
                                );
                              case 26:
                                Ee.emit(IV, { stream: this });
                              case 27:
                              case "end":
                                return C.stop();
                            }
                        },
                        l,
                        this
                      );
                    })
                  )),
                  function (l, h) {
                    return s.apply(this, arguments);
                  }),
              },
              {
                key: "playAudio",
                value:
                  ((c = I(
                    m().mark(function l() {
                      var h,
                        v,
                        g = this;
                      return m().wrap(
                        function (_) {
                          for (;;)
                            switch ((_.prev = _.next)) {
                              case 0:
                                if (
                                  this.hasAudio() &&
                                  (!this.isRemote_ ||
                                    this.isMainAudioSubscribed)
                                ) {
                                  _.next = 2;
                                  break;
                                }
                                return _.abrupt("return");
                              case 2:
                                if (
                                  ((h = this.getAudioTrack()),
                                  this.audioPlayer_ || !h)
                                ) {
                                  _.next = 18;
                                  break;
                                }
                                return (
                                  this.log_.info("create AudioPlayer and play"),
                                  (this.audioPlayer_ = new Qj({
                                    stream: this,
                                    track: h,
                                    gainedTrack:
                                      (v = this.gain_) === null || v === void 0
                                        ? void 0
                                        : v.audioTrack,
                                    div: this.div_,
                                    muted: this.muted_,
                                    outputDeviceId: this.audioOutputDeviceId_,
                                    volume: this.audioVolume_,
                                  })),
                                  this.audioPlayer_.on(ei, function (b) {
                                    var C = {
                                      type: Ct,
                                      state: b.state,
                                      reason: b.reason,
                                    };
                                    Ee.emit(WE, p({ stream: g }, C)),
                                      g.emitter_.emit(jI, C);
                                  }),
                                  this.audioPlayer_.on(BI, function (b) {
                                    g.audioPlayerRetryCount_ > 0 &&
                                      (g.audioPlayerRetryCount_--,
                                      g.restartAudio());
                                  }),
                                  (_.prev = 8),
                                  (_.next = 11),
                                  this.audioPlayer_.play()
                                );
                              case 11:
                                _.next = 18;
                                break;
                              case 13:
                                throw (
                                  ((_.prev = 13),
                                  (_.t0 = _.catch(8)),
                                  this.client_ &&
                                    this.client_.getEnableAutoPlayDialog() &&
                                    new PR(),
                                  this.emitter_.emit(r1, _.t0),
                                  _.t0)
                                );
                              case 18:
                              case "end":
                                return _.stop();
                            }
                        },
                        l,
                        this,
                        [[8, 13]]
                      );
                    })
                  )),
                  function () {
                    return c.apply(this, arguments);
                  }),
              },
              {
                key: "playVideo",
                value:
                  ((a = I(
                    m().mark(function l() {
                      var h,
                        v = this;
                      return m().wrap(
                        function (g) {
                          for (;;)
                            switch ((g.prev = g.next)) {
                              case 0:
                                if (
                                  this.hasVideo() &&
                                  (!this.isRemote_ ||
                                    this.isMainVideoSubscribed ||
                                    this.isAuxVideoSubscribed ||
                                    this.isSmallVideoSubscribed)
                                ) {
                                  g.next = 2;
                                  break;
                                }
                                return g.abrupt("return");
                              case 2:
                                if (
                                  ((h = this.getVideoTrack()),
                                  this.videoPlayer_ || !h)
                                ) {
                                  g.next = 18;
                                  break;
                                }
                                return (
                                  Ee.emit(ky, { stream: this }),
                                  this.log_.info("create VideoPlayer and play"),
                                  (this.videoPlayer_ = new DR({
                                    stream: this,
                                    track: h,
                                    div: this.div_,
                                    muted: this.muted_,
                                    objectFit: this.objectFit_,
                                    mirror: this.mirror_,
                                  })),
                                  this.videoPlayer_.on(ei, function (_) {
                                    var b = {
                                      type: wt,
                                      state: _.state,
                                      reason: _.reason,
                                    };
                                    Ee.emit(WE, p({ stream: v }, b)),
                                      v.emitter_.emit(jI, b);
                                  }),
                                  (g.prev = 8),
                                  (g.next = 11),
                                  this.videoPlayer_.play()
                                );
                              case 11:
                                g.next = 18;
                                break;
                              case 13:
                                throw (
                                  ((g.prev = 13),
                                  (g.t0 = g.catch(8)),
                                  this.client_ &&
                                    this.client_.getEnableAutoPlayDialog() &&
                                    new PR(),
                                  this.emitter_.emit(r1, g.t0),
                                  g.t0)
                                );
                              case 18:
                              case "end":
                                return g.stop();
                            }
                        },
                        l,
                        this,
                        [[8, 13]]
                      );
                    })
                  )),
                  function () {
                    return a.apply(this, arguments);
                  }),
              },
              {
                key: "stopAudio",
                value: function () {
                  this.audioPlayer_ &&
                    (this.log_.info("stop AudioPlayer"),
                    this.audioPlayer_.stop(),
                    (this.audioPlayer_ = null));
                },
              },
              {
                key: "stopVideo",
                value: function () {
                  this.videoPlayer_ &&
                    (this.log_.info("stop VideoPlayer"),
                    this.videoPlayer_.stop(),
                    (this.videoPlayer_ = null));
                },
              },
              {
                key: "restartPlayback",
                value: function () {
                  this.audioPlayer_ &&
                    !this.audioPlayer_.isPlaying &&
                    this.restartAudio(),
                    this.videoPlayer_ &&
                      !this.videoPlayer_.isPlaying &&
                      this.restartVideo();
                },
              },
              {
                key: "restartAudio",
                value: function () {
                  this.isPlaying_ &&
                    (this.stopAudio(), this.playAudio().catch(function (h) {}));
                },
              },
              {
                key: "restartVideo",
                value: function () {
                  this.isPlaying_ &&
                    (this.stopVideo(), this.playVideo().catch(function (h) {}));
                },
              },
              {
                key: "stop",
                value: function () {
                  this.isPlaying_ &&
                    ((this.isPlaying_ = !1),
                    this.stopAudio(),
                    this.stopVideo(),
                    this.div_.parentNode.removeChild(this.div_));
                },
              },
              {
                key: "resume",
                value:
                  ((n = I(
                    m().mark(function l() {
                      return m().wrap(
                        function (h) {
                          for (;;)
                            switch ((h.prev = h.next)) {
                              case 0:
                                if (this.isPlaying_) {
                                  h.next = 2;
                                  break;
                                }
                                return h.abrupt("return");
                              case 2:
                                if (
                                  (this.log_.info("resume"), !this.audioPlayer_)
                                ) {
                                  h.next = 6;
                                  break;
                                }
                                return (h.next = 6), this.audioPlayer_.resume();
                              case 6:
                                if (!this.videoPlayer_) {
                                  h.next = 9;
                                  break;
                                }
                                return (h.next = 9), this.videoPlayer_.resume();
                              case 9:
                              case "end":
                                return h.stop();
                            }
                        },
                        l,
                        this
                      );
                    })
                  )),
                  function () {
                    return n.apply(this, arguments);
                  }),
              },
              {
                key: "close",
                value: function () {
                  this.log_.info("close stream"),
                    this.isPlaying_ && this.stop(),
                    this.isRemote_ ||
                      (this.mediaStream_ &&
                        ((this.mediaStream_.preventEvent = 1),
                        this.mediaStream_.getTracks().forEach(function (h) {
                          h.stop();
                        }),
                        (this.mediaStream_ = null)),
                      this.uninstallEvents());
                },
              },
              {
                key: "muteAudio",
                value: function () {
                  return (
                    this.addRemoteEvent(!0, Ct), this.doEnableTrack(Ct, !1)
                  );
                },
              },
              {
                key: "muteVideo",
                value: function () {
                  return (
                    this.addRemoteEvent(!0, wt), this.doEnableTrack(wt, !1)
                  );
                },
              },
              {
                key: "unmuteAudio",
                value: function () {
                  return (
                    this.addRemoteEvent(!1, Ct), this.doEnableTrack(Ct, !0)
                  );
                },
              },
              {
                key: "unmuteVideo",
                value: function () {
                  return (
                    this.addRemoteEvent(!1, wt), this.doEnableTrack(wt, !0)
                  );
                },
              },
              {
                key: "addRemoteEvent",
                value: function (h, v) {
                  if (this.isRemote_ && this.client_) {
                    var g = this.client_.getUserId(),
                      _ = "".concat(h ? Ar : Ca, " remote ").concat(v);
                    Xr(g, {
                      eventId: v === Ct ? (h ? K9 : $9) : h ? q9 : J9,
                      eventDesc: _,
                      timestamp: /* @__PURE__ */ new Date().getTime(),
                      userId: g,
                      tinyId: this.client_.getTinyId(),
                      remoteUserId: this.userId_,
                      remoteTinyId: this.connection_.getTinyId(),
                    });
                  }
                },
              },
              {
                key: "doEnableTrack",
                value: function (h, v) {
                  var g = !1;
                  return (
                    h === Ct
                      ? this.mediaStream_
                          .getAudioTracks()
                          .forEach(function (_) {
                            (g = !0), (_.enabled = v);
                          })
                      : this.mediaStream_
                          .getVideoTracks()
                          .forEach(function (_) {
                            (g = !0), (_.enabled = v);
                          }),
                    g
                  );
                },
              },
              {
                key: "getId",
                value: function () {
                  return this.id_;
                },
              },
              {
                key: "getUserId",
                value: function () {
                  return this.userId_;
                },
              },
              {
                key: "getTinyId",
                value: function () {
                  return this.connection_ ? this.connection_.getTinyId() : "";
                },
              },
              {
                key: "isPlaying",
                value: function () {
                  return this.isPlaying_;
                },
              },
              {
                key: "setAudioOutput",
                value:
                  ((e = I(
                    m().mark(function l(h) {
                      var v;
                      return m().wrap(
                        function (g) {
                          for (;;)
                            switch ((g.prev = g.next)) {
                              case 0:
                                if (
                                  (this.log_.info("setAudioOutput ".concat(h)),
                                  (this.audioOutputDeviceId_ = h),
                                  !this.audioPlayer_)
                                ) {
                                  g.next = 5;
                                  break;
                                }
                                return (
                                  (g.next = 5), this.audioPlayer_.setSinkId(h)
                                );
                              case 5:
                                return (g.next = 7), GI();
                              case 7:
                                (v = g.sent),
                                  this.log_.info(
                                    "speakers: ".concat(JSON.stringify(v))
                                  );
                              case 9:
                              case "end":
                                return g.stop();
                            }
                        },
                        l,
                        this
                      );
                    })
                  )),
                  function (l) {
                    return e.apply(this, arguments);
                  }),
              },
              {
                key: "setAudioVolume",
                value: function (h) {
                  (this.audioVolume_ = h),
                    this.log_.info("setAudioVolume to ".concat(h)),
                    this.audioPlayer_ && this.audioPlayer_.setVolume(h);
                },
              },
              {
                key: "getAudioLevel",
                value: function () {
                  var h = 0;
                  return (
                    this.audioPlayer_ &&
                      (h = this.audioPlayer_.getAudioLevel()),
                    h
                  );
                },
              },
              {
                key: "getInternalAudioLevel",
                value: function () {
                  var h = 0;
                  return (
                    this.audioPlayer_ &&
                      (h = this.audioPlayer_.getInternalAudioLevel()),
                    h
                  );
                },
              },
              {
                key: "hasAudio",
                value: function () {
                  if (this.isRemote_) {
                    if (!this.connection_) return !1;
                    var h = this.connection_.getTrackState();
                    return this.type_ === Bn && h.audio;
                  }
                  return !!this.getAudioTrack();
                },
              },
              {
                key: "hasVideo",
                value: function () {
                  if (this.isRemote_) {
                    if (!this.connection_) return !1;
                    var h = this.connection_.getTrackState();
                    return this.type_ === ir ? h.auxiliary : h.video;
                  }
                  return !!this.getVideoTrack();
                },
              },
              {
                key: "getSubscribedState",
                value: function () {
                  return this.isRemote_ && this.connection_
                    ? this.connection_.getSubscribeState()
                    : null;
                },
              },
              {
                key: "getAudioTrack",
                value: function () {
                  var h = null;
                  if (this.mediaStream_) {
                    var v = this.mediaStream_.getAudioTracks();
                    v.length > 0 && (h = v[0]);
                  }
                  return h;
                },
              },
              {
                key: "getVideoTrack",
                value: function () {
                  var h = null;
                  if (this.mediaStream_) {
                    var v = this.mediaStream_.getVideoTracks();
                    v.length > 0 && (h = v[0]);
                  }
                  return h;
                },
              },
              {
                key: "getVideoFrame",
                value: function () {
                  return this.videoPlayer_
                    ? this.videoPlayer_.getVideoFrame()
                    : null;
                },
              },
              {
                key: "getMediaStream",
                value: function () {
                  return this.mediaStream_;
                },
              },
              {
                key: "setMediaStream",
                value: function (h) {
                  h !== this.mediaStream_ &&
                    (this.mediaStream_ &&
                      this.mediaStream_.getTracks().forEach(function (v) {
                        return v.stop();
                      }),
                    (this.mediaStream_ = h));
                },
              },
              {
                key: "updateVideoPlayingState",
                value: function (h) {
                  if (this.isPlaying_)
                    if (h) {
                      if (
                        (this.log_.info("playing state updated, play video"),
                        this.videoPlayer_ &&
                          this.videoPlayer_.getTrack() !== this.getVideoTrack())
                      )
                        return (
                          this.log_.warn(
                            "audio track changed, restart playback"
                          ),
                          this.restartVideo()
                        );
                      this.playVideo().catch(function (v) {});
                    } else
                      this.log_.info("playing state updated, stop video"),
                        this.stopVideo();
                },
              },
              {
                key: "updateAudioPlayingState",
                value: function (h) {
                  if (this.isPlaying_)
                    if (h) {
                      if (
                        (this.log_.info("playing state updated, play audio"),
                        this.audioPlayer_ &&
                          this.audioPlayer_.getTrack() !== this.getAudioTrack())
                      )
                        return (
                          this.log_.warn(
                            "audio track changed, restart playback"
                          ),
                          this.restartAudio()
                        );
                      this.playAudio().catch(function (v) {});
                    } else
                      this.log_.info("playing state updated, stop audio"),
                        this.stopAudio();
                },
              },
              {
                key: "on",
                value: function (h, v, g) {
                  this.emitter_.on(h, v, g);
                },
              },
              {
                key: "off",
                value: function (h, v, g) {
                  h === "*"
                    ? this.emitter_.removeAllListeners()
                    : this.emitter_.off(h, v, g);
                },
              },
              {
                key: "isRemote",
                value: function () {
                  return this.isRemote_;
                },
              },
              {
                key: "isScreenShare",
                value: function () {
                  return (
                    (!this.isRemote_ && this.screen_) ||
                    (this.isRemote_ && this.getType() === Vn)
                  );
                },
              },
              {
                key: "getDiv",
                value: function () {
                  return this.div_;
                },
              },
              {
                key: "getObjectFit",
                value: function () {
                  return this.objectFit_;
                },
              },
              {
                key: "getMuted",
                value: function () {
                  return this.muted_;
                },
              },
              {
                key: "getClient",
                value: function () {
                  return this.client_;
                },
              },
            ]),
            u
          );
        })()),
        Be(
          ea.prototype,
          "play",
          [kA],
          Object.getOwnPropertyDescriptor(ea.prototype, "play"),
          ea.prototype
        ),
        Be(
          ea.prototype,
          "setAudioOutput",
          [TA],
          Object.getOwnPropertyDescriptor(ea.prototype, "setAudioOutput"),
          ea.prototype
        ),
        Be(
          ea.prototype,
          "getVideoFrame",
          [EA],
          Object.getOwnPropertyDescriptor(ea.prototype, "getVideoFrame"),
          ea.prototype
        ),
        ea),
      bb = (function (u) {
        be(n, u);
        var e = Tt(n);
        function n(a) {
          var c;
          B(this, n);
          var s = { isRemote: !0, type: a.type },
            l = p(p({}, a), s);
          return (
            ((c = e.call(this, l)).name_ = I0),
            (c.isStreamAddedEventEmitted_ = !1),
            (c.isAbleToCallSubscription_ = !0),
            c
          );
        }
        return (
          oe(n, [
            {
              key: "installEvents",
              value: function () {
                yt(Ie(n.prototype), "installEvents", this).call(this),
                  Ee.on(uo, this.handleStreamSubscribed, this),
                  Ee.on(co, this.handleStreamUnsubscribed, this);
              },
            },
            {
              key: "uninstallEvents",
              value: function () {
                yt(Ie(n.prototype), "uninstallEvents", this).call(this),
                  Ee.off(uo, this.handleStreamSubscribed, this),
                  Ee.off(co, this.handleStreamUnsubscribed, this);
              },
            },
            {
              key: "handleStreamSubscribed",
              value: function (c) {
                c.client === this.client_ &&
                  c.stream === this &&
                  this.connection_.getCurrentState() === Fr &&
                  this.emitConnectionStateChanged({ prevState: Vr, state: Fr });
              },
            },
            {
              key: "handleStreamUnsubscribed",
              value: function (c) {
                c.client === this.client_ &&
                  c.stream === this &&
                  this.emitConnectionStateChanged({ prevState: Fr, state: Vr });
              },
            },
            {
              key: "getType",
              value: function () {
                return yt(Ie(n.prototype), "getType", this).call(this);
              },
            },
            {
              key: "getIsAbleToCallSubscription",
              value: function () {
                return this.isAbleToCallSubscription_;
              },
            },
            {
              key: "setIsAbleToCallSubscription",
              value: function (c) {
                this.isAbleToCallSubscription_ = c;
              },
            },
            {
              key: "setIsStreamAddedEventEmitted",
              value: function (c) {
                this.isStreamAddedEventEmitted_ = c;
              },
            },
            {
              key: "getIsStreamAddedEventEmitted",
              value: function () {
                return this.isStreamAddedEventEmitted_;
              },
            },
            {
              key: "getAudioTrack",
              value: function () {
                return this.connection_ &&
                  this.connection_.getTrackState().audio
                  ? yt(Ie(n.prototype), "getAudioTrack", this).call(this)
                  : null;
              },
            },
            {
              key: "getVideoTrack",
              value: function () {
                if (!this.connection_) return null;
                var c = this.connection_.getTrackState();
                return (this.type_ !== Bn || c.video) &&
                  (this.type_ !== ir || c.auxiliary)
                  ? yt(Ie(n.prototype), "getVideoTrack", this).call(this)
                  : null;
              },
            },
            {
              key: "close",
              value: function () {
                yt(Ie(n.prototype), "close", this).call(this);
              },
            },
          ]),
          n
        );
      })(IA),
      vG = (function () {
        function u(c) {
          B(this, u),
            (this.client_ = c.client),
            (this.subscribedStreams_ = /* @__PURE__ */ new Map()),
            (this.unsubscribedStreams_ = /* @__PURE__ */ new Map()),
            (this.subscriptedOptions_ = /* @__PURE__ */ new Map()),
            (this.autoRecoveryFlags_ = /* @__PURE__ */ new Map());
        }
        var e, n, a;
        return (
          oe(u, [
            {
              key: "isEnabled",
              get: function () {
                return this.client_.getEnv() !== "webrtc";
              },
            },
            {
              key: "recover",
              value:
                ((a = I(
                  m().mark(function c(s) {
                    var l, h, v;
                    return m().wrap(
                      function (g) {
                        for (;;)
                          switch ((g.prev = g.next)) {
                            case 0:
                              if (
                                ((l = s.getUserId()),
                                (h = s.getType()),
                                this.hasAutoRecoveryFlag(l, h))
                              ) {
                                g.next = 5;
                                break;
                              }
                              return g.abrupt("return");
                            case 5:
                              if (
                                ((v = this.getUnsubscribedStream(l, h)
                                  ? "unsubscribe"
                                  : "subscribe"),
                                (g.prev = 6),
                                ft.warn(
                                  "recover() try to recover subscription ["
                                    .concat(v, "][")
                                    .concat(l, "][")
                                    .concat(h, "]")
                                ),
                                v !== "subscribe")
                              ) {
                                g.next = 13;
                                break;
                              }
                              return (
                                (g.next = 11), this.recoverSubscription(l, s)
                              );
                            case 11:
                              g.next = 15;
                              break;
                            case 13:
                              return (
                                (g.next = 15), this.recoverUnsubscription(l, s)
                              );
                            case 15:
                              gt.logSuccessEvent({
                                userId: this.client_.getUserId(),
                                eventType: PT,
                              }),
                                ft.warn(
                                  "recover() recover successfully ["
                                    .concat(v, "][")
                                    .concat(l, "][")
                                    .concat(h, "]")
                                ),
                                (g.next = 23);
                              break;
                            case 19:
                              (g.prev = 19),
                                (g.t0 = g.catch(6)),
                                ft.error(
                                  "recover() recover failed ["
                                    .concat(v, "][")
                                    .concat(l, "][")
                                    .concat(h, "]"),
                                  g.t0
                                ),
                                gt.logFailedEvent({
                                  userId: this.client_.getUserId(),
                                  eventType: PT,
                                  error: g.t0,
                                });
                            case 23:
                              this.deleteAutoRecoveryFlag(l, h);
                            case 24:
                            case "end":
                              return g.stop();
                          }
                      },
                      c,
                      this,
                      [[6, 19]]
                    );
                  })
                )),
                function (c) {
                  return a.apply(this, arguments);
                }),
            },
            {
              key: "recoverSubscription",
              value:
                ((n = I(
                  m().mark(function c(s, l) {
                    var h, v, g, _, b;
                    return m().wrap(
                      function (C) {
                        for (;;)
                          switch ((C.prev = C.next)) {
                            case 0:
                              if (
                                ((h = this.getOptions(s, l.getType())),
                                (v = this.getSubscribedStream(s, l.getType())),
                                h && v)
                              ) {
                                C.next = 4;
                                break;
                              }
                              return C.abrupt("return");
                            case 4:
                              (g = this.getStreamMuteState(v)),
                                (_ = g.isAudioMuted),
                                (b = g.isVideoMuted),
                                this.mergeStream(v, l),
                                this.recoverPlayingState(v),
                                _ && v.doEnableTrack(Ct, !1),
                                b && v.doEnableTrack(wt, !1);
                            case 9:
                            case "end":
                              return C.stop();
                          }
                      },
                      c,
                      this
                    );
                  })
                )),
                function (c, s) {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "recoverUnsubscription",
              value:
                ((e = I(
                  m().mark(function c(s, l) {
                    var h;
                    return m().wrap(
                      function (v) {
                        for (;;)
                          switch ((v.prev = v.next)) {
                            case 0:
                              if (
                                (h = this.getUnsubscribedStream(s, l.getType()))
                              ) {
                                v.next = 3;
                                break;
                              }
                              return v.abrupt("return");
                            case 3:
                              this.mergeStream(h, l);
                            case 4:
                            case "end":
                              return v.stop();
                          }
                      },
                      c,
                      this
                    );
                  })
                )),
                function (c, s) {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "getStreamMuteState",
              value: function (s) {
                var l = { isAudioMuted: !1, isVideoMuted: !1 },
                  h = s.getMediaStream();
                return (
                  h &&
                    ((l.isAudioMuted = h
                      .getAudioTracks()
                      .map(function (v) {
                        return v.enabled;
                      })
                      .includes(!1)),
                    (l.isVideoMuted = h
                      .getVideoTracks()
                      .map(function (v) {
                        return v.enabled;
                      })
                      .includes(!1))),
                  l
                );
              },
            },
            {
              key: "recoverPlayingState",
              value: function (s) {
                var l = s.isPlaying(),
                  h = s.getDiv();
                if (l && h) {
                  var v = h.parentNode;
                  s.stop(),
                    s.play(v, {
                      objectFit: s.getObjectFit(),
                      muted: s.getMuted(),
                    });
                }
              },
            },
            {
              key: "mergeStream",
              value: function (s, l) {
                var h = l.getConnection(),
                  v = l.getMediaStream();
                s.setConnection(h),
                  h.setRemoteStream(v.id, s),
                  s.setMediaStream(v),
                  s.updateAudioPlayingState(l.hasAudio()),
                  s.updateVideoPlayingState(l.hasVideo());
              },
            },
            {
              key: "addSubscriptionRecord",
              value: function (s, l, h) {
                var v = l.getType();
                if (this.subscribedStreams_.has(s))
                  this.subscribedStreams_.get(s).set(v, l);
                else {
                  var g = /* @__PURE__ */ new Map();
                  g.set(l.getType(), l), this.subscribedStreams_.set(s, g);
                }
                if (this.subscriptedOptions_.has(s))
                  this.subscriptedOptions_.get(s).set(v, h);
                else {
                  var _ = /* @__PURE__ */ new Map();
                  _.set(l.getType(), h), this.subscriptedOptions_.set(s, _);
                }
                this.deleteUnsubscriptionRecord(s, v);
              },
            },
            {
              key: "addUnsubscriptionRecord",
              value: function (s, l) {
                if (this.unsubscribedStreams_.has(s))
                  this.unsubscribedStreams_.get(s).set(l.getType(), l);
                else {
                  var h = /* @__PURE__ */ new Map();
                  h.set(l.getType(), l), this.unsubscribedStreams_.set(s, h);
                }
                this.deleteSubscriptionRecord(s, l.getType());
              },
            },
            {
              key: "getSubscribedStream",
              value: function (s, l) {
                return this.subscribedStreams_.has(s) &&
                  this.subscribedStreams_.get(s).has(l)
                  ? this.subscribedStreams_.get(s).get(l)
                  : null;
              },
            },
            {
              key: "getOptions",
              value: function (s, l) {
                return this.subscriptedOptions_.has(s) &&
                  this.subscriptedOptions_.get(s).has(l)
                  ? this.subscriptedOptions_.get(s).get(l)
                  : null;
              },
            },
            {
              key: "getUnsubscribedStream",
              value: function (s, l) {
                return this.unsubscribedStreams_.has(s) &&
                  this.unsubscribedStreams_.get(s).has(l)
                  ? this.unsubscribedStreams_.get(s).get(l)
                  : null;
              },
            },
            {
              key: "deleteSubscriptionRecord",
              value: function (s, l) {
                this.subscribedStreams_.has(s) &&
                  this.subscribedStreams_.get(s).delete(l),
                  this.subscriptedOptions_.has(s) &&
                    this.subscriptedOptions_.get(s).delete(l);
              },
            },
            {
              key: "deleteUnsubscriptionRecord",
              value: function (s, l) {
                this.unsubscribedStreams_.has(s) &&
                  this.unsubscribedStreams_.get(s).delete(l);
              },
            },
            {
              key: "markAllStream",
              value: function () {
                for (
                  var s = 0, l = Ze(this.subscribedStreams_.entries());
                  s < l.length;
                  s++
                )
                  for (
                    var h = Et(l[s], 2),
                      v = h[0],
                      g = 0,
                      _ = Ze(h[1].entries());
                    g < _.length;
                    g++
                  ) {
                    var b = Et(_[g], 1)[0];
                    this.setAutoRecoveryFlag(v, b);
                  }
                for (
                  var C = 0, N = Ze(this.unsubscribedStreams_.entries());
                  C < N.length;
                  C++
                )
                  for (
                    var z = Et(N[C], 2),
                      F = z[0],
                      U = 0,
                      E = Ze(z[1].entries());
                    U < E.length;
                    U++
                  ) {
                    var A = Et(E[U], 1)[0];
                    this.setAutoRecoveryFlag(F, A);
                  }
              },
            },
            {
              key: "setAutoRecoveryFlag",
              value: function (s, l) {
                if (
                  (ft.info(
                    "setAutoRecoveryFlag() mark ["
                      .concat(s, "][")
                      .concat(l, "]")
                  ),
                  this.autoRecoveryFlags_.has(s))
                )
                  this.autoRecoveryFlags_.get(s).set(l);
                else {
                  var h = /* @__PURE__ */ new Map();
                  h.set(l), this.autoRecoveryFlags_.set(s, h);
                }
              },
            },
            {
              key: "hasAutoRecoveryFlag",
              value: function (s, l) {
                return (
                  !!this.isEnabled &&
                  this.autoRecoveryFlags_.has(s) &&
                  this.autoRecoveryFlags_.get(s).has(l)
                );
              },
            },
            {
              key: "deleteAutoRecoveryFlag",
              value: function (s, l) {
                this.autoRecoveryFlags_.has(s) &&
                  this.autoRecoveryFlags_.get(s).delete(l);
              },
            },
            {
              key: "delete",
              value: function (s) {
                this.unsubscribedStreams_.delete(s),
                  this.subscribedStreams_.delete(s),
                  this.subscriptedOptions_.delete(s),
                  this.autoRecoveryFlags_.delete(s);
              },
            },
          ]),
          u
        );
      })(),
      mG = (function () {
        function u(e) {
          B(this, u),
            (this.player_ = e),
            (this.canvas_ = document.createElement(sT)),
            (this.canvasCtx_ = this.canvas_.getContext("2d"));
        }
        return (
          oe(u, [
            {
              key: "setCanvasRect",
              value: function (n, a) {
                (this.canvas_.width = n), (this.canvas_.height = a);
              },
            },
            {
              key: "drawVideoToCanvas",
              value: function () {
                var n = this.player_.getElement(),
                  a = n.videoHeight,
                  c = n.videoWidth,
                  s = (c * this.canvas_.height) / (a * this.canvas_.width);
                if (s > 1.05 || s < 0.95) {
                  var l = (c * a) / (this.canvas_.width * this.canvas_.height);
                  this.setCanvasRect(c / Math.sqrt(l), a / Math.sqrt(l));
                }
                this.canvasCtx_.drawImage(
                  n,
                  0,
                  0,
                  this.canvas_.width,
                  this.canvas_.height
                );
              },
            },
            {
              key: "generateVideoTrackFromCanvasCapture",
              value: function (n) {
                return this.canvas_.captureStream(n).getVideoTracks()[0];
              },
            },
            {
              key: "generateStreamFromTrack",
              value: function (n) {
                var a = new MediaStream();
                return a.addTrack(n), a;
              },
            },
            {
              key: "destroy",
              value: function () {
                this.player_.stop(),
                  (this.canvas_.width = 0),
                  (this.canvas_.height = 0),
                  (this.canvas_ = null),
                  (this.canvasCtx_ = null);
              },
            },
            {
              key: "canvas",
              get: function () {
                return this.canvas_;
              },
            },
            {
              key: "canvasCtx",
              get: function () {
                return this.canvasCtx_;
              },
            },
            {
              key: "canDrawVideoToCanvas",
              get: function () {
                if (this.player_) {
                  var n = this.player_.getElement();
                  if (n) return n.readyState === n.HAVE_ENOUGH_DATA;
                }
                return !1;
              },
            },
          ]),
          u
        );
      })(),
      gG = new Blob(
        [
          'let t,e,a,i;onmessage=function(n){const{action:h,data:s}=n.data;switch(h){case"render":a=s.canvas,t=a.width,e=a.height,i=a.getContext("2d"),function(t,e){const n=new TransformStream({async transform(t,e){const n=t.displayWidth,h=t.displayHeight,s=n*a.height/(h*a.width);if(s>1.05||s<.95){const t=n*h/(a.width*a.height);a.width=n/Math.sqrt(t),a.height=h/Math.sqrt(t)}i.drawImage(t,0,0,a.width,a.height);const o=new VideoFrame(a,{timestamp:t.timestamp});t.close(),e.enqueue(o)}});t.pipeThrough(n).pipeTo(e)}(s.readable,s.writable)}}',
        ],
        { type: "application/javascript" }
      ),
      _G = (function () {
        function u(e) {
          B(this, u);
          var n = e.videoTrack;
          (this.width = void 0),
            (this.height = void 0),
            (this.canvas = document.createElement("canvas")),
            (this.offscreen = null),
            (this.smallGenerator = new MediaStreamTrackGenerator({
              kind: "video",
            })),
            (this.smallWritable = this.smallGenerator.writable),
            (this.bigProcessor = new MediaStreamTrackProcessor({ track: n })),
            (this.bigReadable = this.bigProcessor.readable),
            this.initWorker();
        }
        return (
          oe(u, [
            {
              key: "initWorker",
              value: function () {
                try {
                  (this.worker = new Worker(URL.createObjectURL(gG))),
                    ft.info("init worker processor success");
                } catch (n) {
                  ft.warn("init worker processor failed. ".concat(n.error));
                }
              },
            },
            {
              key: "setCanvasRect",
              value: function (n, a) {
                (this.width = n),
                  (this.height = a),
                  (this.canvas.width = n),
                  (this.canvas.height = a),
                  (this.offscreen = this.canvas.transferControlToOffscreen()),
                  this.worker.postMessage(
                    {
                      action: "render",
                      data: {
                        canvas: this.offscreen,
                        readable: this.bigReadable,
                        writable: this.smallWritable,
                      },
                    },
                    [this.offscreen, this.bigReadable, this.smallWritable]
                  );
              },
            },
            {
              key: "generatorVideoTrack",
              value: function () {
                var n = new MediaStream([this.smallGenerator]);
                return n == null ? void 0 : n.getTracks()[0];
              },
            },
            {
              key: "destroy",
              value: function () {
                this.worker.terminate();
              },
            },
          ]),
          u
        );
      })(),
      Lv = (function () {
        function u(n) {
          B(this, u),
            (this.localStream_ = n),
            (this.player_ = null),
            (this.processor_ = null),
            (this.initOffscreenSuccess_ = !1);
        }
        var e;
        return (
          oe(u, [
            {
              key: "initialize",
              value:
                ((e = I(
                  m().mark(function n() {
                    var a;
                    return m().wrap(
                      function (c) {
                        for (;;)
                          switch ((c.prev = c.next)) {
                            case 0:
                              if (
                                !(
                                  $F() &&
                                  ((a = navigator) === null || a === void 0
                                    ? void 0
                                    : a.hardwareConcurrency) >= 6
                                )
                              ) {
                                c.next = 13;
                                break;
                              }
                              return (
                                (c.prev = 1), (c.next = 4), this.initOffscreen()
                              );
                            case 4:
                              (this.initOffscreenSuccess_ = !0),
                                ft.info(
                                  "Initialize VideoGenerator successfully!"
                                ),
                                (c.next = 11);
                              break;
                            case 8:
                              (c.prev = 8),
                                (c.t0 = c.catch(1)),
                                this.initCanvas();
                            case 11:
                              c.next = 14;
                              break;
                            case 13:
                              this.initCanvas();
                            case 14:
                            case "end":
                              return c.stop();
                          }
                      },
                      n,
                      this,
                      [[1, 8]]
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "generateSmallVideoTrack",
              value: function (a) {
                var c,
                  s = a.height,
                  l = a.width,
                  h = a.frameRate,
                  v = this.getSmallVideoProfile(l, s);
                return (
                  this.initOffscreenSuccess_
                    ? (this.processor_.setCanvasRect(v.width, v.height),
                      (c = this.processor_.generatorVideoTrack()))
                    : (this.processor_.setCanvasRect(v.width, v.height),
                      this.player_.setRect({
                        width: v.width,
                        height: v.height,
                      }),
                      (c =
                        this.processor_.generateVideoTrackFromCanvasCapture(h)),
                      (this.interval_ = Nn.run(Np, this.render.bind(this), {
                        fps: h,
                      }))),
                  c
                );
              },
            },
            {
              key: "render",
              value: function () {
                this.processor_.canDrawVideoToCanvas &&
                  this.processor_.drawVideoToCanvas();
              },
            },
            {
              key: "destroy",
              value: function () {
                Nn.clearTask(this.interval_),
                  this.processor_ && this.processor_.destroy();
              },
            },
            {
              key: "initOffscreen",
              value: function () {
                this.processor_ = new _G({
                  videoTrack: this.localStream_.getVideoTrack(),
                });
              },
            },
            {
              key: "initCanvas",
              value: function () {
                (this.player_ = new DR({
                  stream: this.localStream_,
                  track: this.localStream_.getVideoTrack(),
                  muted: !0,
                  objectFit: "cover",
                  mirror: !1,
                })),
                  this.player_
                    .play()
                    .then(function () {
                      ft.info("VideoGenerator: play local video success");
                    })
                    .catch(function () {
                      ft.error("VideoGenerator: Failed to play local video");
                    }),
                  (this.processor_ = new mG(this.player_));
              },
            },
            {
              key: "getSmallVideoProfile",
              value: function (a, c) {
                var s,
                  l = this.localStream_.getVideoTrack(),
                  h = p({}, this.localStream_.getVideoProfile());
                if (mu) {
                  var v = l.getSettings();
                  v &&
                    v.width &&
                    v.height &&
                    ((h.width = v.width), (h.height = v.height));
                }
                var g = h.width * h.height,
                  _ = a * c;
                return (
                  ft.info(
                    "big stream resolution: "
                      .concat(h.width, "*")
                      .concat(h.height, " small stream resolution: ")
                      .concat(a, "*")
                      .concat(c, " ")
                  ),
                  (s = g > _ ? g / _ : g / 19200),
                  {
                    width: parseInt(h.width / Math.sqrt(s)),
                    height: parseInt(h.height / Math.sqrt(s)),
                  }
                );
              },
            },
          ]),
          u
        );
      })(),
      Mv = /* @__PURE__ */ new Map(),
      yG = (function () {
        var u = I(
          m().mark(function e(n) {
            var a, c, s, l, h, v, g;
            return m().wrap(
              function (_) {
                for (;;)
                  switch ((_.prev = _.next)) {
                    case 0:
                      if (!tv()) {
                        _.next = 2;
                        break;
                      }
                      return _.abrupt("return");
                    case 2:
                      return (_.next = 4), bG(n);
                    case 4:
                      if (
                        ((a = _.sent),
                        ft.info(
                          "getUserMedia with constraints: " + JSON.stringify(a)
                        ),
                        !a.audio)
                      ) {
                        _.next = 11;
                        break;
                      }
                      return (_.next = 9), $n.getMicrophones();
                    case 9:
                      (c = _.sent),
                        ft.info(
                          "microphones: ".concat(Wc(c, ["deviceId", "label"]))
                        );
                    case 11:
                      if (!a.video) {
                        _.next = 16;
                        break;
                      }
                      return (_.next = 14), $n.getCameras();
                    case 14:
                      (s = _.sent),
                        ft.info(
                          "cameras: ".concat(Wc(s, ["deviceId", "label"]))
                        );
                    case 16:
                      return (
                        (_.prev = 16),
                        (_.next = 19),
                        navigator.mediaDevices.getUserMedia(a)
                      );
                    case 19:
                      return _.abrupt("return", _.sent);
                    case 22:
                      if (
                        ((_.prev = 22),
                        (_.t0 = _.catch(16)),
                        _.t0.name !== "NotFoundError")
                      ) {
                        _.next = 29;
                        break;
                      }
                      if (!s || s.length !== 0) {
                        _.next = 27;
                        break;
                      }
                      throw new De({
                        code: Oe.DEVICE_NOT_FOUND,
                        message: Fe({ key: VU }),
                      });
                    case 27:
                      if (!c || c.length !== 0) {
                        _.next = 29;
                        break;
                      }
                      throw new De({
                        code: Oe.DEVICE_NOT_FOUND,
                        message: Fe({ key: UU }),
                      });
                    case 29:
                      throw (
                        (a.audio &&
                          ((l = c) === null || l === void 0
                            ? void 0
                            : l.length) > 0 &&
                          (v = c.find(function (b) {
                            return b.deviceId === n.microphoneId;
                          })) &&
                          v.getCapabilities &&
                          ft.warn(Wc(v.getCapabilities(), x0)),
                        a.video &&
                          ((h = s) === null || h === void 0
                            ? void 0
                            : h.length) > 0 &&
                          (g = s.find(function (b) {
                            return b.deviceId === n.cameraId;
                          })) &&
                          g.getCapabilities &&
                          ft.warn(Wc(g.getCapabilities(), x0)),
                        new De({
                          code: Oe.INITIALIZE_FAILED,
                          name: _.t0.name,
                          message: _.t0.message,
                          constraint: _.t0.constraint,
                        }))
                      );
                    case 32:
                    case "end":
                      return _.stop();
                  }
              },
              e,
              null,
              [[16, 22]]
            );
          })
        );
        return function (e) {
          return u.apply(this, arguments);
        };
      })(),
      Sb = th({
        retryFunction: yG,
        settings: { retries: 3, timeout: 500 },
        onError: function (e, n, a, c, s) {
          var l = s + 1;
          ft.warn("getUserMedia error: ".concat(e)),
            e.name === "NotReadableError" || e.name === "OverconstrainedError"
              ? (l === 1 && c[0].video
                  ? ((c[0].maxResoution = !1),
                    (c[0].frameRate = c[0].frameRate > 10 ? 10 : 5))
                  : l === 2
                  ? (c[0].useDeviceIdOnly = !0)
                  : l !== 3 ||
                    (c[0].useExact && !c[0].retryWhenExactFailed) ||
                    (c[0].useTrueAsConstraint = !0),
                e.message.includes("deviceId") &&
                  c[0].retryWhenExactFailed &&
                  (c[0].useExact = !1),
                n())
              : a(e);
        },
        onRetrying: function (e) {
          ft.warn("getUserMedia retrying [".concat(e, "/3]"));
        },
        onRetryFailed: function () {
          gt.uploadEvent({ log: "stat-getUserMedia-retry-failed" });
        },
        onRetrySuccess: function (e) {
          gt.uploadEvent({ log: "stat-getUserMedia-retry-success-" + e });
        },
      });
    function bG(u) {
      return { audio: SG(u), video: wG(u) };
    }
    function SG(u) {
      if (!u.audio) return !1;
      if (u.useTrueAsConstraint) return !0;
      var e = {};
      return !ho(u.microphoneId) &&
        ((e.deviceId = u.useExact ? { exact: u.microphoneId } : u.microphoneId),
        u.useDeviceIdOnly)
        ? e
        : ((e.echoCancellation = !0),
          (e.noiseSuppression = !0),
          (e.autoGainControl = !0),
          (e.sampleRate = u.sampleRate),
          Ki(u.channelCount) &&
            u.channelCount > 1 &&
            (e.channelCount = u.channelCount),
          Ji(u.echoCancellation) &&
            !u.echoCancellation &&
            (e.echoCancellation = !1),
          Ji(u.noiseSuppression) &&
            !u.noiseSuppression &&
            (e.noiseSuppression = !1),
          Ji(u.autoGainControl) &&
            !u.autoGainControl &&
            (e.autoGainControl = !1),
          !!ho(e) || e);
    }
    function wG(u) {
      if (!u.video) return !1;
      if (u.useTrueAsConstraint) return !0;
      var e = u.maxResoution,
        n = e === void 0 || e,
        a = {};
      return (
        u.facingMode
          ? (a.facingMode = u.facingMode)
          : u.cameraId &&
            (a.deviceId = u.useExact ? { exact: u.cameraId } : u.cameraId),
        u.useDeviceIdOnly && !ho(a)
          ? a
          : (u.width &&
              ((a.width = { ideal: u.width }),
              n && !Ii && (a.width.max = u.width)),
            u.height &&
              ((a.height = { ideal: u.height }),
              n && !Ii && (a.height.max = u.height)),
            Ii &&
              Zd &&
              u.width &&
              u.height &&
              u.width * u.height < 101376 &&
              ((a.width = u.width), (a.height = u.height)),
            u.frameRate && (a.frameRate = u.frameRate),
            !!ho(a) || a)
      );
    }
    var kG = (function () {
      var u = I(
        m().mark(function e(n) {
          var a, c, s, l, h, v, g, _, b;
          return m().wrap(function (C) {
            for (;;)
              switch ((C.prev = C.next)) {
                case 0:
                  if (!tv()) {
                    C.next = 2;
                    break;
                  }
                  return C.abrupt("return");
                case 2:
                  if (((a = null), !((Bp && Z0 < 74) || uu))) {
                    C.next = 27;
                    break;
                  }
                  return (
                    (c = wb(n)),
                    ft.info(
                      "getDisplayMedia with constraints: " + JSON.stringify(c)
                    ),
                    (C.next = 8),
                    navigator.mediaDevices.getDisplayMedia(c)
                  );
                case 8:
                  if (((s = C.sent), !n.screenAudio)) {
                    C.next = 14;
                    break;
                  }
                  return (
                    ft.warn("Your browser not support capture system audio"),
                    C.abrupt("return", s)
                  );
                case 14:
                  if (!n.audio) {
                    C.next = 24;
                    break;
                  }
                  return (
                    (l = RA(n)),
                    ft.info(
                      "getUserMedia with constraints: " + JSON.stringify(l)
                    ),
                    (C.next = 19),
                    navigator.mediaDevices.getUserMedia(l)
                  );
                case 19:
                  return (
                    (a = C.sent),
                    s.addTrack(a.getAudioTracks()[0]),
                    C.abrupt("return", s)
                  );
                case 24:
                  return C.abrupt("return", s);
                case 25:
                  C.next = 53;
                  break;
                case 27:
                  if (!n.screenAudio) {
                    C.next = 37;
                    break;
                  }
                  return (
                    (n.audioConstraints = {
                      echoCancellation: n.echoCancellation,
                      autoGainControl: n.autoGainControl,
                      noiseSuppression: n.noiseSuppression,
                      sampleRate: 44100,
                    }),
                    (h = wb(n)),
                    ft.info(
                      "getDisplayMedia with constraints: " + JSON.stringify(h)
                    ),
                    (C.next = 33),
                    navigator.mediaDevices.getDisplayMedia(h)
                  );
                case 33:
                  return (v = C.sent), C.abrupt("return", v);
                case 37:
                  return (
                    (g = wb(n)),
                    ft.info(
                      "getDisplayMedia with constraints: " + JSON.stringify(g)
                    ),
                    (C.next = 41),
                    navigator.mediaDevices.getDisplayMedia(g)
                  );
                case 41:
                  if (((_ = C.sent), !n.audio)) {
                    C.next = 52;
                    break;
                  }
                  return (
                    (b = RA(n)),
                    ft.info(
                      "getUserMedia with constraints: " + JSON.stringify(b)
                    ),
                    (C.next = 47),
                    navigator.mediaDevices.getUserMedia(b)
                  );
                case 47:
                  return (
                    (a = C.sent),
                    _.addTrack(a.getAudioTracks()[0]),
                    C.abrupt("return", _)
                  );
                case 52:
                  return C.abrupt("return", _);
                case 53:
                case "end":
                  return C.stop();
              }
          }, e);
        })
      );
      return function (e) {
        return u.apply(this, arguments);
      };
    })();
    function RA(u) {
      var e = {
        echoCancellation: u.echoCancellation,
        autoGainControl: u.autoGainControl,
        noiseSuppression: u.noiseSuppression,
        sampleRate: u.sampleRate,
        channelCount: u.channelCount,
      };
      return (
        ht(u.microphoneId) || (e.deviceId = u.microphoneId),
        { audio: e, video: !1 }
      );
    }
    function wb(u) {
      var e = {
          systemAudio: "include",
          selfBrowserSurface: "include",
          surfaceSwitching: "include",
        },
        n = {
          width: uu ? { max: u.width } : { ideal: u.width, max: u.width },
          height: uu ? { max: u.height } : { ideal: u.height, max: u.height },
          frameRate: u.frameRate,
          displaySurface: "monitor",
        };
      return (
        (e.video = n),
        ht(u.audioConstraints) || (e.audio = u.audioConstraints),
        e
      );
    }
    var CA,
      AA,
      xA,
      OA,
      PA,
      DA,
      NA,
      LA,
      MA,
      UA,
      VA,
      kn,
      FA,
      bh,
      kb = /* @__PURE__ */ new Map([
        ["120p", { width: 160, height: 120, frameRate: 15, bitrate: 200 }],
        ["120p_2", { width: 160, height: 120, frameRate: 15, bitrate: 100 }],
        ["180p", { width: 320, height: 180, frameRate: 15, bitrate: 350 }],
        ["180p_2", { width: 320, height: 180, frameRate: 15, bitrate: 150 }],
        ["240p", { width: 320, height: 240, frameRate: 15, bitrate: 400 }],
        ["240p_2", { width: 320, height: 240, frameRate: 15, bitrate: 200 }],
        ["360p", { width: 640, height: 360, frameRate: 15, bitrate: 800 }],
        ["360p_2", { width: 640, height: 360, frameRate: 15, bitrate: 400 }],
        ["480p", { width: 640, height: 480, frameRate: 15, bitrate: 900 }],
        ["480p_2", { width: 640, height: 480, frameRate: 15, bitrate: 500 }],
        ["720p", { width: 1280, height: 720, frameRate: 15, bitrate: 1500 }],
        ["1080p", { width: 1920, height: 1080, frameRate: 15, bitrate: 2e3 }],
        ["1440p", { width: 2560, height: 1440, frameRate: 30, bitrate: 4860 }],
        ["4K", { width: 3840, height: 2160, frameRate: 30, bitrate: 9e3 }],
      ]),
      Tb = /* @__PURE__ */ new Map([
        ["480p", { width: 640, height: 480, frameRate: 5, bitrate: 900 }],
        ["480p_2", { width: 640, height: 480, frameRate: 30, bitrate: 1e3 }],
        ["720p", { width: 1280, height: 720, frameRate: 5, bitrate: 1200 }],
        ["720p_2", { width: 1280, height: 720, frameRate: 30, bitrate: 3e3 }],
        ["1080p", { width: 1920, height: 1080, frameRate: 5, bitrate: 1600 }],
        ["1080p_2", { width: 1920, height: 1080, frameRate: 30, bitrate: 4e3 }],
      ]),
      jA = /* @__PURE__ */ new Map([
        ["standard", { sampleRate: 48e3, channelCount: 1, bitrate: 40 }],
        ["standard-stereo", { sampleRate: 48e3, channelCount: 2, bitrate: 64 }],
        ["high", { sampleRate: 48e3, channelCount: 1, bitrate: 128 }],
        ["high-stereo", { sampleRate: 48e3, channelCount: 2, bitrate: 192 }],
      ]),
      Tu = /* @__PURE__ */ new Map(),
      TG =
        ((CA = Gn(Zo)),
        (AA = Gn(Zo)),
        (xA = Gn(Zo)),
        (OA = Gn(Zo)),
        (PA = Gr.apply(void 0, Ze(Tr.LOCAL_STREAM.switchDevice))),
        (DA = Gr(Tr.STREAM.addTrack)),
        (NA = Gr(Tr.STREAM.removeTrack)),
        (LA = Gr(Tr.STREAM.replaceTrack)),
        (MA = dl({
          retries: 10,
          timeout: 3e3,
          onRetryFailed: function (e) {
            gt.logFailedEvent({
              userId: this.client_ ? this.client_.getUserId() : this.userId_,
              eventType: OT,
              error: e,
            }),
              this.emitter_.emit(
                r1,
                new De({
                  code: Oe.DEVICE_AUTO_RECOVER_FAILED,
                  message: e.message,
                })
              );
          },
        })),
        (UA = Nv(Tr.LOCAL_STREAM.setAudioCaptureVolume)),
        (VA = Gn(Zo)),
        (kn = (function (u) {
          be(F, u);
          var e,
            n,
            a,
            c,
            s,
            l,
            h,
            v,
            g,
            _,
            b,
            C,
            N,
            z = Tt(F);
          function F(U) {
            var E;
            B(this, F);
            var A = p(p({}, U), { isRemote: !1, type: "local" });
            return (
              ((E = z.call(this, A)).name_ = Zo),
              (E.client_ = null),
              (E.video_ = U.video),
              (E.audio_ = U.audio),
              (E.cameraId_ = U.cameraId),
              (E.cameraGroupId_ = ""),
              (E.facingMode_ = U.facingMode),
              (E.microphoneId_ = U.microphoneId),
              (E.microphoneGroupId_ = ""),
              (E.microphoneLabel_ = ""),
              (E.videoSource_ = U.videoSource),
              (E.audioSource_ = U.audioSource),
              (E.screen_ = U.screen),
              (E.screenAudio_ = U.screenAudio),
              (E.audioProfile_ = {
                echoCancellation: !0,
                autoGainControl: !0,
                noiseSuppression: !0,
                sampleRate: 48e3,
                channelCount: 1,
                bitrate: 40,
              }),
              E.screenAudio_ &&
                ((E.audioProfile_.echoCancellation = !0),
                (E.audioProfile_.autoGainControl = !1),
                (E.audioProfile_.noiseSuppression = !1)),
              Ji(U.echoCancellation) &&
                (E.audioProfile_.echoCancellation = U.echoCancellation),
              Ji(U.autoGainControl) &&
                (E.audioProfile_.autoGainControl = U.autoGainControl),
              Ji(U.noiseSuppression) &&
                (E.audioProfile_.noiseSuppression = U.noiseSuppression),
              (E.videoProfile_ = kb.get("480p_2")),
              (E.screenProfile_ = Tb.get("1080p")),
              (E.videoSetting_ = null),
              (E.muteState_ = { video: !1, audio: !1, auxVideo: !1 }),
              (E.beautyStatus_ = !1),
              (E.prevAudioRecoverTime_ = 0),
              (E.prevVideoRecoverTime_ = 0),
              (E.isAudioRecovering_ = !1),
              (E.isVideoRecovering_ = !1),
              E.initState(),
              (E.canvas_ = null),
              (E.canvasInterval_ = null),
              (E.canvasTrack_ = null),
              (E.gain_ = { audioTrack: null, source: null, gainNode: null }),
              (E.captureVolume_ = 100),
              (E.enableAutoRecoverCapture_ =
                !!ht(U.enableAutoRecoverCapture) || U.enableAutoRecoverCapture),
              (E.enableAutoRecoverOther_ =
                !Ji(U.enableAutoRecoverOther) || U.enableAutoRecoverOther),
              E.log_.info(
                "stream created: "
                  .concat(E.id_, " autoRecover: ")
                  .concat(E.enableAutoRecoverCapture_)
              ),
              (E.isAIDenoiser = !1),
              E
            );
          }
          return (
            oe(F, [
              {
                key: "scaleResolutionDownBy",
                get: function () {
                  var E = this.getVideoTrack();
                  if (!E || !mu || this.isScreenShare()) return 1;
                  var A,
                    L,
                    $,
                    te = E.getSettings();
                  return te.width === this.videoProfile_.width &&
                    te.height === this.videoProfile_.height
                    ? 1
                    : (A = window.screen) !== null &&
                      A !== void 0 &&
                      (L = A.orientation) !== null &&
                      L !== void 0 &&
                      ($ = L.type) !== null &&
                      $ !== void 0 &&
                      $.includes("portrait") &&
                      this.videoProfile_.width > this.videoProfile_.height &&
                      te.height > te.width
                    ? Math.max(
                        te.width / this.videoProfile_.height,
                        te.height / this.videoProfile_.width,
                        1
                      )
                    : Math.max(
                        te.width / this.videoProfile_.width,
                        te.height / this.videoProfile_.height,
                        1
                      );
                },
              },
              {
                key: "initState",
                value: function () {
                  (this.isAddingTrack_ = !1),
                    (this.isRemovingTrack_ = !1),
                    this.setIsReadyToPublish(!1),
                    this.setPublishState(jT);
                },
              },
              {
                key: "installEvents",
                value: function () {
                  yt(Ie(F.prototype), "installEvents", this).call(this),
                    Ee.on(Ty, this.onVideoTrackStopped, this),
                    Ee.on(Xd, this.onVideoTrackStopped, this),
                    Ee.on(Iy, this.onAudioTrackStopped, this),
                    Ee.on(Ey, this.onAudioTrackStopped, this);
                },
              },
              {
                key: "uninstallEvents",
                value: function () {
                  yt(Ie(F.prototype), "uninstallEvents", this).call(this),
                    Ee.off(Ty, this.onVideoTrackStopped, this),
                    Ee.off(Xd, this.onVideoTrackStopped, this),
                    Ee.off(Iy, this.onAudioTrackStopped, this),
                    Ee.off(Ey, this.onAudioTrackStopped, this);
                },
              },
              {
                key: "initialize",
                value: function () {
                  var E = this;
                  return new Promise(function (A, L) {
                    if (nv())
                      L(
                        new De({
                          code: Oe.INVALID_OPERATION,
                          message: Fe({ key: lE }),
                        })
                      );
                    else {
                      if (ht(E.audio_)) {
                        var $ = new MediaStream();
                        return (
                          ht(E.audioSource_) ||
                            ($.addTrack(E.audioSource_),
                            E.updateAudioPlayingState(!0)),
                          ht(E.videoSource_) ||
                            ($.addTrack(E.videoSource_),
                            E.updateVideoPlayingState(!0)),
                          E.setMediaStream($),
                          gt.logSuccessEvent({
                            userId: E.client_
                              ? E.client_.getUserId()
                              : E.userId_,
                            eventType: Kd,
                            kind: "custom",
                          }),
                          E.setIsReadyToPublish(!0),
                          A()
                        );
                      }
                      E.screen_
                        ? (E.log_.info(
                            "initialize stream audio: " +
                              E.audio_ +
                              " screenAudio: " +
                              E.screenAudio_ +
                              " screen: " +
                              E.screen_
                          ),
                          kG({
                            audio: E.audio_,
                            screenAudio: E.screenAudio_,
                            microphoneId: E.microphoneId_,
                            width: E.screenProfile_.width,
                            height: E.screenProfile_.height,
                            frameRate: E.screenProfile_.frameRate,
                            sampleRate: E.audioProfile_.sampleRate,
                            channelCount: E.audioProfile_.channelCount,
                            autoGainControl: E.audioProfile_.autoGainControl,
                            noiseSuppression: E.audioProfile_.noiseSuppression,
                            echoCancellation: E.audioProfile_.echoCancellation,
                          })
                            .then(function (te) {
                              E.setMediaStream(te),
                                E.updateAudioPlayingState(
                                  E.audio_ || E.screenAudio_
                                ),
                                E.updateVideoPlayingState(!0);
                              var X = E.getVideoTrack();
                              return (
                                X.applyConstraints &&
                                  X.applyConstraints({
                                    frameRate: {
                                      min: E.screenProfile_.frameRate,
                                      ideal: E.screenProfile_.frameRate,
                                    },
                                    width: E.screenProfile_.width,
                                    height: E.screenProfile_.height,
                                  }).catch(function (D) {
                                    E.warn(
                                      "screen applyConstraints failed: ".concat(
                                        D
                                      )
                                    );
                                  }),
                                E.listenForScreenSharingStopped(X),
                                E.setVideoContentHint(lT),
                                E.updateDeviceIdInUse(),
                                E.setIsReadyToPublish(!0),
                                E.log_.info(JSON.stringify(X.getSettings())),
                                gt.logSuccessEvent({
                                  userId: E.client_
                                    ? E.client_.getUserId()
                                    : E.userId_,
                                  eventType: Kd,
                                  kind: "getDisplayMedia",
                                }),
                                A()
                              );
                            })
                            .catch(function (te) {
                              gt.logFailedEvent({
                                userId: E.client_
                                  ? E.client_.getUserId()
                                  : E.userId_,
                                eventType: Kd,
                                kind: "getDisplayMedia",
                                error: te,
                              }),
                                E.log_.error(
                                  "getDisplayMedia error observed " + te
                                ),
                                L(
                                  te instanceof De
                                    ? te
                                    : new De({
                                        code: Oe.INITIALIZE_FAILED,
                                        name: te.name,
                                        message: te.message,
                                      })
                                );
                            }))
                        : (Ee.emit(gy, {
                            stream: E,
                            audio: E.audio_,
                            video: E.video_,
                          }),
                          E.log_.info(
                            "initialize stream audio: " +
                              E.audio_ +
                              " video: " +
                              E.video_
                          ),
                          Sb({
                            audio: E.audio_,
                            video: E.video_,
                            facingMode: E.facingMode_,
                            cameraId: E.cameraId_,
                            microphoneId: E.microphoneId_,
                            width: E.videoProfile_.width,
                            height: E.videoProfile_.height,
                            frameRate: E.videoProfile_.frameRate,
                            sampleRate: E.audioProfile_.sampleRate,
                            channelCount: E.audioProfile_.channelCount,
                            autoGainControl: E.audioProfile_.autoGainControl,
                            noiseSuppression: E.audioProfile_.noiseSuppression,
                            echoCancellation: E.audioProfile_.echoCancellation,
                            useExact: !0,
                            retryWhenExactFailed: !0,
                          })
                            .then(function (te) {
                              return (
                                Ee.emit(_y, {
                                  stream: E,
                                  audio: E.audio_,
                                  video: E.video_,
                                }),
                                E.setMediaStream(te),
                                te.getTracks().forEach(function (X) {
                                  if (mu) {
                                    var D = X.getSettings();
                                    E.log_.debug(
                                      ""
                                        .concat(X.kind, " settings: ")
                                        .concat(JSON.stringify(D))
                                    ),
                                      X.kind === wt && (E.videoSetting_ = D);
                                  }
                                  JF &&
                                    E.log_.info(
                                      ""
                                        .concat(X.kind, " capabilities: ")
                                        .concat(Wc(X.getCapabilities(), x0))
                                    );
                                }),
                                E.updateAudioPlayingState(E.audio_),
                                E.updateVideoPlayingState(E.video_),
                                E.updateDeviceIdInUse(),
                                E.log_.info(
                                  "gotStream hasAudio: " +
                                    E.hasAudio() +
                                    " hasVideo: " +
                                    E.hasVideo()
                                ),
                                E.setIsReadyToPublish(!0),
                                gt.logSuccessEvent({
                                  userId: E.client_
                                    ? E.client_.getUserId()
                                    : E.userId_,
                                  eventType: Kd,
                                  kind: "getUserMedia",
                                }),
                                A()
                              );
                            })
                            .catch(function (te) {
                              Ee.emit(yy, {
                                stream: E,
                                audio: E.audio_,
                                video: E.video_,
                                error: te,
                              }),
                                gt.logFailedEvent({
                                  userId: E.client_
                                    ? E.client_.getUserId()
                                    : E.userId_,
                                  eventType: Kd,
                                  kind: "getUserMedia",
                                  error: te,
                                }),
                                E.log_.error(
                                  "getUserMedia error observed " + te
                                ),
                                L(te);
                            }));
                    }
                  });
                },
              },
              {
                key: "listenForScreenSharingStopped",
                value: function (E) {
                  var A = this;
                  E.addEventListener("ended", function (L) {
                    A.log_.info(
                      "screen sharing was stopped because the video track is ended"
                    ),
                      A.emitter_.emit(YF);
                  });
                },
              },
              {
                key: "muteAudio",
                value: function () {
                  var E = yt(Ie(F.prototype), "muteAudio", this).call(this);
                  return (
                    E &&
                      (this.log_.info("localStream mute audio"),
                      this.sendMutedFlag(Ct, !0)),
                    E
                  );
                },
              },
              {
                key: "muteVideo",
                value: function () {
                  var E = yt(Ie(F.prototype), "muteVideo", this).call(this);
                  return (
                    E &&
                      (this.log_.info("localStream mute video"),
                      this.sendMutedFlag(wt, !0)),
                    E
                  );
                },
              },
              {
                key: "unmuteAudio",
                value: function () {
                  var E = yt(Ie(F.prototype), "unmuteAudio", this).call(this);
                  return (
                    E &&
                      (this.log_.info("localStream unmute audio"),
                      this.sendMutedFlag(Ct, !1)),
                    E
                  );
                },
              },
              {
                key: "unmuteVideo",
                value: function () {
                  var E = yt(Ie(F.prototype), "unmuteVideo", this).call(this);
                  return (
                    E &&
                      (this.log_.info("localStream unmute video"),
                      this.sendMutedFlag(wt, !1)),
                    E
                  );
                },
              },
              {
                key: "sendMutedFlag",
                value: function (E, A) {
                  this.setMuteState(E, A);
                  var L = this.getConnection();
                  if (L) {
                    L.sendMutedFlag(this.muteState_, this);
                    var $ = L.getUserId(),
                      te = L.getTinyId(),
                      X = "".concat(A ? Ar : Ca, " local ").concat(E, " track");
                    Xr($, {
                      eventId: E === Ct ? (A ? U9 : F9) : A ? V9 : j9,
                      eventDesc: X,
                      timestamp: Ur(),
                      userId: $,
                      tinyId: te,
                    });
                  }
                },
              },
              {
                key: "setMuteState",
                value: function (E, A) {
                  (this.muteState_[E] = A),
                    this.log_.info(
                      "set "
                        .concat(E, " muted state: [")
                        .concat(A ? "mute" : "unmute", "]")
                    );
                },
              },
              {
                key: "setAudioProfile",
                value:
                  ((N = I(
                    m().mark(function U(E) {
                      var A, L, $;
                      return m().wrap(
                        function (te) {
                          for (;;)
                            switch ((te.prev = te.next)) {
                              case 0:
                                if (
                                  (S(E) === "object"
                                    ? (A = E)
                                    : (A = jA.get(E)) === void 0 &&
                                      (A = jA.get("standard")),
                                  this.log_.info(
                                    "setAudioProfile: " + JSON.stringify(A)
                                  ),
                                  !(L = this.getAudioTrack()))
                                ) {
                                  te.next = 6;
                                  break;
                                }
                                return (te.next = 6), L.applyConstraints(A);
                              case 6:
                                if (
                                  (($ =
                                    this.audioProfile_.bitrate !== A.bitrate),
                                  (this.audioProfile_ = p(
                                    p({}, this.audioProfile_),
                                    A
                                  )),
                                  !$ || !this.connection_)
                                ) {
                                  te.next = 12;
                                  break;
                                }
                                return (
                                  (te.next = 11),
                                  this.connection_.setBandwidth({
                                    bandwidth: this.audioProfile_.bitrate,
                                    type: Ct,
                                  })
                                );
                              case 11:
                                this.connection_.sendMediaSettings(this);
                              case 12:
                              case "end":
                                return te.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function (U) {
                    return N.apply(this, arguments);
                  }),
              },
              {
                key: "setVideoProfile",
                value:
                  ((C = I(
                    m().mark(function U(E) {
                      var A, L, $, te;
                      return m().wrap(
                        function (X) {
                          for (;;)
                            switch ((X.prev = X.next)) {
                              case 0:
                                if (!this.connection_ || UI()) {
                                  X.next = 2;
                                  break;
                                }
                                throw new De({
                                  code: Oe.NOT_SUPPORTED,
                                  message: Fe({ key: DU }),
                                });
                              case 2:
                                if (
                                  (ts(E)
                                    ? (L = p(p({}, this.videoProfile_), E))
                                    : vr(E) &&
                                      ((L = kb.get(E)),
                                      ht(L) && (L = kb.get("480p_2"))),
                                  (A = this.client_) !== null &&
                                    A !== void 0 &&
                                    A.get2k4kFlag() &&
                                    (this.client_.get2k4kFlag() !== 1 &&
                                    !this.screen_ &&
                                    L.height * L.width >= 3686400
                                      ? ((L.width = 1920),
                                        (L.height = 1080),
                                        this.log_.warn(QT))
                                      : ds.handleFunctionState({
                                          fnName: "2K_4K",
                                        })),
                                  L &&
                                    L.width * L.height > 921600 &&
                                    bV &&
                                    ((L.width = 1280),
                                    (L.height = 720),
                                    this.log_.warn(
                                      "reset to 1280 * 720 on iOS 13~14"
                                    )),
                                  this.log_.info(
                                    "setVideoProfile " + JSON.stringify(L)
                                  ),
                                  !($ = this.getVideoTrack()))
                                ) {
                                  X.next = 10;
                                  break;
                                }
                                return (X.next = 10), $.applyConstraints(L);
                              case 10:
                                if (
                                  ((te =
                                    this.videoProfile_.bitrate !== L.bitrate),
                                  (this.videoProfile_ = L),
                                  !te || !this.connection_)
                                ) {
                                  X.next = 16;
                                  break;
                                }
                                return (
                                  (X.next = 15),
                                  this.connection_.setBandwidth({
                                    bandwidth: L.bitrate,
                                    type: wt,
                                    videoType: Tp,
                                  })
                                );
                              case 15:
                                this.connection_.sendMediaSettings(this);
                              case 16:
                              case "end":
                                return X.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function (U) {
                    return C.apply(this, arguments);
                  }),
              },
              {
                key: "getVideoBitrate",
                value: function () {
                  return this.screen_
                    ? this.screenProfile_.bitrate
                    : this.videoProfile_.bitrate;
                },
              },
              {
                key: "getAudioBitrate",
                value: function () {
                  return this.audioProfile_.bitrate;
                },
              },
              {
                key: "setScreenProfile",
                value: function (E) {
                  var A = E;
                  vr(E) && (A = Tb.get(E) || Tb.get("1080p")),
                    this.log_.info("setScreenProfile " + JSON.stringify(E)),
                    (this.screenProfile_ = A);
                },
              },
              {
                key: "getVideoProfile",
                value: function () {
                  return this.screen_
                    ? this.screenProfile_
                    : this.videoProfile_;
                },
              },
              {
                key: "getAudioProfile",
                value: function () {
                  return this.audioProfile_;
                },
              },
              {
                key: "setVideoContentHint",
                value: function (E) {
                  var A = this.getVideoTrack();
                  A &&
                    "contentHint" in A &&
                    (this.log_.info("set video track contentHint to: " + E),
                    (A.contentHint = E),
                    A.contentHint !== E &&
                      this.log_.warn("Invalid video track contentHint: " + E));
                },
              },
              {
                key: "switchDevice",
                value:
                  ((b = I(
                    m().mark(function U(E, A) {
                      var L,
                        $,
                        te,
                        X,
                        D,
                        M,
                        W,
                        G,
                        ne,
                        H,
                        R,
                        w,
                        q,
                        J,
                        re,
                        pe,
                        ye,
                        Ne;
                      return m().wrap(
                        function (Ve) {
                          for (;;)
                            switch ((Ve.prev = Ve.next)) {
                              case 0:
                                if (
                                  this.mediaStream_ &&
                                  this.cameraId_ !== A &&
                                  this.facingMode_ !== A
                                ) {
                                  Ve.next = 2;
                                  break;
                                }
                                return Ve.abrupt("return");
                              case 2:
                                if (
                                  (($ = E === wt),
                                  !(L = E === Ct) || A !== this.microphoneId_)
                                ) {
                                  Ve.next = 11;
                                  break;
                                }
                                if (A === Pp) {
                                  Ve.next = 7;
                                  break;
                                }
                                return Ve.abrupt("return");
                              case 7:
                                return (
                                  (Ve.next = 9),
                                  ij(
                                    this.microphoneGroupId_,
                                    this.microphoneLabel_
                                  )
                                );
                              case 9:
                                if (!Ve.sent) {
                                  Ve.next = 11;
                                  break;
                                }
                                return Ve.abrupt("return");
                              case 11:
                                return (
                                  this.setIsReadyToPublish(!1),
                                  this.log_.info(
                                    "switchDevice " + E + " to: " + A
                                  ),
                                  L &&
                                    ((te = this.getAudioTrack()),
                                    (X = this.getMicrophoneTrackMixed()),
                                    te && te.stop(),
                                    X && X.stop()),
                                  $ &&
                                    ((D = this.getVideoTrack()) && D.stop(),
                                    $0 &&
                                      (M = this.getAudioTrack()) &&
                                      (this.log_.info(
                                        "stop audio track first in huawei env"
                                      ),
                                      M.stop())),
                                  (Ve.prev = 15),
                                  (Ve.next = 18),
                                  Sb({
                                    audio: L || $0,
                                    video: $,
                                    facingMode:
                                      A === uT || A === cT ? A : void 0,
                                    cameraId: $ ? A : this.cameraId_,
                                    microphoneId: L ? A : this.microphoneId_,
                                    width: this.videoProfile_.width,
                                    height: this.videoProfile_.height,
                                    frameRate: this.videoProfile_.frameRate,
                                    sampleRate: this.audioProfile_.sampleRate,
                                    channelCount:
                                      this.audioProfile_.channelCount,
                                    autoGainControl:
                                      this.audioProfile_.autoGainControl,
                                    noiseSuppression:
                                      this.audioProfile_.noiseSuppression,
                                    echoCancellation:
                                      this.audioProfile_.echoCancellation,
                                    useExact: !0,
                                    retryWhenExactFailed: !1,
                                  })
                                );
                              case 18:
                                if (((W = Ve.sent), (G = null), !L)) {
                                  Ve.next = 34;
                                  break;
                                }
                                if (
                                  !(ne = W.getAudioTracks()[0]) ||
                                  !this.isAudioTrackMixed()
                                ) {
                                  Ve.next = 31;
                                  break;
                                }
                                return (
                                  (H = this.getAudioTrack()),
                                  (R = $n.AudioMixerPlugin.getAudioTrackMap()),
                                  (Ve.next = 27),
                                  $n.AudioMixerPlugin.mix({
                                    targetTrack: ne,
                                    sourceList: R.get(H.id).sourceList,
                                    trackList: R.get(H.id).trackList,
                                  })
                                );
                              case 27:
                                (w = Ve.sent), (G = w), (Ve.next = 32);
                                break;
                              case 31:
                                G = ne;
                              case 32:
                                Ve.next = 43;
                                break;
                              case 34:
                                if (
                                  !(G = W.getVideoTracks()[0]) ||
                                  !this.isVideoTrackBeautified()
                                ) {
                                  Ve.next = 39;
                                  break;
                                }
                                return (
                                  (Ve.next = 38), this.generateBeautyTrack(G)
                                );
                              case 38:
                                G = Ve.sent;
                              case 39:
                                if (!(q = W.getAudioTracks()[0]) || !$0) {
                                  Ve.next = 43;
                                  break;
                                }
                                return (Ve.next = 43), this.replaceTrack(q);
                              case 43:
                                return (Ve.next = 45), this.replaceTrack(G);
                              case 45:
                                (J = this.getConnection()) &&
                                  ((re = J.getUserId()),
                                  (pe = J.getTinyId()),
                                  (ye = z9),
                                  (Ne = "switch camera"),
                                  L && ((ye = H9), (Ne = "switch microphone")),
                                  Xr(re, {
                                    eventId: ye,
                                    eventDesc: Ne,
                                    timestamp: Ur(),
                                    userId: re,
                                    tinyId: pe,
                                  })),
                                  this.log_.info(
                                    "switch ".concat(
                                      L ? "microphone" : "camera",
                                      " success "
                                    )
                                  ),
                                  L && (this.audio_ = !0),
                                  $ &&
                                    ((this.video_ = !0),
                                    (this.facingMode_ =
                                      A === cT || A === uT ? A : "")),
                                  this.updateDeviceIdInUse(),
                                  this.setIsReadyToPublish(!0),
                                  (Ve.next = 59);
                                break;
                              case 54:
                                throw (
                                  ((Ve.prev = 54),
                                  (Ve.t0 = Ve.catch(15)),
                                  this.log_.error(Ve.t0),
                                  L
                                    ? this.recoverCapture({
                                        audio: !0,
                                        video: !1,
                                        microphoneId: this.microphoneId_,
                                      })
                                    : this.recoverCapture({
                                        audio: !1,
                                        video: !0,
                                        cameraId: this.cameraId_,
                                        facingMode: this.facingMode_,
                                      }),
                                  Ve.t0)
                                );
                              case 59:
                              case "end":
                                return Ve.stop();
                            }
                        },
                        U,
                        this,
                        [[15, 54]]
                      );
                    })
                  )),
                  function (U, E) {
                    return b.apply(this, arguments);
                  }),
              },
              {
                key: "addTrack",
                value:
                  ((_ = I(
                    m().mark(function U(E) {
                      var A, L, $;
                      return m().wrap(
                        function (te) {
                          for (;;)
                            switch ((te.prev = te.next)) {
                              case 0:
                                if (
                                  ((te.prev = 0),
                                  E.kind === wt &&
                                    mu &&
                                    ((A = E.getSettings()),
                                    !this.videoSetting_ ||
                                      (A.width === this.videoSetting_.width &&
                                        A.height ===
                                          this.videoSetting_.height) ||
                                      this.log_.warn(
                                        "video resolution of the track ("
                                          .concat(A.width, " x ")
                                          .concat(
                                            A.height,
                                            ") shall be kept the same as the previous: "
                                          )
                                          .concat(
                                            this.videoSetting_.width,
                                            " x "
                                          )
                                          .concat(
                                            this.videoSetting_.height,
                                            ". It may cause abnormal Cloud Recording."
                                          )
                                      )),
                                  (this.isAddingTrack_ = !0),
                                  this.keepMuteState(E),
                                  this.mediaStream_.addTrack(E),
                                  !(L = this.getConnection()))
                                ) {
                                  te.next = 11;
                                  break;
                                }
                                return (
                                  ($ = null),
                                  E.kind === wt &&
                                    (Hp || zp) &&
                                    DE(E) &&
                                    ($ = this.getCanvasTrack()),
                                  (te.next = 11),
                                  L.addTrack($ || E, this)
                                );
                              case 11:
                                E.kind === Ct
                                  ? ((this.audio_ = !0),
                                    this.updateAudioPlayingState(!0),
                                    this.captureVolume_ !== 100 &&
                                      this.setAudioCaptureVolume(
                                        this.captureVolume_
                                      ))
                                  : ((this.video_ = !0),
                                    this.updateVideoPlayingState(!0)),
                                  (this.isAddingTrack_ = !1),
                                  (te.next = 20);
                                break;
                              case 15:
                                throw (
                                  ((te.prev = 15),
                                  (te.t0 = te.catch(0)),
                                  this.mediaStream_.removeTrack(E),
                                  (this.isAddingTrack_ = !1),
                                  te.t0)
                                );
                              case 20:
                              case "end":
                                return te.stop();
                            }
                        },
                        U,
                        this,
                        [[0, 15]]
                      );
                    })
                  )),
                  function (U) {
                    return _.apply(this, arguments);
                  }),
              },
              {
                key: "removeTrack",
                value:
                  ((g = I(
                    m().mark(function U(E) {
                      var A;
                      return m().wrap(
                        function (L) {
                          for (;;)
                            switch ((L.prev = L.next)) {
                              case 0:
                                if (
                                  ((L.prev = 0),
                                  (this.isRemovingTrack_ = !0),
                                  !(A = this.getConnection()))
                                ) {
                                  L.next = 17;
                                  break;
                                }
                                if (
                                  E.kind !== wt ||
                                  (!Hp && !zp) ||
                                  !this.canvasTrack_
                                ) {
                                  L.next = 10;
                                  break;
                                }
                                return (
                                  (L.next = 7),
                                  A.removeTrack(this.canvasTrack_, this)
                                );
                              case 7:
                                this.clearCanvas(), (L.next = 17);
                                break;
                              case 10:
                                if (E.kind !== Ct || !this.gain_.audioTrack) {
                                  L.next = 15;
                                  break;
                                }
                                return (
                                  (L.next = 13),
                                  A.removeTrack(this.gain_.audioTrack, this)
                                );
                              case 13:
                                L.next = 17;
                                break;
                              case 15:
                                return (L.next = 17), A.removeTrack(E, this);
                              case 17:
                                this.mediaStream_.removeTrack(E),
                                  E.kind === Ct
                                    ? ((this.audio_ = !1),
                                      this.updateAudioPlayingState(!1),
                                      this.stopGainNode())
                                    : ((this.video_ = !1),
                                      this.updateVideoPlayingState(!1)),
                                  (this.isRemovingTrack_ = !1),
                                  (L.next = 26);
                                break;
                              case 22:
                                throw (
                                  ((L.prev = 22),
                                  (L.t0 = L.catch(0)),
                                  (this.isRemovingTrack_ = !1),
                                  L.t0)
                                );
                              case 26:
                              case "end":
                                return L.stop();
                            }
                        },
                        U,
                        this,
                        [[0, 22]]
                      );
                    })
                  )),
                  function (U) {
                    return g.apply(this, arguments);
                  }),
              },
              {
                key: "replaceTrack",
                value:
                  ((v = I(
                    m().mark(function U(E) {
                      var A, L, $;
                      return m().wrap(
                        function (te) {
                          for (;;)
                            switch ((te.prev = te.next)) {
                              case 0:
                                if (
                                  (E.kind === wt &&
                                    mu &&
                                    ((A = E.getSettings()),
                                    !this.videoSetting_ ||
                                      (A.width === this.videoSetting_.width &&
                                        A.height ===
                                          this.videoSetting_.height) ||
                                      this.log_.warn(
                                        "video resolution of the track ("
                                          .concat(A.width, " x ")
                                          .concat(
                                            A.height,
                                            ") shall be kept the same as the previous: "
                                          )
                                          .concat(
                                            this.videoSetting_.width,
                                            " x "
                                          )
                                          .concat(
                                            this.videoSetting_.height,
                                            ". It may cause abnormal Cloud Recording."
                                          )
                                      )),
                                  this.keepMuteState(E),
                                  (L = this.mediaStream_),
                                  E.kind !== Ct)
                                ) {
                                  te.next = 12;
                                  break;
                                }
                                if (
                                  (L.removeTrack(L.getAudioTracks()[0]),
                                  L.addTrack(E),
                                  yt(
                                    Ie(F.prototype),
                                    "restartAudio",
                                    this
                                  ).call(this),
                                  !this.gain_.gainNode)
                                ) {
                                  te.next = 10;
                                  break;
                                }
                                return (
                                  this.reconnectGainNode(E), te.abrupt("return")
                                );
                              case 10:
                                te.next = 15;
                                break;
                              case 12:
                                L.removeTrack(L.getVideoTracks()[0]),
                                  L.addTrack(E),
                                  yt(
                                    Ie(F.prototype),
                                    "restartVideo",
                                    this
                                  ).call(this);
                              case 15:
                                if (!($ = this.getConnection())) {
                                  te.next = 21;
                                  break;
                                }
                                if (
                                  E.kind !== wt ||
                                  (!Hp && !zp) ||
                                  !this.canvasTrack_
                                ) {
                                  te.next = 19;
                                  break;
                                }
                                return te.abrupt("return");
                              case 19:
                                return (te.next = 21), $.replaceTrack(E, this);
                              case 21:
                              case "end":
                                return te.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function (U) {
                    return v.apply(this, arguments);
                  }),
              },
              {
                key: "recoverCapture",
                value:
                  ((h = I(
                    m().mark(function U(E) {
                      var A, L, $, te, X, D, M, W, G, ne, H, R, w, q, J, re, pe;
                      return m().wrap(
                        function (ye) {
                          for (;;)
                            switch ((ye.prev = ye.next)) {
                              case 0:
                                if (
                                  !(
                                    !this.mediaStream_ ||
                                    !this.enableAutoRecoverCapture_ ||
                                    (E.audio &&
                                      !E.video &&
                                      this.isAudioRecovering_) ||
                                    (E.video &&
                                      !E.audio &&
                                      this.isVideoRecovering_)
                                  )
                                ) {
                                  ye.next = 2;
                                  break;
                                }
                                return ye.abrupt("return");
                              case 2:
                                return (
                                  E.audio && (this.isAudioRecovering_ = !0),
                                  E.video && (this.isVideoRecovering_ = !0),
                                  this.log_.warn(
                                    "recoverCapture() trying " +
                                      JSON.stringify(E)
                                  ),
                                  (A = this.audio_ && E.audio),
                                  (L = this.video_ && E.video),
                                  (ye.prev = 7),
                                  (ye.next = 10),
                                  $n.getCameras()
                                );
                              case 10:
                                return (
                                  ($ = ye.sent),
                                  (ye.next = 13),
                                  $n.getMicrophones()
                                );
                              case 13:
                                if (
                                  ((te = ye.sent),
                                  L &&
                                    $.length === 0 &&
                                    ((L = !1),
                                    this.log_.warn(
                                      "recoverCapture() video flag is true, but no camera detected, set video to false"
                                    )),
                                  A &&
                                    te.length === 0 &&
                                    ((A = !1),
                                    this.log_.warn(
                                      "recoverCapture() audio flag is true, but no microphone detected, set audio to false"
                                    )),
                                  A || L)
                                ) {
                                  ye.next = 21;
                                  break;
                                }
                                return (
                                  E.audio && (this.isAudioRecovering_ = !1),
                                  E.video && (this.isVideoRecovering_ = !1),
                                  this.log_.warn(
                                    "recoverCapture() both audio and video are false, aborted"
                                  ),
                                  ye.abrupt("return")
                                );
                              case 21:
                                return (
                                  (X =
                                    E &&
                                    $.findIndex(function (Ne) {
                                      return Ne.deviceId === E.cameraId;
                                    }) >= 0),
                                  (D =
                                    E &&
                                    te.findIndex(function (Ne) {
                                      return Ne.deviceId === E.microphoneId;
                                    }) >= 0),
                                  A &&
                                    ((M = this.getAudioTrack()) === null ||
                                      M === void 0 ||
                                      M.stop()),
                                  L &&
                                    ((W = this.getVideoTrack()) === null ||
                                      W === void 0 ||
                                      W.stop()),
                                  (ye.next = 27),
                                  Sb({
                                    audio: A,
                                    video: L,
                                    cameraId: X ? E.cameraId : void 0,
                                    microphoneId: D ? E.microphoneId : void 0,
                                    facingMode: this.facingMode_,
                                    width: this.videoProfile_.width,
                                    height: this.videoProfile_.height,
                                    frameRate: this.videoProfile_.frameRate,
                                    sampleRate: this.audioProfile_.sampleRate,
                                    channelCount:
                                      this.audioProfile_.channelCount,
                                    autoGainControl:
                                      this.audioProfile_.autoGainControl,
                                    noiseSuppression:
                                      this.audioProfile_.noiseSuppression,
                                    echoCancellation:
                                      this.audioProfile_.echoCancellation,
                                  })
                                );
                              case 27:
                                (G = ye.sent), (ne = G.getTracks()), (H = 0);
                              case 30:
                                if (!(H < ne.length)) {
                                  ye.next = 59;
                                  break;
                                }
                                if (
                                  (R = ne[H]).kind !== Ct ||
                                  !this.isAudioTrackMixed()
                                ) {
                                  ye.next = 45;
                                  break;
                                }
                                if (
                                  ((w = this.getAudioTrack()),
                                  (q = $n.AudioMixerPlugin.getAudioTrackMap()),
                                  (J = q.get(w.id)).hasMicrophone)
                                ) {
                                  ye.next = 39;
                                  break;
                                }
                                return R.stop(), ye.abrupt("continue", 56);
                              case 39:
                                return (
                                  (ye.next = 41),
                                  $n.AudioMixerPlugin.mix({
                                    targetTrack: R,
                                    sourceList: J.sourceList,
                                    trackList: J.trackList,
                                  })
                                );
                              case 41:
                                return (
                                  (re = ye.sent),
                                  (ye.next = 44),
                                  this.replaceTrack(re)
                                );
                              case 44:
                                return ye.abrupt("continue", 56);
                              case 45:
                                if (
                                  R.kind !== wt ||
                                  !this.isVideoTrackBeautified()
                                ) {
                                  ye.next = 52;
                                  break;
                                }
                                return (
                                  (ye.next = 48), this.generateBeautyTrack(R)
                                );
                              case 48:
                                return (
                                  (pe = ye.sent),
                                  (ye.next = 51),
                                  this.replaceTrack(pe)
                                );
                              case 51:
                                return ye.abrupt("continue", 56);
                              case 52:
                                return (ye.next = 54), this.replaceTrack(R);
                              case 54:
                                if (R.readyState !== "ended") {
                                  ye.next = 56;
                                  break;
                                }
                                throw new Error(
                                  "new track is failed, muted "
                                    .concat(R.muted, " readyState ")
                                    .concat(R.readyState)
                                );
                              case 56:
                                H++, (ye.next = 30);
                                break;
                              case 59:
                                this.updateDeviceIdInUse(),
                                  gt.logSuccessEvent({
                                    userId: this.client_
                                      ? this.client_.getUserId()
                                      : this.userId_,
                                    eventType: OT,
                                  }),
                                  E.audio && (this.isAudioRecovering_ = !1),
                                  E.video && (this.isVideoRecovering_ = !1),
                                  this.log_.warn(
                                    "recoverCapture() successfully"
                                  ),
                                  this.emitter_.emit(QF, {
                                    isCamera: E.video,
                                    isMicrophone: E.audio,
                                    cameraId: this.cameraId_,
                                    microphoneId: this.microphoneId_,
                                  }),
                                  (ye.next = 73);
                                break;
                              case 67:
                                throw (
                                  ((ye.prev = 67),
                                  (ye.t0 = ye.catch(7)),
                                  E.audio && (this.isAudioRecovering_ = !1),
                                  E.video && (this.isVideoRecovering_ = !1),
                                  this.log_.warn(
                                    "recoverCapture() failed, " + ye.t0
                                  ),
                                  ye.t0)
                                );
                              case 73:
                              case "end":
                                return ye.stop();
                            }
                        },
                        U,
                        this,
                        [[7, 67]]
                      );
                    })
                  )),
                  function (U) {
                    return h.apply(this, arguments);
                  }),
              },
              {
                key: "updateDeviceIdInUse",
                value: function () {
                  var E = this;
                  if (!this.mediaStream_)
                    return (
                      (this.cameraId_ = ""),
                      (this.cameraGroupId_ = ""),
                      (this.microphoneId_ = ""),
                      void (this.microphoneGroupId_ = "")
                    );
                  mu &&
                    this.mediaStream_.getTracks().forEach(function ($) {
                      if ($.kind === Ct && E.isAudioTrackMixed()) {
                        var te = E.getMicrophoneTrackMixed();
                        if (te) {
                          var X = te.getSettings(),
                            D = X.deviceId,
                            M = X.groupId;
                          D &&
                            ((E.microphoneId_ = D),
                            (E.microphoneGroupId_ = M),
                            (E.microphoneLabel_ = te.label));
                        }
                      } else if ($.kind === wt && E.isVideoTrackBeautified()) {
                        var W = E.getBeautyOriginTrack();
                        if (W) {
                          var G = W.getSettings(),
                            ne = G.deviceId,
                            H = G.groupId,
                            R = G.facingMode;
                          ne && ((E.cameraId_ = ne), (E.cameraGroupId_ = H)),
                            R && (E.facingMode_ = R);
                        }
                      } else {
                        var w = $.getSettings(),
                          q = w.deviceId,
                          J = w.groupId,
                          re = w.facingMode;
                        q &&
                          ($.kind === Ct
                            ? ((E.microphoneId_ = q),
                              (E.microphoneGroupId_ = J),
                              (E.microphoneLabel_ = $.label))
                            : $.kind !== wt ||
                              E.screen_ ||
                              ((E.cameraId_ = q),
                              (E.cameraGroupId_ = J),
                              re && (E.facingMode_ = re)));
                      }
                    });
                  var A = this.mediaStream_.getAudioTracks(),
                    L = this.mediaStream_.getVideoTracks();
                  A &&
                    A.length === 0 &&
                    ((this.microphoneId_ = ""), (this.microphoneGroupId_ = "")),
                    L &&
                      L.length === 0 &&
                      ((this.cameraId_ = ""), (this.cameraGroupId_ = ""));
                },
              },
              {
                key: "isAudioTrackMixed",
                value: function () {
                  if ($n.AudioMixerPlugin) {
                    var E = $n.AudioMixerPlugin.getAudioTrackMap(),
                      A = this.getAudioTrack();
                    if (E && A && E.has(A.id)) return !0;
                  }
                  return !1;
                },
              },
              {
                key: "getMicrophoneTrackMixed",
                value: function () {
                  if ($n.AudioMixerPlugin) {
                    var E = $n.AudioMixerPlugin.getAudioTrackMap(),
                      A = this.getAudioTrack();
                    if (E && A && E.has(A.id)) {
                      var L = E.get(A.id);
                      return L.hasMicrophone ? L.microphoneTrack : null;
                    }
                  }
                  return null;
                },
              },
              {
                key: "isVideoTrackBeautified",
                value: function () {
                  if ($n.beautyTrackMap) {
                    var E = $n.beautyTrackMap,
                      A = this.getVideoTrack();
                    if (A && E.has(A.id)) return !0;
                  }
                  return !1;
                },
              },
              {
                key: "getBeautyOriginTrack",
                value: function () {
                  if ($n.beautyTrackMap) {
                    var E = $n.beautyTrackMap,
                      A = this.getVideoTrack();
                    if (A && E.has(A.id)) {
                      var L = E.get(A.id);
                      if (L.originTrack) return L.originTrack;
                    }
                  }
                  return null;
                },
              },
              {
                key: "generateBeautyTrack",
                value:
                  ((l = I(
                    m().mark(function U(E) {
                      var A, L, $, te;
                      return m().wrap(
                        function (X) {
                          for (;;)
                            switch ((X.prev = X.next)) {
                              case 0:
                                if (
                                  ((A = null),
                                  (L = this.getVideoTrack()),
                                  ($ = $n.beautyTrackMap.get(L.id)),
                                  (te = $.param),
                                  $.type)
                                ) {
                                  X.next = 8;
                                  break;
                                }
                                (A = $.pluginInstance.generateBeautyTrack(E)),
                                  (X.next = 22);
                                break;
                              case 8:
                                (X.t0 = $.type),
                                  (X.next =
                                    X.t0 === "beauty"
                                      ? 11
                                      : X.t0 === "virtual"
                                      ? 13
                                      : X.t0 === "mixed"
                                      ? 17
                                      : 21);
                                break;
                              case 11:
                                return (
                                  (A = $.pluginInstance.generateBeautyTrack(E)),
                                  X.abrupt("break", 22)
                                );
                              case 13:
                                return (
                                  (X.next = 15),
                                  $.pluginInstance.generateVirtualTrack({
                                    videoTrack: E,
                                    type: te.type,
                                    img: te.img,
                                  })
                                );
                              case 15:
                              case 19:
                                return (A = X.sent), X.abrupt("break", 22);
                              case 17:
                                return (
                                  (X.next = 19),
                                  $.pluginInstance.generateMixedTrack({
                                    videoTrack: E,
                                    type: te.type,
                                    img: te.img,
                                  })
                                );
                              case 21:
                                return X.abrupt("break", 22);
                              case 22:
                                return (
                                  $.pluginInstance.deleteSource(L.id),
                                  this.log_.info(
                                    "regenerate beauty track, track id = ".concat(
                                      E.id
                                    )
                                  ),
                                  X.abrupt("return", A)
                                );
                              case 25:
                              case "end":
                                return X.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function (U) {
                    return l.apply(this, arguments);
                  }),
              },
              {
                key: "getScreen",
                value: function () {
                  return this.screen_;
                },
              },
              {
                key: "hasScreenTrack",
                value: function () {
                  if (this.screen_) return !0;
                  var E = this.getVideoTrack();
                  return !!E && (E.contentHint === lT || E.contentHint === CM);
                },
              },
              {
                key: "getVideo",
                value: function () {
                  return this.video_;
                },
              },
              {
                key: "getAudio",
                value: function () {
                  return this.audio_;
                },
              },
              {
                key: "getCameraId",
                value: function () {
                  return this.cameraId_;
                },
              },
              {
                key: "getMicrophoneId",
                value: function () {
                  return this.microphoneId_;
                },
              },
              {
                key: "getMicrophoneGroupId",
                value: function () {
                  return this.microphoneGroupId_;
                },
              },
              {
                key: "getIsReadyToPublish",
                value: function () {
                  return this.isReadyToPublish_;
                },
              },
              {
                key: "setIsReadyToPublish",
                value: function (E) {
                  this.isReadyToPublish_ = E;
                },
              },
              {
                key: "setPublishState",
                value: function (E) {
                  this.publishState_ = E;
                },
              },
              {
                key: "setBeautyStatus",
                value: function (E) {
                  this.beautyStatus_ = !!E;
                },
              },
              {
                key: "getBeautyStatus",
                value: function () {
                  return this.beautyStatus_;
                },
              },
              {
                key: "syncMuteState",
                value: function () {
                  var E = this.getAudioTrack(),
                    A = this.getVideoTrack();
                  if (E) {
                    var L = !E.enabled;
                    this.setMuteState(Ct, L);
                  }
                  if (A) {
                    var $ = !A.enabled;
                    this.setMuteState(wt, $);
                  }
                  this.connection_ &&
                    this.connection_.sendMutedFlag(this.muteState_, this);
                },
              },
              {
                key: "keepMuteState",
                value: function (E) {
                  E instanceof window.MediaStreamTrack &&
                    this.muteState_[E.kind] &&
                    ((E.enabled = !1),
                    this.log_.warn(
                      "prev ".concat(E.kind, " track is muted, keep mute state")
                    ));
                },
              },
              {
                key: "onVideoTrackStopped",
                value:
                  ((s = I(
                    m().mark(function U(E) {
                      var A,
                        L,
                        $ = this;
                      return m().wrap(
                        function (te) {
                          for (;;)
                            switch ((te.prev = te.next)) {
                              case 0:
                                if (
                                  ((A = E.stream),
                                  (L = E.type),
                                  A === this &&
                                    this.video_ &&
                                    this.cameraId_ &&
                                    rj(this.getVideoTrack()) &&
                                    !this.isVideoRecovering_ &&
                                    (L !== Ar || !Zd || !uu))
                                ) {
                                  te.next = 3;
                                  break;
                                }
                                return te.abrupt("return");
                              case 3:
                                if (
                                  !(
                                    Date.now() - this.prevVideoRecoverTime_ <
                                    Dp
                                  )
                                ) {
                                  te.next = 6;
                                  break;
                                }
                                return (
                                  setTimeout(function () {
                                    return $.onVideoTrackStopped({
                                      stream: A,
                                      type: L,
                                    });
                                  }, Dp),
                                  te.abrupt("return")
                                );
                              case 6:
                                L === Ar
                                  ? setTimeout(function () {
                                      var X = $.getVideoTrack();
                                      X != null &&
                                        X.muted &&
                                        document.visibilityState ===
                                          "visible" &&
                                        $.recoverVideoCapture(L);
                                    }, 5e3)
                                  : this.recoverVideoCapture(L);
                              case 7:
                              case "end":
                                return te.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function (U) {
                    return s.apply(this, arguments);
                  }),
              },
              {
                key: "onAudioTrackStopped",
                value:
                  ((c = I(
                    m().mark(function U(E) {
                      var A,
                        L,
                        $ = this;
                      return m().wrap(
                        function (te) {
                          for (;;)
                            switch ((te.prev = te.next)) {
                              case 0:
                                if (
                                  ((A = E.stream),
                                  (L = E.type),
                                  !(
                                    A !== this ||
                                    !this.audio_ ||
                                    !this.microphoneId_ ||
                                    this.isAudioRecovering_ ||
                                    (L === Ar && Zd && uu)
                                  ))
                                ) {
                                  te.next = 3;
                                  break;
                                }
                                return te.abrupt("return");
                              case 3:
                                if (
                                  !(
                                    Date.now() - this.prevAudioRecoverTime_ <
                                    Dp
                                  )
                                ) {
                                  te.next = 6;
                                  break;
                                }
                                return (
                                  setTimeout(function () {
                                    return $.onAudioTrackStopped({
                                      stream: A,
                                      type: L,
                                    });
                                  }, Dp),
                                  te.abrupt("return")
                                );
                              case 6:
                                L === Ar
                                  ? setTimeout(function () {
                                      var X = $.getAudioTrack();
                                      X != null &&
                                        X.muted &&
                                        document.visibilityState ===
                                          "visible" &&
                                        $.recoverAudioCapture(L);
                                    }, 5e3)
                                  : this.recoverAudioCapture(L);
                              case 7:
                              case "end":
                                return te.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function (U) {
                    return c.apply(this, arguments);
                  }),
              },
              {
                key: "recoverAudioCapture",
                value:
                  ((a = I(
                    m().mark(function U(E) {
                      return m().wrap(
                        function (A) {
                          for (;;)
                            switch ((A.prev = A.next)) {
                              case 0:
                                return (
                                  (this.prevAudioRecoverTime_ = Date.now()),
                                  gt.uploadEvent({
                                    log: "stat-local-audio-".concat(E),
                                    userId: this.userId_,
                                  }),
                                  (A.t0 = this),
                                  (A.next = 5),
                                  this.getRecoverCaptureDeviceId(!1)
                                );
                              case 5:
                                (A.t1 = A.sent),
                                  (A.t2 = {
                                    audio: !0,
                                    video: !1,
                                    microphoneId: A.t1,
                                  }),
                                  A.t0.recoverCapture.call(A.t0, A.t2);
                              case 8:
                              case "end":
                                return A.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function (U) {
                    return a.apply(this, arguments);
                  }),
              },
              {
                key: "recoverVideoCapture",
                value:
                  ((n = I(
                    m().mark(function U(E) {
                      return m().wrap(
                        function (A) {
                          for (;;)
                            switch ((A.prev = A.next)) {
                              case 0:
                                return (
                                  (this.prevVideoRecoverTime_ = Date.now()),
                                  gt.uploadEvent({
                                    log: "stat-local-video-".concat(E),
                                    userId: this.userId_,
                                  }),
                                  (A.t0 = this),
                                  (A.next = 5),
                                  this.getRecoverCaptureDeviceId(!0)
                                );
                              case 5:
                                (A.t1 = A.sent),
                                  (A.t2 = {
                                    audio: !1,
                                    video: !0,
                                    cameraId: A.t1,
                                  }),
                                  A.t0.recoverCapture.call(A.t0, A.t2);
                              case 8:
                              case "end":
                                return A.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function (U) {
                    return n.apply(this, arguments);
                  }),
              },
              {
                key: "getRecoverCaptureDeviceId",
                value:
                  ((e = I(
                    m().mark(function U() {
                      var E,
                        A,
                        L,
                        $,
                        te = arguments;
                      return m().wrap(
                        function (X) {
                          for (;;)
                            switch ((X.prev = X.next)) {
                              case 0:
                                if (
                                  ((E =
                                    !(te.length > 0 && te[0] !== void 0) ||
                                    te[0]),
                                  !(A = E
                                    ? this.cameraId_
                                    : this.microphoneId_) ||
                                    !this.enableAutoRecoverOther_)
                                ) {
                                  X.next = 17;
                                  break;
                                }
                                if (
                                  (Tu.has(A)
                                    ? Tu.set(A, Tu.get(A) + 1)
                                    : Tu.set(A, 1),
                                  !((L = Tu.get(A)) >= 3))
                                ) {
                                  X.next = 17;
                                  break;
                                }
                                if (!E) {
                                  X.next = 12;
                                  break;
                                }
                                return (X.next = 9), $n.getCameras();
                              case 9:
                                (X.t0 = X.sent.find(function (D) {
                                  return !Tu.has(D.deviceId);
                                })),
                                  (X.next = 15);
                                break;
                              case 12:
                                return (X.next = 14), $n.getMicrophones();
                              case 14:
                                X.t0 = X.sent.find(function (D) {
                                  return !Tu.has(D.deviceId);
                                });
                              case 15:
                                ($ = X.t0) &&
                                  (this.log_.warn(
                                    ""
                                      .concat(E ? "camera" : "mic", " ")
                                      .concat(A, " capture fail ")
                                      .concat(L, " times, change new ")
                                      .concat($.deviceId)
                                  ),
                                  (A = $.deviceId));
                              case 17:
                                return X.abrupt("return", A);
                              case 18:
                              case "end":
                                return X.stop();
                            }
                        },
                        U,
                        this
                      );
                    })
                  )),
                  function () {
                    return e.apply(this, arguments);
                  }),
              },
              {
                key: "setAudioVolume",
                value: function (E) {
                  yt(Ie(F.prototype), "setAudioVolume", this).call(this, E);
                },
              },
              {
                key: "clearCanvas",
                value: function () {
                  this.canvasInterval_ &&
                    (Nn.clearTask(this.canvasInterval_),
                    (this.canvasInterval_ = null),
                    (this.canvas_ = null),
                    (this.canvasTrack_ = null));
                },
              },
              {
                key: "getCanvasTrack",
                value: function () {
                  var E = this;
                  if (this.canvasTrack_) return this.canvasTrack_;
                  this.log_.info("gen canvas track");
                  var A = this.getVideoTrack().getSettings(),
                    L = A.width,
                    $ = A.height,
                    te = A.frameRate;
                  this.canvas_ = document.createElement("canvas");
                  var X = this.canvas_.getContext("2d");
                  (this.canvas_.width = L),
                    (this.canvas_.height = $),
                    (this.canvasInterval_ = Nn.run(
                      Np,
                      function () {
                        if (E.hasVideo()) {
                          var M = E.getVideoTrack().getSettings();
                          (M.width === E.canvas_.width &&
                            M.height === E.canvas_.height) ||
                            ((E.canvas_.width = M.width),
                            (E.canvas_.height = M.height));
                        }
                        E.videoPlayer_ &&
                          E.videoPlayer_.element_ &&
                          X.drawImage(
                            E.videoPlayer_.element_,
                            0,
                            0,
                            E.canvas_.width,
                            E.canvas_.height
                          );
                      },
                      { fps: Math.max(15, te) }
                    ));
                  var D = this.canvas_.captureStream();
                  return (
                    (this.canvasTrack_ = D.getVideoTracks()[0]),
                    this.canvasTrack_
                  );
                },
              },
              {
                key: "setClient",
                value: function (E, A) {
                  E &&
                    (this.log_.setUserId(E.getUserId()),
                    this.log_.setSdkAppId(E.getSDKAppId()),
                    A || this.syncMuteState()),
                    (this.client_ = E);
                },
              },
              {
                key: "setAudioCaptureVolume",
                value: function () {
                  var E = this,
                    A =
                      arguments.length > 0 && arguments[0] !== void 0
                        ? arguments[0]
                        : 100;
                  if (!this.hasAudio() || A < 0 || !Xy()) return !1;
                  if (this.captureVolume_ === A) return !0;
                  (this.captureVolume_ = A),
                    this.log_.info("setCaptureVolume " + A),
                    (A /= 100);
                  var L = UE();
                  if (this.gain_.gainNode) this.gain_.gainNode.gain.value = A;
                  else {
                    var $,
                      te = new MediaStream();
                    te.addTrack(this.getAudioTrack());
                    var X = L.createMediaStreamDestination(),
                      D = L.createMediaStreamSource(te),
                      M = L.createGain();
                    (M.gain.value = A), D.connect(M), M.connect(X);
                    var W = X.stream.getAudioTracks()[0],
                      G = function (H) {
                        return E.log_.info("gained audio track ".concat(H));
                      };
                    (W.onmute = function () {
                      return G("muted");
                    }),
                      (W.onunmute = function () {
                        return G("unmuted");
                      }),
                      (W.onended = function () {
                        return G("ended");
                      }),
                      (this.gain_ = { source: D, audioTrack: W, gainNode: M }),
                      ($ = this.connection_) === null ||
                        $ === void 0 ||
                        $.replaceTrack(W),
                      yt(Ie(F.prototype), "restartAudio", this).call(this);
                  }
                  return !0;
                },
              },
              {
                key: "getGainedTrack",
                value: function () {
                  return this.gain_.audioTrack;
                },
              },
              {
                key: "reconnectGainNode",
                value: function (E) {
                  this.log_.warn("reconnect gain node");
                  var A = new MediaStream();
                  A.addTrack(E);
                  var L = UE().createMediaStreamSource(A);
                  L.connect(this.gain_.gainNode),
                    this.gain_.source.disconnect(),
                    (this.gain_.source = L);
                },
              },
              {
                key: "stopGainNode",
                value: function () {
                  var E = this.gain_,
                    A = E.audioTrack,
                    L = E.source,
                    $ = E.gainNode;
                  $ &&
                    (L.disconnect(),
                    $.disconnect(),
                    (A.onmute = null),
                    (A.onunmute = null),
                    (A.onended = null),
                    A.stop(),
                    (this.gain_ = {
                      source: null,
                      gainNode: null,
                      audioTrack: null,
                    })),
                    (this.captureVolume_ = 100);
                },
              },
              {
                key: "close",
                value: function () {
                  this.setIsReadyToPublish(!1),
                    this.stopGainNode(),
                    yt(Ie(F.prototype), "close", this).call(this);
                },
              },
              {
                key: "setIsAIDenoiser",
                value: function (E) {
                  this.isAIDenoiser = E;
                },
              },
            ]),
            F
          );
        })(IA)),
        Be(
          kn.prototype,
          "setAudioProfile",
          [CA],
          Object.getOwnPropertyDescriptor(kn.prototype, "setAudioProfile"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "setVideoProfile",
          [AA],
          Object.getOwnPropertyDescriptor(kn.prototype, "setVideoProfile"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "setScreenProfile",
          [xA],
          Object.getOwnPropertyDescriptor(kn.prototype, "setScreenProfile"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "setVideoContentHint",
          [OA],
          Object.getOwnPropertyDescriptor(kn.prototype, "setVideoContentHint"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "switchDevice",
          [PA],
          Object.getOwnPropertyDescriptor(kn.prototype, "switchDevice"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "addTrack",
          [DA],
          Object.getOwnPropertyDescriptor(kn.prototype, "addTrack"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "removeTrack",
          [NA],
          Object.getOwnPropertyDescriptor(kn.prototype, "removeTrack"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "replaceTrack",
          [LA],
          Object.getOwnPropertyDescriptor(kn.prototype, "replaceTrack"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "recoverCapture",
          [MA],
          Object.getOwnPropertyDescriptor(kn.prototype, "recoverCapture"),
          kn.prototype
        ),
        Be(
          kn.prototype,
          "setAudioCaptureVolume",
          [UA, VA],
          Object.getOwnPropertyDescriptor(
            kn.prototype,
            "setAudioCaptureVolume"
          ),
          kn.prototype
        ),
        kn),
      BA = { voiceActivityDetection: !1 },
      EG =
        ((FA = dl({
          retries: 1,
          timeout: 0,
          onRetrying: function (e) {
            this.log_.warn("connection timeout, retrying [".concat(e, "]"));
          },
          onError: function (e, n, a) {
            e.message.includes("timeout")
              ? (this.reset(), this.initialize(), n())
              : a(e);
          },
        })),
        (bh = (function (u) {
          be(X, u);
          var e,
            n,
            a,
            c,
            s,
            l,
            h,
            v,
            g,
            _,
            b,
            C,
            N,
            z,
            F,
            U,
            E,
            A,
            L,
            $,
            te = Tt(X);
          function X(D) {
            var M;
            return (
              B(this, X),
              ((M = te.call(this, D)).localStream_ = null),
              (M.exchangeSDPTimeout_ = -1),
              (M.localAuxStream_ = null),
              (M.publishingStream_ = null),
              (M.isPublishingAuxStream_ = !1),
              (M.smallGenerator_ = null),
              (M.isSDPExchanging_ = !1),
              (M.ssrc_ = { audio: 0, video: 0, small: 0, auxiliary: 0 }),
              (M.mediaSettings_ = {
                videoCodec: "",
                videoWidth: 0,
                videoHeight: 0,
                videoBps: 0,
                videoFps: 0,
                audioCodec: "opus",
                audioFs: 0,
                audioChannel: 0,
                audioBps: 0,
                smallVideoWidth: 0,
                smallVideoHeight: 0,
                smallVideoFps: 0,
                smallVideoBps: 0,
                auxVideoWidth: 0,
                auxVideoHeight: 0,
                auxVideoFps: 0,
                auxVideoBps: 0,
              }),
              (M.mixedAudioTrack_ = null),
              M
            );
          }
          return (
            oe(X, [
              {
                key: "isMainStreamPublished",
                get: function () {
                  return !!this.localStream_;
                },
              },
              {
                key: "isAuxStreamPublished",
                get: function () {
                  return !!this.localAuxStream_;
                },
              },
              {
                key: "publishState",
                get: function () {
                  var M = this,
                    W = {
                      audio: !1,
                      bigVideo: !1,
                      smallVideo: !1,
                      auxVideo: !1,
                    };
                  if (this.peerConnection_) {
                    var G,
                      ne,
                      H,
                      R,
                      w = this.peerConnection_.getSenders();
                    w &&
                      (as()
                        ? ((W.audio = !(
                            (G = w[0]) === null ||
                            G === void 0 ||
                            !G.track
                          )),
                          (W.bigVideo = !(
                            (ne = w[1]) === null ||
                            ne === void 0 ||
                            !ne.track
                          )),
                          (W.smallVideo = !(
                            (H = w[2]) === null ||
                            H === void 0 ||
                            !H.track
                          )),
                          (W.auxVideo = !(
                            (R = w[3]) === null ||
                            R === void 0 ||
                            !R.track
                          )))
                        : w.forEach(function (q) {
                            q.track &&
                              (q.track.kind === Ct
                                ? (W.audio = !0)
                                : ((W.bigVideo = !0),
                                  M.smallGenerator_ && (W.smallVideo = !0)));
                          }));
                  }
                  return W;
                },
              },
              {
                key: "initialize",
                value: function () {
                  yt(Ie(X.prototype), "initialize", this).call(this),
                    this.installEvents();
                },
              },
              {
                key: "reset",
                value: function () {
                  this.isReconnecting_ && this.stopReconnection(),
                    this.closePeerConnection(),
                    this.uninstallEvents(),
                    this.clearExchangeSDPTimeout(),
                    this.localStream_ && this.localStream_.clearCanvas();
                },
              },
              {
                key: "close",
                value: function () {
                  yt(Ie(X.prototype), "close", this).call(this),
                    this.reset(),
                    this.emitConnectionStateChangedEvent(Vr),
                    this.smallGenerator_ &&
                      (this.smallGenerator_.destroy(),
                      (this.smallGenerator_ = null));
                },
              },
              {
                key: "installEvents",
                value: function () {
                  this.emitter_.on(_n.ERROR, this.handleError, this),
                    this.emitter_.on(
                      _n.CONNECTION_STATE_CHANGED,
                      this.handleConnectionStateChange,
                      this
                    );
                },
              },
              {
                key: "uninstallEvents",
                value: function () {
                  this.emitter_.off(_n.ERROR, this.handleError, this),
                    this.emitter_.off(
                      _n.CONNECTION_STATE_CHANGED,
                      this.handleConnectionStateChange,
                      this
                    );
                },
              },
              {
                key: "publish",
                value:
                  (($ = I(
                    m().mark(function D(M, W) {
                      var G, ne, H, R;
                      return m().wrap(
                        function (w) {
                          for (;;)
                            switch ((w.prev = w.next)) {
                              case 0:
                                if (
                                  ((this.publishingStream_ = M),
                                  (this.isPublishingAuxStream_ = W),
                                  (ne = M.getVideoTrack()),
                                  (H = null),
                                  !ne ||
                                    W ||
                                    !this.client_.getIsEnableSmallStream())
                                ) {
                                  w.next = 9;
                                  break;
                                }
                                return (
                                  (this.smallGenerator_ = new Lv(M)),
                                  (w.next = 8),
                                  this.smallGenerator_.initialize()
                                );
                              case 8:
                                H =
                                  this.smallGenerator_.generateSmallVideoTrack(
                                    this.client_.smallStreamConfig_
                                  );
                              case 9:
                                if (
                                  ((R = M.getVideoProfile()),
                                  !this.client_.get2k4kFlag())
                                ) {
                                  w.next = 18;
                                  break;
                                }
                                if (
                                  this.client_.get2k4kFlag() === 1 ||
                                  M.getScreen() ||
                                  !(R.height * R.width >= 3686400)
                                ) {
                                  w.next = 18;
                                  break;
                                }
                                return (
                                  (R.width = 1920),
                                  (R.height = 1080),
                                  this.log_.warn(QT),
                                  (w.next = 18),
                                  M.setVideoProfile(R)
                                );
                              case 18:
                                if (
                                  !(
                                    Bc &&
                                    zc() === 115 &&
                                    R.width * R.height <= 230400
                                  )
                                ) {
                                  w.next = 22;
                                  break;
                                }
                                return (
                                  this.log_.warn("fallback video to 480p"),
                                  (w.next = 22),
                                  M.setVideoProfile("480p_2")
                                );
                              case 22:
                                if ((this.updateMediaSettings(M, W), !ev())) {
                                  w.next = 33;
                                  break;
                                }
                                if (!Xo || CE !== 11) {
                                  w.next = 29;
                                  break;
                                }
                                return (
                                  (w.next = 27), this.publishByAddTrack(M, H)
                                );
                              case 27:
                                w.next = 31;
                                break;
                              case 29:
                                return (
                                  (w.next = 31),
                                  this.publishByTransceiver(M, H, W)
                                );
                              case 31:
                                w.next = 35;
                                break;
                              case 33:
                                return (
                                  (w.next = 35), this.publishByAddTrack(M, H)
                                );
                              case 35:
                                return (
                                  (this.publishingStream_ = null),
                                  (this.isPublishingAuxStream_ = !1),
                                  W
                                    ? (this.localAuxStream_ = M)
                                    : (this.localStream_ = M),
                                  (G = this.sei_) === null ||
                                    G === void 0 ||
                                    G.handleEncodedStreams(),
                                  w.abrupt("return", M)
                                );
                              case 40:
                              case "end":
                                return w.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M) {
                    return $.apply(this, arguments);
                  }),
              },
              {
                key: "publishByTransceiver",
                value:
                  ((L = I(
                    m().mark(function D(M, W, G) {
                      var ne, H, R, w, q, J, re;
                      return m().wrap(
                        function (pe) {
                          for (;;)
                            switch ((pe.prev = pe.next)) {
                              case 0:
                                if (
                                  (this.log_.info("publish by transceiver"),
                                  (ne = M.getMediaStream()),
                                  (H = M.getAudioTrack()),
                                  (R = M.getVideoTrack()),
                                  (w = null),
                                  (Hp || zp) &&
                                    DE(R) &&
                                    (w = M.getCanvasTrack()),
                                  (q = this.peerConnection_.getTransceivers())
                                    .length !== 0)
                                ) {
                                  pe.next = 16;
                                  break;
                                }
                                return (
                                  this.peerConnection_.addTransceiver(H || Ct, {
                                    direction: Yo,
                                    streams: [ne],
                                  }),
                                  this.peerConnection_.addTransceiver(
                                    G ? wt : w || R || wt,
                                    { direction: Yo, streams: [ne] }
                                  ),
                                  this.peerConnection_.addTransceiver(W || wt, {
                                    direction: Yo,
                                    streams: [ne],
                                  }),
                                  this.peerConnection_.addTransceiver(
                                    G ? w || R : wt,
                                    { direction: Yo, streams: [ne] }
                                  ),
                                  (pe.next = 14),
                                  this.connect()
                                );
                              case 14:
                                pe.next = 46;
                                break;
                              case 16:
                                if (((J = []), !H)) {
                                  pe.next = 29;
                                  break;
                                }
                                if (!q[0].sender.track) {
                                  pe.next = 24;
                                  break;
                                }
                                return (
                                  this.mixAudioTrack(q[0].sender.track, H),
                                  (pe.next = 22),
                                  q[0].sender.replaceTrack(
                                    this.mixedAudioTrack_
                                  )
                                );
                              case 22:
                                pe.next = 27;
                                break;
                              case 24:
                                return (
                                  (pe.next = 26), q[0].sender.replaceTrack(H)
                                );
                              case 26:
                                J.push(0);
                              case 27:
                                return (
                                  (pe.next = 29),
                                  this.setBandwidth({
                                    bandwidth: M.getAudioBitrate(),
                                    type: Ct,
                                  })
                                );
                              case 29:
                                if (!R) {
                                  pe.next = 42;
                                  break;
                                }
                                return (
                                  (re = G ? 3 : 1),
                                  (pe.next = 33),
                                  q[re].sender.replaceTrack(w || R)
                                );
                              case 33:
                                return (
                                  (pe.next = 35),
                                  this.setBandwidth({
                                    bandwidth: M.getVideoBitrate(),
                                    type: wt,
                                    videoType: G ? Vn : Tp,
                                    scaleResolutionDownBy:
                                      M.scaleResolutionDownBy,
                                  })
                                );
                              case 35:
                                if ((J.push(re), !W)) {
                                  pe.next = 42;
                                  break;
                                }
                                return (
                                  (pe.next = 39), q[2].sender.replaceTrack(W)
                                );
                              case 39:
                                return (
                                  (pe.next = 41),
                                  this.setBandwidth({
                                    bandwidth:
                                      this.client_.smallStreamConfig.bitrate,
                                    type: wt,
                                    videoType: oo,
                                  })
                                );
                              case 41:
                                J.push(2);
                              case 42:
                                return (
                                  (pe.next = 44),
                                  this.setTransceiverDirection(Yo, J)
                                );
                              case 44:
                                return (pe.next = 46), this.doPublishChange();
                              case 46:
                              case "end":
                                return pe.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M, W) {
                    return L.apply(this, arguments);
                  }),
              },
              {
                key: "publishByAddTrack",
                value:
                  ((A = I(
                    m().mark(function D(M, W) {
                      var G, ne, H, R;
                      return m().wrap(
                        function (w) {
                          for (;;)
                            switch ((w.prev = w.next)) {
                              case 0:
                                return (
                                  this.log_.info("publish by addtrack"),
                                  (G = M.getMediaStream()),
                                  (ne = M.getAudioTrack()),
                                  (H = M.getVideoTrack()),
                                  ne && this.peerConnection_.addTrack(ne, G),
                                  H &&
                                    (this.peerConnection_.addTrack(H, G),
                                    W &&
                                      ((R = new MediaStream()).addTrack(W),
                                      this.peerConnection_.addTrack(W, R))),
                                  (w.next = 8),
                                  this.connect()
                                );
                              case 8:
                              case "end":
                                return w.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M) {
                    return A.apply(this, arguments);
                  }),
              },
              {
                key: "unpublish",
                value:
                  ((E = I(
                    m().mark(function D(M) {
                      var W, G, ne, H;
                      return m().wrap(
                        function (R) {
                          for (;;)
                            switch ((R.prev = R.next)) {
                              case 0:
                                if (as()) {
                                  R.next = 2;
                                  break;
                                }
                                return R.abrupt("return", this.doUnpublish());
                              case 2:
                                if (
                                  ((W = M.getAudioTrack()),
                                  (G = M === this.localAuxStream_),
                                  (ne = []),
                                  !this.peerConnection_)
                                ) {
                                  R.next = 33;
                                  break;
                                }
                                if (
                                  ((H = this.peerConnection_.getSenders()), !W)
                                ) {
                                  R.next = 18;
                                  break;
                                }
                                if (!this.mixedAudioTrack_) {
                                  R.next = 15;
                                  break;
                                }
                                return (
                                  this.log_.info(
                                    "has mixed audioTrack, use another audioTrack"
                                  ),
                                  (R.next = 12),
                                  H[0].replaceTrack(
                                    G
                                      ? this.localStream_.getAudioTrack()
                                      : this.localAuxStream_.getAudioTrack()
                                  )
                                );
                              case 12:
                                this.destroyMixedAudioTrack(), (R.next = 18);
                                break;
                              case 15:
                                return (R.next = 17), H[0].replaceTrack(null);
                              case 17:
                                ne.push(0);
                              case 18:
                                if (!G) {
                                  R.next = 26;
                                  break;
                                }
                                return (R.next = 21), H[3].replaceTrack(null);
                              case 21:
                                (this.localAuxStream_ = null),
                                  (this.mediaSettings_ = p(
                                    p({}, this.mediaSettings_),
                                    {},
                                    {
                                      auxVideoBps: 0,
                                      auxVideoFps: 0,
                                      auxVideoWidth: 0,
                                      auxVideoHeight: 0,
                                    }
                                  )),
                                  ne.push(3),
                                  (R.next = 33);
                                break;
                              case 26:
                                return (R.next = 28), H[1].replaceTrack(null);
                              case 28:
                                return (R.next = 30), H[2].replaceTrack(null);
                              case 30:
                                (this.localStream_ = null),
                                  (this.mediaSettings_ = p(
                                    p({}, this.mediaSettings_),
                                    {},
                                    {
                                      videoWidth: 0,
                                      videoHeight: 0,
                                      videoBps: 0,
                                      videoFps: 0,
                                      audioFs: 0,
                                      audioChannel: 0,
                                      audioBps: 0,
                                      smallVideoWidth: 0,
                                      smallVideoHeight: 0,
                                      smallVideoFps: 0,
                                      smallVideoBps: 0,
                                    }
                                  )),
                                  ne.push(1, 2);
                              case 33:
                                if (
                                  !this.localStream_ &&
                                  !this.localAuxStream_
                                ) {
                                  R.next = 40;
                                  break;
                                }
                                return (
                                  (R.next = 36),
                                  this.setTransceiverDirection(Uc, ne)
                                );
                              case 36:
                                return (R.next = 38), this.doPublishChange();
                              case 38:
                                R.next = 42;
                                break;
                              case 40:
                                return (R.next = 42), this.doUnpublish();
                              case 42:
                              case "end":
                                return R.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D) {
                    return E.apply(this, arguments);
                  }),
              },
              {
                key: "doPublishChange",
                value:
                  ((U = I(
                    m().mark(function D() {
                      var M, W;
                      return m().wrap(
                        function (G) {
                          for (;;)
                            switch ((G.prev = G.next)) {
                              case 0:
                                return (
                                  (M = {
                                    state: this.publishState,
                                    constraintConfig: this.mediaSettings_,
                                  }),
                                  (G.next = 3),
                                  this.signalChannel_.sendWaitForResponse({
                                    command: m9,
                                    data: M,
                                    responseCommand:
                                      Cn.PUBLISH_STATE_CHANGE_RESULT,
                                  })
                                );
                              case 3:
                                (W = G.sent),
                                  this.checkPublishResultCode(
                                    W.data.code,
                                    W.data.message
                                  );
                              case 5:
                              case "end":
                                return G.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function () {
                    return U.apply(this, arguments);
                  }),
              },
              {
                key: "doUnpublish",
                value: function () {
                  var M = this;
                  return this.signalChannel_
                    .sendWaitForResponse({
                      command: hI,
                      commandDesc: "unpublish",
                      responseCommand: Cn.UNPUBLISH_RESULT,
                    })
                    .then(function () {
                      M.close();
                    })
                    .catch(function () {
                      M.close();
                    });
                },
              },
              {
                key: "updateMediaSettings",
                value: function (M, W) {
                  var G = this;
                  this.localAuxStream_ &&
                    M === this.localAuxStream_ &&
                    (W = !0);
                  var ne = this.client_.getSystemResult().detail,
                    H = ne.isH264EncodeSupported,
                    R = ne.isVp8EncodeSupported;
                  if (
                    (H
                      ? (this.mediaSettings_.videoCodec = "H264")
                      : R && (this.mediaSettings_.videoCodec = "VP8"),
                    mu)
                  ) {
                    var w = M.getMediaStream();
                    w == null ||
                      w.getTracks().forEach(function (q) {
                        var J = q.getSettings();
                        if (q.kind === Ct) {
                          var re = 1;
                          J.channelCount && (re = J.channelCount),
                            (G.mediaSettings_.audioChannel = re),
                            (G.mediaSettings_.audioBps =
                              1e3 * M.getAudioBitrate()),
                            (G.mediaSettings_.audioFs = J.sampleRate);
                        } else if (q.kind === wt) {
                          if (W)
                            return (
                              (G.mediaSettings_.auxVideoWidth = J.width),
                              (G.mediaSettings_.auxVideoHeight = J.height),
                              (G.mediaSettings_.auxVideoFps = J.frameRate),
                              void (G.mediaSettings_.auxVideoBps =
                                1e3 * M.getVideoBitrate())
                            );
                          G.client_.getIsEnableSmallStream() &&
                            ((G.mediaSettings_.smallVideoWidth =
                              G.client_.smallStreamConfig.width),
                            (G.mediaSettings_.smallVideoHeight =
                              G.client_.smallStreamConfig.height),
                            (G.mediaSettings_.smallVideoFps =
                              G.client_.smallStreamConfig.frameRate),
                            (G.mediaSettings_.smallVideoBps =
                              1e3 * G.client_.smallStreamConfig.bitrate)),
                            (G.mediaSettings_.videoWidth = J.width),
                            (G.mediaSettings_.videoHeight = J.height),
                            (G.mediaSettings_.videoFps = J.frameRate),
                            (G.mediaSettings_.videoBps =
                              1e3 * M.getVideoBitrate());
                        }
                      });
                  } else this.updateMediaSettingsFromProfile(M);
                  this.log_.info(
                    "updateMediaSettings: " +
                      JSON.stringify(this.mediaSettings_)
                  );
                },
              },
              {
                key: "updateMediaSettingsFromProfile",
                value: function (M) {
                  if (M) {
                    if (M.hasAudio()) {
                      var W = M.getAudioProfile();
                      (this.mediaSettings_.audioChannel = W.channelCount),
                        (this.mediaSettings_.audioBps = 1e3 * W.bitrate),
                        (this.mediaSettings_.audioFs = W.sampleRate);
                    }
                    if (M.hasVideo()) {
                      var G = M.getVideoProfile();
                      (this.mediaSettings_.videoWidth = G.width),
                        (this.mediaSettings_.videoHeight = G.height),
                        (this.mediaSettings_.videoFps = G.frameRate),
                        (this.mediaSettings_.videoBps = 1e3 * G.bitrate);
                    }
                  }
                },
              },
              {
                key: "sendMediaSettings",
                value: function (M) {
                  var W = this;
                  this.updateMediaSettings(M),
                    this.signalChannel_
                      .sendWaitForResponse({
                        command: D9,
                        data: this.mediaSettings_,
                        responseCommand: Cn.UPDATE_CONSTRAINT_CONFIG_RES,
                      })
                      .then(function (G) {
                        G.data.code !== 0 && W.log_.warn(G.data.message);
                      })
                      .catch(this.log_.warn);
                },
              },
              {
                key: "addTrack",
                value:
                  ((F = I(
                    m().mark(function D(M, W) {
                      var G, ne;
                      return m().wrap(
                        function (H) {
                          for (;;)
                            switch ((H.prev = H.next)) {
                              case 0:
                                if (this.peerConnection_) {
                                  H.next = 2;
                                  break;
                                }
                                return H.abrupt("return");
                              case 2:
                                if (
                                  ((ne = W === this.localAuxStream_),
                                  this.log_.info(
                                    "is adding "
                                      .concat(
                                        M.kind,
                                        " track to current published local "
                                      )
                                      .concat(ne ? Vn : hn, " stream")
                                  ),
                                  (G = this.sei_) === null ||
                                    G === void 0 ||
                                    G.handleEncodedStreams(),
                                  !as())
                                ) {
                                  H.next = 10;
                                  break;
                                }
                                return (
                                  (H.next = 8), this.addTrackByTransceiver(M, W)
                                );
                              case 8:
                                H.next = 12;
                                break;
                              case 10:
                                return (H.next = 12), this.addTrackBySender(M);
                              case 12:
                                Xr(this.userId_, {
                                  eventId: M.kind === Ct ? pI : fI,
                                  eventDesc: "add ".concat(
                                    M.kind,
                                    " track to current published stream"
                                  ),
                                  timestamp: Ur(),
                                  userId: this.userId_,
                                  tinyId: this.tinyId_,
                                });
                              case 13:
                              case "end":
                                return H.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M) {
                    return F.apply(this, arguments);
                  }),
              },
              {
                key: "addTrackByTransceiver",
                value:
                  ((z = I(
                    m().mark(function D(M, W) {
                      var G, ne, H, R;
                      return m().wrap(
                        function (w) {
                          for (;;)
                            switch ((w.prev = w.next)) {
                              case 0:
                                if (
                                  ((G = W === this.localAuxStream_),
                                  (ne = this.peerConnection_.getTransceivers()),
                                  M.kind !== Ct)
                                ) {
                                  w.next = 13;
                                  break;
                                }
                                if (!ne[0].sender.track) {
                                  w.next = 9;
                                  break;
                                }
                                return (
                                  this.mixAudioTrack(ne[0].sender.track, M),
                                  (w.next = 7),
                                  ne[0].sender.replaceTrack(
                                    this.mixedAudioTrack_
                                  )
                                );
                              case 7:
                                w.next = 11;
                                break;
                              case 9:
                                return (
                                  (w.next = 11), ne[0].sender.replaceTrack(M)
                                );
                              case 11:
                                w.next = 26;
                                break;
                              case 13:
                                return (
                                  (H = G ? 3 : 1),
                                  (w.next = 16),
                                  ne[H].sender.replaceTrack(M)
                                );
                              case 16:
                                if (
                                  H !== 1 ||
                                  !this.client_.getIsEnableSmallStream()
                                ) {
                                  w.next = 23;
                                  break;
                                }
                                return (
                                  (this.smallGenerator_ = new Lv(
                                    this.localStream_
                                  )),
                                  (w.next = 20),
                                  this.smallGenerator_.initialize()
                                );
                              case 20:
                                return (
                                  (R =
                                    this.smallGenerator_.generateSmallVideoTrack(
                                      this.client_.smallStreamConfig_
                                    )),
                                  (w.next = 23),
                                  ne[2].sender.replaceTrack(R)
                                );
                              case 23:
                                if (ne[H].direction !== Uc) {
                                  w.next = 26;
                                  break;
                                }
                                return (
                                  (w.next = 26),
                                  this.setTransceiverDirection(Yo, [H])
                                );
                              case 26:
                                return (
                                  this.updateMediaSettings(W, G),
                                  (w.next = 29),
                                  this.doPublishChange()
                                );
                              case 29:
                              case "end":
                                return w.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M) {
                    return z.apply(this, arguments);
                  }),
              },
              {
                key: "addTrackBySender",
                value:
                  ((N = I(
                    m().mark(function D(M) {
                      var W, G, ne, H, R;
                      return m().wrap(
                        function (w) {
                          for (;;)
                            switch ((w.prev = w.next)) {
                              case 0:
                                if (
                                  !(
                                    as() &&
                                    this.peerConnection_
                                      .getTransceivers()
                                      .findIndex(function (q) {
                                        return q.direction === "stopped";
                                      }) >= 0
                                  )
                                ) {
                                  w.next = 4;
                                  break;
                                }
                                return (
                                  this.log_.warn(
                                    "transceiver is stopping, negotiate sdp first"
                                  ),
                                  (w.next = 4),
                                  this.updateOffer(jr.REMOVE, M)
                                );
                              case 4:
                                if (
                                  !(W = this.peerConnection_
                                    .getSenders()
                                    .find(function (q) {
                                      return q.track && q.track.kind === M.kind;
                                    }))
                                ) {
                                  w.next = 11;
                                  break;
                                }
                                return (
                                  this.log_.warn(
                                    "sender already exists, remove sender first"
                                  ),
                                  (G = W.track),
                                  this.removeSender(W),
                                  (w.next = 11),
                                  this.updateOffer(jr.REMOVE, G)
                                );
                              case 11:
                                if (
                                  ((ne = this.localStream_.getMediaStream()),
                                  this.peerConnection_.addTrack(M, ne),
                                  M.kind !== wt ||
                                    !this.client_.getIsEnableSmallStream())
                                ) {
                                  w.next = 21;
                                  break;
                                }
                                return (
                                  (this.smallGenerator_ = new Lv(
                                    this.localStream_
                                  )),
                                  (w.next = 17),
                                  this.smallGenerator_.initialize()
                                );
                              case 17:
                                (H =
                                  this.smallGenerator_.generateSmallVideoTrack(
                                    this.client_.smallStreamConfig_
                                  )),
                                  (R = new MediaStream()).addTrack(H),
                                  this.peerConnection_.addTrack(H, R);
                              case 21:
                                return (
                                  (w.next = 23), this.updateOffer(jr.ADD, M)
                                );
                              case 23:
                              case "end":
                                return w.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D) {
                    return N.apply(this, arguments);
                  }),
              },
              {
                key: "isNeedToResetOfferOrder",
                value: function () {
                  if (
                    this.sdpSemantics_ === w0 ||
                    !this.peerConnection_ ||
                    !this.peerConnection_.localDescription
                  )
                    return !1;
                  for (
                    var M = this.peerConnection_.localDescription.sdp,
                      W = fo(M),
                      G = 0;
                    G < W.media.length;
                    G++
                  )
                    if (W.media[G].mid === 0 && W.media[G].type === wt)
                      return !0;
                  return !1;
                },
              },
              {
                key: "removeSender",
                value: function (M) {
                  var W = null;
                  as() &&
                    (W = this.peerConnection_
                      .getTransceivers()
                      .find(function (G) {
                        return G.sender && G.sender.track === M.track;
                      })),
                    this.peerConnection_.removeTrack(M),
                    W &&
                      zr(W.stop) &&
                      (this.log_.info("stop transceiver"), W.stop());
                },
              },
              {
                key: "removeTrack",
                value:
                  ((C = I(
                    m().mark(function D(M, W) {
                      return m().wrap(
                        function (G) {
                          for (;;)
                            switch ((G.prev = G.next)) {
                              case 0:
                                if (this.peerConnection_) {
                                  G.next = 2;
                                  break;
                                }
                                return G.abrupt("return");
                              case 2:
                                if (
                                  (this.log_.info(
                                    "is removing "
                                      .concat(
                                        M.kind,
                                        " track from current published local "
                                      )
                                      .concat(
                                        W === this.localAuxStream_ ? Vn : hn,
                                        " stream"
                                      )
                                  ),
                                  !as())
                                ) {
                                  G.next = 8;
                                  break;
                                }
                                return (
                                  (G.next = 6),
                                  this.removeTrackByTransceiver(M, W)
                                );
                              case 6:
                                G.next = 10;
                                break;
                              case 8:
                                return (
                                  (G.next = 10), this.removeTrackBySender(M)
                                );
                              case 10:
                                Xr(this.userId_, {
                                  eventId: M.kind === Ct ? mI : vI,
                                  eventDesc: "remove ".concat(
                                    M.kind,
                                    " track from current published stream"
                                  ),
                                  timestamp: Ur(),
                                  userId: this.userId_,
                                  tinyId: this.tinyId_,
                                });
                              case 11:
                              case "end":
                                return G.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M) {
                    return C.apply(this, arguments);
                  }),
              },
              {
                key: "removeTrackByTransceiver",
                value:
                  ((b = I(
                    m().mark(function D(M, W) {
                      var G, ne, H;
                      return m().wrap(
                        function (R) {
                          for (;;)
                            switch ((R.prev = R.next)) {
                              case 0:
                                if (
                                  ((G = W === this.localAuxStream_),
                                  (ne = this.peerConnection_.getTransceivers()),
                                  M.kind !== Ct)
                                ) {
                                  R.next = 13;
                                  break;
                                }
                                if (!this.mixedAudioTrack_) {
                                  R.next = 9;
                                  break;
                                }
                                return (
                                  (R.next = 6),
                                  ne[0].sender.replaceTrack(
                                    G
                                      ? this.localStream_.getAudioTrack()
                                      : this.localAuxStream_.getAudioTrack()
                                  )
                                );
                              case 6:
                                this.destroyMixedAudioTrack(), (R.next = 11);
                                break;
                              case 9:
                                return (
                                  (R.next = 11), ne[0].sender.replaceTrack(null)
                                );
                              case 11:
                                R.next = 23;
                                break;
                              case 13:
                                return (
                                  (H = G ? 3 : 1),
                                  (R.next = 16),
                                  ne[H].sender.replaceTrack(null)
                                );
                              case 16:
                                if (H !== 1 || !this.smallGenerator_) {
                                  R.next = 21;
                                  break;
                                }
                                return (
                                  this.smallGenerator_.destroy(),
                                  (this.smallGenerator_ = null),
                                  (R.next = 21),
                                  ne[2].sender.replaceTrack(null)
                                );
                              case 21:
                                return (
                                  (R.next = 23),
                                  this.setTransceiverDirection(Uc, [H])
                                );
                              case 23:
                                return (
                                  this.updateMediaSettings(W, G),
                                  (R.next = 26),
                                  this.doPublishChange()
                                );
                              case 26:
                              case "end":
                                return R.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M) {
                    return b.apply(this, arguments);
                  }),
              },
              {
                key: "setTransceiverDirection",
                value:
                  ((_ = I(
                    m().mark(function D(M, W) {
                      var G, ne, H, R, w, q;
                      return m().wrap(
                        function (J) {
                          for (;;)
                            switch ((J.prev = J.next)) {
                              case 0:
                                if (Ii) {
                                  J.next = 2;
                                  break;
                                }
                                return J.abrupt("return");
                              case 2:
                                if (
                                  ((G = !1),
                                  (ne = !1),
                                  this.log_.info(
                                    "setting transceiver "
                                      .concat(W.join(","), " direction to ")
                                      .concat(M)
                                  ),
                                  (H = this.peerConnection_.getTransceivers()),
                                  W.forEach(function (re) {
                                    H[re].direction !== M &&
                                      ((H[re].direction = M), (G = !0));
                                  }),
                                  !G)
                                ) {
                                  J.next = 14;
                                  break;
                                }
                                return (
                                  this.log_.info("updating offer"),
                                  (J.next = 11),
                                  this.peerConnection_.createOffer()
                                );
                              case 11:
                                return (
                                  (R = J.sent),
                                  (J.next = 14),
                                  this.peerConnection_.setLocalDescription(R)
                                );
                              case 14:
                                if (
                                  ((w = -1),
                                  (q =
                                    this.peerConnection_.remoteDescription.sdp
                                      .split(
                                        `\r
`
                                      )
                                      .map(function (re) {
                                        if (
                                          (re.match(
                                            new RegExp(
                                              "a=("
                                                .concat(Uc, "|")
                                                .concat(h0, "|")
                                                .concat(Yo, ")")
                                            )
                                          ) && w++,
                                          W.includes(w))
                                        ) {
                                          if (
                                            M === Uc &&
                                            re.includes("a=".concat(h0))
                                          )
                                            return (ne = !0), "a=".concat(M);
                                          if (
                                            M === Yo &&
                                            re.includes("a=".concat(Uc))
                                          )
                                            return (ne = !0), "a=".concat(h0);
                                        }
                                        return re;
                                      }).join(`\r
`)),
                                  !ne)
                                ) {
                                  J.next = 20;
                                  break;
                                }
                                return (
                                  this.log_.info("updating answer"),
                                  (J.next = 20),
                                  this.peerConnection_.setRemoteDescription({
                                    type: "answer",
                                    sdp: q,
                                  })
                                );
                              case 20:
                              case "end":
                                return J.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M) {
                    return _.apply(this, arguments);
                  }),
              },
              {
                key: "removeTrackBySender",
                value:
                  ((g = I(
                    m().mark(function D(M) {
                      var W,
                        G,
                        ne = this;
                      return m().wrap(
                        function (H) {
                          for (;;)
                            switch ((H.prev = H.next)) {
                              case 0:
                                if (
                                  M.kind !== wt ||
                                  !this.isNeedToResetOfferOrder()
                                ) {
                                  H.next = 7;
                                  break;
                                }
                                return (
                                  this.reset(),
                                  this.initialize(),
                                  (W = this.localStream_.getMediaStream()) ===
                                    null ||
                                    W === void 0 ||
                                    W.removeTrack(M),
                                  (H.next = 6),
                                  this.publish(this.localStream_)
                                );
                              case 6:
                                return H.abrupt("return");
                              case 7:
                                return (
                                  (G = this.peerConnection_
                                    .getSenders()
                                    .find(function (R) {
                                      return R.track === M;
                                    })) &&
                                    (this.removeSender(G),
                                    M.kind === wt &&
                                      this.smallGenerator_ &&
                                      (this.smallGenerator_.destroy(),
                                      (this.smallGenerator_ = null),
                                      this.peerConnection_
                                        .getSenders()
                                        .forEach(function (R) {
                                          R.track &&
                                            R.track.kind === wt &&
                                            ne.removeSender(R);
                                        }))),
                                  (H.next = 11),
                                  this.updateOffer(jr.REMOVE, M)
                                );
                              case 11:
                              case "end":
                                return H.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D) {
                    return g.apply(this, arguments);
                  }),
              },
              {
                key: "replaceTrack",
                value:
                  ((v = I(
                    m().mark(function D(M, W) {
                      var G, ne, H, R, w, q, J;
                      return m().wrap(
                        function (re) {
                          for (;;)
                            switch ((re.prev = re.next)) {
                              case 0:
                                if (
                                  (ne =
                                    (G = this.peerConnection_) === null ||
                                    G === void 0
                                      ? void 0
                                      : G.getSenders()) &&
                                  ne.length !== 0
                                ) {
                                  re.next = 3;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: uE }),
                                });
                              case 3:
                                if (
                                  ((H = W === this.localAuxStream_),
                                  this.log_.info(
                                    "is replacing "
                                      .concat(
                                        M.kind,
                                        " track to current published local "
                                      )
                                      .concat(H ? Vn : hn, " stream")
                                  ),
                                  M.kind !== Ct || !ne[0])
                                ) {
                                  re.next = 16;
                                  break;
                                }
                                if (
                                  !(
                                    this.mixedAudioTrack_ &&
                                    (R = this.localStream_) !== null &&
                                    R !== void 0 &&
                                    R.hasAudio() &&
                                    (w = this.localAuxStream_) !== null &&
                                    w !== void 0 &&
                                    w.hasAudio()
                                  )
                                ) {
                                  re.next = 14;
                                  break;
                                }
                                return (
                                  this.destroyMixedAudioTrack(),
                                  (q = H
                                    ? this.localStream_.getAudioTrack()
                                    : this.localAuxStream_.getAudioTrack()),
                                  this.mixAudioTrack(M, q),
                                  (re.next = 12),
                                  ne[0].replaceTrack(this.mixedAudioTrack_)
                                );
                              case 12:
                                re.next = 16;
                                break;
                              case 14:
                                return (re.next = 16), ne[0].replaceTrack(M);
                              case 16:
                                if (M.kind !== wt) {
                                  re.next = 32;
                                  break;
                                }
                                if (W !== this.localStream_ || !ne[1]) {
                                  re.next = 29;
                                  break;
                                }
                                return (re.next = 20), ne[1].replaceTrack(M);
                              case 20:
                                if (!this.smallGenerator_ || !ne[2]) {
                                  re.next = 29;
                                  break;
                                }
                                return (
                                  this.log_.info("replacing smallVideo"),
                                  this.smallGenerator_.destroy(),
                                  (this.smallGenerator_ = new Lv(
                                    this.localStream_
                                  )),
                                  (re.next = 26),
                                  this.smallGenerator_.initialize()
                                );
                              case 26:
                                return (
                                  (J =
                                    this.smallGenerator_.generateSmallVideoTrack(
                                      this.client_.smallStreamConfig_
                                    )),
                                  (re.next = 29),
                                  ne[2].replaceTrack(J)
                                );
                              case 29:
                                if (W !== this.localAuxStream_ || !ne[3]) {
                                  re.next = 32;
                                  break;
                                }
                                return (re.next = 32), ne[3].replaceTrack(M);
                              case 32:
                                Xr(this.userId_, {
                                  eventId: M.kind === Ct ? G9 : W9,
                                  eventDesc: "replace ".concat(
                                    M.kind,
                                    " track from current published stream"
                                  ),
                                  timestamp: Ur(),
                                  userId: this.userId_,
                                  tinyId: this.tinyId_,
                                });
                              case 33:
                              case "end":
                                return re.stop();
                            }
                        },
                        D,
                        this
                      );
                    })
                  )),
                  function (D, M) {
                    return v.apply(this, arguments);
                  }),
              },
              {
                key: "updateOffer",
                value:
                  ((h = I(
                    m().mark(function D(M, W) {
                      var G, ne, H, R, w, q, J;
                      return m().wrap(
                        function (re) {
                          for (;;)
                            switch ((re.prev = re.next)) {
                              case 0:
                                return (
                                  (re.prev = 0),
                                  (re.next = 3),
                                  this.peerConnection_.createOffer(BA)
                                );
                              case 3:
                                return (
                                  (G = re.sent),
                                  Ii &&
                                    (G.sdp = this.setSDPDirection(
                                      G.sdp,
                                      "sendrecv"
                                    )),
                                  (re.next = 7),
                                  this.peerConnection_.setLocalDescription(G)
                                );
                              case 7:
                                return (
                                  (ne = this.updateMediaSettings(
                                    this.localStream_ || this.localAuxStream_
                                  )),
                                  (H = {
                                    action: M,
                                    trackId: W.id,
                                    kind: W.kind === wt ? "bigVideo" : W.kind,
                                    type: "offer",
                                    sdp: this.peerConnection_.localDescription
                                      .sdp,
                                    constraintConfig: ne,
                                    state: this.publishState,
                                  }),
                                  this.log_.info(
                                    "createOffer success, sending updated offer to remote server"
                                  ),
                                  this.log_.debug("updatedOffer: " + H.sdp),
                                  (re.next = 13),
                                  this.signalChannel_.sendWaitForResponse({
                                    command: v9,
                                    data: H,
                                    responseCommand: Cn.UPDATE_OFFER_RESULT,
                                    timeout: 1e4,
                                    commandDesc: "update offer",
                                  })
                                );
                              case 13:
                                return (
                                  (R = re.sent),
                                  (w = R.data),
                                  (q = w.code),
                                  (J = w.message),
                                  q !== 0 && this.checkPublishResultCode(q, J),
                                  (re.next = 18),
                                  this.acceptAnswer(R.data.data)
                                );
                              case 18:
                                this.updateSSRC(G.sdp),
                                  gt.logSuccessEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: Op,
                                    kind: "offer",
                                  }),
                                  (re.next = 27);
                                break;
                              case 22:
                                throw (
                                  ((re.prev = 22),
                                  (re.t0 = re.catch(0)),
                                  this.log_.error(re.t0),
                                  gt.logFailedEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: Op,
                                    kind: "offer",
                                    error: re.t0,
                                  }),
                                  re.t0)
                                );
                              case 27:
                              case "end":
                                return re.stop();
                            }
                        },
                        D,
                        this,
                        [[0, 22]]
                      );
                    })
                  )),
                  function (D, M) {
                    return h.apply(this, arguments);
                  }),
              },
              {
                key: "setBandwidth",
                value:
                  ((l = I(
                    m().mark(function D(M) {
                      var W, G, ne, H, R, w, q, J, re, pe;
                      return m().wrap(
                        function (ye) {
                          for (;;)
                            switch ((ye.prev = ye.next)) {
                              case 0:
                                if (
                                  ((W = M.bandwidth),
                                  (G = M.type),
                                  (ne = M.videoType),
                                  (H = ne === void 0 ? "" : ne),
                                  (R = M.sdp),
                                  (w = M.scaleResolutionDownBy),
                                  (q = w === void 0 ? 1 : w),
                                  UI() || !R)
                                ) {
                                  ye.next = 3;
                                  break;
                                }
                                return ye.abrupt(
                                  "return",
                                  G === wt
                                    ? this.updateVideoBandwidthRestriction(
                                        R,
                                        W,
                                        H
                                      )
                                    : this.updateAudioBandwidthRestriction(R, W)
                                );
                              case 3:
                                if (
                                  ((J = null),
                                  ev()
                                    ? ((re = 0),
                                      G === wt &&
                                        (re = H === oo ? 2 : H === Vn ? 3 : 1),
                                      (J =
                                        this.peerConnection_.getSenders()[re]))
                                    : (J = this.peerConnection_
                                        .getSenders()
                                        .find(function (Ne) {
                                          return (
                                            Ne.track && Ne.track.kind === G
                                          );
                                        })),
                                  !J)
                                ) {
                                  ye.next = 23;
                                  break;
                                }
                                return (
                                  ((pe = J.getParameters()).encodings &&
                                    pe.encodings.length !== 0) ||
                                    (pe.encodings = [{}]),
                                  W === "unlimited"
                                    ? delete pe.encodings[0].maxBitrate
                                    : (pe.encodings[0].maxBitrate = 1e3 * W),
                                  delete pe.encodings[0].scaleResolutionDownBy,
                                  q > 1 &&
                                    (this.log_.warn(
                                      ""
                                        .concat(H, " scaleResolutionDownBy ")
                                        .concat(q)
                                    ),
                                    (pe.encodings[0].scaleResolutionDownBy =
                                      q)),
                                  (ye.prev = 11),
                                  (ye.next = 14),
                                  J.setParameters(pe)
                                );
                              case 14:
                                return (
                                  this.log_.info(
                                    H +
                                      G +
                                      " bandwidth was set to " +
                                      W +
                                      " kbps"
                                  ),
                                  ye.abrupt("return", R)
                                );
                              case 18:
                                if (
                                  ((ye.prev = 18),
                                  (ye.t0 = ye.catch(11)),
                                  this.log_.info(
                                    "failed to set bandwidth by setting maxBitrate: " +
                                      ye.t0
                                  ),
                                  !R)
                                ) {
                                  ye.next = 23;
                                  break;
                                }
                                return ye.abrupt(
                                  "return",
                                  G === wt
                                    ? this.updateVideoBandwidthRestriction(
                                        R,
                                        W,
                                        H
                                      )
                                    : this.updateAudioBandwidthRestriction(R, W)
                                );
                              case 23:
                                return ye.abrupt("return", R);
                              case 24:
                              case "end":
                                return ye.stop();
                            }
                        },
                        D,
                        this,
                        [[11, 18]]
                      );
                    })
                  )),
                  function (D) {
                    return l.apply(this, arguments);
                  }),
              },
              {
                key: "updateVideoBandwidthRestriction",
                value: function (M, W, G) {
                  var ne = "AS";
                  Ii && ((ne = "TIAS"), (W *= 1e3));
                  var H = 0,
                    R = -1;
                  return (
                    G === oo ? (H = 1) : G === Vn && (H = 2),
                    (M = M.replace(
                      /m=video (.*)\r\nc=IN (.*)\r\n/g,
                      function (w) {
                        return ++R === H
                          ? ""
                              .concat(w, "b=")
                              .concat(ne, ":")
                              .concat(
                                W,
                                `\r
`
                              )
                          : w;
                      }
                    )),
                    M
                  );
                },
              },
              {
                key: "updateAudioBandwidthRestriction",
                value: function (M, W) {
                  var G = "AS";
                  return (
                    Ii && ((G = "TIAS"), (W *= 1e3)),
                    (M = M.replace(
                      /m=audio (.*)\r\nc=IN (.*)\r\n/,
                      `m=audio $1\r
c=IN $2\r
b=` +
                        G +
                        ":" +
                        W +
                        `\r
`
                    ))
                  );
                },
              },
              {
                key: "removeBandwidthRestriction",
                value: function (M) {
                  return M.replace(/b=AS:.*\r\n/, "").replace(
                    /b=TIAS:.*\r\n/,
                    ""
                  );
                },
              },
              {
                key: "removeVideoOrientation",
                value: function (M) {
                  return M.replace(/urn:3gpp:video-orientation/, "");
                },
              },
              {
                key: "connect",
                value:
                  ((s = I(
                    m().mark(function D() {
                      return m().wrap(
                        function (M) {
                          for (;;)
                            switch ((M.prev = M.next)) {
                              case 0:
                                return (
                                  (M.prev = 0), (M.next = 3), this.exchangeSDP()
                                );
                              case 3:
                                return (
                                  (M.next = 5),
                                  this.waitForPeerConnectionConnected()
                                );
                              case 5:
                                M.next = 11;
                                break;
                              case 7:
                                throw (
                                  ((M.prev = 7),
                                  (M.t0 = M.catch(0)),
                                  this.closePeerConnection(!0),
                                  M.t0)
                                );
                              case 11:
                              case "end":
                                return M.stop();
                            }
                        },
                        D,
                        this,
                        [[0, 7]]
                      );
                    })
                  )),
                  function () {
                    return s.apply(this, arguments);
                  }),
              },
              {
                key: "exchangeSDP",
                value:
                  ((c = I(
                    m().mark(function D() {
                      return m().wrap(
                        function (M) {
                          for (;;)
                            switch ((M.prev = M.next)) {
                              case 0:
                                return (
                                  (M.prev = 0),
                                  (this.isSDPExchanging_ = !0),
                                  (M.next = 4),
                                  this.createOffer()
                                );
                              case 4:
                                return (
                                  this.log_.info(
                                    "createOffer success, sending offer to remote server"
                                  ),
                                  (M.next = 7),
                                  this.doExchangeSDP()
                                );
                              case 7:
                                (this.isSDPExchanging_ = !1), (M.next = 14);
                                break;
                              case 10:
                                throw (
                                  ((M.prev = 10),
                                  (M.t0 = M.catch(0)),
                                  (this.isSDPExchanging_ = !1),
                                  M.t0)
                                );
                              case 14:
                              case "end":
                                return M.stop();
                            }
                        },
                        D,
                        this,
                        [[0, 10]]
                      );
                    })
                  )),
                  function () {
                    return c.apply(this, arguments);
                  }),
              },
              {
                key: "createOffer",
                value:
                  ((a = I(
                    m().mark(function D() {
                      var M;
                      return m().wrap(
                        function (W) {
                          for (;;)
                            switch ((W.prev = W.next)) {
                              case 0:
                                return (
                                  (W.prev = 0),
                                  (W.next = 3),
                                  this.peerConnection_.createOffer(BA)
                                );
                              case 3:
                                return (
                                  (M = W.sent),
                                  (W.next = 6),
                                  this.peerConnection_.setLocalDescription(M)
                                );
                              case 6:
                                this.updateSSRC(M.sdp),
                                  gt.logSuccessEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: Op,
                                    kind: "offer",
                                  }),
                                  (W.next = 14);
                                break;
                              case 10:
                                throw (
                                  ((W.prev = 10),
                                  (W.t0 = W.catch(0)),
                                  gt.logFailedEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: Op,
                                    kind: "offer",
                                    error: W.t0,
                                  }),
                                  W.t0)
                                );
                              case 14:
                              case "end":
                                return W.stop();
                            }
                        },
                        D,
                        this,
                        [[0, 10]]
                      );
                    })
                  )),
                  function () {
                    return a.apply(this, arguments);
                  }),
              },
              {
                key: "doExchangeSDP",
                value: function () {
                  var M = this;
                  return new Promise(function (W, G) {
                    M.exchangeSDPTimeout_ = setTimeout(function () {
                      M.signalChannel_.off(Cn.PUBLISH_RESULT, ne),
                        M.clearExchangeSDPTimeout();
                      var R = new De({
                        code: Oe.API_CALL_TIMEOUT,
                        message: Fe({ key: b7 }),
                      });
                      G(R);
                    }, 1e4);
                    var ne = (function () {
                        var R = I(
                          m().mark(function w(q) {
                            var J, re, pe;
                            return m().wrap(
                              function (ye) {
                                for (;;)
                                  switch ((ye.prev = ye.next)) {
                                    case 0:
                                      if (
                                        ((ye.prev = 0),
                                        M.clearExchangeSDPTimeout(),
                                        (J = q.data),
                                        (re = J.code),
                                        (pe = J.message),
                                        re !== 0)
                                      ) {
                                        ye.next = 9;
                                        break;
                                      }
                                      return (
                                        (ye.next = 6),
                                        M.acceptAnswer(q.data.data)
                                      );
                                    case 6:
                                      W(), (ye.next = 10);
                                      break;
                                    case 9:
                                      M.checkPublishResultCode(re, pe);
                                    case 10:
                                      ye.next = 15;
                                      break;
                                    case 12:
                                      (ye.prev = 12),
                                        (ye.t0 = ye.catch(0)),
                                        G(ye.t0);
                                    case 15:
                                    case "end":
                                      return ye.stop();
                                  }
                              },
                              w,
                              null,
                              [[0, 12]]
                            );
                          })
                        );
                        return function (w) {
                          return R.apply(this, arguments);
                        };
                      })(),
                      H = {
                        type: M.peerConnection_.localDescription.type,
                        sdp: M.removeVideoOrientation(
                          M.peerConnection_.localDescription.sdp
                        ),
                        screen: (
                          M.publishingStream_ || M.localStream_
                        ).hasScreenTrack(),
                        state: M.publishState,
                        constraintConfig: M.mediaSettings_,
                      };
                    M.signalChannel_.once(Cn.PUBLISH_RESULT, ne),
                      M.log_.debug("sending sdp offer: " + H.sdp),
                      M.signalChannel_.send(S9, H);
                  });
                },
              },
              {
                key: "setSDPDirection",
                value: function (M, W) {
                  var G =
                      arguments.length > 2 && arguments[2] !== void 0
                        ? arguments[2]
                        : "all",
                    ne = fo(M);
                  return (
                    ne.media.forEach(function (H) {
                      (G !== "all" && H.type !== G) || (H.direction = W);
                    }),
                    Yc(ne)
                  );
                },
              },
              {
                key: "acceptAnswer",
                value:
                  ((n = I(
                    m().mark(function D(M) {
                      var W, G, ne, H, R, w, q;
                      return m().wrap(
                        function (J) {
                          for (;;)
                            switch ((J.prev = J.next)) {
                              case 0:
                                if (
                                  ((J.prev = 0),
                                  (W = this.removeVideoOrientation(M.sdp)),
                                  !(G =
                                    this.publishingStream_ ||
                                    this.localStream_))
                                ) {
                                  J.next = 15;
                                  break;
                                }
                                if (
                                  ((ne = G.getVideoBitrate()),
                                  (H = G.getAudioBitrate()),
                                  !ne)
                                ) {
                                  J.next = 11;
                                  break;
                                }
                                return (
                                  (R = this.isPublishingAuxStream_ ? Vn : Tp),
                                  (J.next = 10),
                                  this.setBandwidth({
                                    sdp: W,
                                    videoType: R,
                                    type: wt,
                                    bandwidth: ne,
                                    scaleResolutionDownBy:
                                      G.scaleResolutionDownBy,
                                  })
                                );
                              case 10:
                                W = J.sent;
                              case 11:
                                if (!H) {
                                  J.next = 15;
                                  break;
                                }
                                return (
                                  (J.next = 14),
                                  this.setBandwidth({
                                    bandwidth: H,
                                    type: Ct,
                                    sdp: W,
                                  })
                                );
                              case 14:
                                W = J.sent;
                              case 15:
                                if (!this.client_.getIsEnableSmallStream()) {
                                  J.next = 20;
                                  break;
                                }
                                return (
                                  (w = this.client_.smallStreamConfig),
                                  (J.next = 19),
                                  this.setBandwidth({
                                    bandwidth: w.bitrate,
                                    type: wt,
                                    videoType: oo,
                                    sdp: W,
                                  })
                                );
                              case 19:
                                W = J.sent;
                              case 20:
                                return (
                                  (q = { type: M.type, sdp: W }),
                                  (J.next = 23),
                                  this.peerConnection_.setRemoteDescription(q)
                                );
                              case 23:
                                this.log_.debug("accepted answer: " + W),
                                  gt.logSuccessEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: CT,
                                    kind: "answer",
                                  }),
                                  (J.next = 32);
                                break;
                              case 27:
                                throw (
                                  ((J.prev = 27),
                                  (J.t0 = J.catch(0)),
                                  gt.logFailedEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: CT,
                                    kind: "answer",
                                    error: J.t0,
                                  }),
                                  this.log_.error(
                                    "failed to accept remote answer " + J.t0
                                  ),
                                  J.t0)
                                );
                              case 32:
                              case "end":
                                return J.stop();
                            }
                        },
                        D,
                        this,
                        [[0, 27]]
                      );
                    })
                  )),
                  function (D) {
                    return n.apply(this, arguments);
                  }),
              },
              {
                key: "sendMutedFlag",
                value: function (M, W) {
                  if (W !== this.localAuxStream_) {
                    var G = {
                      audio: M.audio,
                      bigVideo: M.video,
                      auxVideo: M.auxVideo,
                    };
                    this.log_.info(
                      "send muted state: ".concat(JSON.stringify(G))
                    ),
                      this.signalChannel_.send(b9, G);
                  }
                },
              },
              {
                key: "getIsReconnecting",
                value: function () {
                  return this.isReconnecting_;
                },
              },
              {
                key: "reconnect",
                value:
                  ((e = I(
                    m().mark(function D() {
                      var M,
                        W,
                        G = this;
                      return m().wrap(
                        function (ne) {
                          for (;;)
                            switch ((ne.prev = ne.next)) {
                              case 0:
                                if (this.reconnectionTimer_ === -1) {
                                  ne.next = 3;
                                  break;
                                }
                                return (
                                  this.log_.warn(
                                    "reconnect() uplink is reconnecting, ignore current reconnection"
                                  ),
                                  ne.abrupt("return")
                                );
                              case 3:
                                if (!(this.reconnectionCount_ >= 30)) {
                                  ne.next = 12;
                                  break;
                                }
                                return (
                                  this.log_.warn(
                                    "SDK has tried reconnect uplink for ".concat(
                                      30,
                                      " times, but all failed, please check your network"
                                    )
                                  ),
                                  this.stopReconnection(),
                                  (M = new De({
                                    code: Oe.UPLINK_RECONNECTION_FAILED,
                                    message: Fe({ key: k7 }),
                                  })),
                                  gt.logFailedEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: ET,
                                    error: M,
                                  }),
                                  this.addEventInternal(
                                    sF,
                                    "uplink-connection reconnect fail"
                                  ),
                                  this.emitConnectionStateChangedEvent(Vr),
                                  this.emitter_.emit(_n.ERROR, M),
                                  ne.abrupt("return")
                                );
                              case 12:
                                if (
                                  this.signalChannel_.getCurrentState() === rh
                                ) {
                                  ne.next = 16;
                                  break;
                                }
                                return (
                                  this.log_.warn(
                                    "reconnect() signal channel is not connected, suspend reconnection until signal is connected"
                                  ),
                                  this.signalChannel_.once(
                                    nh,
                                    this.reconnect,
                                    this
                                  ),
                                  ne.abrupt("return")
                                );
                              case 16:
                                if (
                                  (this.reconnectionCount_++,
                                  (ne.prev = 17),
                                  this.log_.warn(
                                    "reconnect() try to reconnect uplink ["
                                      .concat(this.reconnectionCount_, "/")
                                      .concat(30, "]")
                                  ),
                                  (W = ty(this.reconnectionCount_)),
                                  (this.reconnectionTimer_ = setTimeout(
                                    function () {
                                      G.log_.warn(
                                        "reconnect() uplink reconnect timeout(".concat(
                                          W / 1e3,
                                          "s), try again"
                                        )
                                      ),
                                        G.clearReconnectionTimer(),
                                        G.reconnect();
                                    },
                                    W
                                  )),
                                  !(
                                    this.isSDPExchanging_ ||
                                    (this.peerConnection_ &&
                                      this.peerConnection_.connectionState ===
                                        xp)
                                  ))
                                ) {
                                  ne.next = 23;
                                  break;
                                }
                                return ne.abrupt("return");
                              case 23:
                                return (
                                  (ne.next = 25),
                                  this.signalChannel_.sendWaitForResponse({
                                    command: hI,
                                    responseCommand: Cn.UNPUBLISH_RESULT,
                                    enableLog: !1,
                                  })
                                );
                              case 25:
                                if (
                                  (this.reset(),
                                  this.initialize(),
                                  !this.localStream_)
                                ) {
                                  ne.next = 30;
                                  break;
                                }
                                return (
                                  (ne.next = 30),
                                  this.publish(this.localStream_)
                                );
                              case 30:
                                if (!this.localAuxStream_) {
                                  ne.next = 33;
                                  break;
                                }
                                return (
                                  (ne.next = 33),
                                  this.publish(this.localAuxStream_, !0)
                                );
                              case 33:
                                gt.logSuccessEvent({
                                  userId: this.client_.getUserId(),
                                  eventType: ET,
                                }),
                                  this.log_.warn(
                                    "reconnect() uplink reconnect successfully"
                                  ),
                                  this.addEventInternal(
                                    oF,
                                    "uplink-connection reconnect success"
                                  ),
                                  this.stopReconnection(),
                                  this.localStream_.syncMuteState(),
                                  (ne.next = 42);
                                break;
                              case 40:
                                (ne.prev = 40), (ne.t0 = ne.catch(17));
                              case 42:
                              case "end":
                                return ne.stop();
                            }
                        },
                        D,
                        this,
                        [[17, 40]]
                      );
                    })
                  )),
                  function () {
                    return e.apply(this, arguments);
                  }),
              },
              {
                key: "clearExchangeSDPTimeout",
                value: function () {
                  this.exchangeSDPTimeout_ !== -1 &&
                    (clearTimeout(this.exchangeSDPTimeout_),
                    (this.exchangeSDPTimeout_ = -1));
                },
              },
              {
                key: "clearReconnectionTimer",
                value: function () {
                  this.reconnectionTimer_ !== -1 &&
                    (clearTimeout(this.reconnectionTimer_),
                    (this.reconnectionTimer_ = -1));
                },
              },
              {
                key: "handleError",
                value: function (M) {
                  M.getCode() === Oe.ICE_TRANSPORT_ERROR &&
                    (this.isFirstConnection_ &&
                      ((this.isFirstConnection_ = !1),
                      gt.logFailedEvent({
                        userId: this.client_.getUserId(),
                        eventType: TT,
                        error: M,
                      })),
                    this.isReconnecting_ || this.startReconnection());
                },
              },
              {
                key: "handleConnectionStateChange",
                value: function (M) {
                  M.state === Fr &&
                    this.isFirstConnection_ &&
                    ((this.isFirstConnection_ = !1),
                    gt.logSuccessEvent({
                      userId: this.client_.getUserId(),
                      eventType: TT,
                    }),
                    this.addEventInternal(
                      eF,
                      "uplink-connection is connected"
                    ));
                },
              },
              {
                key: "updateSSRC",
                value: function (M) {
                  var W = this;
                  try {
                    fo(M).media.forEach(function (G, ne) {
                      if (G.type === Ct) {
                        var H = G.ssrcs[0];
                        H && (W.ssrc_.audio = H.id);
                      } else {
                        if (W.sdpSemantics_ === w0)
                          return void G.ssrcGroups.forEach(function (w, q) {
                            var J = Number(w.ssrcs.split(" ")[0]);
                            q === 0
                              ? (W.ssrc_.video = J)
                              : q === 1 && (W.ssrc_.small = J);
                          });
                        var R = G.ssrcs[0];
                        if (!R) return;
                        switch (ne) {
                          case 1:
                            W.ssrc_.video = R.id;
                            break;
                          case 2:
                            W.ssrc_.small = R.id;
                            break;
                          case 3:
                            W.ssrc_.auxiliary = R.id;
                        }
                      }
                    });
                  } catch (G) {}
                },
              },
              {
                key: "getVideoTrackId",
                value: function () {
                  var M =
                    arguments.length > 0 && arguments[0] !== void 0
                      ? arguments[0]
                      : wt;
                  if (this.peerConnection_) {
                    var W = this.peerConnection_.getSenders();
                    if (M === wt && W[1] && W[1].track) return W[1].track.id;
                    if (M === oo && W[2] && W[2].track) return W[2].track.id;
                    if (M === Vn && W[3] && W[3].track) return W[3].track.id;
                  }
                  if (this.localStream_ && M === wt) {
                    var G = this.localStream_.getVideoTrack();
                    if (G) return G.id;
                  }
                  if (this.localAuxStream_ && M === Vn) {
                    var ne = this.localAuxStream_.getVideoTrack();
                    if (ne) return ne.id;
                  }
                  return "";
                },
              },
              {
                key: "getSSRC",
                value: function () {
                  return this.ssrc_;
                },
              },
              {
                key: "checkPublishResultCode",
                value: function (M, W) {
                  if (M !== 0)
                    throw M === 1028
                      ? (this.log_.error(Qo.NOT_SUPPORTED_H264ENCODE),
                        new De({
                          code: Oe.NOT_SUPPORTED_H264,
                          message: Fe({ key: hE }),
                        }))
                      : new De({
                          code: Oe.UNKNOWN,
                          message: Fe({
                            key: pE,
                            data: {
                              signalResponse: Cn.PUBLISH_RESULT,
                              code: M,
                              message: W,
                            },
                          }),
                        });
                },
              },
              {
                key: "getLocalStream",
                value: function () {
                  return this.localStream_;
                },
              },
              {
                key: "sendSEI",
                value: function (M, W) {
                  this.sei_.push(M, W);
                },
              },
              {
                key: "mixAudioTrack",
                value: function (M, W) {
                  this.log_.info("mix audio track"),
                    (this.mixedAudioTrack_ = (function (G) {
                      var ne = ME(),
                        H = ne.createMediaStreamDestination(),
                        R = [];
                      G.forEach(function (q) {
                        var J = new MediaStream();
                        J.addTrack(q);
                        var re = ne.createMediaStreamSource(J);
                        re.connect(H), R.push(re);
                      });
                      var w = H.stream.getAudioTracks()[0];
                      return (
                        Mv.set(w, {
                          destination: H,
                          track: w,
                          mediaStreamSourceList: R,
                        }),
                        w
                      );
                    })([M, W]));
                },
              },
              {
                key: "destroyMixedAudioTrack",
                value: function () {
                  this.mixedAudioTrack_ &&
                    (this.log_.info("destroy audio track"),
                    (function (M) {
                      if (Mv.has(M)) {
                        var W = Mv.get(M),
                          G = W.destination,
                          ne = W.track,
                          H = W.mediaStreamSourceList;
                        ne.stop(),
                          G.disconnect(),
                          H.forEach(function (R) {
                            R.disconnect();
                          }),
                          Mv.delete(M);
                      }
                    })(this.mixedAudioTrack_),
                    (this.mixedAudioTrack_ = null));
                },
              },
            ]),
            X
          );
        })(gb)),
        Be(
          bh.prototype,
          "publish",
          [FA],
          Object.getOwnPropertyDescriptor(bh.prototype, "publish"),
          bh.prototype
        ),
        bh),
      IG = He,
      zA = Rd,
      Uv = Ia.exports.getWeakData,
      RG = zo,
      CG = Wn,
      AG = cn,
      Eb = nn,
      xG = Id,
      HA = Jn,
      OG = On.set,
      PG = On.getterFor,
      DG = Mr.find,
      NG = Mr.findIndex,
      LG = IG([].splice),
      MG = 0,
      Vv = function (e) {
        return e.frozen || (e.frozen = new WA());
      },
      WA = function () {
        this.entries = [];
      },
      Ib = function (e, n) {
        return DG(e.entries, function (a) {
          return a[0] === n;
        });
      };
    WA.prototype = {
      get: function (e) {
        var n = Ib(this, e);
        if (n) return n[1];
      },
      has: function (e) {
        return !!Ib(this, e);
      },
      set: function (e, n) {
        var a = Ib(this, e);
        a ? (a[1] = n) : this.entries.push([e, n]);
      },
      delete: function (e) {
        var n = NG(this.entries, function (a) {
          return a[0] === e;
        });
        return ~n && LG(this.entries, n, 1), !!~n;
      },
    };
    var Sh,
      UG = {
        getConstructor: function (e, n, a, c) {
          var s = e(function (g, _) {
              RG(g, l),
                OG(g, { type: n, id: MG++, frozen: void 0 }),
                AG(_) || xG(_, g[c], { that: g, AS_ENTRIES: a });
            }),
            l = s.prototype,
            h = PG(n),
            v = function (_, b, C) {
              var N = h(_),
                z = Uv(CG(b), !0);
              return z === !0 ? Vv(N).set(b, C) : (z[N.id] = C), _;
            };
          return (
            zA(l, {
              delete: function (_) {
                var b = h(this);
                if (!Eb(_)) return !1;
                var C = Uv(_);
                return C === !0
                  ? Vv(b).delete(_)
                  : C && HA(C, b.id) && delete C[b.id];
              },
              has: function (_) {
                var b = h(this);
                if (!Eb(_)) return !1;
                var C = Uv(_);
                return C === !0 ? Vv(b).has(_) : C && HA(C, b.id);
              },
            }),
            zA(
              l,
              a
                ? {
                    get: function (_) {
                      var b = h(this);
                      if (Eb(_)) {
                        var C = Uv(_);
                        return C === !0 ? Vv(b).get(_) : C ? C[b.id] : void 0;
                      }
                    },
                    set: function (_, b) {
                      return v(this, _, b);
                    },
                  }
                : {
                    add: function (_) {
                      return v(this, _, !0);
                    },
                  }
            ),
            s
          );
        },
      },
      GA = ot,
      Fv = He,
      VG = Rd,
      FG = Ia.exports,
      jG = Gg,
      qA = UG,
      jv = nn,
      Bv = Kf,
      zv = On.enforce,
      BG = Ql,
      zG = !GA.ActiveXObject && "ActiveXObject" in GA,
      KA = function (e) {
        return function () {
          return e(this, arguments.length ? arguments[0] : void 0);
        };
      },
      HG = jG("WeakMap", KA, qA);
    if (BG && zG) {
      (Sh = qA.getConstructor(KA, "WeakMap", !0)), FG.enable();
      var wh = HG.prototype,
        JA = Fv(wh.delete),
        Hv = Fv(wh.has),
        $A = Fv(wh.get),
        YA = Fv(wh.set);
      VG(wh, {
        delete: function (e) {
          if (jv(e) && !Bv(e)) {
            var n = zv(this);
            return (
              n.frozen || (n.frozen = new Sh()),
              JA(this, e) || n.frozen.delete(e)
            );
          }
          return JA(this, e);
        },
        has: function (e) {
          if (jv(e) && !Bv(e)) {
            var n = zv(this);
            return (
              n.frozen || (n.frozen = new Sh()), Hv(this, e) || n.frozen.has(e)
            );
          }
          return Hv(this, e);
        },
        get: function (e) {
          if (jv(e) && !Bv(e)) {
            var n = zv(this);
            return (
              n.frozen || (n.frozen = new Sh()),
              Hv(this, e) ? $A(this, e) : n.frozen.get(e)
            );
          }
          return $A(this, e);
        },
        set: function (e, n) {
          if (jv(e) && !Bv(e)) {
            var a = zv(this);
            a.frozen || (a.frozen = new Sh()),
              Hv(this, e) ? YA(this, e, n) : a.frozen.set(e, n);
          } else YA(this, e, n);
          return this;
        },
      });
    }
    var WG = Ut,
      Wv = zd,
      GG = st,
      ZA = Yn,
      QA = Ft,
      qG = gp,
      XA = aT,
      KG = fr,
      Rb = Wv && Wv.prototype;
    if (
      (WG(
        {
          target: "Promise",
          proto: !0,
          real: !0,
          forced:
            !!Wv &&
            GG(function () {
              Rb.finally.call({ then: function () {} }, function () {});
            }),
        },
        {
          finally: function (e) {
            var n = qG(this, ZA("Promise")),
              a = QA(e);
            return this.then(
              a
                ? function (c) {
                    return XA(n, e()).then(function () {
                      return c;
                    });
                  }
                : e,
              a
                ? function (c) {
                    return XA(n, e()).then(function () {
                      throw c;
                    });
                  }
                : e
            );
          },
        }
      ),
      QA(Wv))
    ) {
      var e3 = ZA("Promise").prototype.finally;
      Rb.finally !== e3 && KG(Rb, "finally", e3, { unsafe: !0 });
    }
    var t3,
      n3,
      r3,
      i3,
      ta,
      hl = /* @__PURE__ */ new WeakMap();
    function a3() {
      return function (u, e, n) {
        var a = n.value,
          c = function s(l) {
            var h = l.fn,
              v = l.args,
              g = l.context,
              _ = l.resolve,
              b = l.reject;
            h.apply(g, v)
              .then(_, b)
              .finally(function () {
                var C = hl.get(g);
                C && (C.shift(), C[0] && s(p({}, C[0])));
              });
          };
        return (
          (n.value = function () {
            for (
              var s = this, l = arguments.length, h = new Array(l), v = 0;
              v < l;
              v++
            )
              h[v] = arguments[v];
            return new Promise(function (g, _) {
              if (hl.has(s)) {
                var b = hl.get(s),
                  C = b.length;
                b.push({
                  fn: a,
                  args: h,
                  context: s,
                  resolve: g,
                  reject: _,
                  name: e,
                }),
                  C === 0 &&
                    c({ fn: a, args: h, context: s, resolve: g, reject: _ });
              } else hl.set(s, [{ fn: a, args: h, context: s, resolve: g, reject: _, name: e }]), c({ fn: a, args: h, context: s, resolve: g, reject: _ });
            });
          }),
          n
        );
      };
    }
    var JG =
        ((t3 = a3()),
        (n3 = dl({
          retries: 1,
          timeout: 0,
          onRetrying: function (e) {
            this.log_.warn("connection timeout, retrying [".concat(e, "]"));
          },
          onError: function (e, n, a) {
            e.message.includes("timeout") ? n() : a(e);
          },
        })),
        (r3 = a3()),
        (i3 = (function () {
          var u =
            arguments.length > 0 && arguments[0] !== void 0
              ? arguments[0]
              : 1e4;
          return function (e, n, a) {
            var c = a.value;
            return (
              (a.value = function () {
                for (
                  var s = this, l = arguments.length, h = new Array(l), v = 0;
                  v < l;
                  v++
                )
                  h[v] = arguments[v];
                return new Promise(function (g, _) {
                  var b = setTimeout(function () {
                    return _(new Error("".concat(n, " timeout")));
                  }, u);
                  c.apply(s, h)
                    .then(g, _)
                    .finally(function () {
                      clearTimeout(b);
                    });
                });
              }),
              a
            );
          };
        })()),
        (ta = (function (u) {
          be(g, u);
          var e,
            n,
            a,
            c,
            s,
            l,
            h,
            v = Tt(g);
          function g(_) {
            var b;
            return (
              B(this, g),
              ((b = v.call(this, _)).remoteStreams_ =
                /* @__PURE__ */ new Map()),
              (b.autoSubscribe = _.autoSubscribe),
              (b.trackState_ = {
                audio: _.trackState.audio,
                video: _.trackState.video,
                auxiliary: _.trackState.auxiliary,
                smallVideo: _.trackState.smallVideo,
              }),
              (b.ssrc_ = { audio: 0, video: 0, auxiliary: 0 }),
              (b.subscribeState_ = {
                audio: _.autoSubscribe,
                video: _.autoSubscribe,
                auxiliary: _.autoSubscribe,
                smallVideo: !1,
              }),
              (b.isSDPExchanging_ = !1),
              b.installEvents(),
              b
            );
          }
          return (
            oe(g, [
              {
                key: "getMixUserList",
                value: function () {
                  return this.mixUserList_
                    ? this.mixUserList_.map(function (b) {
                        var C = b.userId,
                          N = b.flag;
                        return {
                          userId: C,
                          hasAudio: !!(8 & N),
                          hasVideo: !!(1 & N),
                          hasAuxiliary: !!(4 & N),
                        };
                      })
                    : void 0;
                },
              },
              {
                key: "setMixUserList",
                value: function (b) {
                  (!this.mixUserList_ ||
                    (Hc(this.mixUserList_) &&
                      !(function (C, N) {
                        if (N.length === C.length) {
                          var z,
                            F = nt(N);
                          try {
                            var U = function () {
                              var L = z.value,
                                $ = C.find(function (te) {
                                  return te.userId === L.userId;
                                });
                              if (!$ || $.flag !== L.flag) return { v: !1 };
                            };
                            for (F.s(); !(z = F.n()).done; ) {
                              var E = U();
                              if (S(E) === "object") return E.v;
                            }
                          } catch (A) {
                            F.e(A);
                          } finally {
                            F.f();
                          }
                          return !0;
                        }
                        return !1;
                      })(this.mixUserList_, b))) &&
                    ((this.mixUserList_ = b),
                    this.emitter_.emit(_n.STREAM_UPDATED, {
                      stream: this.getMainStream(),
                    }));
                },
              },
              {
                key: "isMainStreamSubscribed",
                get: function () {
                  return (
                    (this.subscribeState_.audio ||
                      this.subscribeState_.video ||
                      this.subscribeState_.smallVideo) &&
                    (this.trackState_.audio ||
                      this.trackState_.video ||
                      this.trackState_.smallVideo)
                  );
                },
              },
              {
                key: "isAuxStreamSubscribed",
                get: function () {
                  return (
                    this.subscribeState_.auxiliary && this.trackState_.auxiliary
                  );
                },
              },
              {
                key: "isSmallStreamSubscribed",
                get: function () {
                  return (
                    this.subscribeState_.smallVideo &&
                    this.trackState_.smallVideo
                  );
                },
              },
              {
                key: "isBigStreamSubscribed",
                get: function () {
                  return this.subscribeState_.video && this.trackState_.video;
                },
              },
              {
                key: "isStreamUnpublished",
                value: function (b) {
                  return b.getType() === hn
                    ? !this.trackState_.audio && !this.trackState_.video
                    : !this.trackState_.auxiliary;
                },
              },
              {
                key: "initialize",
                value: function () {
                  yt(Ie(g.prototype), "initialize", this).call(this),
                    (this.peerConnection_.ontrack = this.onTrack.bind(this));
                },
              },
              {
                key: "close",
                value: function () {
                  var b,
                    C,
                    N,
                    z = this;
                  yt(Ie(g.prototype), "close", this).call(this),
                    (this.trackState_.audio = !1),
                    (this.trackState_.video = !1),
                    (this.trackState_.smallVideo = !1),
                    (this.trackState_.auxiliary = !1),
                    this.emitConnectionStateChangedEvent(Vr),
                    (b = this),
                    (C = function (U) {
                      U.fn;
                      var E = U.args,
                        A = U.resolve,
                        L = U.reject,
                        $ = U.name;
                      if ($ === "subscribe") {
                        if (!z.client_.getIsJoined())
                          return L(
                            new De({
                              code: Oe.API_CALL_ABORTED,
                              message: Fe({
                                key: L0,
                                data: { message: "leave room", stream: E[0] },
                              }),
                            })
                          );
                        if (z.isStreamUnpublished(E[0]))
                          return L(
                            new De({
                              code: Oe.API_CALL_ABORTED,
                              message: Fe({
                                key: L0,
                                data: {
                                  message: "remote user ".concat(
                                    z.userId_,
                                    " unpublished stream"
                                  ),
                                  stream: E[0],
                                },
                              }),
                            })
                          );
                      } else if ($ === "unsubscribe") return A();
                      A();
                    }),
                    (N = hl.get(b)) === null || N === void 0 || N.forEach(C),
                    hl.delete(b),
                    this.remoteStreams_.forEach(function (F) {
                      var U = F;
                      U.setConnection(null),
                        U.uninstallEvents(),
                        U.getIsStreamAddedEventEmitted() &&
                          z.emitter_.emit(_n.STREAM_REMOVED, { stream: U });
                    }),
                    this.remoteStreams_.clear(),
                    this.uninstallEvents();
                },
              },
              {
                key: "installEvents",
                value: function () {
                  var b = this;
                  Ee.on(Ri, this.onRemoteStreamUpdate, this),
                    this.emitter_.on(_n.ERROR, function (C) {
                      C.getCode() === Oe.ICE_TRANSPORT_ERROR &&
                        (b.isFirstConnection_ &&
                          ((b.isFirstConnection_ = !1),
                          gt.logFailedEvent({
                            userId: b.client_.getUserId(),
                            eventType: IT,
                            error: C,
                          })),
                        b.isReconnecting_ || b.startReconnection());
                    }),
                    this.emitter_.on(_n.CONNECTION_STATE_CHANGED, function (C) {
                      C.state === Fr &&
                        b.isFirstConnection_ &&
                        ((b.isFirstConnection_ = !1),
                        gt.logSuccessEvent({
                          userId: b.client_.getUserId(),
                          eventType: IT,
                        }),
                        b.addEventInternal(
                          tF,
                          "downlink-connection is connected"
                        ));
                    });
                },
              },
              {
                key: "uninstallEvents",
                value: function () {
                  Ee.removeListener(Ri, this.onRemoteStreamUpdate, this);
                },
              },
              {
                key: "onRemoteStreamUpdate",
                value: function (b) {
                  if (this.hitTest(b.tinyId) && b.client === this.client_) {
                    this.updateTrackState(b.action, b.kind);
                    var C = b.kind === Vn ? qd : Oa,
                      N = this.remoteStreams_.get(C);
                    if (!N) return;
                    b.action === jr.ADD
                      ? this.handleRemoteAddTrack(b.kind, N)
                      : this.handleRemoteRemoveTrack(b.kind, N);
                  }
                },
              },
              {
                key: "handleRemoteAddTrack",
                value: function (b, C) {
                  this.log_.info("remote add ".concat(b, " track")),
                    b === Ct
                      ? C.updateAudioPlayingState(this.subscribeState_.audio)
                      : C.updateVideoPlayingState(
                          b === Vn
                            ? this.subscribeState_.auxiliary
                            : this.subscribeState_.video ||
                                this.subscribeState_.smallVideo
                        ),
                    C.getIsStreamAddedEventEmitted()
                      ? this.emitter_.emit(_n.STREAM_UPDATED, { stream: C })
                      : (this.emitter_.emit(_n.STREAM_ADDED, { stream: C }),
                        this.currentState_ === Fr &&
                          C.emitConnectionStateChanged({
                            prevState: Vr,
                            state: Fr,
                          }));
                },
              },
              {
                key: "handleRemoteRemoveTrack",
                value: function (b, C) {
                  C.getIsStreamAddedEventEmitted() &&
                    (this.log_.info("remote remove ".concat(b, " track")),
                    b === Vn ||
                    (!this.trackState_.audio && !this.trackState_.video)
                      ? (this.log_.info(
                          "remote stream ".concat(C.getType(), " removed")
                        ),
                        this.currentState_ === Fr &&
                          C.emitConnectionStateChanged({
                            prevState: Fr,
                            state: Vr,
                          }),
                        this.emitter_.emit(_n.STREAM_REMOVED, { stream: C }))
                      : (b === Ct
                          ? C.updateAudioPlayingState(!1)
                          : (b !== Ep || this.isSmallStreamSubscribed) &&
                            C.updateVideoPlayingState(!1),
                        this.emitter_.emit(_n.STREAM_UPDATED, { stream: C })));
                },
              },
              {
                key: "updateTrackState",
                value: function (b, C) {
                  var N = b === jr.ADD;
                  switch (C) {
                    case Ct:
                      this.trackState_.audio = N;
                      break;
                    case wt:
                      this.trackState_.video = N;
                      break;
                    case Vn:
                      this.trackState_.auxiliary = N;
                      break;
                    case Ep:
                      this.trackState_.smallVideo = N;
                  }
                  this.log_.info(
                    "trackState updated: ".concat(
                      JSON.stringify(this.trackState_)
                    )
                  );
                },
              },
              {
                key: "onTrack",
                value: function (b) {
                  var C = b.streams[0],
                    N = b.track;
                  if (
                    (this.log_.info(
                      "ontrack() kind: "
                        .concat(N.kind, " id: ")
                        .concat(N.id, " streamId: ")
                        .concat(C.id)
                    ),
                    this.sdpSemantics_ === Jd)
                  ) {
                    var z = (function (L) {
                      var $ = $i.parse(L),
                        te = { audio: [], video: [] };
                      return (
                        $.media.forEach(function (X) {
                          if (X.ssrcs) {
                            var D = (X.ssrcs[0].id >> 16) & 255;
                            if (X.type === Ct) te.audio.push(Oa);
                            else if (X.type == wt) {
                              var M = D === zM ? Oa : qd;
                              te.video.push(M);
                            }
                          }
                        }),
                        te
                      );
                    })(this.peerConnection_.remoteDescription.sdp);
                    if (N.kind === Ct) {
                      if (z.audio.length === 0 || C.id !== Oa)
                        return void this.log_.debug(
                          "skip this invalid audio track"
                        );
                    } else if (z.video.indexOf(C.id) === -1)
                      return void this.log_.debug(
                        "skip this invalid video track: "
                          .concat(N.id, "  msid: ")
                          .concat(C.id)
                      );
                  }
                  gt.logEvent({ eventType: "ontrack", kind: N.kind });
                  var F = !1,
                    U = this.remoteStreams_.get(C.id),
                    E = C.id === Oa ? Bn : ir;
                  if (
                    (ht(U) &&
                      ((U = new bb({
                        type: E,
                        userId: this.userId_,
                        client: this.client_,
                      })).setConnection(this),
                      this.remoteStreams_.set(C.id, U),
                      (F = !0)),
                    U.setMediaStream(C),
                    N.kind === Ct
                      ? U.updateAudioPlayingState(this.subscribeState_.audio)
                      : E === Bn
                      ? U.updateVideoPlayingState(
                          this.subscribeState_.video ||
                            this.subscribeState_.smallVideo
                        )
                      : U.updateVideoPlayingState(
                          this.subscribeState_.auxiliary
                        ),
                    (E !== ir || this.trackState_.auxiliary) &&
                      (E !== Bn ||
                        this.trackState_.audio ||
                        this.trackState_.video))
                  ) {
                    var A = this.client_.getSubscriptionManager();
                    (A && A.hasAutoRecoveryFlag(this.userId_, E)) ||
                      (F
                        ? this.emitter_.emit(_n.STREAM_ADDED, { stream: U })
                        : this.emitter_.emit(_n.STREAM_UPDATED, { stream: U }));
                  }
                },
              },
              {
                key: "addRRTRLine",
                value: function (b) {
                  var C = b.split(`\r
`),
                    N = /* @__PURE__ */ new Map();
                  C.forEach(function (L, $) {
                    /^a=rtcp-fb:/.test(L) &&
                      C[$ + 1] &&
                      !/^a=rtcp-fb:/.test(C[$ + 1]) &&
                      L.match(/^a=rtcp-fb:\d+/) &&
                      N.set($ + 1, L.match(/^a=rtcp-fb:\d+/)[0] + " rrtr");
                  });
                  for (var z = Ze(N), F = 0; F < z.length; F++) {
                    var U = Et(z[F], 2),
                      E = U[0],
                      A = U[1];
                    C.splice(E + F, 0, A);
                  }
                  return C.join(`\r
`);
                },
              },
              {
                key: "addSPSDescription",
                value: function (b) {
                  var C = fo(b);
                  return (
                    C.media.forEach(function (N) {
                      N.type === wt &&
                        N.fmtp.forEach(function (z) {
                          z.config += ";sps-pps-idr-in-keyframe=1";
                        });
                    }),
                    Yc(C)
                  );
                },
              },
              {
                key: "removeSDESDescription",
                value: function (b) {
                  var C = [
                      "urn:ietf:params:rtp-hdrext:sdes:mid",
                      "urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",
                      "urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",
                    ],
                    N = fo(b);
                  return (
                    N.media.forEach(function (z) {
                      z.ext = z.ext.filter(function (F) {
                        return !C.includes(F.uri);
                      });
                    }),
                    Yc(N)
                  );
                },
              },
              {
                key: "isSubscriptionStateNotChanged",
                value: function (b, C) {
                  return b.getType() === Bn
                    ? (C == null ? void 0 : C.audio) ===
                        this.subscribeState_.audio &&
                        (C == null ? void 0 : C.video) ===
                          this.subscribeState_.video &&
                        this.isSubscribeSmall(C)
                    : b.getType() === ir
                    ? !ht(C.video) && this.subscribeState_.auxiliary === C.video
                    : void 0;
                },
              },
              {
                key: "isSubscribeSmall",
                value: function (b) {
                  return ht(b.smallVideo) && !this.subscribeState_.smallVideo;
                },
              },
              {
                key: "subscribe",
                value:
                  ((h = I(
                    m().mark(function _(b, C) {
                      var N, z, F, U, E, A;
                      return m().wrap(
                        function (L) {
                          for (;;)
                            switch ((L.prev = L.next)) {
                              case 0:
                                if (
                                  ((L.prev = 0),
                                  (F = C.emitEvent),
                                  (U = F === void 0 || F),
                                  (E = b.getType()),
                                  ((N = this.peerConnection_) === null ||
                                  N === void 0
                                    ? void 0
                                    : N.connectionState) !== HM &&
                                    ((z = this.peerConnection_) === null ||
                                    z === void 0
                                      ? void 0
                                      : z.connectionState) !== xp)
                                ) {
                                  L.next = 6;
                                  break;
                                }
                                return (
                                  (L.next = 6),
                                  this.waitForPeerConnectionConnected()
                                );
                              case 6:
                                if (!this.isSubscriptionStateNotChanged(b, C)) {
                                  L.next = 13;
                                  break;
                                }
                                if (this.peerConnection_) {
                                  L.next = 11;
                                  break;
                                }
                                return (
                                  this.initialize(),
                                  (L.next = 11),
                                  this.connect()
                                );
                              case 11:
                                return (
                                  U &&
                                    ht(C.smallVideo) &&
                                    this.emitter_.emit(_n.STREAM_SUBSCRIBED, {
                                      stream: b,
                                      result: !0,
                                    }),
                                  L.abrupt("return", b)
                                );
                              case 13:
                                if (
                                  (E === hn
                                    ? (ht(C.audio) ||
                                        (this.subscribeState_.audio = C.audio),
                                      ht(C.video) ||
                                        (this.subscribeState_.video = C.video),
                                      (this.subscribeState_.smallVideo =
                                        (C == null ? void 0 : C.smallVideo) ||
                                        !1),
                                      this.addEventInternal(
                                        this.subscribeState_.audio ? gI : Uy,
                                        this.subscribeState_.audio
                                          ? "subscribe audio"
                                          : "unsubscribe audio"
                                      ),
                                      this.addEventInternal(
                                        this.subscribeState_.video ? gI : Uy,
                                        this.subscribeState_.video
                                          ? "subscribe video"
                                          : "unsubscribe video"
                                      ),
                                      this.addEventInternal(
                                        this.subscribeState_.smallVideo
                                          ? dF
                                          : hF,
                                        this.subscribeState_.smallVideo
                                          ? "subscribe smallVideo"
                                          : "unsubscribe smallVideo"
                                      ))
                                    : ht(C.video) ||
                                      (this.subscribeState_.auxiliary =
                                        C.video),
                                  this.log_.info(
                                    "subscribe "
                                      .concat(E, " stream with options ")
                                      .concat(
                                        JSON.stringify(C),
                                        " current state: "
                                      )
                                      .concat(
                                        JSON.stringify(this.subscribeState_)
                                      )
                                  ),
                                  !this.peerConnection_ &&
                                    !this.isSDPExchanging_)
                                ) {
                                  L.next = 23;
                                  break;
                                }
                                return (
                                  (A = S0),
                                  this.isMainStreamSubscribed ||
                                    this.isAuxStreamSubscribed ||
                                    (A = b0),
                                  (L.next = 20),
                                  this.sendSubscription(A)
                                );
                              case 20:
                                E === hn
                                  ? (b.updateAudioPlayingState(
                                      this.subscribeState_.audio
                                    ),
                                    b.updateVideoPlayingState(
                                      this.subscribeState_.video ||
                                        this.subscribeState_.smallVideo
                                    ))
                                  : b.updateVideoPlayingState(
                                      this.subscribeState_.auxiliary
                                    ),
                                  (L.next = 26);
                                break;
                              case 23:
                                return (
                                  this.initialize(),
                                  (L.next = 26),
                                  this.connect()
                                );
                              case 26:
                                return (
                                  U &&
                                    this.emitter_.emit(_n.STREAM_SUBSCRIBED, {
                                      stream: b,
                                      result: !0,
                                    }),
                                  L.abrupt("return", b)
                                );
                              case 30:
                                if (
                                  ((L.prev = 30),
                                  (L.t0 = L.catch(0)),
                                  !this.client_.getIsJoined() ||
                                    !this.isStreamUnpublished(b))
                                ) {
                                  L.next = 35;
                                  break;
                                }
                                throw (
                                  (this.log_.warn(
                                    ""
                                      .concat(L.t0.message, " ")
                                      .concat(JSON.stringify(this.trackState_))
                                  ),
                                  new De({
                                    code: Oe.REMOTE_STREAM_NOT_EXIST,
                                    message: "remote user ".concat(
                                      this.userId_,
                                      " unpublished stream"
                                    ),
                                  }))
                                );
                              case 35:
                                throw L.t0;
                              case 36:
                              case "end":
                                return L.stop();
                            }
                        },
                        _,
                        this,
                        [[0, 30]]
                      );
                    })
                  )),
                  function (_, b) {
                    return h.apply(this, arguments);
                  }),
              },
              {
                key: "checkTrackEnded",
                value: function () {
                  try {
                    var b = this.peerConnection_
                      .getReceivers()
                      .map(function (C) {
                        return C.track;
                      })
                      .find(function (C) {
                        return C.readyState === "ended";
                      });
                    b &&
                      this.currentState_ === Fr &&
                      !this.isReconnecting_ &&
                      (this.log_.warn(
                        "".concat(b.kind, " track ended, start reconnect")
                      ),
                      this.startReconnection());
                  } catch (C) {}
                },
              },
              {
                key: "unsubscribe",
                value:
                  ((l = I(
                    m().mark(function _(b) {
                      var C, N, z;
                      return m().wrap(
                        function (F) {
                          for (;;)
                            switch ((F.prev = F.next)) {
                              case 0:
                                if ((C = b.getType()) !== hn) {
                                  F.next = 10;
                                  break;
                                }
                                if (this.isMainStreamSubscribed) {
                                  F.next = 5;
                                  break;
                                }
                                return (
                                  this.log_.info(
                                    "main stream already unsubscribed"
                                  ),
                                  F.abrupt("return", b)
                                );
                              case 5:
                                (this.subscribeState_.audio = !1),
                                  (this.subscribeState_.video = !1),
                                  (this.subscribeState_.smallVideo = !1),
                                  (F.next = 14);
                                break;
                              case 10:
                                if (this.isAuxStreamSubscribed) {
                                  F.next = 13;
                                  break;
                                }
                                return (
                                  this.log_.info(
                                    "auxiliary stream already unsubscribed"
                                  ),
                                  F.abrupt("return", b)
                                );
                              case 13:
                                this.subscribeState_.auxiliary = !1;
                              case 14:
                                return (
                                  (N = b0),
                                  ((C === Bn && this.isAuxStreamSubscribed) ||
                                    (C === ir &&
                                      this.isMainStreamSubscribed)) &&
                                    (N = S0),
                                  this.log_.info(
                                    "unsubscribe "
                                      .concat(C, " stream with ")
                                      .concat(
                                        JSON.stringify(this.subscribeState_)
                                      )
                                  ),
                                  (F.next = 19),
                                  this.sendSubscription(N)
                                );
                              case 19:
                                return (
                                  b.updateVideoPlayingState(!1),
                                  b.updateAudioPlayingState(!1),
                                  N === b0 &&
                                    ((z = b.getMediaStream()) &&
                                      z.getTracks().forEach(function (U) {
                                        return z.removeTrack(U);
                                      }),
                                    this.closePeerConnection(),
                                    this.emitConnectionStateChangedEvent(Vr)),
                                  this.addEventInternal(
                                    Uy,
                                    "unsubscribe audio"
                                  ),
                                  this.addEventInternal(
                                    B9,
                                    "unsubscribe video"
                                  ),
                                  F.abrupt("return", b)
                                );
                              case 25:
                              case "end":
                                return F.stop();
                            }
                        },
                        _,
                        this
                      );
                    })
                  )),
                  function (_) {
                    return l.apply(this, arguments);
                  }),
              },
              {
                key: "sendSubscription",
                value: function (b) {
                  var C = this,
                    N = { srcTinyId: this.tinyId_, srcUserId: this.userId_ },
                    z = k9,
                    F = Cn.UNSUBSCRIBE_RESULT;
                  return (
                    b === S0 &&
                      ((N = {
                        audio: this.subscribeState_.audio,
                        bigVideo: this.subscribeState_.video,
                        auxVideo: this.subscribeState_.auxiliary,
                        smallVideo: this.subscribeState_.smallVideo,
                        srcTinyId: this.tinyId_,
                      }),
                      (z = T9),
                      (F = Cn.SUBSCRIBE_CHANGE_RESULT)),
                    this.signalChannel_
                      .sendWaitForResponse({
                        command: z,
                        data: N,
                        responseCommand: F,
                        timeout: 1e4,
                      })
                      .then(function (U) {
                        var E = U.data;
                        if (E.code !== 0) {
                          var A = new De({
                            code: E.code,
                            message: Fe({
                              key: y7,
                              data: { type: b, message: E.message },
                            }),
                          });
                          throw (C.log_.error(A), A);
                        }
                      })
                  );
                },
              },
              {
                key: "connect",
                value:
                  ((s = I(
                    m().mark(function _() {
                      return m().wrap(
                        function (b) {
                          for (;;)
                            switch ((b.prev = b.next)) {
                              case 0:
                                return (
                                  (b.prev = 0), (b.next = 3), this.exchangeSDP()
                                );
                              case 3:
                                return (
                                  (b.next = 5),
                                  this.waitForPeerConnectionConnected()
                                );
                              case 5:
                                b.next = 11;
                                break;
                              case 7:
                                throw (
                                  ((b.prev = 7),
                                  (b.t0 = b.catch(0)),
                                  this.closePeerConnection(!0),
                                  b.t0)
                                );
                              case 11:
                              case "end":
                                return b.stop();
                            }
                        },
                        _,
                        this,
                        [[0, 7]]
                      );
                    })
                  )),
                  function () {
                    return s.apply(this, arguments);
                  }),
              },
              {
                key: "exchangeSDP",
                value:
                  ((c = I(
                    m().mark(function _() {
                      var b, C, N, z, F, U;
                      return m().wrap(
                        function (E) {
                          for (;;)
                            switch ((E.prev = E.next)) {
                              case 0:
                                return (
                                  (E.prev = 0),
                                  (this.isSDPExchanging_ = !0),
                                  (E.next = 4),
                                  this.createOffer()
                                );
                              case 4:
                                return (
                                  this.log_.info(
                                    "createOffer success, sending offer to remote server"
                                  ),
                                  (b = this.peerConnection_.localDescription),
                                  (C = b.type),
                                  (N = b.sdp),
                                  (z = {
                                    type: C,
                                    sdp: N,
                                    srcUserId: this.userId_,
                                    srcTinyId: this.tinyId_,
                                    audio: this.subscribeState_.audio,
                                    bigVideo: this.subscribeState_.video,
                                    auxVideo: this.subscribeState_.auxiliary,
                                    smallVideo: this.subscribeState_.smallVideo,
                                  }),
                                  Ee.emit(Ry, {
                                    client: this.client_,
                                    connection: this,
                                    userId: this.userId_,
                                    tinyId: this.tinyId_,
                                    role: Vc,
                                    subscribeState: this.subscribeState_,
                                    trackState: this.trackState_,
                                  }),
                                  (E.next = 10),
                                  this.signalChannel_.sendWaitForResponse({
                                    command: w9,
                                    commandDesc: "exchange sdp",
                                    data: z,
                                    responseCommand: Cn.SUBSCRIBE_RESULT,
                                    timeout: 1e4,
                                  })
                                );
                              case 10:
                                if (((F = E.sent), this.peerConnection_)) {
                                  E.next = 15;
                                  break;
                                }
                                throw (
                                  ((U = new De({
                                    code: Oe.INVALID_OPERATION,
                                    message: Fe({ key: BU }),
                                  })),
                                  this.log_.warn(U),
                                  U)
                                );
                              case 15:
                                return (E.next = 17), this.onSubscribeResult(F);
                              case 17:
                                (this.isSDPExchanging_ = !1), (E.next = 24);
                                break;
                              case 20:
                                throw (
                                  ((E.prev = 20),
                                  (E.t0 = E.catch(0)),
                                  (this.isSDPExchanging_ = !1),
                                  E.t0)
                                );
                              case 24:
                              case "end":
                                return E.stop();
                            }
                        },
                        _,
                        this,
                        [[0, 20]]
                      );
                    })
                  )),
                  function () {
                    return c.apply(this, arguments);
                  }),
              },
              {
                key: "createOffer",
                value:
                  ((a = I(
                    m().mark(function _() {
                      var b, C;
                      return m().wrap(
                        function (N) {
                          for (;;)
                            switch ((N.prev = N.next)) {
                              case 0:
                                return (
                                  (b = { voiceActivityDetection: !1 }),
                                  ev() && this.sdpSemantics_ === Jd
                                    ? (this.peerConnection_.addTransceiver(Ct, {
                                        direction: "recvonly",
                                      }),
                                      this.peerConnection_.addTransceiver(wt, {
                                        direction: "recvonly",
                                      }),
                                      this.peerConnection_.addTransceiver(wt, {
                                        direction: "recvonly",
                                      }))
                                    : ((b.offerToReceiveAudio = !0),
                                      (b.offerToReceiveVideo = !0)),
                                  (N.next = 4),
                                  this.peerConnection_.createOffer(b)
                                );
                              case 4:
                                return (C = N.sent), (N.next = 7), DI();
                              case 7:
                                return (
                                  N.sent.isH264DecodeSupported ||
                                    (this.log_.warn(
                                      "remove h264 desc from sdp"
                                    ),
                                    (C.sdp =
                                      ((z = C.sdp),
                                      (F = void 0),
                                      (F = fo(z)).media.forEach(function (U) {
                                        if (U.type === wt) {
                                          var E = /* @__PURE__ */ new Set();
                                          U.rtp.forEach(function (L) {
                                            var $ = L.payload;
                                            return (
                                              L.codec === "H264" && E.add($)
                                            );
                                          }),
                                            U.fmtp.forEach(function (L) {
                                              var $ = L.payload,
                                                te =
                                                  L.config.match(/apt=(\d+)/);
                                              te &&
                                                te[1] &&
                                                E.has(Number(te[1])) &&
                                                E.add($);
                                            });
                                          var A = function ($) {
                                            var te = $.payload;
                                            return !E.has(te);
                                          };
                                          (U.rtp = U.rtp.filter(A)),
                                            (U.rtcpFb = U.rtcpFb.filter(A)),
                                            (U.fmtp = U.fmtp.filter(A)),
                                            (U.payloads = U.payloads
                                              .split(" ")
                                              .filter(function (L) {
                                                return !E.has(Number(L));
                                              })
                                              .join(" "));
                                        }
                                      }),
                                      Yc(F)))),
                                  (C.sdp = this.addRRTRLine(C.sdp)),
                                  (C.sdp = this.addSPSDescription(C.sdp)),
                                  (C.sdp = UF(C.sdp)),
                                  this.sdpSemantics_ === Jd &&
                                    (C.sdp = this.removeSDESDescription(C.sdp)),
                                  (N.next = 16),
                                  this.peerConnection_.setLocalDescription(C)
                                );
                              case 16:
                              case "end":
                                return N.stop();
                            }
                          var z, F;
                        },
                        _,
                        this
                      );
                    })
                  )),
                  function () {
                    return a.apply(this, arguments);
                  }),
              },
              {
                key: "onSubscribeResult",
                value:
                  ((n = I(
                    m().mark(function _(b) {
                      var C,
                        N,
                        z,
                        F,
                        U,
                        E,
                        A,
                        L = this;
                      return m().wrap(
                        function ($) {
                          for (;;)
                            switch (($.prev = $.next)) {
                              case 0:
                                if (
                                  ((C = (b && b.data) || {}),
                                  (N = C.code),
                                  (z = C.message),
                                  (F = z === void 0 ? "" : z),
                                  (U = (b && b.data && b.data.data) || {}),
                                  (E = U.type),
                                  (A = U.sdp),
                                  N !== 77393)
                                ) {
                                  $.next = 5;
                                  break;
                                }
                                throw (
                                  (this.log_.error(Qo.NOT_SUPPORTED_H264DECODE),
                                  new De({
                                    code: Oe.NOT_SUPPORTED_H264,
                                    message: Fe({ key: fE }),
                                  }))
                                );
                              case 5:
                                if ((($.prev = 5), N === 0)) {
                                  $.next = 8;
                                  break;
                                }
                                throw new De({
                                  code: N,
                                  message: Fe({ key: w7, data: { errMsg: F } }),
                                });
                              case 8:
                                return (
                                  this.log_.debug("accept remote answer: " + A),
                                  ($.next = 11),
                                  this.peerConnection_.setRemoteDescription({
                                    type: E,
                                    sdp: A,
                                  })
                                );
                              case 11:
                                this.sei_ &&
                                  (this.sei_.handleEncodedStreams(),
                                  (this.sei_.onSEIMessage = function (te) {
                                    L.emitter_.emit(
                                      _n.SEI_MESSAGE,
                                      p(p({}, te), {}, { userId: L.userId_ })
                                    );
                                  })),
                                  this.updateSSRC(A),
                                  ($.next = 19);
                                break;
                              case 15:
                                throw (
                                  (($.prev = 15),
                                  ($.t0 = $.catch(5)),
                                  this.log_.error($.t0),
                                  $.t0)
                                );
                              case 19:
                              case "end":
                                return $.stop();
                            }
                        },
                        _,
                        this,
                        [[5, 15]]
                      );
                    })
                  )),
                  function (_) {
                    return n.apply(this, arguments);
                  }),
              },
              {
                key: "updateSSRC",
                value: function (b) {
                  var C = this;
                  try {
                    fo(b).media.forEach(function (N) {
                      if (N.type === Ct) {
                        var z = N.ssrcs.find(function (E) {
                          return E.value.includes(Oa);
                        });
                        z && (C.ssrc_.audio = z.id);
                      } else {
                        var F = N.ssrcs.find(function (E) {
                            return E.value.includes(Oa);
                          }),
                          U = N.ssrcs.find(function (E) {
                            return E.value.includes(qd);
                          });
                        F && (C.ssrc_.video = F.id),
                          U && (C.ssrc_.auxiliary = U.id);
                      }
                    });
                  } catch (N) {}
                },
              },
              {
                key: "setRemoteStream",
                value: function (b, C) {
                  this.remoteStreams_.set(b, C);
                },
              },
              {
                key: "getSubscribeState",
                value: function () {
                  return this.subscribeState_;
                },
              },
              {
                key: "getTrackState",
                value: function () {
                  return this.trackState_;
                },
              },
              {
                key: "getSSRC",
                value: function () {
                  return this.ssrc_;
                },
              },
              {
                key: "getMainStream",
                value: function () {
                  return this.remoteStreams_.get(Oa);
                },
              },
              {
                key: "getAuxStream",
                value: function () {
                  return this.remoteStreams_.get(qd);
                },
              },
              {
                key: "getMainStreamVideoTrackId",
                value: function () {
                  var b = this.getMainStream();
                  if (b) {
                    var C = b.getVideoTrack();
                    if (C) return C.id;
                  }
                  return "";
                },
              },
              {
                key: "getAuxStreamVideoTrackId",
                value: function () {
                  var b = this.getAuxStream();
                  if (b) {
                    var C = b.getVideoTrack();
                    if (C) return C.id;
                  }
                  return "";
                },
              },
              {
                key: "reconnect",
                value:
                  ((e = I(
                    m().mark(function _() {
                      var b,
                        C,
                        N = this;
                      return m().wrap(
                        function (z) {
                          for (;;)
                            switch ((z.prev = z.next)) {
                              case 0:
                                if (this.reconnectionTimer_ === -1) {
                                  z.next = 3;
                                  break;
                                }
                                return (
                                  this.log_.warn(
                                    "reconnect() downlink is reconnecting, ignore current reconnection"
                                  ),
                                  z.abrupt("return")
                                );
                              case 3:
                                if (!(this.reconnectionCount_ >= 30)) {
                                  z.next = 12;
                                  break;
                                }
                                return (
                                  this.log_.warn(
                                    "SDK has tried reconnect downlink ["
                                      .concat(this.userId_, "] for ")
                                      .concat(
                                        30,
                                        " times, but all failed, please check your network"
                                      )
                                  ),
                                  this.stopReconnection(),
                                  (b = new De({
                                    code: Oe.DOWNLINK_RECONNECTION_FAILED,
                                    message: Fe({ key: S7 }),
                                  })),
                                  gt.logFailedEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: RT,
                                    error: b,
                                  }),
                                  this.addEventInternal(
                                    lF,
                                    "downlink-connection reconnect fail"
                                  ),
                                  this.emitConnectionStateChangedEvent(Vr),
                                  this.emitter_.emit(_n.ERROR, b),
                                  z.abrupt("return")
                                );
                              case 12:
                                if (
                                  this.signalChannel_.getCurrentState() === rh
                                ) {
                                  z.next = 16;
                                  break;
                                }
                                return (
                                  this.log_.warn(
                                    "reconnect() signal channel is not connected, suspend reconnection until signal is connected"
                                  ),
                                  this.signalChannel_.once(
                                    nh,
                                    this.reconnect,
                                    this
                                  ),
                                  z.abrupt("return")
                                );
                              case 16:
                                if (
                                  (this.reconnectionCount_++,
                                  this.log_.warn(
                                    "reconnect() try to reconnect downlink ["
                                      .concat(this.reconnectionCount_, "/")
                                      .concat(30, "]")
                                  ),
                                  (C = ty(this.reconnectionCount_)),
                                  (this.reconnectionTimer_ = setTimeout(
                                    function () {
                                      N.log_.warn(
                                        "reconnect() downlink ["
                                          .concat(
                                            N.userId_,
                                            "] reconnect timeout("
                                          )
                                          .concat(C / 1e3, "s), try again")
                                      ),
                                        N.clearReconnectionTimer(),
                                        N.reconnect();
                                    },
                                    C
                                  )),
                                  !(
                                    this.isSDPExchanging_ ||
                                    (this.peerConnection_ &&
                                      this.peerConnection_.connectionState ===
                                        xp)
                                  ))
                                ) {
                                  z.next = 22;
                                  break;
                                }
                                return z.abrupt("return");
                              case 22:
                                return (
                                  (z.prev = 22),
                                  this.closePeerConnection(),
                                  this.initialize(),
                                  (z.next = 27),
                                  this.connect()
                                );
                              case 27:
                                this.stopReconnection(),
                                  this.log_.warn(
                                    "reconnect() downlink reconnect successfully"
                                  ),
                                  gt.logSuccessEvent({
                                    userId: this.client_.getUserId(),
                                    eventType: RT,
                                  }),
                                  this.addEventInternal(
                                    cF,
                                    "downlink-connection reconnect success"
                                  ),
                                  this.recoverSubscription(),
                                  (z.next = 36);
                                break;
                              case 34:
                                (z.prev = 34), (z.t0 = z.catch(22));
                              case 36:
                              case "end":
                                return z.stop();
                            }
                        },
                        _,
                        this,
                        [[22, 34]]
                      );
                    })
                  )),
                  function () {
                    return e.apply(this, arguments);
                  }),
              },
              {
                key: "recoverSubscription",
                value: function () {
                  var b = this,
                    C = this.client_.getSubscriptionManager();
                  C &&
                    Ze(this.remoteStreams_.values()).forEach(function (N) {
                      C.hasAutoRecoveryFlag(b.userId_, N.getType()) &&
                        C.recover(N);
                    });
                },
              },
              {
                key: "getIsReconnecting",
                value: function () {
                  return this.isReconnecting_;
                },
              },
              {
                key: "getSubscribedMainStream",
                value: function () {
                  var b = null;
                  return (
                    this.isMainStreamSubscribed &&
                      (b = this.remoteStreams_.get(Oa)),
                    b
                  );
                },
              },
              {
                key: "clearReconnectionTimer",
                value: function () {
                  this.reconnectionTimer_ !== -1 &&
                    (clearTimeout(this.reconnectionTimer_),
                    (this.reconnectionTimer_ = -1));
                },
              },
              {
                key: "startReconnection",
                value: function () {
                  var b = this.client_.getSubscriptionManager();
                  if (b) {
                    var C,
                      N = nt(this.remoteStreams_.values());
                    try {
                      for (N.s(); !(C = N.n()).done; ) {
                        var z = C.value,
                          F = z.getType();
                        ((F === Bn &&
                          (this.trackState_.audio || this.trackState_.video)) ||
                          (F === ir && this.trackState_.auxiliary)) &&
                          b.setAutoRecoveryFlag(this.userId_, z.getType());
                      }
                    } catch (U) {
                      N.e(U);
                    } finally {
                      N.f();
                    }
                  }
                  yt(Ie(g.prototype), "startReconnection", this).call(this);
                },
              },
              {
                key: "getCurrentState",
                value: function () {
                  return this.currentState_;
                },
              },
              {
                key: "hasMainStream",
                value: function () {
                  return (
                    this.trackState_.video ||
                    this.trackState_.audio ||
                    this.trackState_.smallVideo
                  );
                },
              },
              {
                key: "hasAuxStream",
                value: function () {
                  return this.trackState_.auxiliary;
                },
              },
            ]),
            g
          );
        })(gb)),
        Be(
          ta.prototype,
          "subscribe",
          [t3, n3],
          Object.getOwnPropertyDescriptor(ta.prototype, "subscribe"),
          ta.prototype
        ),
        Be(
          ta.prototype,
          "unsubscribe",
          [r3],
          Object.getOwnPropertyDescriptor(ta.prototype, "unsubscribe"),
          ta.prototype
        ),
        Be(
          ta.prototype,
          "exchangeSDP",
          [i3],
          Object.getOwnPropertyDescriptor(ta.prototype, "exchangeSDP"),
          ta.prototype
        ),
        ta),
      Gv = (function () {
        function u() {
          B(this, u), (this.startTime = 0), (this.endTime = 0), this.start();
        }
        return (
          oe(u, [
            {
              key: "start",
              value: function () {
                this.startTime === 0 && (this.startTime = er());
              },
            },
            {
              key: "stop",
              value: function () {
                this.endTime === 0 && (this.endTime = er());
              },
            },
            {
              key: "getDuration",
              value: function () {
                return this.endTime === 0
                  ? er() - this.startTime
                  : this.endTime - this.startTime;
              },
            },
          ]),
          u
        );
      })(),
      $G = (function () {
        function u(c) {
          B(this, u),
            (this.client_ = c.client),
            (this.intervalId_ = -1),
            (this.statsCalculator_ = c.stats),
            (this.prevStats_ = null),
            (this.renderFreezeMap_ = /* @__PURE__ */ new Map()),
            (this.remoteStreamMap_ = /* @__PURE__ */ new Map()),
            (this.dataFreezeMap_ = /* @__PURE__ */ new Map()),
            (this.monitorFreezeData_ = /* @__PURE__ */ new Map());
        }
        var e, n, a;
        return (
          oe(u, [
            {
              key: "installEvents",
              value: function () {
                Ee.on(ky, this.handlePlayVideoStart, this),
                  Ee.on(Xd, this.onVideoTrackMuted, this),
                  Ee.on(by, this.onVideoTrackUnmuted, this),
                  Ee.on(pu, this.handleStreamStopped, this),
                  Ee.on(co, this.handleStreamStopped, this),
                  Ee.on(Qd, this.handleVideoPlaying, this);
              },
            },
            {
              key: "uninstallEvents",
              value: function () {
                Ee.off(ky, this.handlePlayVideoStart, this),
                  Ee.off(Xd, this.onVideoTrackMuted, this),
                  Ee.off(by, this.onVideoTrackUnmuted, this),
                  Ee.off(pu, this.handleStreamStopped, this),
                  Ee.off(co, this.handleStreamStopped, this),
                  Ee.off(Qd, this.handleVideoPlaying, this);
              },
            },
            {
              key: "start",
              value: function () {
                var s = this;
                this.intervalId_ === -1 &&
                  (this.installEvents(),
                  (this.intervalId_ = Nn.run(
                    I(
                      m().mark(function l() {
                        return m().wrap(
                          function (h) {
                            for (;;)
                              switch ((h.prev = h.next)) {
                                case 0:
                                  return (
                                    (h.prev = 0), (h.next = 3), s.detectFPS()
                                  );
                                case 3:
                                  h.next = 7;
                                  break;
                                case 5:
                                  (h.prev = 5), (h.t0 = h.catch(0));
                                case 7:
                                case "end":
                                  return h.stop();
                              }
                          },
                          l,
                          null,
                          [[0, 5]]
                        );
                      })
                    ),
                    { delay: 1e3 }
                  )));
              },
            },
            {
              key: "stop",
              value: function () {
                this.intervalId_ !== -1 &&
                  (this.uninstallEvents(),
                  Nn.clearTask(this.intervalId_),
                  (this.intervalId_ = -1),
                  this.renderFreezeMap_.clear(),
                  this.dataFreezeMap_.clear(),
                  this.remoteStreamMap_.clear());
              },
            },
            {
              key: "onVideoTrackMuted",
              value: function (s) {
                var l = s.stream;
                if (l.getClient() === this.client_ && l.isRemote()) {
                  var h = l.userId_,
                    v = l.type_,
                    g = "".concat(h, "_").concat(v),
                    _ = this.dataFreezeMap_.get(g),
                    b = new Gv();
                  _
                    ? _.durationItemList.push(b)
                    : this.dataFreezeMap_.set(g, {
                        userId: h,
                        type: v,
                        durationItemList: [b],
                        isFreezing: function () {
                          var N =
                            this.durationItemList[
                              this.durationItemList.length - 1
                            ];
                          return N && N.endTime === 0;
                        },
                      });
                }
              },
            },
            {
              key: "onVideoTrackUnmuted",
              value: function (s) {
                var l = s.stream;
                if (l.getClient() === this.client_ && l.isRemote()) {
                  var h = l.userId_,
                    v = l.type_,
                    g = "".concat(h, "_").concat(v);
                  this.stopDataFreeze({ key: g, userId: h, type: v });
                }
              },
            },
            {
              key: "handleStreamStopped",
              value: function (s) {
                var l = s.client,
                  h = s.stream;
                if (l === this.client_) {
                  var v = h.getUserId(),
                    g = h.getType(),
                    _ = "".concat(v, "_").concat(g);
                  this.stopDataFreeze({ key: _, userId: v, type: g });
                }
              },
            },
            {
              key: "stopDataFreeze",
              value: function (s) {
                var l = s.key,
                  h = s.userId,
                  v = s.type,
                  g = this.dataFreezeMap_.get(l);
                if (g && g.isFreezing()) {
                  var _ = g.durationItemList[g.durationItemList.length - 1];
                  _.stop();
                  var b = _.getDuration();
                  b > 500
                    ? (gt.logEvent({ eventType: "videoFrozenCount", delta: b }),
                      this.monitorFreezeData_.set(l, {
                        userId: h,
                        type: v,
                        duration: b,
                      }))
                    : g.durationItemList.pop();
                }
              },
            },
            {
              key: "getTotalDuration",
              value: function (s) {
                return s.reduce(function (l, h) {
                  var v = h.getDuration();
                  return l + Math.min(v, 5e3);
                }, 0);
              },
            },
            {
              key: "getStats",
              value:
                ((a = I(
                  m().mark(function c() {
                    var s, l, h, v, g, _, b, C, N, z, F;
                    return m().wrap(
                      function (U) {
                        for (;;)
                          switch ((U.prev = U.next)) {
                            case 0:
                              (s = this.client_.getConnections()),
                                (l = {}),
                                (h = nt(s)),
                                (U.prev = 3),
                                h.s();
                            case 5:
                              if ((v = h.n()).done) {
                                U.next = 20;
                                break;
                              }
                              if (
                                ((g = Et(v.value, 2)),
                                (_ = g[0]),
                                (b = g[1]).getPeerConnection())
                              ) {
                                U.next = 9;
                                break;
                              }
                              return U.abrupt("continue", 18);
                            case 9:
                              return (
                                (C = b.getSubscribeState()),
                                (N = b.getTrackState()),
                                (U.next = 13),
                                this.statsCalculator_.getReceiverStats(b)
                              );
                            case 13:
                              (z = U.sent),
                                (F = {
                                  userId: z.userId,
                                  tinyId: _,
                                  hasVideo: N.video && C.video,
                                  hasAuxiliary: N.auxiliary && C.auxiliary,
                                  video: { framesDecoded: 0 },
                                  auxiliary: { framesDecoded: 0 },
                                }).hasVideo &&
                                  (F.video.framesDecoded =
                                    z.video.framesDecoded),
                                F.hasAuxiliary &&
                                  (F.auxiliary.framesDecoded =
                                    z.auxiliary.framesDecoded),
                                (l[z.userId] = F);
                            case 18:
                              U.next = 5;
                              break;
                            case 20:
                              U.next = 25;
                              break;
                            case 22:
                              (U.prev = 22), (U.t0 = U.catch(3)), h.e(U.t0);
                            case 25:
                              return (U.prev = 25), h.f(), U.finish(25);
                            case 28:
                              return U.abrupt("return", l);
                            case 29:
                            case "end":
                              return U.stop();
                          }
                      },
                      c,
                      this,
                      [[3, 22, 25, 28]]
                    );
                  })
                )),
                function () {
                  return a.apply(this, arguments);
                }),
            },
            {
              key: "detectFPS",
              value:
                ((n = I(
                  m().mark(function c() {
                    var s, l, h, v, g, _;
                    return m().wrap(
                      function (b) {
                        for (;;)
                          switch ((b.prev = b.next)) {
                            case 0:
                              return (b.next = 2), this.getStats();
                            case 2:
                              if (((s = b.sent), this.prevStats_)) {
                                b.next = 6;
                                break;
                              }
                              return (this.prevStats_ = s), b.abrupt("return");
                            case 6:
                              b.t0 = m().keys(s);
                            case 7:
                              if ((b.t1 = b.t0()).done) {
                                b.next = 17;
                                break;
                              }
                              if (((l = b.t1.value), this.prevStats_[l])) {
                                b.next = 11;
                                break;
                              }
                              return b.abrupt("continue", 7);
                            case 11:
                              (h = s[l].tinyId),
                                (v = this.client_.getMutedStates()),
                                s[l].hasVideo &&
                                  this.prevStats_[l].hasVideo &&
                                  v.has(h) &&
                                  !v.get(h).videoMuted &&
                                  ((g =
                                    s[l].video.framesDecoded -
                                    this.prevStats_[l].video.framesDecoded),
                                  this.handleRenderFreeze({
                                    userId: l,
                                    type: Bn,
                                    fps: g,
                                  })),
                                s[l].hasAuxiliary &&
                                  this.prevStats_[l].hasAuxiliary &&
                                  ((_ =
                                    s[l].auxiliary.framesDecoded -
                                    this.prevStats_[l].auxiliary.framesDecoded),
                                  this.handleRenderFreeze({
                                    userId: l,
                                    type: ir,
                                    fps: _,
                                  })),
                                (b.next = 7);
                              break;
                            case 17:
                              this.prevStats_ = s;
                            case 18:
                            case "end":
                              return b.stop();
                          }
                      },
                      c,
                      this
                    );
                  })
                )),
                function () {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "handleRenderFreeze",
              value:
                ((e = I(
                  m().mark(function c(s) {
                    var l, h, v, g, _, b, C, N;
                    return m().wrap(
                      function (z) {
                        for (;;)
                          switch ((z.prev = z.next)) {
                            case 0:
                              (l = s.userId),
                                (h = s.fps),
                                (v = s.type),
                                (g = "".concat(l, "_").concat(v)),
                                (_ = this.renderFreezeMap_.get(g)),
                                h <= 2
                                  ? ((b = er()),
                                    _ &&
                                      !_.isFreeze &&
                                      (_.freezeTimeline.push({
                                        startTime: b,
                                        endTime: void 0,
                                      }),
                                      (_.isFreeze = !0)),
                                    _ ||
                                      this.renderFreezeMap_.set(g, {
                                        userId: l,
                                        type: v,
                                        isFreeze: !0,
                                        freezeTimeline: [
                                          { startTime: b, endTime: void 0 },
                                        ],
                                        renderFreezeTotal: 0,
                                      }))
                                  : _ &&
                                    _.isFreeze &&
                                    ((_.isFreeze = !1),
                                    ((C = _.freezeTimeline.pop()).endTime =
                                      er()),
                                    (N = C.endTime - C.startTime),
                                    _.freezeTimeline.push(C),
                                    (_.renderFreezeTotal += Math.min(5e3, N)));
                            case 4:
                            case "end":
                              return z.stop();
                          }
                      },
                      c,
                      this
                    );
                  })
                )),
                function (c) {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "handlePlayVideoStart",
              value: function (s) {
                var l = s.stream;
                if (
                  l.getClient() === this.client_ &&
                  l.isRemote() &&
                  l.hasVideo()
                ) {
                  var h = "".concat(l.getUserId(), "_").concat(l.getType());
                  this.remoteStreamMap_.has(h) ||
                    this.remoteStreamMap_.set(h, { isPlayingFired: !1 });
                }
              },
            },
            {
              key: "handleVideoPlaying",
              value: function (s) {
                var l = s.stream;
                if (l.isRemote() && l.getClient() === this.client_) {
                  var h = "".concat(l.getUserId(), "_").concat(l.getType());
                  this.remoteStreamMap_.has(h) &&
                    (this.remoteStreamMap_.get(h).isPlayingFired = !0);
                }
              },
            },
            {
              key: "getDataFreezeDuration",
              value: function (s) {
                var l = { dataFreeze: 0, count: 0 },
                  h = this.dataFreezeMap_.get(s);
                if (h) {
                  if (h.isFreezing()) {
                    var v = h.durationItemList[h.durationItemList.length - 1];
                    v.stop(), v.getDuration() < 500 && h.durationItemList.pop();
                  }
                  (l.dataFreeze = this.getTotalDuration(h.durationItemList)),
                    (l.count = h.durationItemList.length);
                }
                return l;
              },
            },
            {
              key: "getRenderFreezeDuration",
              value: function (s) {
                var l = this.renderFreezeMap_.get(s),
                  h = 0,
                  v = 0;
                if (l)
                  if (l.isFreeze) {
                    var g =
                      er() -
                      l.freezeTimeline[l.freezeTimeline.length - 1].startTime;
                    (h = l.renderFreezeTotal + Math.min(g, 5e3)),
                      (v = l.freezeTimeline.length);
                  } else h = l.renderFreezeTotal;
                return { renderFreeze: h, count: v };
              },
            },
            {
              key: "getMonitorFreeze",
              value: function () {
                return this.monitorFreezeData_;
              },
            },
            {
              key: "isBlackStream",
              value: function (s) {
                return (
                  !!this.remoteStreamMap_.has(s) &&
                  !this.remoteStreamMap_.get(s).isPlayingFired
                );
              },
            },
            {
              key: "resetMonitor",
              value: function () {
                this.monitorFreezeData_.clear();
              },
            },
          ]),
          u
        );
      })(),
      Cb = oe(function u(e) {
        B(this, u),
          (this.userId = e.userId),
          (this.tinyId = e.tinyId),
          (this.role = e.role === Vc ? xa : ou);
      }),
      o3 = { exports: {} };
    (function (u) {
      (function (e) {
        function n(U, E) {
          var A = (65535 & U) + (65535 & E);
          return (((U >> 16) + (E >> 16) + (A >> 16)) << 16) | (65535 & A);
        }
        function a(U, E, A, L, $, te) {
          return n(
            ((X = n(n(E, U), n(L, te))) << (D = $)) | (X >>> (32 - D)),
            A
          );
          var X, D;
        }
        function c(U, E, A, L, $, te, X) {
          return a((E & A) | (~E & L), U, E, $, te, X);
        }
        function s(U, E, A, L, $, te, X) {
          return a((E & L) | (A & ~L), U, E, $, te, X);
        }
        function l(U, E, A, L, $, te, X) {
          return a(E ^ A ^ L, U, E, $, te, X);
        }
        function h(U, E, A, L, $, te, X) {
          return a(A ^ (E | ~L), U, E, $, te, X);
        }
        function v(U, E) {
          var A, L, $, te, X;
          (U[E >> 5] |= 128 << E % 32), (U[14 + (((E + 64) >>> 9) << 4)] = E);
          var D = 1732584193,
            M = -271733879,
            W = -1732584194,
            G = 271733878;
          for (A = 0; A < U.length; A += 16)
            (L = D),
              ($ = M),
              (te = W),
              (X = G),
              (D = c(D, M, W, G, U[A], 7, -680876936)),
              (G = c(G, D, M, W, U[A + 1], 12, -389564586)),
              (W = c(W, G, D, M, U[A + 2], 17, 606105819)),
              (M = c(M, W, G, D, U[A + 3], 22, -1044525330)),
              (D = c(D, M, W, G, U[A + 4], 7, -176418897)),
              (G = c(G, D, M, W, U[A + 5], 12, 1200080426)),
              (W = c(W, G, D, M, U[A + 6], 17, -1473231341)),
              (M = c(M, W, G, D, U[A + 7], 22, -45705983)),
              (D = c(D, M, W, G, U[A + 8], 7, 1770035416)),
              (G = c(G, D, M, W, U[A + 9], 12, -1958414417)),
              (W = c(W, G, D, M, U[A + 10], 17, -42063)),
              (M = c(M, W, G, D, U[A + 11], 22, -1990404162)),
              (D = c(D, M, W, G, U[A + 12], 7, 1804603682)),
              (G = c(G, D, M, W, U[A + 13], 12, -40341101)),
              (W = c(W, G, D, M, U[A + 14], 17, -1502002290)),
              (D = s(
                D,
                (M = c(M, W, G, D, U[A + 15], 22, 1236535329)),
                W,
                G,
                U[A + 1],
                5,
                -165796510
              )),
              (G = s(G, D, M, W, U[A + 6], 9, -1069501632)),
              (W = s(W, G, D, M, U[A + 11], 14, 643717713)),
              (M = s(M, W, G, D, U[A], 20, -373897302)),
              (D = s(D, M, W, G, U[A + 5], 5, -701558691)),
              (G = s(G, D, M, W, U[A + 10], 9, 38016083)),
              (W = s(W, G, D, M, U[A + 15], 14, -660478335)),
              (M = s(M, W, G, D, U[A + 4], 20, -405537848)),
              (D = s(D, M, W, G, U[A + 9], 5, 568446438)),
              (G = s(G, D, M, W, U[A + 14], 9, -1019803690)),
              (W = s(W, G, D, M, U[A + 3], 14, -187363961)),
              (M = s(M, W, G, D, U[A + 8], 20, 1163531501)),
              (D = s(D, M, W, G, U[A + 13], 5, -1444681467)),
              (G = s(G, D, M, W, U[A + 2], 9, -51403784)),
              (W = s(W, G, D, M, U[A + 7], 14, 1735328473)),
              (D = l(
                D,
                (M = s(M, W, G, D, U[A + 12], 20, -1926607734)),
                W,
                G,
                U[A + 5],
                4,
                -378558
              )),
              (G = l(G, D, M, W, U[A + 8], 11, -2022574463)),
              (W = l(W, G, D, M, U[A + 11], 16, 1839030562)),
              (M = l(M, W, G, D, U[A + 14], 23, -35309556)),
              (D = l(D, M, W, G, U[A + 1], 4, -1530992060)),
              (G = l(G, D, M, W, U[A + 4], 11, 1272893353)),
              (W = l(W, G, D, M, U[A + 7], 16, -155497632)),
              (M = l(M, W, G, D, U[A + 10], 23, -1094730640)),
              (D = l(D, M, W, G, U[A + 13], 4, 681279174)),
              (G = l(G, D, M, W, U[A], 11, -358537222)),
              (W = l(W, G, D, M, U[A + 3], 16, -722521979)),
              (M = l(M, W, G, D, U[A + 6], 23, 76029189)),
              (D = l(D, M, W, G, U[A + 9], 4, -640364487)),
              (G = l(G, D, M, W, U[A + 12], 11, -421815835)),
              (W = l(W, G, D, M, U[A + 15], 16, 530742520)),
              (D = h(
                D,
                (M = l(M, W, G, D, U[A + 2], 23, -995338651)),
                W,
                G,
                U[A],
                6,
                -198630844
              )),
              (G = h(G, D, M, W, U[A + 7], 10, 1126891415)),
              (W = h(W, G, D, M, U[A + 14], 15, -1416354905)),
              (M = h(M, W, G, D, U[A + 5], 21, -57434055)),
              (D = h(D, M, W, G, U[A + 12], 6, 1700485571)),
              (G = h(G, D, M, W, U[A + 3], 10, -1894986606)),
              (W = h(W, G, D, M, U[A + 10], 15, -1051523)),
              (M = h(M, W, G, D, U[A + 1], 21, -2054922799)),
              (D = h(D, M, W, G, U[A + 8], 6, 1873313359)),
              (G = h(G, D, M, W, U[A + 15], 10, -30611744)),
              (W = h(W, G, D, M, U[A + 6], 15, -1560198380)),
              (M = h(M, W, G, D, U[A + 13], 21, 1309151649)),
              (D = h(D, M, W, G, U[A + 4], 6, -145523070)),
              (G = h(G, D, M, W, U[A + 11], 10, -1120210379)),
              (W = h(W, G, D, M, U[A + 2], 15, 718787259)),
              (M = h(M, W, G, D, U[A + 9], 21, -343485551)),
              (D = n(D, L)),
              (M = n(M, $)),
              (W = n(W, te)),
              (G = n(G, X));
          return [D, M, W, G];
        }
        function g(U) {
          var E,
            A = "",
            L = 32 * U.length;
          for (E = 0; E < L; E += 8)
            A += String.fromCharCode((U[E >> 5] >>> E % 32) & 255);
          return A;
        }
        function _(U) {
          var E,
            A = [];
          for (A[(U.length >> 2) - 1] = void 0, E = 0; E < A.length; E += 1)
            A[E] = 0;
          var L = 8 * U.length;
          for (E = 0; E < L; E += 8)
            A[E >> 5] |= (255 & U.charCodeAt(E / 8)) << E % 32;
          return A;
        }
        function b(U) {
          var E,
            A,
            L = "0123456789abcdef",
            $ = "";
          for (A = 0; A < U.length; A += 1)
            (E = U.charCodeAt(A)),
              ($ += L.charAt((E >>> 4) & 15) + L.charAt(15 & E));
          return $;
        }
        function C(U) {
          return unescape(encodeURIComponent(U));
        }
        function N(U) {
          return (function (E) {
            return g(v(_(E), 8 * E.length));
          })(C(U));
        }
        function z(U, E) {
          return (function (A, L) {
            var $,
              te,
              X = _(A),
              D = [],
              M = [];
            for (
              D[15] = M[15] = void 0,
                X.length > 16 && (X = v(X, 8 * A.length)),
                $ = 0;
              $ < 16;
              $ += 1
            )
              (D[$] = 909522486 ^ X[$]), (M[$] = 1549556828 ^ X[$]);
            return (
              (te = v(D.concat(_(L)), 512 + 8 * L.length)),
              g(v(M.concat(te), 640))
            );
          })(C(U), C(E));
        }
        function F(U, E, A) {
          return E ? (A ? z(E, U) : b(z(E, U))) : A ? N(U) : b(N(U));
        }
        u.exports ? (u.exports = F) : (e.md5 = F);
      })(rt);
    })(o3);
    var s3,
      u3,
      hs,
      qv = o3.exports,
      YG = (function () {
        function u(s) {
          B(this, u),
            (this.client_ = s.client),
            (this.signalChannel_ = s.signalChannel),
            (this.log_ = ft.createLogger({
              id: "mix|" + this.client_.getUserId(),
              userId: s.client.getUserId(),
              sdkAppId: s.client.getSDKAppId(),
            })),
            (this.isMixing_ = !1),
            (this.config_ = null),
            (this.data_ = null),
            (this.remoteStreamMap_ = /* @__PURE__ */ new Map()),
            this.installEvents();
        }
        var e, n, a, c;
        return (
          oe(u, [
            {
              key: "isPresetLayoutMode",
              get: function () {
                return this.config_ && this.config_.mode === k0.PRESET_LAYOUT;
              },
            },
            {
              key: "installEvents",
              value: function () {
                Ee.on(uo, this.onStreamSubscribed, this),
                  Ee.on(co, this.onStreamUnsubscribed, this),
                  this.client_.on("stream-removed", this.onStreamRemoved, this);
              },
            },
            {
              key: "uninstallEvents",
              value: function () {
                Ee.off(uo, this.onStreamSubscribed, this),
                  Ee.off(co, this.onStreamUnsubscribed, this),
                  this.client_.off(
                    "stream-removed",
                    this.onStreamRemoved,
                    this
                  );
              },
            },
            {
              key: "reset",
              value: function () {
                this.uninstallEvents(),
                  (this.isMixing_ = !1),
                  (this.config_ = null);
              },
            },
            {
              key: "onStreamSubscribed",
              value: function (l) {
                var h = l.client,
                  v = l.stream;
                h === this.client_ &&
                  (this.remoteStreamMap_.set(v.getId(), {
                    remoteStream: v,
                    isUsed: !1,
                  }),
                  this.isMixing_ &&
                    this.hasAvailablePlaceHolder() &&
                    this.startMixTranscode(this.config_));
              },
            },
            {
              key: "onStreamUnsubscribed",
              value: function (l) {
                var h = l.client,
                  v = l.stream;
                h === this.client_ && this.onStreamRemoved({ stream: v });
              },
            },
            {
              key: "onStreamRemoved",
              value: function (l) {
                var h = l.stream;
                if (this.remoteStreamMap_.has(h.getId())) {
                  var v = this.remoteStreamMap_.get(h.getId()).isUsed;
                  this.remoteStreamMap_.delete(h.getId()),
                    this.isMixing_ &&
                      this.isPresetLayoutMode &&
                      v &&
                      this.startMixTranscode(this.config_);
                }
              },
            },
            {
              key: "startMixTranscode",
              value:
                ((c = I(
                  m().mark(function s(l) {
                    var h, v, g;
                    return m().wrap(
                      function (_) {
                        for (;;)
                          switch ((_.prev = _.next)) {
                            case 0:
                              if (
                                ((_.prev = 0),
                                this.resetIsUsedFlag(),
                                (this.config_ = l),
                                (h = this.getInputParam(
                                  l,
                                  this.remoteStreamMap_
                                )),
                                (v = this.getOutputParam(l)),
                                (g = this.getOutputSessionId({
                                  config: l,
                                  roomId: this.client_.getRoomId(),
                                  userId: this.client_.getUserId(),
                                })),
                                !this.isMixing_ ||
                                  !this.data_ ||
                                  g === this.data_.outputSessionId)
                              ) {
                                _.next = 10;
                                break;
                              }
                              return (
                                this.log_.info(
                                  "startMixTranscode() streamId changed, stop mixing before start"
                                ),
                                (_.next = 10),
                                this.doStopMixTranscode()
                              );
                            case 10:
                              return (
                                (_.next = 12),
                                this.doStartMixTranscode({
                                  outputSessionId: g,
                                  inputParam: h,
                                  outputParam: v,
                                })
                              );
                            case 12:
                              _.next = 18;
                              break;
                            case 14:
                              throw (
                                ((_.prev = 14),
                                (_.t0 = _.catch(0)),
                                this.resetIsUsedFlag(),
                                _.t0)
                              );
                            case 18:
                            case "end":
                              return _.stop();
                          }
                      },
                      s,
                      this,
                      [[0, 14]]
                    );
                  })
                )),
                function (s) {
                  return c.apply(this, arguments);
                }),
            },
            {
              key: "doStartMixTranscode",
              value:
                ((a = I(
                  m().mark(function s(l) {
                    var h, v, g, _, b, C, N, z;
                    return m().wrap(
                      function (F) {
                        for (;;)
                          switch ((F.prev = F.next)) {
                            case 0:
                              return (
                                (h = l.outputSessionId),
                                (v = l.inputParam),
                                (g = l.outputParam),
                                (_ = {
                                  roomId: String(this.client_.getRoomId()),
                                  mcuRequestTime: Date.now(),
                                  outputSessionId: h,
                                  inputParam: v,
                                  outputParam: g,
                                }),
                                (this.data_ = _),
                                this.log_.info(
                                  "startMixTranscode: ".concat(
                                    JSON.stringify(_)
                                  )
                                ),
                                (this.isMixing_ = !0),
                                (F.prev = 5),
                                (F.next = 8),
                                this.signalChannel_.sendWaitForResponse({
                                  command: A9,
                                  data: _,
                                  timeout: 5e3,
                                  responseCommand: Cn.START_MIX_TRANSCODE_RES,
                                  commandDesc: "startMixTranscode",
                                })
                              );
                            case 8:
                              if (
                                ((b = F.sent),
                                (C = b.data),
                                (N = C.code),
                                (z = C.message),
                                N === 0)
                              ) {
                                F.next = 15;
                                break;
                              }
                              throw (
                                (N === -102083 &&
                                  (z = "Please enable relayed-push in "
                                    .concat(KT, " and try later, refer to ")
                                    .concat(
                                      C0,
                                      "tutorial-26-advanced-publish-cdn-stream.html"
                                    )),
                                this.log_.error(
                                  "startMixTranscode failed, errCode: "
                                    .concat(N, " errMsg: ")
                                    .concat(z)
                                ),
                                (this.isMixing_ = !1),
                                new De({
                                  code: Oe.START_MIX_TRANSCODE_FAILED,
                                  message: Fe({
                                    key: gU,
                                    data: { message: z },
                                    link: {
                                      className: "Client",
                                      fnName: "startMixTranscode",
                                    },
                                  }),
                                }))
                              );
                            case 15:
                              F.next = 21;
                              break;
                            case 17:
                              throw (
                                ((F.prev = 17),
                                (F.t0 = F.catch(5)),
                                (this.isMixing_ = !1),
                                F.t0)
                              );
                            case 21:
                            case "end":
                              return F.stop();
                          }
                      },
                      s,
                      this,
                      [[5, 17]]
                    );
                  })
                )),
                function (s) {
                  return a.apply(this, arguments);
                }),
            },
            {
              key: "reStartMixTranscode",
              value: function () {
                this.isMixing_ && this.startMixTranscode(this.config_);
              },
            },
            {
              key: "stopMixTranscode",
              value:
                ((n = I(
                  m().mark(function s() {
                    return m().wrap(
                      function (l) {
                        for (;;)
                          switch ((l.prev = l.next)) {
                            case 0:
                              if (this.isMixing_) {
                                l.next = 2;
                                break;
                              }
                              throw new De({
                                code: Oe.INVALID_OPERATION,
                                message: Fe({ key: yU }),
                              });
                            case 2:
                              return (l.next = 4), this.doStopMixTranscode();
                            case 4:
                              this.resetIsUsedFlag();
                            case 5:
                            case "end":
                              return l.stop();
                          }
                      },
                      s,
                      this
                    );
                  })
                )),
                function () {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "doStopMixTranscode",
              value:
                ((e = I(
                  m().mark(function s() {
                    var l, h, v, g, _;
                    return m().wrap(
                      function (b) {
                        for (;;)
                          switch ((b.prev = b.next)) {
                            case 0:
                              return (
                                (l = {
                                  mcuRequestTime: Date.now(),
                                  outputSessionId: this.data_.outputSessionId,
                                  streamType: this.data_.outputParam.streamType,
                                }),
                                this.log_.info(
                                  "stopMixTranscode: ".concat(JSON.stringify(l))
                                ),
                                (b.next = 4),
                                this.signalChannel_.sendWaitForResponse({
                                  command: x9,
                                  data: l,
                                  timeout: 5e3,
                                  responseCommand: Cn.STOP_MIX_TRANSCODE_RES,
                                  commandDesc: "stopMixTranscode",
                                })
                              );
                            case 4:
                              if (
                                ((h = b.sent),
                                (v = h.data),
                                (g = v.code),
                                (_ = v.message),
                                g !== 0)
                              ) {
                                b.next = 10;
                                break;
                              }
                              (this.isMixing_ = !1), (b.next = 12);
                              break;
                            case 10:
                              throw (
                                (this.log_.error(
                                  "stopMixTranscode failed, errCode: "
                                    .concat(g, " errMsg: ")
                                    .concat(_)
                                ),
                                new De({
                                  code: Oe.STOP_MIX_TRANSCODE_FAILED,
                                  message: Fe({
                                    key: _U,
                                    data: { message: _ },
                                    link: {
                                      className: "Client",
                                      fnName: "stopMixTranscode",
                                    },
                                  }),
                                }))
                              );
                            case 12:
                            case "end":
                              return b.stop();
                          }
                      },
                      s,
                      this
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "getOutputSessionId",
              value: function (l) {
                var h = l.config,
                  v = l.userId,
                  g = l.roomId;
                return vr(h.streamId) && h.streamId.length > 0
                  ? h.streamId
                  : qv("".concat(g, "_").concat(v, "_main"));
              },
            },
            {
              key: "getInputParam",
              value: function (l, h) {
                var v = this,
                  g = l.mixUsers.map(function (_) {
                    return {
                      userId: _.userId,
                      roomId: String(_.roomId || v.client_.getRoomId()),
                      width: _.width || 0,
                      height: _.height || 0,
                      locationX: _.locationX || 0,
                      locationY: _.locationY || 0,
                      zOrder: _.zOrder,
                      streamType:
                        ht(_.streamType) || _.streamType !== ir ? 0 : 1,
                      inputType: _.pureAudio
                        ? VT.IT_PURE_AUDIO
                        : VT.IT_AUDIO_VIDEO,
                      renderMode: _.renderMode || 0,
                    };
                  });
                return (
                  l.mode === k0.PRESET_LAYOUT &&
                    (g.forEach(function (_) {
                      if (_.userId === UT.REMOTE) {
                        var b = Ze(h.values()).find(function (C) {
                          return !C.isUsed;
                        });
                        b &&
                          ((_.userId = b.remoteStream.getUserId()),
                          (_.streamType =
                            b.remoteStream.getType() === ir ? 1 : 0),
                          (b.isUsed = !0));
                      }
                    }),
                    (g = g.filter(function (_) {
                      return _.userId !== UT.REMOTE;
                    }))),
                  g
                );
              },
            },
            {
              key: "getOutputParam",
              value: function (l) {
                var h = l.streamId || "";
                return {
                  streamId: h,
                  streamType: h.length > 0 ? 1 : 0,
                  width: ht(l.videoWidth) ? 640 : l.videoWidth,
                  height: ht(l.videoHeight) ? 480 : l.videoHeight,
                  videoBps: l.videoBitrate || 0,
                  fps: l.videoFramerate || 15,
                  gop: l.videoGOP || 2,
                  audioSampleRate: l.audioSampleRate || 48e3,
                  audioBps: l.audioBitrate || 64,
                  audioChannels: l.audioChannels || 1,
                  backgroundColor: l.backgroundColor || 0,
                  backgroundImg: l.backgroundImage || "",
                  extraInfo: "",
                  videoCodec: 2,
                  audioCodec: 0,
                };
              },
            },
            {
              key: "hasAvailablePlaceHolder",
              value: function () {
                return (
                  !!this.isPresetLayoutMode &&
                  this.data_.inputParam.length !== this.config_.mixUsers.length
                );
              },
            },
            {
              key: "resetIsUsedFlag",
              value: function () {
                this.remoteStreamMap_.forEach(function (l) {
                  return (l.isUsed = !1);
                });
              },
            },
          ]),
          u
        );
      })(),
      ZG = (function () {
        function u(h) {
          B(this, u),
            (this.client_ = h.client),
            (this.signalChannel_ = h.signalChannel),
            (this.publishTencentMainStreamObj_ = {
              params_: null,
              streamId_: void 0,
              isPublishing_: !1,
            }),
            (this.publishTencentAuxStreamObj_ = {
              params_: null,
              streamId_: void 0,
              isPublishing_: !1,
            }),
            (this.publishGivenCDNData_ = null),
            (this.isPublishingGivenCDN_ = !1);
        }
        var e, n, a, c, s, l;
        return (
          oe(u, [
            {
              key: "setSignalChannel",
              value: function (v) {
                this.signalChannel_ = v.signalChannel;
              },
            },
            {
              key: "getIsPublishingTencentCDN",
              value: function () {
                return (
                  this.publishTencentMainStreamObj_.isPublishing_ ||
                  this.publishTencentAuxStreamObj_.isPublishing_
                );
              },
            },
            {
              key: "getIsPublishingGivenCDN",
              value: function () {
                return this.isPublishingGivenCDN_;
              },
            },
            {
              key: "generatePublishCDNStreamId",
              value: function (v, g) {
                if (!v) {
                  var _ = ""
                    .concat(this.client_.getRoomId(), "_")
                    .concat(this.client_.getUserId(), "_")
                    .concat(g);
                  return (
                    /^[A-Za-z\d_-]*$/.test(_) || (_ = qv(_)),
                    "".concat(this.client_.getSDKAppId(), "_").concat(_)
                  );
                }
                return v;
              },
            },
            {
              key: "generatePublishCDNSessionId",
              value: function (v) {
                return qv(
                  ""
                    .concat(this.client_.getRoomId(), "_")
                    .concat(this.client_.getUserId(), "_")
                    .concat(v)
                );
              },
            },
            {
              key: "startPublishTencentCDN",
              value:
                ((l = I(
                  m().mark(function h(v) {
                    var g, _, b, C;
                    return m().wrap(
                      function (N) {
                        for (;;)
                          switch ((N.prev = N.next)) {
                            case 0:
                              if (
                                (v.streamType === Ti
                                  ? ((this.publishTencentAuxStreamObj_.params_ =
                                      v),
                                    (this.publishTencentAuxStreamObj_.isPublishing_ =
                                      !0))
                                  : ((this.publishTencentMainStreamObj_.params_ =
                                      v),
                                    (this.publishTencentMainStreamObj_.isPublishing_ =
                                      !0)),
                                this.client_.isJoined_)
                              ) {
                                N.next = 3;
                                break;
                              }
                              return N.abrupt("return");
                            case 3:
                              return (
                                (g = this.generatePublishCDNStreamId(
                                  v.streamId,
                                  v.streamType
                                )),
                                (_ = this.generatePublishCDNSessionId(
                                  v.streamType
                                )),
                                (b = v.streamType === Ti ? 1 : 0),
                                (C = {
                                  requestTime: Date.now(),
                                  sessionId: _,
                                  streamId: g,
                                  streamType: b,
                                }),
                                (N.next = 9),
                                this.doStartPublishTencentCDN(C, v.streamType)
                              );
                            case 9:
                            case "end":
                              return N.stop();
                          }
                      },
                      h,
                      this
                    );
                  })
                )),
                function (h) {
                  return l.apply(this, arguments);
                }),
            },
            {
              key: "doStartPublishTencentCDN",
              value:
                ((s = I(
                  m().mark(function h(v, g) {
                    var _, b, C, N;
                    return m().wrap(
                      function (z) {
                        for (;;)
                          switch ((z.prev = z.next)) {
                            case 0:
                              return (
                                (z.prev = 0),
                                ft.info(
                                  "startPublishTencentCDN: " + JSON.stringify(v)
                                ),
                                (z.next = 4),
                                this.signalChannel_.sendWaitForResponseWithRetry(
                                  {
                                    command: E9,
                                    data: v,
                                    timeout: 2e3,
                                    responseCommand:
                                      Cn.START_PUBLISH_TENCENT_CDN_RES,
                                    commandDesc: "startPublishCDNStream",
                                    retries: 2,
                                  }
                                )
                              );
                            case 4:
                              if (
                                ((_ = z.sent),
                                (b = _.data),
                                (C = b.code),
                                (N = b.message),
                                C !== 0)
                              ) {
                                z.next = 10;
                                break;
                              }
                              g === Ti
                                ? (this.publishTencentAuxStreamObj_.streamId_ =
                                    v.streamId)
                                : (this.publishTencentMainStreamObj_.streamId_ =
                                    v.streamId),
                                (z.next = 14);
                              break;
                            case 10:
                              throw (
                                (g === Ti
                                  ? (this.publishTencentAuxStreamObj_.isPublishing_ =
                                      !1)
                                  : (this.publishTencentMainStreamObj_.isPublishing_ =
                                      !1),
                                C === -102083 &&
                                  (N = "Please enable relayed-push in "
                                    .concat(KT, " and try later, refer to ")
                                    .concat(
                                      C0,
                                      "tutorial-26-advanced-publish-cdn-stream.html"
                                    )),
                                ft.error(
                                  "startPublishTencentCDN failed, errCode: "
                                    .concat(C, ", errMsg: ")
                                    .concat(N)
                                ),
                                new De({
                                  code: Oe.START_PUBLISH_CDN_FAILED,
                                  message: Fe({
                                    key: oE,
                                    data: { message: N },
                                    link: {
                                      className: "Client",
                                      fnName: "startPublishCDNStream",
                                    },
                                  }),
                                }))
                              );
                            case 14:
                              z.next = 20;
                              break;
                            case 16:
                              throw (
                                ((z.prev = 16),
                                (z.t0 = z.catch(0)),
                                g === Ti
                                  ? (this.publishTencentAuxStreamObj_.isPublishing_ =
                                      !1)
                                  : (this.publishTencentMainStreamObj_.isPublishing_ =
                                      !1),
                                z.t0)
                              );
                            case 20:
                            case "end":
                              return z.stop();
                          }
                      },
                      h,
                      this,
                      [[0, 16]]
                    );
                  })
                )),
                function (h, v) {
                  return s.apply(this, arguments);
                }),
            },
            {
              key: "resetPublishTencentParam",
              value: function (v) {
                v === hn &&
                  (this.publishTencentMainStreamObj_ = {
                    params_: null,
                    streamId_: void 0,
                    isPublishing_: !1,
                  }),
                  v === Ti &&
                    (this.publishTencentAuxStreamObj_ = {
                      params_: null,
                      streamId_: void 0,
                      isPublishing_: !1,
                    });
              },
            },
            {
              key: "stopPublishTencentCDN",
              value:
                ((c = I(
                  m().mark(function h() {
                    return m().wrap(
                      function (v) {
                        for (;;)
                          switch ((v.prev = v.next)) {
                            case 0:
                              if (this.client_.isJoined_) {
                                v.next = 4;
                                break;
                              }
                              return (
                                this.resetPublishTencentParam(hn),
                                this.resetPublishTencentParam(Ti),
                                v.abrupt("return")
                              );
                            case 4:
                              if (
                                !this.publishTencentMainStreamObj_.isPublishing_
                              ) {
                                v.next = 7;
                                break;
                              }
                              return (
                                (v.next = 7), this.doStopPublishTencentCDN(hn)
                              );
                            case 7:
                              if (
                                !this.publishTencentAuxStreamObj_.isPublishing_
                              ) {
                                v.next = 10;
                                break;
                              }
                              return (
                                (v.next = 10), this.doStopPublishTencentCDN(Ti)
                              );
                            case 10:
                            case "end":
                              return v.stop();
                          }
                      },
                      h,
                      this
                    );
                  })
                )),
                function () {
                  return c.apply(this, arguments);
                }),
            },
            {
              key: "doStopPublishTencentCDN",
              value:
                ((a = I(
                  m().mark(function h(v) {
                    var g, _, b, C, N;
                    return m().wrap(
                      function (z) {
                        for (;;)
                          switch ((z.prev = z.next)) {
                            case 0:
                              return (
                                (g = {
                                  requestTime: Date.now(),
                                  sessionId: qv(
                                    ""
                                      .concat(this.client_.getRoomId(), "_")
                                      .concat(this.client_.getUserId(), "_")
                                      .concat(v)
                                  ),
                                }),
                                ft.info(
                                  "stopPublishTencentCDN: " + JSON.stringify(g)
                                ),
                                (z.next = 4),
                                this.signalChannel_.sendWaitForResponse({
                                  command: I9,
                                  data: g,
                                  timeout: 5e3,
                                  responseCommand:
                                    Cn.STOP_PUBLISH_TENCENT_CDN_RES,
                                  commandDesc: "stopPublishCDNStream",
                                })
                              );
                            case 4:
                              if (
                                ((_ = z.sent),
                                (b = _.data),
                                (C = b.code),
                                (N = b.message),
                                C !== 0)
                              ) {
                                z.next = 10;
                                break;
                              }
                              this.resetPublishTencentParam(v), (z.next = 17);
                              break;
                            case 10:
                              if (C !== -102069) {
                                z.next = 15;
                                break;
                              }
                              ft.warn(
                                "stopPublishTencentCDN failed, can not stopPublishTencentCDN in auto relayed-push mode"
                              ),
                                this.resetPublishTencentParam(v),
                                (z.next = 17);
                              break;
                            case 15:
                              throw (
                                (ft.error(
                                  "stopPublishTencentCDN failed, errCode: "
                                    .concat(C, " errMsg: ")
                                    .concat(N)
                                ),
                                new De({
                                  code: Oe.STOP_PUBLISH_CDN_FAILED,
                                  message: Fe({
                                    key: sE,
                                    data: { message: N },
                                    link: {
                                      className: "Client",
                                      fnName: "stopPublishCDNStream",
                                    },
                                  }),
                                }))
                              );
                            case 17:
                            case "end":
                              return z.stop();
                          }
                      },
                      h,
                      this
                    );
                  })
                )),
                function (h) {
                  return a.apply(this, arguments);
                }),
            },
            {
              key: "startPublishGivenCDN",
              value:
                ((n = I(
                  m().mark(function h(v) {
                    var g, _, b, C, N, z;
                    return m().wrap(
                      function (F) {
                        for (;;)
                          switch ((F.prev = F.next)) {
                            case 0:
                              if (
                                ((g =
                                  v.streamType === hn
                                    ? this.publishTencentMainStreamObj_
                                        .streamId_
                                    : this.publishTencentAuxStreamObj_
                                        .streamId_),
                                (_ = {
                                  pushRequestTime: Date.now(),
                                  pushAppId: v.appId,
                                  pushBizId: v.bizId,
                                  pushCdnUrl: v.url,
                                  pushStreamType: v.streamType,
                                  pushStreamId: g,
                                }),
                                ft.info(
                                  "startPublishGivenCDN: " + JSON.stringify(_)
                                ),
                                (this.publishGivenCDNData_ = _),
                                (this.isPublishingGivenCDN_ = !0),
                                this.client_.isJoined_)
                              ) {
                                F.next = 7;
                                break;
                              }
                              return F.abrupt("return");
                            case 7:
                              return (
                                (F.prev = 7),
                                (F.next = 10),
                                this.signalChannel_.sendWaitForResponse({
                                  command: R9,
                                  data: _,
                                  timeout: 5e3,
                                  responseCommand:
                                    Cn.START_PUBLISH_GIVEN_CDN_RES,
                                  commandDesc: "startPublishCDNStream",
                                })
                              );
                            case 10:
                              if (
                                ((b = F.sent),
                                (C = b.data),
                                (N = C.code),
                                (z = C.message),
                                N === 0)
                              ) {
                                F.next = 17;
                                break;
                              }
                              throw (
                                (ft.error(
                                  "startPublishGivenCDN failed, errCode: "
                                    .concat(N, ", errMsg: ")
                                    .concat(z)
                                ),
                                (this.publishGivenCDNData_ = null),
                                (this.isPublishingGivenCDN_ = !1),
                                new De({
                                  code: Oe.START_PUBLISH_CDN_FAILED,
                                  message: Fe({
                                    key: oE,
                                    data: { message: z },
                                    link: {
                                      className: "Client",
                                      fnName: "startPublishCDNStream",
                                    },
                                  }),
                                }))
                              );
                            case 17:
                              F.next = 24;
                              break;
                            case 19:
                              throw (
                                ((F.prev = 19),
                                (F.t0 = F.catch(7)),
                                (this.publishGivenCDNData_ = null),
                                (this.isPublishingGivenCDN_ = !1),
                                F.t0)
                              );
                            case 24:
                            case "end":
                              return F.stop();
                          }
                      },
                      h,
                      this,
                      [[7, 19]]
                    );
                  })
                )),
                function (h) {
                  return n.apply(this, arguments);
                }),
            },
            {
              key: "stopPublishGivenCDN",
              value:
                ((e = I(
                  m().mark(function h() {
                    var v, g, _, b, C, N, z, F, U, E;
                    return m().wrap(
                      function (A) {
                        for (;;)
                          switch ((A.prev = A.next)) {
                            case 0:
                              if (this.client_.isJoined_) {
                                A.next = 4;
                                break;
                              }
                              return (
                                (this.publishGivenCDNData_ = null),
                                (this.isPublishingGivenCDN_ = !1),
                                A.abrupt("return")
                              );
                            case 4:
                              return (
                                (v = this.publishGivenCDNData_),
                                (g = v.pushAppId),
                                (_ = v.pushBizId),
                                (b = v.pushCdnUrl),
                                (C = v.pushStreamType),
                                (N = {
                                  pushRequestTime: Date.now(),
                                  pushAppId: g,
                                  pushBizId: _,
                                  pushCdnUrl: b,
                                  pushStreamType: C,
                                }),
                                ft.info(
                                  "stopPublishGivenCDN: " + JSON.stringify(N)
                                ),
                                (A.next = 9),
                                this.signalChannel_.sendWaitForResponse({
                                  command: C9,
                                  data: N,
                                  timeout: 5e3,
                                  responseCommand:
                                    Cn.STOP_PUBLISH_GIVEN_CDN_RES,
                                  commandDesc: "stopPublishCDNStream",
                                })
                              );
                            case 9:
                              if (
                                ((z = A.sent),
                                (F = z.data),
                                (U = F.code),
                                (E = F.message),
                                U !== 0)
                              ) {
                                A.next = 16;
                                break;
                              }
                              (this.publishGivenCDNData_ = null),
                                (this.isPublishingGivenCDN_ = !1),
                                (A.next = 18);
                              break;
                            case 16:
                              throw (
                                (ft.error(
                                  "stopPublishGivenCDN failed, errCode: "
                                    .concat(U, " errMsg: ")
                                    .concat(E)
                                ),
                                new De({
                                  code: Oe.STOP_PUBLISH_CDN_FAILED,
                                  message: Fe({
                                    key: sE,
                                    data: { message: E },
                                    link: {
                                      className: "Client",
                                      fnName: "stopPublishCDNStream",
                                    },
                                  }),
                                }))
                              );
                            case 18:
                            case "end":
                              return A.stop();
                          }
                      },
                      h,
                      this
                    );
                  })
                )),
                function () {
                  return e.apply(this, arguments);
                }),
            },
            {
              key: "handleCDNConfigForJoinData",
              value: function (v) {
                var g,
                  _ = v;
                if (
                  this.publishTencentMainStreamObj_.isPublishing_ ||
                  this.publishTencentAuxStreamObj_.isPublishing_
                ) {
                  var b = {};
                  vr(_) && (b = JSON.parse(_)),
                    b.Str_uc_params || (b.Str_uc_params = {}),
                    this.publishTencentMainStreamObj_.isPublishing_ &&
                      (this.publishTencentMainStreamObj_.streamId_
                        ? (b.Str_uc_params.userdefine_streamid_main =
                            this.publishTencentMainStreamObj_.streamId_)
                        : this.publishTencentMainStreamObj_.params_ &&
                          (b.Str_uc_params.userdefine_streamid_main =
                            this.generatePublishCDNStreamId(
                              this.publishTencentMainStreamObj_.params_
                                .streamId,
                              hn
                            ))),
                    this.publishTencentAuxStreamObj_.isPublishing_ &&
                      (this.publishTencentAuxStreamObj_.streamId_
                        ? (b.Str_uc_params.userdefine_streamid_aux =
                            this.publishTencentAuxStreamObj_.streamId_)
                        : this.publishTencentAuxStreamObj_.params_ &&
                          (b.Str_uc_params.userdefine_streamid_aux =
                            this.generatePublishCDNStreamId(
                              this.publishTencentAuxStreamObj_.params_.streamId,
                              Ti
                            ))),
                    (_ = JSON.stringify(b));
                }
                if (this.isPublishingGivenCDN_) {
                  var C = this.publishGivenCDNData_,
                    N = C.pushAppId,
                    z = C.pushBizId,
                    F = C.pushCdnUrl,
                    U = C.pushStreamType,
                    E = C.pushStreamId;
                  g = {
                    pushRequestTime: Date.now(),
                    pushAppId: N,
                    pushBizId: z,
                    pushCdnUrl: F,
                    pushStreamType: U,
                    pushStreamId: E,
                  };
                }
                return { bussinessInfo: _, pushUserCdnInfo: g };
              },
            },
            {
              key: "reset",
              value: function () {
                this.resetPublishTencentParam(hn),
                  this.resetPublishTencentParam(Ti),
                  (this.publishGivenCDNData_ = null),
                  (this.isPublishingGivenCDN_ = !1);
              },
            },
          ]),
          u
        );
      })(),
      QG = (function () {
        function u(e) {
          B(this, u),
            (this.client_ = e.client),
            (this.durationMap_ = /* @__PURE__ */ new Map()),
            this.installEvents();
        }
        return (
          oe(u, [
            {
              key: "installEvents",
              value: function () {
                Ee.on(uo, this.handleSubscribed, this),
                  Ee.on(Ri, this.handleStreamTrackUpdated, this),
                  Ee.on(co, this.handleStreamStopped, this),
                  Ee.on(pu, this.handleStreamStopped, this);
              },
            },
            {
              key: "uninstallEvents",
              value: function () {
                Ee.off(uo, this.handleSubscribed, this),
                  Ee.off(Ri, this.handleStreamTrackUpdated, this),
                  Ee.off(co, this.handleStreamStopped, this),
                  Ee.off(pu, this.handleStreamStopped, this);
              },
            },
            {
              key: "handleSubscribed",
              value: function (n) {
                var a = n.client,
                  c = n.stream;
                if (a === this.client_) {
                  var s = c.getUserId(),
                    l = c.getType(),
                    h = "".concat(s, "_").concat(l);
                  if (c.hasAudio())
                    if (c.isMainAudioSubscribed) {
                      var v = new Gv(),
                        g = this.durationMap_.get(h);
                      g
                        ? this.isRecording(g.audio) || g.audio.push(v)
                        : this.durationMap_.set(h, {
                            userId: s,
                            type: l,
                            audio: [v],
                            video: [],
                          });
                    } else this.stopDurationItem(h, Ct);
                  if (c.hasVideo())
                    if (
                      (l === Bn && c.isMainVideoSubscribed) ||
                      (l === ir && c.isAuxVideoSubscribed)
                    ) {
                      var _ = new Gv(),
                        b = this.durationMap_.get(h);
                      b
                        ? this.isRecording(b.video) || b.video.push(_)
                        : this.durationMap_.set(h, {
                            userId: s,
                            type: l,
                            audio: [],
                            video: [_],
                          });
                    } else this.stopDurationItem(h, wt);
                }
              },
            },
            {
              key: "handleStreamStopped",
              value: function (n) {
                var a = n.client,
                  c = n.stream;
                if (this.clientHitTest(a)) {
                  var s = c.getUserId(),
                    l = c.getType(),
                    h = "".concat(s, "_").concat(l);
                  this.stopDurationItem(h, Ct), this.stopDurationItem(h, wt);
                }
              },
            },
            {
              key: "handleStreamTrackUpdated",
              value: function (n) {
                var a = n.client,
                  c = n.userId,
                  s = n.tinyId,
                  l = n.kind,
                  h = n.action;
                if (
                  this.clientHitTest(a) &&
                  this.client_.getConnections().has(s)
                ) {
                  var v = l === Vn ? l : Bn,
                    g = "".concat(c, "_").concat(v);
                  if (h === jr.ADD) {
                    var _ = this.client_
                      .getConnections()
                      .get(s)
                      .getSubscribeState();
                    if (
                      (l === Ct && !_.audio) ||
                      (l === wt && !_.video) ||
                      (l === Vn && !_.auxiliary)
                    )
                      return;
                    var b = new Gv(),
                      C = this.durationMap_.get(g);
                    C
                      ? (l !== Ct ||
                          this.isRecording(C.audio) ||
                          C.audio.push(b),
                        l === Ct ||
                          this.isRecording(C.video) ||
                          C.video.push(b))
                      : this.durationMap_.set(g, {
                          userId: c,
                          type: v,
                          audio: l === Ct ? [b] : [],
                          video: l === Ct ? [] : [b],
                        });
                  } else this.stopDurationItem(g, l === Ct ? Ct : wt);
                }
              },
            },
            {
              key: "isRecording",
              value: function (n) {
                return (
                  n.findIndex(function (a) {
                    return a.endTime === 0;
                  }) >= 0
                );
              },
            },
            {
              key: "stopDurationItem",
              value: function (n, a) {
                if (this.durationMap_.has(n)) {
                  var c = this.durationMap_.get(n)[a].find(function (s) {
                    return s.endTime === 0;
                  });
                  c && c.stop();
                }
              },
            },
            {
              key: "clientHitTest",
              value: function (n) {
                return this.client_ === n;
              },
            },
            {
              key: "getDuration",
              value: function (n, a) {
                return this.durationMap_.has(n)
                  ? this.durationMap_.get(n)[a].reduce(function (c, s) {
                      return c + s.getDuration();
                    }, 0)
                  : 0;
              },
            },
            {
              key: "getDurationMap",
              value: function () {
                return this.durationMap_;
              },
            },
            {
              key: "reset",
              value: function () {
                this.durationMap_.clear();
              },
            },
            {
              key: "destroy",
              value: function () {
                (this.client_ = null), this.uninstallEvents();
              },
            },
          ]),
          u
        );
      })();
    function kh() {
      return function (u, e, n) {
        var a = n.value,
          c = /* @__PURE__ */ new Set();
        return (
          (n.value = I(
            m().mark(function s() {
              var l,
                h,
                v,
                g,
                _ = arguments;
              return m().wrap(
                function (b) {
                  for (;;)
                    switch ((b.prev = b.next)) {
                      case 0:
                        if (!c.has(this)) {
                          b.next = 2;
                          break;
                        }
                        throw new De({
                          code: Oe.INVALID_OPERATION,
                          message: Fe({ key: h7, data: { name: e } }),
                        });
                      case 2:
                        for (
                          b.prev = 2,
                            c.add(this),
                            l = _.length,
                            h = new Array(l),
                            v = 0;
                          v < l;
                          v++
                        )
                          h[v] = _[v];
                        return (b.next = 7), a.apply(this, h);
                      case 7:
                        return (
                          (g = b.sent), c.delete(this), b.abrupt("return", g)
                        );
                      case 12:
                        throw (
                          ((b.prev = 12),
                          (b.t0 = b.catch(2)),
                          c.delete(this),
                          b.t0)
                        );
                      case 16:
                      case "end":
                        return b.stop();
                    }
                },
                s,
                this,
                [[2, 12]]
              );
            })
          )),
          n
        );
      };
    }
    var c3,
      l3,
      d3,
      h3,
      f3,
      p3,
      v3,
      m3,
      g3,
      _3,
      y3,
      b3,
      S3,
      w3,
      k3,
      T3,
      E3,
      I3,
      R3,
      C3,
      A3,
      x3,
      O3,
      P3,
      D3,
      N3,
      L3,
      M3,
      U3,
      V3,
      F3,
      Ot,
      XG =
        ((s3 = Gr({
          name: "options",
          type: vi,
          required: !0,
          properties: {
            roomId: { type: Dn, required: !0 },
            userId: { type: Dn, required: !1 },
          },
        })),
        (u3 = Gr({
          name: "options",
          type: vi,
          required: !0,
          properties: {
            updateList: {
              type: FT,
              required: !0,
              arrayItem: {
                require: !0,
                type: vi,
                properties: {
                  roomId: { required: !0, type: Dn },
                  userId: { required: !1, type: Dn },
                  muteAudio: { type: yr },
                  muteVideo: { type: yr },
                  muteAuxiliary: { type: yr },
                },
              },
              validate: function (e) {
                if (
                  e.find(function (n) {
                    return n.userId;
                  }) &&
                  e.find(function (n) {
                    return !n.userId;
                  })
                )
                  throw new De({
                    code: Oe.INVALID_PARAMETER,
                    message: "you can not update both userId and all",
                  });
              },
            },
          },
        })),
        (hs = (function () {
          function u() {
            B(this, u), (this.crossRoomSeq = 0);
          }
          var e, n, a;
          return (
            oe(u, [
              {
                key: "call",
                value: function (s, l) {
                  return zr(this[s])
                    ? this[s](l)
                    : Promise.reject(
                        new De({
                          code: Oe.INVALID_PARAMETER,
                          message: Fe({ key: jU, data: { name: s } }),
                        })
                      );
                },
              },
              {
                key: "updatePrivateMapKey",
                value: function (s) {
                  var l = s.privateMapKey;
                  return (
                    s.client.setProperty("privateMapKey", l), Promise.resolve()
                  );
                },
              },
              {
                key: "connectOtherRoom",
                value:
                  ((a = I(
                    m().mark(function c(s) {
                      var l, h, v, g;
                      return m().wrap(function (_) {
                        for (;;)
                          switch ((_.prev = _.next)) {
                            case 0:
                              if (
                                ((l = s.client),
                                (h = s.roomId),
                                (v = s.userId),
                                l.signalChannel_)
                              ) {
                                _.next = 3;
                                break;
                              }
                              return _.abrupt(
                                "return",
                                Promise.reject(
                                  new De({
                                    code: Oe.INVALID_OPERATION,
                                    message: "you did not joined room",
                                  })
                                )
                              );
                            case 3:
                              return (
                                (_.next = 5),
                                l.signalChannel_.sendWaitForResponseWithRetry({
                                  command: N9,
                                  responseCommand: Cn.CONNECT_OTHER_ROOM_RES,
                                  data: {
                                    roomId: h,
                                    userId: v,
                                    localRoomId: v ? void 0 : l.getRoomId(),
                                  },
                                  retries: 3,
                                })
                              );
                            case 5:
                              if ((g = _.sent).data.code === 0) {
                                _.next = 8;
                                break;
                              }
                              throw new De({
                                code: g.data.code,
                                message: g.data.message,
                              });
                            case 8:
                            case "end":
                              return _.stop();
                          }
                      }, c);
                    })
                  )),
                  function (c) {
                    return a.apply(this, arguments);
                  }),
              },
              {
                key: "updateOtherRoomForwardMode",
                value:
                  ((n = I(
                    m().mark(function c(s) {
                      var l, h, v, g, _;
                      return m().wrap(
                        function (b) {
                          for (;;)
                            switch ((b.prev = b.next)) {
                              case 0:
                                if (
                                  ((h = s.client),
                                  (v = s.updateList),
                                  h.signalChannel_)
                                ) {
                                  b.next = 3;
                                  break;
                                }
                                return b.abrupt(
                                  "return",
                                  Promise.reject(
                                    new De({
                                      code: Oe.INVALID_OPERATION,
                                      message: "you did not joined room",
                                    })
                                  )
                                );
                              case 3:
                                return (
                                  (g = v.find(function (C) {
                                    return C.userId;
                                  })
                                    ? 0
                                    : 1),
                                  (b.next = 6),
                                  h.signalChannel_.sendWaitForResponseWithRetry(
                                    {
                                      command: L9,
                                      responseCommand:
                                        Cn.UPDATE_OTHER_ROOM_FORWARD_MODE_RES,
                                      data: {
                                        seq: ++this.crossRoomSeq,
                                        operationType: g,
                                        updateList: v.map(function (C) {
                                          return {
                                            roomId: C.roomId,
                                            userId: C.userId,
                                            muteAudio: C.muteAudio,
                                            muteVideo: C.muteVideo,
                                            muteSubStream: C.muteAuxiliary,
                                          };
                                        }),
                                      },
                                      retries: 3,
                                    }
                                  )
                                );
                              case 6:
                                if (!(_ = b.sent).data.data.expectSeq) {
                                  b.next = 10;
                                  break;
                                }
                                return (
                                  (this.crossRoomSeq = _.data.data.expectSeq),
                                  b.abrupt(
                                    "return",
                                    this.updateOtherRoomForwardMode({
                                      client: h,
                                      updateList: v,
                                    })
                                  )
                                );
                              case 10:
                                if (_.data.code === 0) {
                                  b.next = 14;
                                  break;
                                }
                                throw new De({
                                  code: _.data.code,
                                  message: _.data.message,
                                });
                              case 14:
                                if (
                                  !(
                                    ((l = _.data.errorList) === null ||
                                    l === void 0
                                      ? void 0
                                      : l.length) > 0
                                  )
                                ) {
                                  b.next = 16;
                                  break;
                                }
                                throw new De({
                                  code: Oe.UNKNOWN,
                                  message: _.data.errorList[0].message,
                                });
                              case 16:
                              case "end":
                                return b.stop();
                            }
                        },
                        c,
                        this
                      );
                    })
                  )),
                  function (c) {
                    return n.apply(this, arguments);
                  }),
              },
              {
                key: "disconnectOtherRoom",
                value:
                  ((e = I(
                    m().mark(function c(s) {
                      var l, h, v;
                      return m().wrap(function (g) {
                        for (;;)
                          switch ((g.prev = g.next)) {
                            case 0:
                              if (
                                ((l = s.client),
                                (h = s.roomId),
                                l.signalChannel_)
                              ) {
                                g.next = 3;
                                break;
                              }
                              return g.abrupt("return", Promise.resolve());
                            case 3:
                              return (
                                (g.next = 5),
                                l.signalChannel_.sendWaitForResponseWithRetry({
                                  command: M9,
                                  responseCommand: Cn.DISCONNECT_OTHER_ROOM_RES,
                                  data: {
                                    roomId: h,
                                    localRoomId: h ? l.getRoomId() : void 0,
                                  },
                                  retries: 3,
                                })
                              );
                            case 5:
                              if ((v = g.sent).data.code === 0) {
                                g.next = 8;
                                break;
                              }
                              throw new De({
                                code: v.data.code,
                                message: v.data.message,
                              });
                            case 8:
                            case "end":
                              return g.stop();
                          }
                      }, c);
                    })
                  )),
                  function (c) {
                    return e.apply(this, arguments);
                  }),
              },
            ]),
            u
          );
        })()),
        Be(
          hs.prototype,
          "connectOtherRoom",
          [s3],
          Object.getOwnPropertyDescriptor(hs.prototype, "connectOtherRoom"),
          hs.prototype
        ),
        Be(
          hs.prototype,
          "updateOtherRoomForwardMode",
          [u3],
          Object.getOwnPropertyDescriptor(
            hs.prototype,
            "updateOtherRoomForwardMode"
          ),
          hs.prototype
        ),
        hs),
      eq = new XG(),
      Kv,
      Jv,
      $v,
      Ab,
      j3,
      B3,
      z3,
      H3,
      W3,
      G3,
      Er,
      tq =
        ((c3 = kh()),
        (l3 = Gr(Tr.CLIENT.join)),
        (d3 = dl({
          retries: 1,
          timeout: 0,
          onError: function (e, n, a) {
            this.isUsingCachedSchedule_
              ? (this.log_.warn("is using cached schedule, retry join"),
                is(!0),
                this.reset(),
                n())
              : (Ee.emit(fu, { client: this, error: e }),
                gt.logFailedEvent({
                  userId: this.userId_,
                  eventType: _T,
                  error: e,
                }),
                this.reset(),
                this.log_.error(e),
                a(e));
          },
        })),
        (h3 = kh()),
        (f3 = dl({ retries: 3 })),
        (p3 = kh()),
        (v3 = Gr.apply(void 0, Ze(Tr.CLIENT.publish))),
        (m3 = Gn(Br)),
        (g3 = kh()),
        (_3 = Gr(Tr.CLIENT.unpublish)),
        (y3 = Gr.apply(void 0, Ze(Tr.CLIENT.subscribe))),
        (b3 = Gr(Tr.CLIENT.unsubscribe)),
        (S3 = kh()),
        (w3 = Gr(Tr.CLIENT.switchRole)),
        (k3 = Gn(Br)),
        (T3 = Gr(Tr.CLIENT.startPublishCDNStream)),
        (E3 = Gn(Br)),
        (I3 = Gn(Br)),
        (R3 = Gr(Tr.CLIENT.startMixTranscode)),
        (C3 = Gn(Br)),
        (A3 = Gn(Br)),
        (x3 = Gn(Br)),
        (O3 = Gn(Br)),
        (P3 = Gn(Br)),
        (D3 = Gn(Br)),
        (N3 = Gn(Br)),
        (L3 = Nv.apply(void 0, Ze(Tr.CLIENT.sendSEIMessage))),
        (M3 = Gn(Br)),
        (Kv = {
          timesInSecond: 30,
          maxSizeInSecond: 8e3,
          getSize: function () {
            for (var e = arguments.length, n = new Array(e), a = 0; a < e; a++)
              n[a] = arguments[a];
            return n[0].byteLength;
          },
        }),
        (Jv = Kv.timesInSecond),
        ($v = Kv.maxSizeInSecond),
        (Ab = Kv.getSize),
        (U3 = function (e, n, a) {
          var c = a.value,
            s = /* @__PURE__ */ new Map();
          return (
            Ee.on(py, function (l) {
              var h = l.client;
              return s.delete(h);
            }),
            (a.value = function () {
              var l = s.get(this);
              l ||
                ((l = {
                  callCountInSecond: 0,
                  timestamp: 0,
                  totalSizeInSecond: 0,
                }),
                s.set(this, l)),
                l.timestamp === 0
                  ? (l.timestamp = Date.now())
                  : Date.now() - l.timestamp > 1e3 &&
                    ((l.timestamp = Date.now()),
                    (l.callCountInSecond = 0),
                    (l.totalSizeInSecond = 0));
              for (
                var h = arguments.length, v = new Array(h), g = 0;
                g < h;
                g++
              )
                v[g] = arguments[g];
              if (
                (Ab && (l.totalSizeInSecond += Ab.apply(void 0, v)),
                l.timestamp !== 0 &&
                  Date.now() - l.timestamp < 1e3 &&
                  (l.callCountInSecond >= Jv || l.totalSizeInSecond > $v))
              )
                throw new De({
                  code: Oe.INVALID_OPERATION,
                  message: Fe({
                    key: JU,
                    data: {
                      isTimes: l.callCountInSecond >= Jv,
                      isSize: l.totalSizeInSecond > $v,
                      name: n,
                      timesInSecond: Jv,
                      maxSizeInSecond: $v,
                    },
                  }),
                });
              return l.callCountInSecond++, c.apply(this, v);
            }),
            a
          );
        }),
        (V3 = Gn(Br)),
        (F3 = Gn(Br)),
        (Ot = (function () {
          function u(H) {
            var R, w;
            B(this, u),
              (this.name_ = Br),
              (this.mode_ = H.mode),
              (this.sdpSemantics_ = w0),
              ht(H.sdpSemantics)
                ? (function () {
                    var q;
                    if (
                      ht(window.RTCRtpTransceiver) ||
                      !("currentDirection" in RTCRtpTransceiver.prototype)
                    )
                      return !1;
                    var J = null,
                      re = !1;
                    try {
                      (J = new RTCPeerConnection({
                        sdpSemantics: Jd,
                      })).addTransceiver(Ct),
                        (re = !0);
                    } catch (pe) {}
                    return (q = J) === null || q === void 0 || q.close(), re;
                  })() && (this.sdpSemantics_ = Jd)
                : (this.sdpSemantics_ = H.sdpSemantics),
              (this.sdkAppId_ = H.sdkAppId),
              (this.userId_ = H.userId),
              (this.log_ = ft.createLogger({
                id: "c".concat(H.seq, "|").concat(this.userId_),
                userId: this.userId_,
                sdkAppId: this.sdkAppId_,
              })),
              (this.userSig_ = H.userSig),
              (this.roomId_ = 0),
              (this.useStringRoomId_ = H.useStringRoomId || !1),
              (this.pureAudioPushMode_ = null),
              (this.version_ = H.version),
              this.log_.info("using sdpSemantics: " + this.sdpSemantics_),
              (this.signalChannel_ = null),
              (this.role_ = xa),
              (this.privateMapKey_ = ""),
              (this.tinyId_ = 0),
              (this.env_ = ""),
              (this.proxy_ = null),
              (this.unifiedProxy_ = null),
              (this.connections_ = /* @__PURE__ */ new Map()),
              (this.mutedStates_ = /* @__PURE__ */ new Map()),
              (this.userMap_ = /* @__PURE__ */ new Map()),
              (this.syncUserListInterval_ = -1),
              (this.localStream_ = null),
              (this.localAuxStream_ = null),
              (this.uplinkConnection_ = null),
              (this.emitter_ = VE(new rs(), this.name_)),
              (this.isJoined_ = !1),
              (this.heartbeat_ = -1),
              (this.lastHeartBeatTime_ = -1),
              (this.stats_ = new ej(this)),
              (this.joinTimeout_ = -1),
              (this.changeBigSmallRecords_ = /* @__PURE__ */ new Map()),
              (this.networkQuality_ = null),
              (this.badCaseDetector_ = null),
              (this.networkType_ = ey()),
              (this.autoSubscribe_ = !!ht(H.autoSubscribe) || H.autoSubscribe),
              (this.joinedTimestamp_ = 0),
              (this.joinOptions_ = {}),
              (this.basis_ =
                ((w = {
                  browser: du().name + "/" + du().version,
                  os: n1(),
                  displayResolution: GF(),
                  isScreenShareSupported: LI(),
                  isWebRTCSupported: Yy(),
                  isGetUserMediaSupported: qF(),
                  isWebAudioSupported: KF(),
                  isWebSocketsSupported:
                    "WebSocket" in window && window.WebSocket.CLOSING === 2,
                  isWebCodecSupported:
                    ((R = {
                      AudioDecoder: !1,
                      AudioEncoder: !1,
                      VideoDecoder: !1,
                      VideoEncoder: !1,
                      ImageDecoder: !1,
                    }),
                    ht(window.AudioDecoder) || (R.AudioDecoder = !0),
                    ht(window.AudioEncoder) || (R.AudioEncoder = !0),
                    ht(window.VideoDecoder) || (R.VideoDecoder = !0),
                    ht(window.VideoEncoder) || (R.VideoEncoder = !0),
                    ht(window.ImageDecoder) || (R.ImageDecoder = !0),
                    R),
                  isMediaSessionSupported:
                    "mediaSession" in navigator &&
                    !ht(navigator.mediaSession.setActionHandler),
                  isWebTransportSupported: !ht(window.WebTransport),
                }),
                navigator.userAgent.includes("miniProgram") &&
                  (w.browser = "mini/".concat(w.browser)),
                w)),
              this.initBussinessInfo_(H),
              (this.publishedCDN_ = !1),
              (this.publishCDNData_ = null),
              (this.mixedMCU_ = !1),
              (this.mixTranscodeData_ = null),
              (this.checkSystemResult_ = null),
              (this.enableAudioVolumeEvaluation_ = !1),
              (this.audioVolumeIntervalId_ = null),
              (this.mixTranscodeManager_ = null),
              (this.publishCDNManager_ = new ZG({ client: this })),
              (this.keyPointManager_ = new pG({
                client: this,
                frameWorkType: H.frameWorkType,
                component: H.component,
              })),
              (this.isPublishing_ = !1),
              (this.isEnableSmallStream_ = !1),
              (this.smallStreamConfig_ = {
                bitrate: 100,
                frameRate: 15,
                height: 120,
                width: 160,
              }),
              (this.turnServers_ = []),
              (this.iceTransportPolicy_ = H.iceTransportPolicy),
              (this.schedule_ = {
                domains: null,
                iceServers: null,
                iceTransportPolicy: null,
                trtcCapability: null,
              }),
              (this.isUsingCachedSchedule_ = !1),
              (this.enableAutoPlayDialog_ =
                !!ht(H.enableAutoPlayDialog) || H.enableAutoPlayDialog),
              (this.enableMultiAuxStream_ =
                !ht(H.enableMultiAuxStream) && H.enableMultiAuxStream),
              (this.signalInfo_ = {}),
              (this.enableSEI_ = !ht(H.enableSEI) && H.enableSEI),
              (this.isDestroyed_ = !1);
          }
          var e,
            n,
            a,
            c,
            s,
            l,
            h,
            v,
            g,
            _,
            b,
            C,
            N,
            z,
            F,
            U,
            E,
            A,
            L,
            $,
            te,
            X,
            D,
            M,
            W,
            G,
            ne;
          return (
            oe(u, [
              {
                key: "initBussinessInfo_",
                value: function (R) {
                  this.bussinessInfo_ = R.bussinessInfo;
                  var w = {};
                  if (
                    (vr(R.bussinessInfo) && (w = JSON.parse(R.bussinessInfo)),
                    !ht(R.pureAudioPushMode))
                  ) {
                    if (!Number.isInteger(Number(R.pureAudioPushMode)))
                      throw new De({
                        code: Oe.INVALID_PARAMETER,
                        message: Fe({ key: T7 }),
                      });
                    (this.pureAudioPushMode_ = R.pureAudioPushMode),
                      w.Str_uc_params || (w.Str_uc_params = {}),
                      (w.Str_uc_params.pure_audio_push_mod =
                        this.pureAudioPushMode_);
                  }
                  if (!ht(R.streamId)) {
                    if (
                      !(
                        vr(R.streamId) &&
                        String(R.streamId) &&
                        String(R.streamId).length <= 64
                      )
                    )
                      throw new De({
                        code: Oe.INVALID_PARAMETER,
                        message: Fe({ key: E7 }),
                      });
                    w.Str_uc_params || (w.Str_uc_params = {}),
                      (w.Str_uc_params.userdefine_streamid_main = R.streamId);
                  }
                  if (!ht(R.userDefineRecordId)) {
                    if (
                      R.userDefineRecordId.match(/^[A-Za-z0-9_-]{1,64}$/gi) ===
                      null
                    )
                      throw new De({
                        code: Oe.INVALID_PARAMETER,
                        message: Fe({ key: I7 }),
                      });
                    w.Str_uc_params || (w.Str_uc_params = {}),
                      (w.Str_uc_params.userdefine_record_id =
                        R.userDefineRecordId);
                  }
                  if (!ht(R.userDefinePushArgs)) {
                    if (
                      !(
                        vr(R.userDefinePushArgs) &&
                        String(R.userDefinePushArgs) &&
                        String(R.userDefinePushArgs).length <= 256
                      )
                    )
                      throw new De({
                        code: Oe.INVALID_PARAMETER,
                        message: Fe({ key: R7 }),
                      });
                    w.Str_uc_params || (w.Str_uc_params = {}),
                      (w.Str_uc_params.userdefine_push_args =
                        R.userDefinePushArgs);
                  }
                  R.enableServerAudioMix &&
                    (w.Str_uc_params || (w.Str_uc_params = {}),
                    (w.Str_uc_params.enable_server_audio_mix = 1),
                    (w.Str_uc_params.uc_biz_type = 1e3)),
                    ho(w) || (this.bussinessInfo_ = JSON.stringify(w));
                },
              },
              {
                key: "schedule",
                value:
                  ((ne = I(
                    m().mark(function H(R) {
                      var w, q, J;
                      return m().wrap(
                        function (re) {
                          for (;;)
                            switch ((re.prev = re.next)) {
                              case 0:
                                return (
                                  (re.next = 2),
                                  EF({
                                    userId: this.userId_,
                                    sdkAppId: this.sdkAppId_,
                                    roomId: R,
                                    useStringRoomId: this.useStringRoomId_,
                                    version: this.version_,
                                    userSig: this.userSig_,
                                  })
                                );
                              case 2:
                                (w = re.sent),
                                  (q = w.result),
                                  (J = w.isCached),
                                  (this.isUsingCachedSchedule_ = J),
                                  q &&
                                    (this.log_.info(
                                      "schedule with cache:"
                                        .concat(J, " : ")
                                        .concat(JSON.stringify(q))
                                    ),
                                    (q.trtcCapability =
                                      q == null ? void 0 : q.trtcAutoConf),
                                    (this.schedule_ = p(
                                      p({}, this.schedule_),
                                      q
                                    )),
                                    Ee.emit(zE, this.schedule_));
                              case 7:
                              case "end":
                                return re.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function (H) {
                    return ne.apply(this, arguments);
                  }),
              },
              {
                key: "getSignalChannelUrl",
                value: function () {
                  var R = { mainUrl: "", backupUrl: "" },
                    w = xE();
                  return (
                    w
                      ? (R.mainUrl = R.backupUrl =
                          "wss://".concat(w, ".rtc.qq.com"))
                      : this.proxy_
                      ? (R.mainUrl = R.backupUrl = this.proxy_)
                      : this.unifiedProxy_
                      ? (R.mainUrl = R.backupUrl =
                          "wss://".concat(this.unifiedProxy_))
                      : Array.isArray(this.schedule_.domains) &&
                        this.schedule_.domains.length > 0 &&
                        ((R.mainUrl = R.backupUrl =
                          "wss://".concat(this.schedule_.domains[0])),
                        this.schedule_.domains[1] &&
                          (R.backupUrl = "wss://".concat(
                            this.schedule_.domains[1]
                          ))),
                    R
                  );
                },
              },
              {
                key: "getUserId",
                value: function () {
                  return this.userId_;
                },
              },
              {
                key: "getUserSig",
                value: function () {
                  return this.userSig_;
                },
              },
              {
                key: "getRole",
                value: function () {
                  return this.role_;
                },
              },
              {
                key: "getSignalInfo",
                value: function () {
                  return this.signalInfo_;
                },
              },
              {
                key: "getRoomId",
                value: function () {
                  return this.roomId_;
                },
              },
              {
                key: "getSDKAppId",
                value: function () {
                  return this.sdkAppId_;
                },
              },
              {
                key: "getTinyId",
                value: function () {
                  return this.tinyId_;
                },
              },
              {
                key: "getIceTransportPolicy",
                value: function () {
                  return (
                    this.iceTransportPolicy_ ||
                    this.schedule_.iceTransportPolicy ||
                    "all"
                  );
                },
              },
              {
                key: "initialize",
                value: function (R) {
                  var w = this;
                  this.log_.info("setup signal channel");
                  var q = this.getSignalChannelUrl(),
                    J = q.mainUrl,
                    re = q.backupUrl;
                  return (
                    (this.signalChannel_ = new CF({
                      sdkAppId: this.sdkAppId_,
                      userId: this.userId_,
                      userSig: this.userSig_,
                      roomId: R.roomId,
                      url: J,
                      backupUrl: re,
                      signalDomainWhenUnifiedProxy: this.unifiedProxy_
                        ? this.schedule_.domains[0]
                        : void 0,
                      client: this,
                    })),
                    this.networkQuality_ ||
                      ((this.networkQuality_ = new tj({
                        connections: this.connections_,
                        signalChannel: this.signalChannel_,
                        userId: this.userId_,
                        client: this,
                      })),
                      this.networkQuality_.on(
                        An.NETWORK_QUALITY,
                        function (pe) {
                          w.emitter_.emit(An.NETWORK_QUALITY, pe);
                        }
                      )),
                    this.deviceDetector_ ||
                      (this.deviceDetector_ = new nj({ client: this })),
                    this.subscriptionManager_ ||
                      (this.subscriptionManager_ = new vG({ client: this })),
                    this.badCaseDetector_ ||
                      (this.badCaseDetector_ = new $G({
                        client: this,
                        stats: this.stats_,
                      })),
                    this.callDurationCalculator_ ||
                      (this.callDurationCalculator_ = new QG({ client: this })),
                    this.mixTranscodeManager_ ||
                      (this.mixTranscodeManager_ = new YG({
                        client: this,
                        signalChannel: this.signalChannel_,
                      })),
                    this.publishCDNManager_ &&
                      this.publishCDNManager_.setSignalChannel({
                        signalChannel: this.signalChannel_,
                      }),
                    this.signalChannel_.on(Ny, function (pe) {
                      w.log_.info(
                        "SignalChannel state changed from "
                          .concat(pe.prevState, " to ")
                          .concat(pe.state)
                      ),
                        w.emitter_.emit(An.CONNECTION_STATE_CHANGED, pe);
                    }),
                    this.signalChannel_.on(Ly, function (pe) {
                      w.reset(), w.emitter_.emit(An.ERROR, pe);
                    }),
                    this.signalChannel_.once(cI, function (pe) {
                      (w.tinyId_ = pe.signalInfo.tinyId),
                        Ee.emit(Jp, { client: w });
                    }),
                    this.signalChannel_.on(Cn.PEER_JOIN, this.onPeerJoin, this),
                    this.signalChannel_.on(
                      Cn.PEER_LEAVE,
                      this.onPeerLeave,
                      this
                    ),
                    this.signalChannel_.on(
                      Cn.UPDATE_REMOTE_MUTE_STAT,
                      function (pe) {
                        Date.now() - w.lastHeartBeatTime_ >= 1e4 &&
                          w.doHeartbeat(),
                          Ee.emit(ly, { client: w, data: pe.data }),
                          w.onPublishedUserList(pe.data),
                          w.onUpdateRemoteMuteStat(pe.data);
                      }
                    ),
                    this.signalChannel_.on(Cn.CLIENT_BANNED, function (pe) {
                      var ye,
                        Ne = pe.data.data.reason;
                      if (
                        (gt.uploadEvent({
                          log: "stat-banned:".concat(Ne),
                          userId: w.userId_,
                        }),
                        Ne === AM)
                      )
                        ye = "you got banned by the admin";
                      else if (Ne === xM)
                        ye = "duplicated userId joining the room";
                      else if (Ne === PM)
                        (ye = "the room has been disbanded by the admin"),
                          (Ne = Ne.replace("_", "-"));
                      else if (Ne === OM)
                        return (
                          w.log_.warn(
                            ""
                              .concat(Ne, " last heart beat time: ")
                              .concat(w.lastHeartBeatTime_, " interval: ")
                              .concat(
                                Date.now() - w.lastHeartBeatTime_,
                                ", visibility: "
                              )
                              .concat(document.visibilityState)
                          ),
                          void w.reJoin()
                        );
                      w.log_[Ne === "kick" ? "error" : "info"](
                        "user was banned because of [".concat(Ne, "]")
                      ),
                        w.reset(),
                        w.emitter_.emit(An.CLIENT_BANNED, {
                          reason: Ne,
                          message:
                            Fe({
                              key: G7,
                              data: { message: ye, reason: Ne },
                            }) || Ne,
                        });
                    }),
                    Ee.emit(hy, { client: this }),
                    this.signalChannel_.connect()
                  );
                },
              },
              {
                key: "preJoin",
                value:
                  ((G = I(
                    m().mark(function H(R) {
                      var w, q, J, re;
                      return m().wrap(
                        function (pe) {
                          for (;;)
                            switch ((pe.prev = pe.next)) {
                              case 0:
                                return (
                                  (this.joinOptions_ = R), (pe.next = 3), Qy()
                                );
                              case 3:
                                if (
                                  ((this.checkSystemResult_ = pe.sent),
                                  this.checkDestroy(),
                                  (w = xE()) ||
                                    ((w = Rp),
                                    this.proxy_ &&
                                      (this.proxy_.startsWith(NM)
                                        ? (w = MM)
                                        : this.proxy_.startsWith(LM) &&
                                          (w = UM))),
                                  (this.env_ = w),
                                  gt.setConfig({
                                    env: w,
                                    sdkAppId: this.sdkAppId_,
                                    userId: this.userId_,
                                    roomId: R.roomId,
                                  }),
                                  this.uploadTrtcStats(),
                                  (q = this.checkSystemResult_.detail),
                                  (J = q.isH264EncodeSupported),
                                  (re = q.isVp8EncodeSupported),
                                  Yy() && (J || re))
                                ) {
                                  pe.next = 13;
                                  break;
                                }
                                throw new De({
                                  code: Oe.NOT_SUPPORTED,
                                  message: Fe({ key: dE }),
                                });
                              case 13:
                              case "end":
                                return pe.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function (H) {
                    return G.apply(this, arguments);
                  }),
              },
              {
                key: "join",
                value:
                  ((W = I(
                    m().mark(function H(R) {
                      var w,
                        q = this;
                      return m().wrap(
                        function (J) {
                          for (;;)
                            switch ((J.prev = J.next)) {
                              case 0:
                                return (
                                  (this.roomId_ = R.roomId),
                                  ht(R.role) || (this.role_ = R.role),
                                  ht(R.privateMapKey) ||
                                    (this.privateMapKey_ = R.privateMapKey),
                                  (w = er()),
                                  Ee.emit(Kp, { client: this }),
                                  Xr(this.userId_, {
                                    eventId: Y9,
                                    eventDesc: "joining room",
                                    timestamp: Ur(),
                                    userId: this.userId_,
                                    tinyId: this.tinyId_,
                                  }),
                                  (J.next = 8),
                                  this.preJoin(R)
                                );
                              case 8:
                                return J.abrupt(
                                  "return",
                                  new Promise(
                                    (function () {
                                      var re = I(
                                        m().mark(function pe(ye, Ne) {
                                          return m().wrap(
                                            function (Ve) {
                                              for (;;)
                                                switch ((Ve.prev = Ve.next)) {
                                                  case 0:
                                                    if (
                                                      ((q.joinReject_ = Ne),
                                                      (Ve.prev = 1),
                                                      q.proxy_ ||
                                                        q.schedule_.domains)
                                                    ) {
                                                      Ve.next = 5;
                                                      break;
                                                    }
                                                    return (
                                                      (Ve.next = 5),
                                                      q.schedule(R.roomId)
                                                    );
                                                  case 5:
                                                    return (
                                                      q.checkDestroy(),
                                                      (Ve.next = 8),
                                                      q.initialize(R)
                                                    );
                                                  case 8:
                                                    return (
                                                      (Ve.next = 10),
                                                      q.doJoin(R)
                                                    );
                                                  case 10:
                                                    (q.signalInfo_ =
                                                      q.signalChannel_.getSignalInfo()),
                                                      Ee.emit(Gc, {
                                                        client: q,
                                                      }),
                                                      (q.joinedTimestamp_ =
                                                        er()),
                                                      gt.logSuccessEvent({
                                                        userId: q.userId_,
                                                        eventType: qM,
                                                        delta:
                                                          q.joinedTimestamp_ -
                                                          w,
                                                      }),
                                                      gt.logSuccessEvent({
                                                        userId: q.userId_,
                                                        eventType: _T,
                                                      }),
                                                      gt.uploadEvent({
                                                        log: "stat-autoplay-dialog:".concat(
                                                          q.enableAutoPlayDialog_
                                                        ),
                                                        userId: q.userId_,
                                                      }),
                                                      gt.uploadEvent({
                                                        log: "stat-conv-"
                                                          .concat(cu, "-")
                                                          .concat(
                                                            location.hostname
                                                          ),
                                                        userId: q.userId_,
                                                      }),
                                                      ye(),
                                                      (Ve.next = 23);
                                                    break;
                                                  case 20:
                                                    (Ve.prev = 20),
                                                      (Ve.t0 = Ve.catch(1)),
                                                      Ne(Ve.t0);
                                                  case 23:
                                                    q.joinReject_ = null;
                                                  case 24:
                                                  case "end":
                                                    return Ve.stop();
                                                }
                                            },
                                            pe,
                                            null,
                                            [[1, 20]]
                                          );
                                        })
                                      );
                                      return function (pe, ye) {
                                        return re.apply(this, arguments);
                                      };
                                    })()
                                  )
                                );
                              case 9:
                              case "end":
                                return J.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function (H) {
                    return W.apply(this, arguments);
                  }),
              },
              {
                key: "checkDestroy",
                value: function () {
                  if (this.isDestroyed_)
                    throw new De({
                      code: Oe.INVALID_OPERATION,
                      message: Fe({ key: P0, data: { funName: "join" } }),
                    });
                },
              },
              {
                key: "uploadTrtcStats",
                value:
                  ((M = I(
                    m().mark(function H() {
                      var R, w, q, J, re, pe, ye, Ne, Ve, Kt, Ht, Qt, bn;
                      return m().wrap(
                        function (Yt) {
                          for (;;)
                            switch ((Yt.prev = Yt.next)) {
                              case 0:
                                return (
                                  (Yt.prev = 0),
                                  (Yt.next = 3),
                                  $n.getMicrophones()
                                );
                              case 3:
                                (q = Yt.sent),
                                  (R = q && q.length),
                                  (Yt.next = 9);
                                break;
                              case 7:
                                (Yt.prev = 7), (Yt.t0 = Yt.catch(0));
                              case 9:
                                return (
                                  (Yt.prev = 9), (Yt.next = 12), $n.getCameras()
                                );
                              case 12:
                                (J = Yt.sent),
                                  (w = J && J.length),
                                  (Yt.next = 18);
                                break;
                              case 16:
                                (Yt.prev = 16), (Yt.t1 = Yt.catch(9));
                              case 18:
                                (re = { microphone: R, camera: w }),
                                  (pe = this.checkSystemResult_.detail),
                                  (ye = pe.isH264EncodeSupported),
                                  (Ne = pe.isVp8EncodeSupported),
                                  (Ve = pe.isH264DecodeSupported),
                                  (Kt = pe.isVp8DecodeSupported),
                                  (Ht = {
                                    webRTC: this.basis_.isWebRTCSupported,
                                    getUserMedia:
                                      this.basis_.isGetUserMediaSupported,
                                    webSocket:
                                      this.basis_.isWebSocketsSupported,
                                    screenShare:
                                      this.basis_.isScreenShareSupported,
                                    webAudio: this.basis_.isWebAudioSupported,
                                    h264Encode: ye,
                                    h264Decode: Ve,
                                    vp8Encode: Ne,
                                    vp8Decode: Kt,
                                  }),
                                  (Qt = {
                                    browser: this.basis_.browser,
                                    os: this.basis_.os,
                                    trtc: Ht,
                                    devices: re,
                                  }),
                                  (bn = {
                                    isWebCodecSupported:
                                      this.basis_.isWebCodecSupported,
                                    isMediaSessionSupported:
                                      this.basis_.isMediaSessionSupported,
                                    isWebTransportSupported:
                                      this.basis_.isWebTransportSupported,
                                  }),
                                  gt.uploadEvent({
                                    log: "trtcstats-" + JSON.stringify(Qt),
                                    userId: this.userId_,
                                  }),
                                  this.log_.info(
                                    "TrtcStats-" + JSON.stringify(Qt)
                                  ),
                                  gt.uploadEvent({
                                    log:
                                      "trtcadvancedstats-" + JSON.stringify(bn),
                                    userId: this.userId_,
                                  });
                              case 26:
                              case "end":
                                return Yt.stop();
                            }
                        },
                        H,
                        this,
                        [
                          [0, 7],
                          [9, 16],
                        ]
                      );
                    })
                  )),
                  function () {
                    return M.apply(this, arguments);
                  }),
              },
              {
                key: "doJoin",
                value: function (R) {
                  var w = this;
                  return new Promise(function (q, J) {
                    w.log_.info(
                      "Join() => joining room: "
                        .concat(w.roomId_, " useStringRoomId: ")
                        .concat(w.useStringRoomId_, " mode: ")
                        .concat(w.mode_, " role: ")
                        .concat(w.role_)
                    );
                    var re = {
                      roomId: String(w.roomId_),
                      useStringRoomId: w.useStringRoomId_,
                      privateMapKey: w.privateMapKey_,
                      trtcRole: w.role_ === xa ? Vc : v0,
                      trtcScene: w.mode_ === Cp ? BM : jM,
                      sdpSemantics: w.sdpSemantics_,
                      version: kV(w.version_),
                      ua: (navigator && navigator.userAgent) || "",
                      autoSubscribe: w.autoSubscribe_,
                      terminalType: Bc
                        ? 4
                        : U0
                        ? 2
                        : M0
                        ? 3
                        : Zd
                        ? 12
                        : EE
                        ? 5
                        : IE
                        ? 13
                        : 1,
                      netType: T0[ey()],
                      bussinessInfo: w.bussinessInfo_,
                      receiveMix: !0,
                    };
                    if (w.publishCDNManager_) {
                      var pe = w.publishCDNManager_.handleCDNConfigForJoinData(
                          w.bussinessInfo_
                        ),
                        ye = pe.bussinessInfo,
                        Ne = pe.pushUserCdnInfo;
                      Object.assign(re, {
                        bussinessInfo: ye,
                        pushUserCdnInfo: Ne,
                      });
                    }
                    w.log_.debug(
                      "join room signal data: ".concat(JSON.stringify(re))
                    ),
                      (w.joinTimeout_ = setTimeout(function () {
                        J(
                          new De({
                            code: Oe.JOIN_ROOM_FAILED,
                            message: Fe({ key: P7 }),
                          })
                        );
                      }, 5e3)),
                      Ee.emit(ay, { client: w }),
                      w.signalChannel_.once(lI, function (Ve) {
                        w.clearJoinTimeout(),
                          Ee.emit(Jp, { client: w, error: Ve }),
                          J(Ve);
                      }),
                      w.signalChannel_.send(g9, re),
                      w.signalChannel_.once(Cn.JOIN_ROOM_RESULT, function (Ve) {
                        w.clearJoinTimeout();
                        var Kt = Ve.data,
                          Ht = Kt.code,
                          Qt = Kt.message,
                          bn = Kt.data;
                        w.onPublishedUserList({
                          data: { userList: bn.publishers },
                        }),
                          Ee.emit(oy, { client: w, code: Ht }),
                          Ht === 0
                            ? ((w.isJoined_ = !0),
                              w.log_.info("Join room success, start heartbeat"),
                              w.startHeartbeat(),
                              w.badCaseDetector_ && w.badCaseDetector_.start(),
                              w.syncUserList(),
                              w.startSyncUserListInterval(),
                              q())
                            : (w.log_.error(
                                "Join room failed result: " +
                                  Ht +
                                  " error: " +
                                  Qt
                              ),
                              J(
                                new De({
                                  code: Oe.JOIN_ROOM_FAILED,
                                  extraCode: Ht,
                                  message: Fe({
                                    key: iE,
                                    data: { error: Qt, code: Ht },
                                  }),
                                })
                              ));
                      });
                  });
                },
              },
              {
                key: "reJoin",
                value:
                  ((D = I(
                    m().mark(function H() {
                      return m().wrap(
                        function (R) {
                          for (;;)
                            switch ((R.prev = R.next)) {
                              case 0:
                                if (this.isJoined_) {
                                  R.next = 3;
                                  break;
                                }
                                return (
                                  this.log_.warn("reJoin abort"),
                                  R.abrupt("return")
                                );
                              case 3:
                                return (
                                  (this.isJoined_ = !1),
                                  (R.prev = 4),
                                  this.log_.warn(
                                    "reJoin pending: ".concat(
                                      this.joinOptions_.roomId
                                    )
                                  ),
                                  this.subscriptionManager_ &&
                                    this.subscriptionManager_.markAllStream(),
                                  this.signalChannel_.close(),
                                  (R.next = 10),
                                  this.signalChannel_.connect()
                                );
                              case 10:
                                return (
                                  (R.next = 12),
                                  this.doJoin(
                                    p(
                                      p({}, this.joinOptions_),
                                      {},
                                      {
                                        role: this.role_,
                                        privateMapKey: this.privateMapKey_,
                                      }
                                    )
                                  )
                                );
                              case 12:
                                this.log_.warn("reJoin success"),
                                  gt.logSuccessEvent({
                                    userId: this.userId_,
                                    eventType: yT,
                                  }),
                                  this.checkConnectionsToReconnect(),
                                  this.uplinkConnection_ &&
                                    !this.uplinkConnection_.getIsReconnecting() &&
                                    this.uplinkConnection_.startReconnection(),
                                  this.mixTranscodeManager_ &&
                                    this.mixTranscodeManager_.reStartMixTranscode(),
                                  (R.next = 25);
                                break;
                              case 19:
                                (R.prev = 19),
                                  (R.t0 = R.catch(4)),
                                  this.log_.warn("reJoin fail " + R.t0),
                                  this.reset(),
                                  gt.logFailedEvent({
                                    userId: this.userId_,
                                    eventType: yT,
                                    error: R.t0,
                                  }),
                                  this.emitter_.emit(
                                    An.ERROR,
                                    new De({
                                      code: Oe.JOIN_ROOM_FAILED,
                                      message: Fe({
                                        key: D7,
                                        data: {
                                          roomId: this.joinOptions_.roomId,
                                        },
                                      }),
                                    })
                                  );
                              case 25:
                              case "end":
                                return R.stop();
                            }
                        },
                        H,
                        this,
                        [[4, 19]]
                      );
                    })
                  )),
                  function () {
                    return D.apply(this, arguments);
                  }),
              },
              {
                key: "leave",
                value:
                  ((X = I(
                    m().mark(function H() {
                      var R;
                      return m().wrap(
                        function (w) {
                          for (;;)
                            switch ((w.prev = w.next)) {
                              case 0:
                                return (
                                  Ee.emit(sy, { client: this }),
                                  Xr(this.userId_, {
                                    eventId: Z9,
                                    eventDesc: "leaving room",
                                    timestamp: Ur(),
                                    userId: this.userId_,
                                    tinyId: this.tinyId_,
                                  }),
                                  (w.prev = 2),
                                  (w.next = 5),
                                  this.doHeartbeat()
                                );
                              case 5:
                                w.next = 9;
                                break;
                              case 7:
                                (w.prev = 7), (w.t0 = w.catch(2));
                              case 9:
                                this.doLeave(),
                                  Ee.emit(qc, { client: this }),
                                  gt.logSuccessEvent({
                                    userId: this.userId_,
                                    eventType: KM,
                                  }),
                                  (R = Math.floor(
                                    (er() - this.joinedTimestamp_) / 1e3
                                  )),
                                  gt.logSuccessEvent({
                                    userId: this.userId_,
                                    eventType: JM,
                                    delta: R,
                                  });
                              case 14:
                              case "end":
                                return w.stop();
                            }
                        },
                        H,
                        this,
                        [[2, 7]]
                      );
                    })
                  )),
                  function () {
                    return X.apply(this, arguments);
                  }),
              },
              {
                key: "doLeave",
                value: function () {
                  this.isJoined_ &&
                    (Ee.emit(uy, { client: this }),
                    this.log_.info("leave() => leaving room"),
                    this.signalChannel_.send(_9),
                    this.reset());
                },
              },
              {
                key: "clearNetworkQuality",
                value: function () {
                  this.networkQuality_ &&
                    (this.networkQuality_.stop(),
                    (this.networkQuality_ = null));
                },
              },
              {
                key: "closeConnections",
                value: function () {
                  var R = this;
                  this.connections_.forEach(function (w) {
                    R.closeDownLink(w.getTinyId());
                  });
                },
              },
              {
                key: "clearJoinTimeout",
                value: function () {
                  clearTimeout(this.joinTimeout_), (this.joinTimeout_ = -1);
                },
              },
              {
                key: "destroy",
                value: function () {
                  var R, w, q;
                  if (this.isJoined_)
                    throw (
                      (this.log_.warn(Qo.INVALID_DESTROY),
                      new De({
                        code: Oe.INVALID_OPERATION,
                        message: Fe({ key: N7 }),
                      }))
                    );
                  this.isDestroyed_ ||
                    (this.log_.info("destroy client"),
                    this.joinReject_ &&
                      (this.joinReject_(
                        new De({
                          code: Oe.INVALID_OPERATION,
                          message: Fe({ key: P0, data: { funName: "join" } }),
                        })
                      ),
                      this.clearJoinTimeout(),
                      this.reset()),
                    this.off("*"),
                    (R = this.callDurationCalculator_) === null ||
                      R === void 0 ||
                      R.destroy(),
                    (w = this.keyPointManager_) === null ||
                      w === void 0 ||
                      w.destroy(),
                    (q = this.deviceDetector_) === null ||
                      q === void 0 ||
                      q.destroy(),
                    (this.callDurationCalculator_ = null),
                    (this.keyPointManager_ = null),
                    (this.deviceDetector_ = null),
                    (this.badCaseDetector_ = null),
                    (this.publishCDNManager_ = null),
                    (this.isDestroyed_ = !0),
                    Ee.emit(py, { client: this }));
                },
              },
              {
                key: "reset",
                value: function () {
                  (this.isJoined_ = !1),
                    (this.schedule_ = {
                      domains: null,
                      iceServers: null,
                      iceTransportPolicy: null,
                      trtcCapability: null,
                    }),
                    this.keyPointManager_ &&
                      this.keyPointManager_.prepareReport(),
                    this.mixTranscodeManager_ &&
                      (this.mixTranscodeManager_.reset(),
                      (this.mixTranscodeManager_ = null)),
                    this.publishCDNManager_ && this.publishCDNManager_.reset(),
                    this.userMap_.clear(),
                    this.stopSyncUserListInterval(),
                    this.stopHeartbeat(),
                    this.closeConnections(),
                    this.mutedStates_.clear(),
                    this.clearNetworkQuality(),
                    this.badCaseDetector_ &&
                      this.callDurationCalculator_ &&
                      this.uploadAllCallStats(),
                    this.closeUplink(),
                    this.signalChannel_ &&
                      (this.log_.info("destroying SignalChannel"),
                      this.signalChannel_.close(),
                      (this.signalChannel_ = null)),
                    this.stats_.reset();
                },
              },
              {
                key: "startSyncUserListInterval",
                value: function () {
                  this.syncUserListInterval_ === -1 &&
                    (this.syncUserListInterval_ = Nn.run(
                      jc,
                      this.syncUserList.bind(this)
                    ));
                },
              },
              {
                key: "stopSyncUserListInterval",
                value: function () {
                  Nn.clearTask(this.syncUserListInterval_),
                    (this.syncUserListInterval_ = -1);
                },
              },
              {
                key: "syncUserList",
                value:
                  ((te = I(
                    m().mark(function H() {
                      var R,
                        w = this;
                      return m().wrap(
                        function (q) {
                          for (;;)
                            switch ((q.prev = q.next)) {
                              case 0:
                                return (
                                  (q.prev = 0), (q.next = 3), this.getUserList()
                                );
                              case 3:
                                (R = q.sent),
                                  this.userMap_.size !== 0 &&
                                    this.userMap_.forEach(function (J) {
                                      R.findIndex(function (re) {
                                        return re.userId === J.userId;
                                      }) < 0 &&
                                        (w.log_.info(
                                          "peer leave detected: ".concat(
                                            J.userId
                                          )
                                        ),
                                        w.cleanUser({
                                          userId: J.userId,
                                          tinyId: J.tinyId,
                                        }));
                                    }),
                                  R.forEach(function (J) {
                                    var re = J.userId;
                                    w.userMap_.has(re) ||
                                      re === w.userId_ ||
                                      (w.userMap_.set(re, J),
                                      w.emitter_.emit(An.PEER_JOIN, {
                                        userId: re,
                                      }));
                                  }),
                                  (q.next = 11);
                                break;
                              case 8:
                                (q.prev = 8),
                                  (q.t0 = q.catch(0)),
                                  this.log_.warn(
                                    "sync user list failed: " + q.t0
                                  );
                              case 11:
                              case "end":
                                return q.stop();
                            }
                        },
                        H,
                        this,
                        [[0, 8]]
                      );
                    })
                  )),
                  function () {
                    return te.apply(this, arguments);
                  }),
              },
              {
                key: "getUserList",
                value: function () {
                  return this.signalChannel_
                    ? this.signalChannel_
                        .sendWaitForResponse({
                          command: O9,
                          responseCommand: Cn.USER_LIST_RES,
                          enableLog: !1,
                          timeout: 2e3,
                        })
                        .then(function (R) {
                          var w = R.data,
                            q = w.code,
                            J = w.message;
                          if (q === 0)
                            return ((w.data && w.data.userList) || []).map(
                              function (re) {
                                var pe = re.userId,
                                  ye = re.srcTinyId,
                                  Ne = re.role;
                                return new Cb({
                                  userId: pe,
                                  tinyId: ye,
                                  role: Ne,
                                });
                              }
                            );
                          throw Fe({
                            key: pE,
                            data: {
                              signalResponse: Cn.USER_LIST_RES,
                              code: q,
                              message: J,
                            },
                          });
                        })
                    : [];
                },
              },
              {
                key: "publish",
                value:
                  (($ = I(
                    m().mark(function H(R) {
                      var w,
                        q,
                        J,
                        re,
                        pe,
                        ye,
                        Ne,
                        Ve,
                        Kt = this,
                        Ht = arguments;
                      return m().wrap(
                        function (Qt) {
                          for (;;)
                            switch ((Qt.prev = Qt.next)) {
                              case 0:
                                return (
                                  (w =
                                    Ht.length > 1 && Ht[1] !== void 0
                                      ? Ht[1]
                                      : { isAuxiliary: !1 }),
                                  R.setPublishState($d),
                                  (this.isPublishing_ = !0),
                                  (q = er()),
                                  Ee.emit(dy, { client: this, stream: R }),
                                  (J = w.isAuxiliary),
                                  (re = J ? Vn : hn),
                                  (pe = R.getScreen()),
                                  this.log_.info(
                                    "publish() => publishing "
                                      .concat(pe ? l0 + " " : "")
                                      .concat(re, " stream ")
                                      .concat(R.getId())
                                  ),
                                  (ye = this.uplinkConnection_),
                                  (Qt.prev = 10),
                                  ye ||
                                    ((ye = new EG({
                                      userId: this.userId_,
                                      tinyId: this.tinyId_,
                                      client: this,
                                      isUplink: !0,
                                      signalChannel: this.signalChannel_,
                                      enableSEI: this.enableSEI_,
                                    })).initialize(),
                                    ye.on(_n.ERROR, function (bn) {
                                      var Yt = bn.getCode();
                                      Yt !== Oe.ICE_TRANSPORT_ERROR &&
                                        (Yt === Oe.UPLINK_RECONNECTION_FAILED &&
                                          Kt.closeUplink(),
                                        Kt.emitter_.emit(An.ERROR, bn));
                                    })),
                                  R.setConnection(ye),
                                  (Qt.next = 15),
                                  ye.publish(R, J)
                                );
                              case 15:
                                this.log_.info(
                                  "local "
                                    .concat(pe ? l0 + " " : "")
                                    .concat(re, " stream is published")
                                ),
                                  (this.isPublishing_ = !1),
                                  J
                                    ? (this.localAuxStream_ = R)
                                    : ((this.localStream_ = R),
                                      this.deviceDetector_ &&
                                        this.deviceDetector_.setLocalStream(
                                          this.localStream_
                                        ),
                                      this.localStream_.getBeautyStatus() &&
                                        this.log_.info(
                                          "beauty stream is published successfully"
                                        )),
                                  R.setPublishState(YM),
                                  R.setClient(this, J),
                                  (this.uplinkConnection_ = ye),
                                  (Ne = er()),
                                  (Ve = Ne - q),
                                  gt.logSuccessEvent({
                                    userId: this.userId_,
                                    eventType: bT,
                                  }),
                                  gt.logSuccessEvent({
                                    userId: this.userId_,
                                    eventType: $M,
                                    delta: Ve,
                                  }),
                                  R.hasAudio() &&
                                    Xr(this.userId_, {
                                      eventId: pI,
                                      eventDesc: "publish audio track",
                                      timestamp: Ur(),
                                      userId: this.userId_,
                                      tinyId: this.tinyId_,
                                    }),
                                  R.hasVideo() &&
                                    Xr(this.userId_, {
                                      eventId: fI,
                                      eventDesc: "publish video track",
                                      timestamp: Ur(),
                                      userId: this.userId_,
                                      tinyId: this.tinyId_,
                                    }),
                                  this.networkQuality_ &&
                                    this.networkQuality_.setUplinkConnection(
                                      this.uplinkConnection_
                                    ),
                                  Ee.emit(CV, {
                                    localStream: R,
                                    isAuxiliary: J,
                                    client: this,
                                  }),
                                  (this.notPublishWithoutH264Supported_ = !1),
                                  R.isAIDenoiser &&
                                    ds.handleFunctionState({
                                      fnName: "AI_DENOISER",
                                    }),
                                  (Qt.next = 42);
                                break;
                              case 33:
                                throw (
                                  ((Qt.prev = 33),
                                  (Qt.t0 = Qt.catch(10)),
                                  Qt.t0 instanceof De &&
                                    Qt.t0.getCode() === Oe.NOT_SUPPORTED_H264 &&
                                    (this.notPublishWithoutH264Supported_ = !0),
                                  R.setPublishState(jT),
                                  ye.close(),
                                  this.log_.error(
                                    "failed to publish stream " + Qt.t0
                                  ),
                                  (this.isPublishing_ = !1),
                                  gt.logFailedEvent({
                                    userId: this.userId_,
                                    eventType: bT,
                                    error: Qt.t0,
                                  }),
                                  Qt.t0)
                                );
                              case 42:
                              case "end":
                                return Qt.stop();
                            }
                        },
                        H,
                        this,
                        [[10, 33]]
                      );
                    })
                  )),
                  function (H) {
                    return $.apply(this, arguments);
                  }),
              },
              {
                key: "unpublish",
                value:
                  ((L = I(
                    m().mark(function H(R) {
                      var w, q;
                      return m().wrap(
                        function (J) {
                          for (;;)
                            switch ((J.prev = J.next)) {
                              case 0:
                                if (this.uplinkConnection_) {
                                  J.next = 2;
                                  break;
                                }
                                return J.abrupt("return");
                              case 2:
                                return (
                                  (w = R === this.localAuxStream_),
                                  (q = R.getScreen()),
                                  this.log_.info(
                                    "unpublish() => unpublishing local "
                                      .concat(q ? l0 + " " : "")
                                      .concat(w ? Vn : hn, " stream")
                                  ),
                                  (J.prev = 5),
                                  (J.next = 8),
                                  this.uplinkConnection_.unpublish(R)
                                );
                              case 8:
                                gt.logSuccessEvent({
                                  userId: this.userId_,
                                  eventType: ST,
                                }),
                                  (J.next = 15);
                                break;
                              case 11:
                                (J.prev = 11),
                                  (J.t0 = J.catch(5)),
                                  this.log_.warn(
                                    "unpublish error ".concat(J.t0)
                                  ),
                                  gt.logFailedEvent({
                                    userId: this.userId_,
                                    eventType: ST,
                                    error: J.t0,
                                  });
                              case 15:
                                R.setClient(null),
                                  R.setConnection(null),
                                  w
                                    ? (this.localAuxStream_ = null)
                                    : ((this.localStream_ = null),
                                      R.hasAudio() &&
                                        Xr(this.userId_, {
                                          eventId: mI,
                                          eventDesc: "unpublish audio track",
                                          timestamp: Ur(),
                                          userId: this.userId_,
                                          tinyId: this.tinyId_,
                                        }),
                                      R.hasVideo() &&
                                        Xr(this.userId_, {
                                          eventId: vI,
                                          eventDesc: "unpublish video track",
                                          timestamp: Ur(),
                                          userId: this.userId_,
                                          tinyId: this.tinyId_,
                                        })),
                                  this.localStream_ ||
                                    this.localAuxStream_ ||
                                    this.closeUplink();
                              case 19:
                              case "end":
                                return J.stop();
                            }
                        },
                        H,
                        this,
                        [[5, 11]]
                      );
                    })
                  )),
                  function (H) {
                    return L.apply(this, arguments);
                  }),
              },
              {
                key: "closeUplink",
                value: function () {
                  this.uplinkConnection_ &&
                    (this.uplinkConnection_.close(),
                    (this.uplinkConnection_ = null),
                    this.networkQuality_ &&
                      this.networkQuality_.setUplinkConnection(null),
                    this.localStream_ &&
                      (this.localStream_.setClient(null),
                      this.localStream_.setConnection(null),
                      (this.localStream_ = null)),
                    this.localAuxStream_ &&
                      (this.localAuxStream_.setClient(null),
                      this.localAuxStream_.setConnection(null),
                      (this.localAuxStream_ = null)),
                    this.deviceDetector_ &&
                      this.deviceDetector_.setLocalStream(null));
                },
              },
              {
                key: "closeDownLink",
                value: function (R) {
                  var w = this.connections_.get(R);
                  w &&
                    (w.getIsReconnecting() && w.stopReconnection(),
                    this.subscriptionManager_ &&
                      this.subscriptionManager_.delete(w.getUserId()),
                    w.close(),
                    this.connections_.delete(R),
                    this.mutedStates_.delete(R));
                },
              },
              {
                key: "subscribe",
                value:
                  ((A = I(
                    m().mark(function H(R, w) {
                      var q, J, re;
                      return m().wrap(
                        function (pe) {
                          for (;;)
                            switch ((pe.prev = pe.next)) {
                              case 0:
                                return (
                                  this.log_.info(
                                    "subscribe() => subscribe to ["
                                      .concat(R.getUserId(), "] ")
                                      .concat(
                                        R.getType(),
                                        " stream with options: "
                                      )
                                      .concat(JSON.stringify(w))
                                  ),
                                  ht(w) && (w = { audio: !0, video: !0 }),
                                  ht(w.audio) && (w.audio = !0),
                                  ht(w.smallVideo)
                                    ? ht(w.video) && (w.video = !0)
                                    : w.smallVideo
                                    ? ht(w.video)
                                      ? ((w.video = !1), (w.smallVideo = !0))
                                      : w.video &&
                                        ((w.video = !0),
                                        delete w.smallVideo,
                                        this.log_.warn(
                                          "options.video and options.smallVideo can't be both true"
                                        ))
                                    : ht(w.video) &&
                                      ((w.video = !0), delete w.smallVideo),
                                  w.video &&
                                    this.changeBigSmallRecords_.delete(
                                      R.getUserId()
                                    ),
                                  (q = R.getConnection()),
                                  w.smallVideo &&
                                    (q.getTrackState().smallVideo ||
                                      (this.setRemoteVideoStreamType(
                                        R,
                                        "small"
                                      ),
                                      (w.video = !0),
                                      delete w.smallVideo)),
                                  (pe.prev = 7),
                                  Ee.emit(my, { client: this, stream: R }),
                                  (pe.next = 11),
                                  q.subscribe(R, w)
                                );
                              case 11:
                                this.subscriptionManager_ &&
                                  this.subscriptionManager_.addSubscriptionRecord(
                                    R.getUserId(),
                                    R,
                                    w
                                  ),
                                  (this.notSubscribeWithoutH264Supported_ = !1),
                                  gt.logSuccessEvent({
                                    userId: this.userId_,
                                    eventType: wT,
                                  }),
                                  q.checkTrackEnded(),
                                  (pe.next = 25);
                                break;
                              case 17:
                                throw (
                                  ((pe.prev = 17),
                                  (pe.t0 = pe.catch(7)),
                                  (J =
                                    pe.t0 instanceof De
                                      ? pe.t0.getCode()
                                      : Oe.UNKNOWN) === Oe.NOT_SUPPORTED_H264 &&
                                    (this.notSubscribeWithoutH264Supported_ =
                                      !0),
                                  (re = new De(
                                    J === Oe.REMOTE_STREAM_NOT_EXIST
                                      ? {
                                          code: Oe.API_CALL_ABORTED,
                                          message: Fe({
                                            key: L0,
                                            data: {
                                              message: pe.t0.message,
                                              stream: R,
                                            },
                                          }),
                                        }
                                      : {
                                          code: J,
                                          message: Fe({
                                            key: j7,
                                            data: {
                                              message: pe.t0.message,
                                              stream: R,
                                            },
                                          }),
                                        }
                                  )).getCode() === Oe.API_CALL_ABORTED
                                    ? this.log_.warn(re)
                                    : this.log_.error(re),
                                  gt.logFailedEvent({
                                    userId: this.userId_,
                                    eventType: wT,
                                    error: re,
                                  }),
                                  re)
                                );
                              case 25:
                              case "end":
                                return pe.stop();
                            }
                        },
                        H,
                        this,
                        [[7, 17]]
                      );
                    })
                  )),
                  function (H, R) {
                    return A.apply(this, arguments);
                  }),
              },
              {
                key: "unsubscribe",
                value:
                  ((E = I(
                    m().mark(function H(R) {
                      var w;
                      return m().wrap(
                        function (q) {
                          for (;;)
                            switch ((q.prev = q.next)) {
                              case 0:
                                return (
                                  this.log_.info(
                                    "unsubscribe() => unsubscribe to ["
                                      .concat(R.getUserId(), "] ")
                                      .concat(R.getType(), " stream")
                                  ),
                                  (q.prev = 1),
                                  (w = R.getConnection()),
                                  (q.next = 5),
                                  w.unsubscribe(R)
                                );
                              case 5:
                                this.subscriptionManager_ &&
                                  this.subscriptionManager_.addUnsubscriptionRecord(
                                    R.getUserId(),
                                    R
                                  ),
                                  Ee.emit(co, { client: this, stream: R }),
                                  gt.logSuccessEvent({
                                    userId: this.userId_,
                                    eventType: kT,
                                  }),
                                  (q.next = 14);
                                break;
                              case 10:
                                throw (
                                  ((q.prev = 10),
                                  (q.t0 = q.catch(1)),
                                  gt.logFailedEvent({
                                    userId: this.userId_,
                                    eventType: kT,
                                    error: q.t0,
                                  }),
                                  q.t0)
                                );
                              case 14:
                              case "end":
                                return q.stop();
                            }
                        },
                        H,
                        this,
                        [[1, 10]]
                      );
                    })
                  )),
                  function (H) {
                    return E.apply(this, arguments);
                  }),
              },
              {
                key: "switchRole",
                value:
                  ((U = I(
                    m().mark(function H(R) {
                      return m().wrap(
                        function (w) {
                          for (;;)
                            switch ((w.prev = w.next)) {
                              case 0:
                                if (this.role_ !== R) {
                                  w.next = 2;
                                  break;
                                }
                                return w.abrupt("return");
                              case 2:
                                return (
                                  R === ou &&
                                    this.uplinkConnection_ &&
                                    this.closeUplink(),
                                  this.log_.info(
                                    "switchRole() => switch role to: " + R
                                  ),
                                  (w.next = 6),
                                  this.doSwitchRole(R)
                                );
                              case 6:
                              case "end":
                                return w.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function (H) {
                    return U.apply(this, arguments);
                  }),
              },
              {
                key: "doSwitchRole",
                value: function (R) {
                  var w,
                    q,
                    J = this,
                    re = {
                      command: P9,
                      data: {
                        role: R === xa ? Vc : v0,
                        privateMapKey: this.privateMapKey_,
                      },
                      responseCommand: Cn.SWITCH_ROLE_RES,
                      retries:
                        ((w = this.schedule_.config) === null ||
                        w === void 0 ||
                        (q = w.retries) === null ||
                        q === void 0
                          ? void 0
                          : q.switchRole) || 1,
                    };
                  return (
                    this.log_.info(
                      "switchRole signal data: " + JSON.stringify(re.data)
                    ),
                    this.signalChannel_
                      .sendWaitForResponseWithRetry(re)
                      .then(function (pe) {
                        var ye = pe.data,
                          Ne = ye.code,
                          Ve = ye.message;
                        if (Ne !== 0)
                          throw new De({
                            code: Oe.SWITCH_ROLE_FAILED,
                            message: Fe({
                              key: W7,
                              data: { errMsg: Ve, errCode: Ne },
                            }),
                          });
                        J.role_ = R;
                      })
                      .catch(function (pe) {
                        throw (
                          (pe instanceof De &&
                            pe.getCode() === Oe.API_CALL_TIMEOUT &&
                            (pe = new De({
                              code: Oe.SWITCH_ROLE_FAILED,
                              message: Fe({ key: H7 }),
                            })),
                          J.log_.error(pe),
                          pe)
                        );
                      })
                  );
                },
              },
              {
                key: "on",
                value: function (R, w, q) {
                  this.emitter_.on(R, w, q);
                },
              },
              {
                key: "off",
                value: function (R, w, q) {
                  R === "*"
                    ? this.emitter_.removeAllListeners()
                    : this.emitter_.off(R, w, q);
                },
              },
              {
                key: "getRemoteMutedState",
                value: function () {
                  var R = this,
                    w = [];
                  return (
                    this.mutedStates_.forEach(function (q, J, re) {
                      var pe = R.connections_.get(J);
                      pe && w.push(p({ userId: pe.getUserId() }, q));
                    }),
                    w
                  );
                },
              },
              {
                key: "getTransportStats",
                value:
                  ((F = I(
                    m().mark(function H() {
                      var R, w, q, J, re, pe, ye;
                      return m().wrap(
                        function (Ne) {
                          for (;;)
                            switch ((Ne.prev = Ne.next)) {
                              case 0:
                                if (
                                  ((R = { rtt: 0, downlinksRTT: {} }),
                                  !this.uplinkConnection_)
                                ) {
                                  Ne.next = 6;
                                  break;
                                }
                                return (
                                  (Ne.next = 4),
                                  this.stats_.getSenderStats(
                                    this.uplinkConnection_
                                  )
                                );
                              case 4:
                                (w = Ne.sent), (R.rtt = w.rtt);
                              case 6:
                                (q = nt(this.connections_)),
                                  (Ne.prev = 7),
                                  q.s();
                              case 9:
                                if ((J = q.n()).done) {
                                  Ne.next = 17;
                                  break;
                                }
                                return (
                                  (re = Et(J.value, 2))[0],
                                  (pe = re[1]),
                                  (Ne.next = 13),
                                  this.stats_.getReceiverStats(pe)
                                );
                              case 13:
                                (ye = Ne.sent),
                                  (R.downlinksRTT[ye.userId] = ye.rtt);
                              case 15:
                                Ne.next = 9;
                                break;
                              case 17:
                                Ne.next = 22;
                                break;
                              case 19:
                                (Ne.prev = 19),
                                  (Ne.t0 = Ne.catch(7)),
                                  q.e(Ne.t0);
                              case 22:
                                return (Ne.prev = 22), q.f(), Ne.finish(22);
                              case 25:
                                return Ne.abrupt("return", R);
                              case 26:
                              case "end":
                                return Ne.stop();
                            }
                        },
                        H,
                        this,
                        [[7, 19, 22, 25]]
                      );
                    })
                  )),
                  function () {
                    return F.apply(this, arguments);
                  }),
              },
              {
                key: "getLocalAudioStats",
                value:
                  ((z = I(
                    m().mark(function H() {
                      var R, w;
                      return m().wrap(
                        function (q) {
                          for (;;)
                            switch ((q.prev = q.next)) {
                              case 0:
                                if (
                                  (((R = {})[this.userId_] = {
                                    bytesSent: 0,
                                    packetsSent: 0,
                                  }),
                                  !this.uplinkConnection_)
                                ) {
                                  q.next = 7;
                                  break;
                                }
                                return (
                                  (q.next = 5),
                                  this.stats_.getSenderStats(
                                    this.uplinkConnection_
                                  )
                                );
                              case 5:
                                (w = q.sent),
                                  (R[this.userId_] = {
                                    bytesSent: w.audio.bytesSent,
                                    packetsSent: w.audio.packetsSent,
                                  });
                              case 7:
                                return q.abrupt("return", R);
                              case 8:
                              case "end":
                                return q.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function () {
                    return z.apply(this, arguments);
                  }),
              },
              {
                key: "getLocalVideoStats",
                value:
                  ((N = I(
                    m().mark(function H() {
                      var R, w;
                      return m().wrap(
                        function (q) {
                          for (;;)
                            switch ((q.prev = q.next)) {
                              case 0:
                                if (
                                  (((R = {})[this.userId_] = {
                                    bytesSent: 0,
                                    packetsSent: 0,
                                    framesEncoded: 0,
                                    framesSent: 0,
                                    frameWidth: 0,
                                    frameHeight: 0,
                                  }),
                                  !this.uplinkConnection_)
                                ) {
                                  q.next = 7;
                                  break;
                                }
                                return (
                                  (q.next = 5),
                                  this.stats_.getSenderStats(
                                    this.uplinkConnection_
                                  )
                                );
                              case 5:
                                (w = q.sent),
                                  (R[this.userId_] = {
                                    bytesSent: w.video.bytesSent,
                                    packetsSent: w.video.packetsSent,
                                    framesEncoded: w.video.framesEncoded,
                                    framesSent: w.video.framesSent,
                                    frameWidth: w.video.frameWidth,
                                    frameHeight: w.video.frameHeight,
                                  });
                              case 7:
                                return q.abrupt("return", R);
                              case 8:
                              case "end":
                                return q.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function () {
                    return N.apply(this, arguments);
                  }),
              },
              {
                key: "getRemoteAudioStats",
                value:
                  ((C = I(
                    m().mark(function H() {
                      var R, w, q, J, re, pe, ye, Ne;
                      return m().wrap(
                        function (Ve) {
                          for (;;)
                            switch ((Ve.prev = Ve.next)) {
                              case 0:
                                (R = {}),
                                  (w = nt(this.connections_)),
                                  (Ve.prev = 2),
                                  w.s();
                              case 4:
                                if ((q = w.n()).done) {
                                  Ve.next = 13;
                                  break;
                                }
                                return (
                                  (J = Et(q.value, 2))[0],
                                  (re = J[1]),
                                  (pe = re.getDelay()),
                                  (ye = pe.audioDelay),
                                  (Ve.next = 9),
                                  this.stats_.getReceiverStats(re)
                                );
                              case 9:
                                (Ne = Ve.sent).hasAudio &&
                                  (R[Ne.userId] = {
                                    bytesReceived: Ne.audio.bytesReceived,
                                    packetsReceived: Ne.audio.packetsReceived,
                                    packetsLost: Ne.audio.packetsLost,
                                    end2EndDelay: ye,
                                  });
                              case 11:
                                Ve.next = 4;
                                break;
                              case 13:
                                Ve.next = 18;
                                break;
                              case 15:
                                (Ve.prev = 15),
                                  (Ve.t0 = Ve.catch(2)),
                                  w.e(Ve.t0);
                              case 18:
                                return (Ve.prev = 18), w.f(), Ve.finish(18);
                              case 21:
                                return Ve.abrupt("return", R);
                              case 22:
                              case "end":
                                return Ve.stop();
                            }
                        },
                        H,
                        this,
                        [[2, 15, 18, 21]]
                      );
                    })
                  )),
                  function () {
                    return C.apply(this, arguments);
                  }),
              },
              {
                key: "getRemoteVideoStats",
                value:
                  ((b = I(
                    m().mark(function H() {
                      var R,
                        w,
                        q,
                        J,
                        re,
                        pe,
                        ye,
                        Ne,
                        Ve,
                        Kt = arguments;
                      return m().wrap(
                        function (Ht) {
                          for (;;)
                            switch ((Ht.prev = Ht.next)) {
                              case 0:
                                (R =
                                  Kt.length > 0 && Kt[0] !== void 0
                                    ? Kt[0]
                                    : Bn),
                                  (w = {}),
                                  (q = nt(this.connections_)),
                                  (Ht.prev = 3),
                                  q.s();
                              case 5:
                                if ((J = q.n()).done) {
                                  Ht.next = 15;
                                  break;
                                }
                                return (
                                  (re = Et(J.value, 2))[0],
                                  (pe = re[1]),
                                  (Ht.next = 9),
                                  this.stats_.getReceiverStats(pe)
                                );
                              case 9:
                                (ye = Ht.sent),
                                  (Ne = pe.getDelay()),
                                  (Ve = Ne.videoDelay),
                                  R === Bn &&
                                    ye.hasVideo &&
                                    (w[ye.userId] = {
                                      bytesReceived: ye.video.bytesReceived,
                                      packetsReceived: ye.video.packetsReceived,
                                      packetsLost: ye.video.packetsLost,
                                      framesDecoded: ye.video.framesDecoded,
                                      frameWidth: ye.video.frameWidth,
                                      frameHeight: ye.video.frameHeight,
                                      end2EndDelay: Ve,
                                    }),
                                  R === ir &&
                                    ye.hasAuxiliary &&
                                    (w[ye.userId] = {
                                      bytesReceived: ye.auxiliary.bytesReceived,
                                      packetsReceived:
                                        ye.auxiliary.packetsReceived,
                                      packetsLost: ye.auxiliary.packetsLost,
                                      framesDecoded: ye.auxiliary.framesDecoded,
                                      frameWidth: ye.auxiliary.frameWidth,
                                      frameHeight: ye.auxiliary.frameHeight,
                                      end2EndDelay: Ve,
                                    });
                              case 13:
                                Ht.next = 5;
                                break;
                              case 15:
                                Ht.next = 20;
                                break;
                              case 17:
                                (Ht.prev = 17),
                                  (Ht.t0 = Ht.catch(3)),
                                  q.e(Ht.t0);
                              case 20:
                                return (Ht.prev = 20), q.f(), Ht.finish(20);
                              case 23:
                                return Ht.abrupt("return", w);
                              case 24:
                              case "end":
                                return Ht.stop();
                            }
                        },
                        H,
                        this,
                        [[3, 17, 20, 23]]
                      );
                    })
                  )),
                  function () {
                    return b.apply(this, arguments);
                  }),
              },
              {
                key: "getSdpSemantics",
                value: function () {
                  return this.sdpSemantics_;
                },
              },
              {
                key: "getIceServers",
                value: function () {
                  return this.turnServers_.length === 0 &&
                    this.schedule_.iceServers
                    ? this.schedule_.iceServers
                    : this.turnServers_;
                },
              },
              {
                key: "getConnections",
                value: function () {
                  return this.connections_;
                },
              },
              {
                key: "getMutedStates",
                value: function () {
                  return this.mutedStates_;
                },
              },
              {
                key: "startHeartbeat",
                value: function () {
                  this.heartbeat_ === -1 &&
                    (this.log_.info("startHeartbeat..."),
                    (this.heartbeat_ = Nn.run(jc, this.doHeartbeat.bind(this), {
                      delay: 2e3,
                    })));
                },
              },
              {
                key: "stopHeartbeat",
                value: function () {
                  this.heartbeat_ !== -1 &&
                    (this.log_.info("stopHeartbeat"),
                    Nn.clearTask(this.heartbeat_),
                    (this.heartbeat_ = -1),
                    (this.lastHeartBeatTime_ = -1));
                },
              },
              {
                key: "doHeartbeat",
                value:
                  ((_ = I(
                    m().mark(function H() {
                      var R, w, q, J, re, pe;
                      return m().wrap(
                        function (ye) {
                          for (;;)
                            switch ((ye.prev = ye.next)) {
                              case 0:
                                return (
                                  (w =
                                    this.badCaseDetector_.getMonitorFreeze()),
                                  (ye.next = 3),
                                  this.stats_.getStatsReport({
                                    uplinkConnection: this.uplinkConnection_,
                                    downlinkConnections: this.connections_,
                                    freezeMap: w,
                                  })
                                );
                              case 3:
                                if (
                                  ((q = ye.sent),
                                  Ee.emit(cy, { client: this, stats: q }),
                                  (R = this.badCaseDetector_) === null ||
                                    R === void 0 ||
                                    R.resetMonitor(),
                                  this.signalChannel_)
                                ) {
                                  ye.next = 8;
                                  break;
                                }
                                return ye.abrupt("return");
                              case 8:
                                (J = this.signalChannel_.isConnected()
                                  ? fF(this.userId_)
                                  : []),
                                  (re = p(
                                    p(
                                      {
                                        str_sdk_version: this.version_,
                                        uint64_datetime:
                                          /* @__PURE__ */ new Date().getTime(),
                                        msg_user_info: {
                                          str_identifier: this.userId_,
                                          uint64_tinyid: this.tinyId_,
                                        },
                                        msg_device_info: {
                                          uint32_terminal_type: 15,
                                          str_device_name: navigator.platform,
                                          str_os_version: "",
                                          uint32_net_type:
                                            T0[this.networkType_],
                                        },
                                      },
                                      q
                                    ),
                                    {},
                                    { msg_event_msg: J }
                                  )),
                                  this.signalChannel_.send(y9, re),
                                  (pe = Date.now()),
                                  this.lastHeartBeatTime_ > 0 &&
                                    pe - this.lastHeartBeatTime_ > 1e4 &&
                                    this.log_.warn(
                                      "heartbeat took ".concat(
                                        pe - this.lastHeartBeatTime_
                                      )
                                    ),
                                  (this.lastHeartBeatTime_ = pe),
                                  !this.isRelayChanged_ &&
                                    this.isRelayMaybeFailed() &&
                                    (this.reJoin(),
                                    (this.isRelayChanged_ = !0));
                              case 15:
                              case "end":
                                return ye.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function () {
                    return _.apply(this, arguments);
                  }),
              },
              {
                key: "onRemoteStreamAdded",
                value: function (R) {
                  var w = R.content,
                    q = w.userId,
                    J = w.tinyId,
                    re = w.audio,
                    pe = w.bigVideo,
                    ye = w.auxVideo,
                    Ne = w.smallVideo;
                  if (q !== null) {
                    this.userMap_.has(q) ||
                      (this.userMap_.set(
                        q,
                        new Cb({ userId: q, tinyId: J, role: xa })
                      ),
                      this.emitter_.emit(An.PEER_JOIN, { userId: q }));
                    var Ve = this.connections_.get(J);
                    if (Ve) {
                      if (Ve.getIsReconnecting()) return;
                      this.log_.warn(
                        "duplicated stream-added observed, rebuild the connection"
                      ),
                        Ve.close(),
                        this.connections_.delete(J);
                    }
                    var Kt = {
                      audio: re,
                      video: pe,
                      auxiliary: ye,
                      smallVideo: Ne,
                    };
                    this.log_.info(
                      "remote peer ["
                        .concat(q, "] published stream. trackState: ")
                        .concat(JSON.stringify(Kt))
                    ),
                      this.createDownlinkConnection({
                        userId: q,
                        tinyId: J,
                        trackState: Kt,
                      });
                  } else this.log_.warn("received null userId on stream added");
                },
              },
              {
                key: "createDownlinkConnection",
                value: function (R) {
                  var w = this,
                    q = R.userId,
                    J = R.tinyId,
                    re = R.trackState,
                    pe = new JG({
                      userId: q,
                      tinyId: J,
                      client: this,
                      isUplink: !1,
                      signalChannel: this.signalChannel_,
                      autoSubscribe: this.autoSubscribe_,
                      trackState: re,
                      enableSEI: this.enableSEI_,
                    });
                  this.connections_.set(J, pe),
                    this.installDownlinkEvents(pe, q, J),
                    this.autoSubscribe_
                      ? (pe.initialize(),
                        pe.connect().catch(function () {
                          !pe.getMainStream() &&
                            pe.hasMainStream() &&
                            w.initRemoteStream({
                              type: Bn,
                              userId: q,
                              downlinkConnection: pe,
                            }),
                            !pe.getAuxStream() &&
                              pe.hasAuxStream() &&
                              w.initRemoteStream({
                                type: ir,
                                userId: q,
                                downlinkConnection: pe,
                              });
                        }))
                      : (pe.hasMainStream() &&
                          this.initRemoteStream({
                            type: Bn,
                            userId: q,
                            downlinkConnection: pe,
                          }),
                        pe.hasAuxStream() &&
                          this.initRemoteStream({
                            type: ir,
                            userId: q,
                            downlinkConnection: pe,
                          }));
                },
              },
              {
                key: "initRemoteStream",
                value: function (R) {
                  var w = R.type,
                    q = R.userId,
                    J = R.downlinkConnection,
                    re = new bb({ type: w, userId: q, client: this });
                  re.setConnection(J),
                    J.setRemoteStream(w === Bn ? Oa : qd, re),
                    re.setIsStreamAddedEventEmitted(!0),
                    Ee.emit($p, { client: this, stream: re }),
                    this.emitter_.emit(An.STREAM_ADDED, { stream: re });
                },
              },
              {
                key: "installDownlinkEvents",
                value: function (R, w, q) {
                  var J = this;
                  R.on(_n.SEI_MESSAGE, function (re) {
                    J.emitter_.emit(An.SEI_MESSAGE, re);
                  }),
                    R.on(_n.STREAM_ADDED, function (re) {
                      re.stream.setIsStreamAddedEventEmitted(!0),
                        Ee.emit($p, { client: J, stream: re.stream }),
                        J.emitter_.emit(An.STREAM_ADDED, { stream: re.stream });
                    }),
                    R.on(_n.STREAM_REMOVED, function (re) {
                      J.changeBigSmallRecords_.delete(re.stream.getUserId()),
                        re.stream.stop(),
                        re.stream.setIsStreamAddedEventEmitted(!1),
                        J.subscriptionManager_ &&
                          J.subscriptionManager_.deleteAutoRecoveryFlag(
                            re.stream.getUserId(),
                            re.stream.getType()
                          ),
                        Ee.emit(pu, { client: J, stream: re.stream }),
                        J.emitter_.emit(An.STREAM_REMOVED, {
                          stream: re.stream,
                        });
                    }),
                    R.on(_n.STREAM_UPDATED, function (re) {
                      Ee.emit(RV, { client: J, stream: re.stream });
                      var pe = R.getMixUserList();
                      pe && (re.mixUserList = pe),
                        J.emitter_.emit(An.STREAM_UPDATED, re);
                    }),
                    R.on(_n.STREAM_SUBSCRIBED, function (re) {
                      Ee.emit(uo, { client: J, stream: re.stream }),
                        J.emitter_.emit(An.STREAM_SUBSCRIBED, {
                          stream: re.stream,
                        });
                    }),
                    R.on(_n.ERROR, function (re) {
                      var pe = re.getCode();
                      pe !== Oe.ICE_TRANSPORT_ERROR &&
                        (pe === Oe.DOWNLINK_RECONNECTION_FAILED &&
                          J.closeDownLink(q),
                        J.emitter_.emit(An.ERROR, re));
                    });
                },
              },
              {
                key: "onPeerJoin",
                value: function (R) {
                  var w = R.data.data,
                    q = w.srcTinyId,
                    J = w.userId,
                    re = w.role;
                  this.userMap_.has(J) ||
                    (this.userMap_.set(
                      J,
                      new Cb({ userId: J, tinyId: q, role: re })
                    ),
                    this.emitter_.emit(An.PEER_JOIN, { userId: J }));
                },
              },
              {
                key: "onPeerLeave",
                value: function (R) {
                  var w = R.data.data,
                    q = w.srcTinyId,
                    J = w.userId,
                    re = w.reason,
                    pe = re === void 0 ? 0 : re;
                  this.log_.info(
                    "peer leave [".concat(J, "]: ").concat(i7[pe])
                  ),
                    this.cleanUser({ userId: J, tinyId: q });
                },
              },
              {
                key: "cleanUser",
                value: function (R) {
                  var w = R.userId,
                    q = R.tinyId;
                  this.userMap_.delete(w),
                    this.closeDownLink(q),
                    this.emitter_.emit(An.PEER_LEAVE, { userId: w });
                },
              },
              {
                key: "onPublishedUserList",
                value: function (R) {
                  var w = this;
                  try {
                    var q = Ze(R.data.userList);
                    R.data.mixRobotList &&
                      q.push.apply(q, Ze(R.data.mixRobotList)),
                      R.data.fakeMixUser && q.push(R.data.fakeMixUser);
                    var J = q.map(function (re) {
                      return re.userId;
                    });
                    this.connections_.forEach(function (re) {
                      var pe = re.getUserId(),
                        ye = re.getTinyId();
                      J.findIndex(function (Ne) {
                        return Ne === pe;
                      }) < 0 &&
                        (w.log_.info(
                          "peer unpublished detected [".concat(pe, "]")
                        ),
                        w.closeDownLink(ye));
                    }),
                      q.forEach(function (re) {
                        var pe = re.userId,
                          ye = re.srcTinyId,
                          Ne = re.flag,
                          Ve = re.mixUserList;
                        if (pe !== w.userId_) {
                          var Kt = !!(1 & Ne),
                            Ht = !!(8 & Ne),
                            Qt = !!(4 & Ne),
                            bn = !!(2 & Ne),
                            Yt = w.connections_.get(ye);
                          if (
                            ((bn || Kt) &&
                              w.checkSubscribeBigSmallVideo(Yt, bn),
                            Yt)
                          ) {
                            var fl = Yt.getTrackState(),
                              Th = fl.audio,
                              Yv = fl.video,
                              Eh = fl.auxiliary,
                              q3 = fl.smallVideo;
                            Hc(Ve) && Yt.setMixUserList(Ve),
                              !Yv &&
                                Kt &&
                                Ee.emit(Ri, {
                                  client: w,
                                  tinyId: ye,
                                  userId: pe,
                                  action: jr.ADD,
                                  kind: wt,
                                }),
                              !Th &&
                                Ht &&
                                Ee.emit(Ri, {
                                  client: w,
                                  tinyId: ye,
                                  userId: pe,
                                  action: jr.ADD,
                                  kind: Ct,
                                }),
                              !Eh &&
                                Qt &&
                                Ee.emit(Ri, {
                                  client: w,
                                  tinyId: ye,
                                  userId: pe,
                                  action: jr.ADD,
                                  kind: Vn,
                                }),
                              !q3 &&
                                bn &&
                                Ee.emit(Ri, {
                                  client: w,
                                  tinyId: ye,
                                  userId: pe,
                                  action: jr.ADD,
                                  kind: Ep,
                                }),
                              Yv &&
                                !Kt &&
                                Ee.emit(Ri, {
                                  client: w,
                                  tinyId: ye,
                                  userId: pe,
                                  action: jr.REMOVE,
                                  kind: wt,
                                }),
                              Th &&
                                !Ht &&
                                Ee.emit(Ri, {
                                  client: w,
                                  tinyId: ye,
                                  userId: pe,
                                  action: jr.REMOVE,
                                  kind: Ct,
                                }),
                              Eh &&
                                !Qt &&
                                Ee.emit(Ri, {
                                  client: w,
                                  tinyId: ye,
                                  userId: pe,
                                  action: jr.REMOVE,
                                  kind: Vn,
                                }),
                              q3 &&
                                !bn &&
                                Ee.emit(Ri, {
                                  client: w,
                                  tinyId: ye,
                                  userId: pe,
                                  action: jr.REMOVE,
                                  kind: Ep,
                                });
                          } else
                            w.log_.info(
                              "peer published detected [".concat(pe, "]")
                            ),
                              w.onRemoteStreamAdded({
                                content: {
                                  audio: Ht,
                                  bigVideo: Kt,
                                  auxVideo: Qt,
                                  smallVideo: bn,
                                  userId: pe,
                                  tinyId: ye,
                                },
                              });
                        }
                      });
                  } catch (re) {}
                },
              },
              {
                key: "onUpdateRemoteMuteStat",
                value: function (R) {
                  var w = this,
                    q = R.data;
                  ((q && q.userList) || []).forEach(function (J) {
                    var re = J.srcTinyId,
                      pe = J.userId;
                    if (re !== 0 && re !== w.tinyId_) {
                      var ye = w.connections_.get(re);
                      if (ye) {
                        var Ne = ye.getMainStream();
                        if (Ne && Ne.getIsStreamAddedEventEmitted()) {
                          var Ve = !!(1 & J.flag),
                            Kt = !!(8 & J.flag),
                            Ht = !!(2 & J.flag),
                            Qt = !!(64 & J.flag),
                            bn = !!(16 & J.flag),
                            Yt = w.mutedStates_.get(re);
                          if (Yt === void 0)
                            return (
                              w.mutedStates_.set(re, {
                                hasAudio: Kt,
                                hasVideo: Ve,
                                hasSmall: Ht,
                                audioMuted: Qt,
                                videoMuted: bn,
                              }),
                              Ve
                                ? bn
                                  ? w.emitter_.emit(An.MUTE_VIDEO, {
                                      userId: pe,
                                    })
                                  : w.emitter_.emit(An.UNMUTE_VIDEO, {
                                      userId: pe,
                                    })
                                : w.emitter_.emit(An.MUTE_VIDEO, {
                                    userId: pe,
                                  }),
                              void (Kt
                                ? Qt
                                  ? w.emitter_.emit(An.MUTE_AUDIO, {
                                      userId: pe,
                                    })
                                  : w.emitter_.emit(An.UNMUTE_AUDIO, {
                                      userId: pe,
                                    })
                                : w.emitter_.emit(An.MUTE_AUDIO, {
                                    userId: pe,
                                  }))
                            );
                          var fl = !Yt.audioMuted && Yt.hasAudio,
                            Th = !Qt && Kt,
                            Yv = !Yt.videoMuted && Yt.hasVideo,
                            Eh = !bn && Ve;
                          w.mutedStates_.set(re, {
                            hasAudio: Kt,
                            hasVideo: Ve,
                            hasSmall: Ht,
                            audioMuted: Qt,
                            videoMuted: bn,
                          }),
                            fl !== Th &&
                              (Th
                                ? w.emitter_.emit(An.UNMUTE_AUDIO, {
                                    userId: pe,
                                  })
                                : w.emitter_.emit(An.MUTE_AUDIO, {
                                    userId: pe,
                                  })),
                            Yv !== Eh &&
                              (Eh
                                ? w.emitter_.emit(An.UNMUTE_VIDEO, {
                                    userId: pe,
                                  })
                                : w.emitter_.emit(An.MUTE_VIDEO, {
                                    userId: pe,
                                  }));
                        }
                      } else w.mutedStates_.delete(re);
                    }
                  });
                },
              },
              {
                key: "getEnv",
                value: function () {
                  return this.env_;
                },
              },
              {
                key: "getSubscriptionManager",
                value: function () {
                  return this.subscriptionManager_;
                },
              },
              {
                key: "startPublishCDNStream",
                value:
                  ((g = I(
                    m().mark(function H() {
                      var R,
                        w = arguments;
                      return m().wrap(
                        function (q) {
                          for (;;)
                            switch ((q.prev = q.next)) {
                              case 0:
                                if (
                                  ((R =
                                    w.length > 0 && w[0] !== void 0
                                      ? w[0]
                                      : {}),
                                  this.log_.info(
                                    "startPublishCDNStream with params: "
                                      .concat(JSON.stringify(R), "; isJoined: ")
                                      .concat(
                                        this.isJoined_,
                                        "; hasMainStream: "
                                      )
                                      .concat(
                                        !!this.localStream_,
                                        "; hasAuxStream: "
                                      )
                                      .concat(!!this.localAuxStream_, ";")
                                  ),
                                  (R.streamType = R.streamType || hn),
                                  R.streamType === Vn && (R.streamType = Ti),
                                  (R.streamId = R.streamId || ""),
                                  !this.isJoined_)
                                ) {
                                  q.next = 10;
                                  break;
                                }
                                if (R.streamType !== hn || this.localStream_) {
                                  q.next = 8;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: aE }),
                                });
                              case 8:
                                if (
                                  R.streamType !== Ti ||
                                  this.localAuxStream_
                                ) {
                                  q.next = 10;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: aE }),
                                });
                              case 10:
                                return (
                                  (q.next = 12),
                                  this.publishCDNManager_.startPublishTencentCDN(
                                    R
                                  )
                                );
                              case 12:
                                if (!(R.appId && R.bizId && R.url)) {
                                  q.next = 15;
                                  break;
                                }
                                return (
                                  (q.next = 15),
                                  this.publishCDNManager_.startPublishGivenCDN(
                                    R
                                  )
                                );
                              case 15:
                              case "end":
                                return q.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function () {
                    return g.apply(this, arguments);
                  }),
              },
              {
                key: "stopPublishCDNStream",
                value:
                  ((v = I(
                    m().mark(function H() {
                      return m().wrap(
                        function (R) {
                          for (;;)
                            switch ((R.prev = R.next)) {
                              case 0:
                                if (
                                  this.publishCDNManager_.getIsPublishingTencentCDN()
                                ) {
                                  R.next = 2;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: q7 }),
                                });
                              case 2:
                                return (
                                  this.log_.info("stopPublishCDNStream"),
                                  (R.next = 5),
                                  this.publishCDNManager_.stopPublishTencentCDN()
                                );
                              case 5:
                                if (
                                  !this.publishCDNManager_.getIsPublishingGivenCDN()
                                ) {
                                  R.next = 8;
                                  break;
                                }
                                return (
                                  (R.next = 8),
                                  this.publishCDNManager_.stopPublishGivenCDN()
                                );
                              case 8:
                              case "end":
                                return R.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function () {
                    return v.apply(this, arguments);
                  }),
              },
              {
                key: "startMixTranscode",
                value:
                  ((h = I(
                    m().mark(function H(R) {
                      return m().wrap(
                        function (w) {
                          for (;;)
                            switch ((w.prev = w.next)) {
                              case 0:
                                if (
                                  this.isJoined_ &&
                                  this.mixTranscodeManager_
                                ) {
                                  w.next = 2;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: J7 }),
                                });
                              case 2:
                                return (
                                  ht(R.mode) && (R.mode = k0.MANUAL),
                                  (w.prev = 3),
                                  this.log_.info(
                                    "startMixTranscode with config ".concat(
                                      JSON.stringify(R)
                                    )
                                  ),
                                  gt.uploadEvent({
                                    log: "mix-transcode-mode:".concat(R.mode),
                                    userId: this.userId_,
                                  }),
                                  (w.next = 8),
                                  this.mixTranscodeManager_.startMixTranscode(R)
                                );
                              case 8:
                                gt.logSuccessEvent({
                                  userId: this.userId_,
                                  eventType: DT,
                                }),
                                  (w.next = 15);
                                break;
                              case 11:
                                throw (
                                  ((w.prev = 11),
                                  (w.t0 = w.catch(3)),
                                  gt.logFailedEvent({
                                    userId: this.userId_,
                                    eventType: DT,
                                    error: w.t0,
                                  }),
                                  w.t0)
                                );
                              case 15:
                              case "end":
                                return w.stop();
                            }
                        },
                        H,
                        this,
                        [[3, 11]]
                      );
                    })
                  )),
                  function (H) {
                    return h.apply(this, arguments);
                  }),
              },
              {
                key: "stopMixTranscode",
                value:
                  ((l = I(
                    m().mark(function H() {
                      return m().wrap(
                        function (R) {
                          for (;;)
                            switch ((R.prev = R.next)) {
                              case 0:
                                if (
                                  this.isJoined_ &&
                                  this.mixTranscodeManager_
                                ) {
                                  R.next = 2;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: $7 }),
                                });
                              case 2:
                                return (
                                  (R.prev = 2),
                                  (R.next = 5),
                                  this.mixTranscodeManager_.stopMixTranscode()
                                );
                              case 5:
                                gt.logSuccessEvent({
                                  userId: this.userId_,
                                  eventType: NT,
                                }),
                                  (R.next = 12);
                                break;
                              case 8:
                                throw (
                                  ((R.prev = 8),
                                  (R.t0 = R.catch(2)),
                                  gt.logFailedEvent({
                                    userId: this.userId_,
                                    eventType: NT,
                                    error: R.t0,
                                  }),
                                  R.t0)
                                );
                              case 12:
                              case "end":
                                return R.stop();
                            }
                        },
                        H,
                        this,
                        [[2, 8]]
                      );
                    })
                  )),
                  function () {
                    return l.apply(this, arguments);
                  }),
              },
              {
                key: "getSystemResult",
                value: function () {
                  return this.checkSystemResult_;
                },
              },
              {
                key: "enableAudioVolumeEvaluation",
                value: function () {
                  var R = this,
                    w =
                      arguments.length > 0 && arguments[0] !== void 0
                        ? arguments[0]
                        : 2e3,
                    q =
                      arguments.length > 1 &&
                      arguments[1] !== void 0 &&
                      arguments[1];
                  if (!Ki(w))
                    throw new De({
                      code: Oe.INVALID_PARAMETER,
                      message: Fe({ key: Y7 }),
                    });
                  if (
                    (this.log_.info(
                      "enableAudioVolumeEvaluation with interval: " + w
                    ),
                    w <= 0)
                  )
                    return (
                      (this.enableAudioVolumeEvaluation_ = !1),
                      Nn.clearTask(this.audioVolumeIntervalId_),
                      void (this.audioVolumeIntervalId_ = null)
                    );
                  (w = Math.floor(Math.max(w, 16))),
                    Ee.emit(fy, { interval: w }),
                    this.audioVolumeIntervalId_ &&
                      (Nn.clearTask(this.audioVolumeIntervalId_),
                      (this.audioVolumeIntervalId_ = null)),
                    (this.enableAudioVolumeEvaluation_ = !0),
                    (this.audioVolumeIntervalId_ = Nn.run(
                      Np,
                      function () {
                        var J = [];
                        if (R.localStream_) {
                          var re = Math.floor(
                            100 * R.localStream_.getAudioLevel()
                          );
                          J.push({
                            userId: R.userId_,
                            audioVolume: re,
                            stream: R.localStream_,
                          });
                        }
                        R.connections_.forEach(function (pe) {
                          var ye = pe.getSubscribedMainStream();
                          if (ye) {
                            var Ne = Math.floor(100 * ye.getAudioLevel());
                            J.push({
                              userId: pe.getUserId(),
                              audioVolume: Ne,
                              stream: ye,
                            });
                          }
                        }),
                          R.emitter_.emit(An.AUDIO_VOLUME, { result: J });
                      },
                      { fps: 1e3 / w, backgroundTask: q }
                    ));
                },
              },
              {
                key: "callExperimentalAPI",
                value: function (R, w) {
                  return (
                    this.log_.info(
                      "callExperimentalAPI("
                        .concat(R, ", ")
                        .concat(JSON.stringify(w), ")")
                    ),
                    eq.call(R, p({ client: this }, w))
                  );
                },
              },
              {
                key: "setProperty",
                value: function (R, w) {
                  var q = "".concat(R, "_");
                  ht(this[q]) || (this[q] = w);
                },
              },
              {
                key: "uploadAllCallStats",
                value: function () {
                  var R = this;
                  this.callDurationCalculator_
                    .getDurationMap()
                    .forEach(function (w, q) {
                      var J = {
                        userId: w.userId,
                        type: w.type,
                        duration: R.callDurationCalculator_.getDuration(q, wt),
                        dataFreeze:
                          R.badCaseDetector_.getDataFreezeDuration(q)
                            .dataFreeze,
                        renderFreeze:
                          R.badCaseDetector_.getRenderFreezeDuration(q)
                            .renderFreeze,
                      };
                      gt.uploadEvent({
                        log: "callStats-" + JSON.stringify(J),
                        userId: R.userId_,
                      });
                    }),
                    this.badCaseDetector_.stop(),
                    this.callDurationCalculator_.reset();
                },
              },
              {
                key: "enableSmallStream",
                value:
                  ((s = I(
                    m().mark(function H() {
                      return m().wrap(
                        function (R) {
                          for (;;)
                            switch ((R.prev = R.next)) {
                              case 0:
                                if (
                                  !this.isPublished() &&
                                  !this.isPublishing_
                                ) {
                                  R.next = 2;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: Z7 }),
                                });
                              case 2:
                                if (!FI()) {
                                  R.next = 7;
                                  break;
                                }
                                this.setIsEnableSmallStream(!0),
                                  this.log_.info(
                                    "SmallStream successfully enabled"
                                  ),
                                  (R.next = 8);
                                break;
                              case 7:
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: X7 }),
                                });
                              case 8:
                              case "end":
                                return R.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function () {
                    return s.apply(this, arguments);
                  }),
              },
              {
                key: "disableSmallStream",
                value:
                  ((c = I(
                    m().mark(function H() {
                      return m().wrap(
                        function (R) {
                          for (;;)
                            switch ((R.prev = R.next)) {
                              case 0:
                                if (
                                  !this.isPublished() &&
                                  !this.isPublishing_
                                ) {
                                  R.next = 2;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: Q7 }),
                                });
                              case 2:
                                this.setIsEnableSmallStream(!1),
                                  this.log_.info(
                                    "SmallStream successfully disabled"
                                  );
                              case 4:
                              case "end":
                                return R.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function () {
                    return c.apply(this, arguments);
                  }),
              },
              {
                key: "setSmallStreamProfile",
                value: function (R) {
                  var w = this;
                  R && R.framerate && (R.frameRate = R.framerate),
                    R.width * R.height > 307200 &&
                      ((R.width = 320),
                      (R.height = 240),
                      this.log_.info(
                        "Small stream resolution is beyond limitation, which is invalid. Reset to 320 * 240"
                      )),
                    Object.keys(this.smallStreamConfig_).forEach(function (Ne) {
                      R[Ne] && (w.smallStreamConfig_[Ne] = R[Ne]);
                    });
                  var q = this.smallStreamConfig_,
                    J = q.width,
                    re = q.height,
                    pe = q.bitrate,
                    ye = q.frameRate;
                  if (
                    (this.log_.info(
                      "setSmallStreamProfile: bitrate="
                        .concat(pe, ", frameRate=")
                        .concat(ye, ", height=")
                        .concat(re, ", width=")
                        .concat(J)
                    ),
                    J < 0 || re < 0 || pe < 0 || ye < 0)
                  )
                    throw new De({
                      code: Oe.INVALID_PARAMETER,
                      message: Fe({ key: eU }),
                    });
                },
              },
              {
                key: "setRemoteVideoStreamType",
                value:
                  ((a = I(
                    m().mark(function H(R, w) {
                      return m().wrap(
                        function (q) {
                          for (;;)
                            switch ((q.prev = q.next)) {
                              case 0:
                                if (R instanceof bb) {
                                  q.next = 2;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_PARAMETER,
                                  message: Fe({ key: tU }),
                                });
                              case 2:
                                if (R.getConnection()) {
                                  q.next = 4;
                                  break;
                                }
                                throw new De({
                                  code: Oe.INVALID_OPERATION,
                                  message: Fe({ key: O0 }),
                                });
                              case 4:
                                if (R.getType() !== ir) {
                                  q.next = 6;
                                  break;
                                }
                                return q.abrupt("return");
                              case 6:
                                (q.t0 = w),
                                  (q.next =
                                    q.t0 === BT || q.t0 === zT ? 9 : 12);
                                break;
                              case 9:
                                return (
                                  (q.next = 11), this.changeVideoType(R, w)
                                );
                              case 11:
                              case 12:
                                return q.abrupt("break", 13);
                              case 13:
                              case "end":
                                return q.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function (H, R) {
                    return a.apply(this, arguments);
                  }),
              },
              {
                key: "changeVideoType",
                value:
                  ((n = I(
                    m().mark(function H(R, w) {
                      var q, J;
                      return m().wrap(
                        function (re) {
                          for (;;)
                            switch ((re.prev = re.next)) {
                              case 0:
                                (q = R.getUserId()),
                                  (J = {
                                    stream: R,
                                    options: {
                                      video: w === BT,
                                      smallVideo: w === zT,
                                    },
                                    isSubscribing: !1,
                                    reSubscribeCount: 10,
                                  }),
                                  this.changeBigSmallRecords_.set(q, J),
                                  this.log_.info(
                                    "set ["
                                      .concat(q, "] ")
                                      .concat(
                                        R.getType(),
                                        " stream video prefer type: "
                                      )
                                      .concat(w)
                                  );
                              case 5:
                              case "end":
                                return re.stop();
                            }
                        },
                        H,
                        this
                      );
                    })
                  )),
                  function (H, R) {
                    return n.apply(this, arguments);
                  }),
              },
              {
                key: "checkSubscribeBigSmallVideo",
                value:
                  ((e = I(
                    m().mark(function H(R, w) {
                      var q, J, re, pe, ye, Ne, Ve, Kt, Ht, Qt, bn;
                      return m().wrap(
                        function (Yt) {
                          for (;;)
                            switch ((Yt.prev = Yt.next)) {
                              case 0:
                                if (
                                  (R != null && R.isBigStreamSubscribed) ||
                                  (R != null && R.isSmallStreamSubscribed)
                                ) {
                                  Yt.next = 2;
                                  break;
                                }
                                return Yt.abrupt("return");
                              case 2:
                                if (
                                  ((q = R.getUserId()),
                                  this.changeBigSmallRecords_.has(q))
                                ) {
                                  Yt.next = 5;
                                  break;
                                }
                                return Yt.abrupt("return");
                              case 5:
                                if (
                                  ((J = this.changeBigSmallRecords_.get(q)),
                                  (re = R.getSubscribeState()),
                                  (pe = re.video),
                                  (ye = re.smallVideo),
                                  (Ne = J.stream),
                                  (Ve = J.options),
                                  (Kt = J.isSubscribing),
                                  (Ht = J.reSubscribeCount),
                                  !(
                                    (Ve.video && pe) ||
                                    (Ve.smallVideo && ye && w)
                                  ))
                                ) {
                                  Yt.next = 10;
                                  break;
                                }
                                return Yt.abrupt("return");
                              case 10:
                                if (
                                  ((Qt = {
                                    video: Ve.video,
                                    smallVideo: Ve.smallVideo,
                                  }),
                                  !(
                                    (w && R.isBigStreamSubscribed) ||
                                    R.isSmallStreamSubscribed
                                  ))
                                ) {
                                  Yt.next = 31;
                                  break;
                                }
                                if (
                                  ((Yt.prev = 12),
                                  !(Ve && Ne && !Kt && Ht >= 1))
                                ) {
                                  Yt.next = 24;
                                  break;
                                }
                                return (
                                  (J.isSubscribing = !0),
                                  (J.reSubscribeCount = Ht - 1),
                                  (bn = Ne.getConnection()),
                                  !w &&
                                    bn.isSmallStreamSubscribed &&
                                    (Qt = { video: !0, smallVideo: !1 }),
                                  (Qt.emitEvent = !1),
                                  (Yt.next = 21),
                                  bn == null ? void 0 : bn.subscribe(Ne, Qt)
                                );
                              case 21:
                                this.log_.info(
                                  "change ["
                                    .concat(q, "] to ")
                                    .concat(
                                      Qt.smallVideo ? "small" : "big",
                                      " video successfully. count "
                                    )
                                    .concat(10 - J.reSubscribeCount, ".")
                                ),
                                  (J.isSubscribing = !1),
                                  (J.reSubscribeCount = 10);
                              case 24:
                                Yt.next = 31;
                                break;
                              case 26:
                                (Yt.prev = 26),
                                  (Yt.t0 = Yt.catch(12)),
                                  this.log_.info(
                                    "change ["
                                      .concat(q, "] to ")
                                      .concat(
                                        Qt.smallVideo ? "small" : "big",
                                        " video failed. count "
                                      )
                                      .concat(10 - J.reSubscribeCount, ".")
                                  ),
                                  (J.isSubscribing = !1),
                                  Ht === 0 &&
                                    this.changeBigSmallRecords_.delete(q);
                              case 31:
                              case "end":
                                return Yt.stop();
                            }
                        },
                        H,
                        this,
                        [[12, 26]]
                      );
                    })
                  )),
                  function (H, R) {
                    return e.apply(this, arguments);
                  }),
              },
              {
                key: "setIsEnableSmallStream",
                value: function (R) {
                  this.isEnableSmallStream_ = R;
                },
              },
              {
                key: "getIsEnableSmallStream",
                value: function () {
                  return this.isEnableSmallStream_;
                },
              },
              {
                key: "smallStreamConfig",
                get: function () {
                  return this.smallStreamConfig_;
                },
              },
              {
                key: "isPublished",
                value: function () {
                  return !!this.localStream_;
                },
              },
              {
                key: "getUplinkConnection",
                value: function () {
                  return this.uplinkConnection_;
                },
              },
              {
                key: "getLocalStream",
                value: function () {
                  return this.localStream_;
                },
              },
              {
                key: "getMode",
                value: function () {
                  return this.mode_;
                },
              },
              {
                key: "getBadCaseDetector",
                value: function () {
                  return this.badCaseDetector_;
                },
              },
              {
                key: "getCallDurationCalculator",
                value: function () {
                  return this.callDurationCalculator_;
                },
              },
              {
                key: "getIsJoined",
                value: function () {
                  return this.isJoined_;
                },
              },
              {
                key: "getAllConnections",
                value: function () {
                  var R = Ze(this.connections_.values());
                  return (
                    this.uplinkConnection_ && R.push(this.uplinkConnection_), R
                  );
                },
              },
              {
                key: "isRelayMaybeFailed",
                value: function () {
                  if (!this.signalChannel_.isOnline) return !1;
                  var R = this.getAllConnections();
                  if (R.length === 0) return !1;
                  for (var w = 0; w < R.length; w++)
                    if (R[w].getReconnectionCount() < 6) return !1;
                  return !0;
                },
              },
              {
                key: "getUseStringRoomId",
                value: function () {
                  return this.useStringRoomId_;
                },
              },
              {
                key: "checkConnectionsToReconnect",
                value: function () {
                  var R = this;
                  this.getAllConnections().forEach(function (w) {
                    if (!w.getIsReconnecting()) {
                      var q = w.getPeerConnection();
                      q &&
                        q.connectionState === g0 &&
                        (R.log_.warn(
                          "[".concat(
                            w.getUserId(),
                            "] pc is closed but not reconnect"
                          )
                        ),
                        w.startReconnection());
                    }
                  });
                },
              },
              {
                key: "getEnableAutoPlayDialog",
                value: function () {
                  return this.enableAutoPlayDialog_;
                },
              },
              {
                key: "sendSEIMessage",
                value: function (R, w) {
                  this.uplinkConnection_.sendSEI(R, w);
                },
              },
              {
                key: "setProxyServer",
                value: function (R) {
                  if (
                    (this.log_.info(
                      "set proxy server: ".concat(JSON.stringify(R))
                    ),
                    vr(R))
                  ) {
                    if (!R.startsWith("wss://"))
                      throw new De({
                        code: Oe.INVALID_PARAMETER,
                        message: Fe({ key: C7 }),
                      });
                    this.proxy_ = R;
                  } else if (ts(R)) {
                    var w = R.websocketProxy,
                      q = R.loggerProxy,
                      J = R.scheduleProxy,
                      re = R.unifiedProxy;
                    w && (this.proxy_ = w),
                      q && p0(q),
                      J && WT(J),
                      re &&
                        ((this.unifiedProxy_ = re),
                        p0("https://".concat(re)),
                        WT(re));
                  }
                },
              },
              {
                key: "setTurnServer",
                value: function (R) {
                  this.log_.info("set turn server: " + JSON.stringify(R));
                  var w = [];
                  Array.isArray(R)
                    ? R.forEach(function (q) {
                        return w.push(NE(q));
                      })
                    : ts(R) && w.push(NE(R)),
                    (this.turnServers_ = w);
                },
              },
              {
                key: "get2k4kFlag",
                value: function () {
                  var R, w;
                  return (
                    ((R = this.schedule_) === null ||
                    R === void 0 ||
                    (w = R.trtcCapability) === null ||
                    w === void 0
                      ? void 0
                      : w["2k4k"]) || 2
                  );
                },
              },
              {
                key: "getWSProxy",
                value: function () {
                  return this.proxy_;
                },
              },
              {
                key: "getUnifiedProxy",
                value: function () {
                  return this.unifiedProxy_;
                },
              },
            ]),
            u
          );
        })()),
        Be(
          Ot.prototype,
          "join",
          [c3, l3, d3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "join"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "leave",
          [h3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "leave"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "getUserList",
          [f3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "getUserList"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "publish",
          [p3, v3, m3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "publish"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "unpublish",
          [g3, _3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "unpublish"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "subscribe",
          [y3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "subscribe"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "unsubscribe",
          [b3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "unsubscribe"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "switchRole",
          [S3, w3, k3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "switchRole"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "startPublishCDNStream",
          [T3, E3],
          Object.getOwnPropertyDescriptor(
            Ot.prototype,
            "startPublishCDNStream"
          ),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "stopPublishCDNStream",
          [I3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "stopPublishCDNStream"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "startMixTranscode",
          [R3, C3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "startMixTranscode"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "stopMixTranscode",
          [A3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "stopMixTranscode"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "enableAudioVolumeEvaluation",
          [x3],
          Object.getOwnPropertyDescriptor(
            Ot.prototype,
            "enableAudioVolumeEvaluation"
          ),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "enableSmallStream",
          [O3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "enableSmallStream"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "disableSmallStream",
          [P3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "disableSmallStream"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "setSmallStreamProfile",
          [D3],
          Object.getOwnPropertyDescriptor(
            Ot.prototype,
            "setSmallStreamProfile"
          ),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "setRemoteVideoStreamType",
          [N3],
          Object.getOwnPropertyDescriptor(
            Ot.prototype,
            "setRemoteVideoStreamType"
          ),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "sendSEIMessage",
          [L3, M3, U3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "sendSEIMessage"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "setProxyServer",
          [V3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "setProxyServer"),
          Ot.prototype
        ),
        Be(
          Ot.prototype,
          "setTurnServer",
          [F3],
          Object.getOwnPropertyDescriptor(Ot.prototype, "setTurnServer"),
          Ot.prototype
        ),
        Ot),
      nq = 0,
      rq = 0,
      iq =
        ((j3 = Gn(Yd)),
        (B3 = Gn(Yd)),
        (z3 = Gn(Yd)),
        (H3 = Nv(Tr.TRTC.createClient)),
        (W3 = Gn(Yd)),
        (G3 = Nv(Tr.TRTC.createStream)),
        (Er = (function () {
          function u() {
            B(this, u),
              (this.name_ = Yd),
              (this.VERSION = ba),
              (this.Logger = {
                loggerManager: ft,
                LogLevel: Ei,
                setLogLevel: function (a) {
                  ft.setLogLevel(a), a <= 1 && SV();
                },
                enableUploadLog: function () {
                  ds.handleFunctionState({ fnName: "TRTC.enableUploadLog" }),
                    ft.enableUploadLog();
                },
                disableUploadLog: function () {
                  ft.warn("disableUploadLog"),
                    ds.handleFunctionState({ fnName: "TRTC.disableUploadLog" }),
                    ft.disableUploadLog();
                },
              });
          }
          var e;
          return (
            oe(u, [
              {
                key: "checkSystemRequirements",
                value:
                  ((e = I(
                    m().mark(function n() {
                      return m().wrap(function (a) {
                        for (;;)
                          switch ((a.prev = a.next)) {
                            case 0:
                              return (a.next = 2), Qy();
                            case 2:
                              return a.abrupt("return", a.sent);
                            case 3:
                            case "end":
                              return a.stop();
                          }
                      }, n);
                    })
                  )),
                  function () {
                    return e.apply(this, arguments);
                  }),
              },
              {
                key: "isScreenShareSupported",
                value: function () {
                  return LI();
                },
              },
              {
                key: "isSmallStreamSupported",
                value: function () {
                  return FI();
                },
              },
              {
                key: "getDevices",
                value: function () {
                  return a1();
                },
              },
              {
                key: "getCameras",
                value: function () {
                  return (function () {
                    return i1.apply(this, arguments);
                  })();
                },
              },
              {
                key: "getMicrophones",
                value: function () {
                  return WI();
                },
              },
              {
                key: "getSpeakers",
                value: function () {
                  return GI();
                },
              },
              {
                key: "createClient",
                value: function (a) {
                  (function () {
                    if (
                      GE &&
                      ((GE = !1),
                      ft.getLogLevel() != $n.Logger.LogLevel.NONE &&
                        (console.info(
                          "******************************************************************************"
                        ),
                        console.info("*   TRTC Web SDK"),
                        console.info(
                          "*   API Document: " + "".concat(C0, "index.html")
                        ),
                        console.info(
                          "*   Changelog: https://cloud.tencent.com/document/product/647/38958"
                        ),
                        console.info(
                          "*   Report issues: https://github.com/LiteAVSDK/TRTC_Web/issues"
                        ),
                        console.info(
                          "******************************************************************************"
                        )),
                      ft.info("TRTC Web SDK Version: 4.15.22"),
                      ft.info("UserAgent: " + navigator.userAgent),
                      ft.info("URL of current page: " + location.href),
                      navigator.userAgentData &&
                        zr(navigator.userAgentData.getHighEntropyValues))
                    )
                      try {
                        navigator.userAgentData
                          .getHighEntropyValues([
                            "architecture",
                            "bitness",
                            "model",
                            "platformVersion",
                            "fullVersionList",
                          ])
                          .then(function (l) {
                            var h = "UAData: "
                              .concat(l.platform, "/")
                              .concat(l.platformVersion);
                            l.architecture &&
                              l.bitness &&
                              (h += " "
                                .concat(l.architecture, "/")
                                .concat(l.bitness)),
                              l.mobile && (h += " mobile"),
                              l.model && (h += " model: ".concat(l.model)),
                              l.fullVersionList &&
                                (h += " ".concat(
                                  l.fullVersionList
                                    .filter(function (v) {
                                      return v.brand !== "Not/A)Brand";
                                    })
                                    .map(function (v) {
                                      return ""
                                        .concat(v.brand, "/")
                                        .concat(v.version);
                                    })
                                    .join(",")
                                )),
                              ft.info(h);
                          })
                          .catch(function () {});
                      } catch (l) {}
                  })();
                  var c = { version: this.VERSION },
                    s = new tq(p(p(p({}, c), a), {}, { seq: ++nq }));
                  return Ee.emit(BE, { client: s }), s;
                },
              },
              {
                key: "createStream",
                value: function (a) {
                  return new TG(p(p({}, a), {}, { seq: ++rq }));
                },
              },
            ]),
            u
          );
        })()),
        Be(
          Er.prototype,
          "checkSystemRequirements",
          [j3],
          Object.getOwnPropertyDescriptor(
            Er.prototype,
            "checkSystemRequirements"
          ),
          Er.prototype
        ),
        Be(
          Er.prototype,
          "isScreenShareSupported",
          [B3],
          Object.getOwnPropertyDescriptor(
            Er.prototype,
            "isScreenShareSupported"
          ),
          Er.prototype
        ),
        Be(
          Er.prototype,
          "isSmallStreamSupported",
          [z3],
          Object.getOwnPropertyDescriptor(
            Er.prototype,
            "isSmallStreamSupported"
          ),
          Er.prototype
        ),
        Be(
          Er.prototype,
          "createClient",
          [H3, W3],
          Object.getOwnPropertyDescriptor(Er.prototype, "createClient"),
          Er.prototype
        ),
        Be(
          Er.prototype,
          "createStream",
          [G3],
          Object.getOwnPropertyDescriptor(Er.prototype, "createStream"),
          Er.prototype
        ),
        Er),
      $n = new iq();
    return $n;
  });
})(MO);
var QY = MO.exports;
const Cu = /* @__PURE__ */ bS(QY);
var z4 =
  typeof globalThis != "undefined"
    ? globalThis
    : typeof window != "undefined"
    ? window
    : typeof global != "undefined"
    ? global
    : typeof self != "undefined"
    ? self
    : {};
function XY(r) {
  return r && r.__esModule && Object.prototype.hasOwnProperty.call(r, "default")
    ? r.default
    : r;
}
var _m = {
    exports: {},
  },
  eZ = _m.exports,
  H4;
function tZ() {
  return (
    H4 ||
      ((H4 = 1),
      (function (r, i) {
        (function (o, p) {
          r.exports = p();
        })(eZ, function () {
          var o =
              typeof z4 != "undefined"
                ? z4
                : typeof self != "undefined"
                ? self
                : typeof window != "undefined"
                ? window
                : {},
            p = [],
            m = [],
            S = typeof Uint8Array != "undefined" ? Uint8Array : Array,
            O = !1;
          function I() {
            O = !0;
            for (
              var t =
                  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                f = 0,
                d = t.length;
              f < d;
              ++f
            )
              (p[f] = t[f]), (m[t.charCodeAt(f)] = f);
            (m["-".charCodeAt(0)] = 62), (m["_".charCodeAt(0)] = 63);
          }
          function B(t, f, d) {
            for (var y, k, T = [], P = f; P < d; P += 3)
              (y = (t[P] << 16) + (t[P + 1] << 8) + t[P + 2]),
                T.push(
                  p[((k = y) >> 18) & 63] +
                    p[(k >> 12) & 63] +
                    p[(k >> 6) & 63] +
                    p[63 & k]
                );
            return T.join("");
          }
          function ee(t) {
            var f;
            O || I();
            for (
              var d = t.length, y = d % 3, k = "", T = [], P = 0, V = d - y;
              P < V;
              P += 16383
            )
              T.push(B(t, P, P + 16383 > V ? V : P + 16383));
            return (
              y === 1
                ? ((f = t[d - 1]),
                  (k += p[f >> 2]),
                  (k += p[(f << 4) & 63]),
                  (k += "=="))
                : y === 2 &&
                  ((f = (t[d - 2] << 8) + t[d - 1]),
                  (k += p[f >> 10]),
                  (k += p[(f >> 4) & 63]),
                  (k += p[(f << 2) & 63]),
                  (k += "=")),
              T.push(k),
              T.join("")
            );
          }
          function oe(t, f, d, y, k) {
            var T,
              P,
              V = 8 * k - y - 1,
              j = (1 << V) - 1,
              x = j >> 1,
              K = -7,
              ae = d ? k - 1 : 0,
              Z = d ? -1 : 1,
              Q = t[f + ae];
            for (
              ae += Z, T = Q & ((1 << -K) - 1), Q >>= -K, K += V;
              K > 0;
              T = 256 * T + t[f + ae], ae += Z, K -= 8
            );
            for (
              P = T & ((1 << -K) - 1), T >>= -K, K += y;
              K > 0;
              P = 256 * P + t[f + ae], ae += Z, K -= 8
            );
            if (T === 0) T = 1 - x;
            else {
              if (T === j) return P ? NaN : (1 / 0) * (Q ? -1 : 1);
              (P += Math.pow(2, y)), (T -= x);
            }
            return (Q ? -1 : 1) * P * Math.pow(2, T - y);
          }
          function ie(t, f, d, y, k, T) {
            var P,
              V,
              j,
              x = 8 * T - k - 1,
              K = (1 << x) - 1,
              ae = K >> 1,
              Z = k === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
              Q = y ? 0 : T - 1,
              ue = y ? 1 : -1,
              we = f < 0 || (f === 0 && 1 / f < 0) ? 1 : 0;
            for (
              f = Math.abs(f),
                isNaN(f) || f === 1 / 0
                  ? ((V = isNaN(f) ? 1 : 0), (P = K))
                  : ((P = Math.floor(Math.log(f) / Math.LN2)),
                    f * (j = Math.pow(2, -P)) < 1 && (P--, (j *= 2)),
                    (f += P + ae >= 1 ? Z / j : Z * Math.pow(2, 1 - ae)) * j >=
                      2 && (P++, (j /= 2)),
                    P + ae >= K
                      ? ((V = 0), (P = K))
                      : P + ae >= 1
                      ? ((V = (f * j - 1) * Math.pow(2, k)), (P += ae))
                      : ((V = f * Math.pow(2, ae - 1) * Math.pow(2, k)),
                        (P = 0)));
              k >= 8;
              t[d + Q] = 255 & V, Q += ue, V /= 256, k -= 8
            );
            for (
              P = (P << k) | V, x += k;
              x > 0;
              t[d + Q] = 255 & P, Q += ue, P /= 256, x -= 8
            );
            t[d + Q - ue] |= 128 * we;
          }
          var be = {}.toString,
            Ie =
              Array.isArray ||
              function (t) {
                return be.call(t) == "[object Array]";
              };
          function Ce() {
            return de.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
          }
          function We(t, f) {
            if (Ce() < f) throw new RangeError("Invalid typed array length");
            return (
              de.TYPED_ARRAY_SUPPORT
                ? ((t = new Uint8Array(f)).__proto__ = de.prototype)
                : (t === null && (t = new de(f)), (t.length = f)),
              t
            );
          }
          function de(t, f, d) {
            if (!(de.TYPED_ARRAY_SUPPORT || this instanceof de))
              return new de(t, f, d);
            if (typeof t == "number") {
              if (typeof f == "string")
                throw new Error(
                  "If encoding is specified then the first argument must be a string"
                );
              return Tt(this, t);
            }
            return _t(this, t, f, d);
          }
          function _t(t, f, d, y) {
            if (typeof f == "number")
              throw new TypeError('"value" argument must not be a number');
            return typeof ArrayBuffer != "undefined" && f instanceof ArrayBuffer
              ? (function (k, T, P, V) {
                  if ((T.byteLength, P < 0 || T.byteLength < P))
                    throw new RangeError("'offset' is out of bounds");
                  if (T.byteLength < P + (V || 0))
                    throw new RangeError("'length' is out of bounds");
                  return (
                    (T =
                      P === void 0 && V === void 0
                        ? new Uint8Array(T)
                        : V === void 0
                        ? new Uint8Array(T, P)
                        : new Uint8Array(T, P, V)),
                    de.TYPED_ARRAY_SUPPORT
                      ? ((k = T).__proto__ = de.prototype)
                      : (k = Jt(k, T)),
                    k
                  );
                })(t, f, d, y)
              : typeof f == "string"
              ? (function (k, T, P) {
                  if (
                    ((typeof P == "string" && P !== "") || (P = "utf8"),
                    !de.isEncoding(P))
                  )
                    throw new TypeError(
                      '"encoding" must be a valid string encoding'
                    );
                  var V = 0 | Ze(T, P),
                    j = (k = We(k, V)).write(T, P);
                  return j !== V && (k = k.slice(0, j)), k;
                })(t, f, d)
              : (function (k, T) {
                  if (Et(T)) {
                    var P = 0 | yt(T.length);
                    return (k = We(k, P)).length === 0 || T.copy(k, 0, 0, P), k;
                  }
                  if (T) {
                    if (
                      (typeof ArrayBuffer != "undefined" &&
                        T.buffer instanceof ArrayBuffer) ||
                      "length" in T
                    )
                      return typeof T.length != "number" || (V = T.length) != V
                        ? We(k, 0)
                        : Jt(k, T);
                    if (T.type === "Buffer" && Ie(T.data)) return Jt(k, T.data);
                  }
                  var V;
                  throw new TypeError(
                    "First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object."
                  );
                })(t, f);
          }
          function It(t) {
            if (typeof t != "number")
              throw new TypeError('"size" argument must be a number');
            if (t < 0)
              throw new RangeError('"size" argument must not be negative');
          }
          function Tt(t, f) {
            if (
              (It(f),
              (t = We(t, f < 0 ? 0 : 0 | yt(f))),
              !de.TYPED_ARRAY_SUPPORT)
            )
              for (var d = 0; d < f; ++d) t[d] = 0;
            return t;
          }
          function Jt(t, f) {
            var d = f.length < 0 ? 0 : 0 | yt(f.length);
            t = We(t, d);
            for (var y = 0; y < d; y += 1) t[y] = 255 & f[y];
            return t;
          }
          function yt(t) {
            if (t >= Ce())
              throw new RangeError(
                "Attempt to allocate Buffer larger than maximum size: 0x" +
                  Ce().toString(16) +
                  " bytes"
              );
            return 0 | t;
          }
          function Et(t) {
            return !(t == null || !t._isBuffer);
          }
          function Ze(t, f) {
            if (Et(t)) return t.length;
            if (
              typeof ArrayBuffer != "undefined" &&
              typeof ArrayBuffer.isView == "function" &&
              (ArrayBuffer.isView(t) || t instanceof ArrayBuffer)
            )
              return t.byteLength;
            typeof t != "string" && (t = "" + t);
            var d = t.length;
            if (d === 0) return 0;
            for (var y = !1; ; )
              switch (f) {
                case "ascii":
                case "latin1":
                case "binary":
                  return d;
                case "utf8":
                case "utf-8":
                case void 0:
                  return Rt(t).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return 2 * d;
                case "hex":
                  return d >>> 1;
                case "base64":
                  return sn(t).length;
                default:
                  if (y) return Rt(t).length;
                  (f = ("" + f).toLowerCase()), (y = !0);
              }
          }
          function Vt(t, f, d) {
            var y = !1;
            if (
              ((f === void 0 || f < 0) && (f = 0),
              f > this.length ||
                ((d === void 0 || d > this.length) && (d = this.length),
                d <= 0) ||
                (d >>>= 0) <= (f >>>= 0))
            )
              return "";
            for (t || (t = "utf8"); ; )
              switch (t) {
                case "hex":
                  return je(this, f, d);
                case "utf8":
                case "utf-8":
                  return $e(this, f, d);
                case "ascii":
                  return Re(this, f, d);
                case "latin1":
                case "binary":
                  return ge(this, f, d);
                case "base64":
                  return Lt(this, f, d);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return ve(this, f, d);
                default:
                  if (y) throw new TypeError("Unknown encoding: " + t);
                  (t = (t + "").toLowerCase()), (y = !0);
              }
          }
          function pt(t, f, d) {
            var y = t[f];
            (t[f] = t[d]), (t[d] = y);
          }
          function nt(t, f, d, y, k) {
            if (t.length === 0) return -1;
            if (
              (typeof d == "string"
                ? ((y = d), (d = 0))
                : d > 2147483647
                ? (d = 2147483647)
                : d < -2147483648 && (d = -2147483648),
              (d = +d),
              isNaN(d) && (d = k ? 0 : t.length - 1),
              d < 0 && (d = t.length + d),
              d >= t.length)
            ) {
              if (k) return -1;
              d = t.length - 1;
            } else if (d < 0) {
              if (!k) return -1;
              d = 0;
            }
            if ((typeof f == "string" && (f = de.from(f, y)), Et(f)))
              return f.length === 0 ? -1 : Be(t, f, d, y, k);
            if (typeof f == "number")
              return (
                (f &= 255),
                de.TYPED_ARRAY_SUPPORT &&
                typeof Uint8Array.prototype.indexOf == "function"
                  ? k
                    ? Uint8Array.prototype.indexOf.call(t, f, d)
                    : Uint8Array.prototype.lastIndexOf.call(t, f, d)
                  : Be(t, [f], d, y, k)
              );
            throw new TypeError("val must be string, number or Buffer");
          }
          function Be(t, f, d, y, k) {
            var T,
              P = 1,
              V = t.length,
              j = f.length;
            if (
              y !== void 0 &&
              ((y = String(y).toLowerCase()) === "ucs2" ||
                y === "ucs-2" ||
                y === "utf16le" ||
                y === "utf-16le")
            ) {
              if (t.length < 2 || f.length < 2) return -1;
              (P = 2), (V /= 2), (j /= 2), (d /= 2);
            }
            function x(Q, ue) {
              return P === 1 ? Q[ue] : Q.readUInt16BE(ue * P);
            }
            if (k) {
              var K = -1;
              for (T = d; T < V; T++)
                if (x(t, T) === x(f, K === -1 ? 0 : T - K)) {
                  if ((K === -1 && (K = T), T - K + 1 === j)) return K * P;
                } else K !== -1 && (T -= T - K), (K = -1);
            } else
              for (d + j > V && (d = V - j), T = d; T >= 0; T--) {
                for (var ae = !0, Z = 0; Z < j; Z++)
                  if (x(t, T + Z) !== x(f, Z)) {
                    ae = !1;
                    break;
                  }
                if (ae) return T;
              }
            return -1;
          }
          function rt(t, f, d, y) {
            d = Number(d) || 0;
            var k = t.length - d;
            y ? (y = Number(y)) > k && (y = k) : (y = k);
            var T = f.length;
            if (T % 2 != 0) throw new TypeError("Invalid hex string");
            y > T / 2 && (y = T / 2);
            for (var P = 0; P < y; ++P) {
              var V = parseInt(f.substr(2 * P, 2), 16);
              if (isNaN(V)) return P;
              t[d + P] = V;
            }
            return P;
          }
          function jt(t, f, d, y) {
            return Sn(Rt(f, t.length - d), t, d, y);
          }
          function ot(t, f, d, y) {
            return Sn(
              (function (k) {
                for (var T = [], P = 0; P < k.length; ++P)
                  T.push(255 & k.charCodeAt(P));
                return T;
              })(f),
              t,
              d,
              y
            );
          }
          function zt(t, f, d, y) {
            return ot(t, f, d, y);
          }
          function st(t, f, d, y) {
            return Sn(sn(f), t, d, y);
          }
          function ct(t, f, d, y) {
            return Sn(
              (function (k, T) {
                for (
                  var P, V, j, x = [], K = 0;
                  K < k.length && !((T -= 2) < 0);
                  ++K
                )
                  (P = k.charCodeAt(K)),
                    (V = P >> 8),
                    (j = P % 256),
                    x.push(j),
                    x.push(V);
                return x;
              })(f, t.length - d),
              t,
              d,
              y
            );
          }
          function Lt(t, f, d) {
            return f === 0 && d === t.length ? ee(t) : ee(t.slice(f, d));
          }
          function $e(t, f, d) {
            d = Math.min(t.length, d);
            for (var y = [], k = f; k < d; ) {
              var T,
                P,
                V,
                j,
                x = t[k],
                K = null,
                ae = x > 239 ? 4 : x > 223 ? 3 : x > 191 ? 2 : 1;
              if (k + ae <= d)
                switch (ae) {
                  case 1:
                    x < 128 && (K = x);
                    break;
                  case 2:
                    (192 & (T = t[k + 1])) == 128 &&
                      (j = ((31 & x) << 6) | (63 & T)) > 127 &&
                      (K = j);
                    break;
                  case 3:
                    (T = t[k + 1]),
                      (P = t[k + 2]),
                      (192 & T) == 128 &&
                        (192 & P) == 128 &&
                        (j = ((15 & x) << 12) | ((63 & T) << 6) | (63 & P)) >
                          2047 &&
                        (j < 55296 || j > 57343) &&
                        (K = j);
                    break;
                  case 4:
                    (T = t[k + 1]),
                      (P = t[k + 2]),
                      (V = t[k + 3]),
                      (192 & T) == 128 &&
                        (192 & P) == 128 &&
                        (192 & V) == 128 &&
                        (j =
                          ((15 & x) << 18) |
                          ((63 & T) << 12) |
                          ((63 & P) << 6) |
                          (63 & V)) > 65535 &&
                        j < 1114112 &&
                        (K = j);
                }
              K === null
                ? ((K = 65533), (ae = 1))
                : K > 65535 &&
                  ((K -= 65536),
                  y.push(((K >>> 10) & 1023) | 55296),
                  (K = 56320 | (1023 & K))),
                y.push(K),
                (k += ae);
            }
            return (function (Z) {
              var Q = Z.length;
              if (Q <= Ke) return String.fromCharCode.apply(String, Z);
              for (var ue = "", we = 0; we < Q; )
                ue += String.fromCharCode.apply(
                  String,
                  Z.slice(we, (we += Ke))
                );
              return ue;
            })(y);
          }
          (de.TYPED_ARRAY_SUPPORT =
            o.TYPED_ARRAY_SUPPORT === void 0 || o.TYPED_ARRAY_SUPPORT),
            (de.poolSize = 8192),
            (de._augment = function (t) {
              return (t.__proto__ = de.prototype), t;
            }),
            (de.from = function (t, f, d) {
              return _t(null, t, f, d);
            }),
            de.TYPED_ARRAY_SUPPORT &&
              ((de.prototype.__proto__ = Uint8Array.prototype),
              (de.__proto__ = Uint8Array)),
            (de.alloc = function (t, f, d) {
              return (function (y, k, T, P) {
                return (
                  It(k),
                  k <= 0
                    ? We(y, k)
                    : T !== void 0
                    ? typeof P == "string"
                      ? We(y, k).fill(T, P)
                      : We(y, k).fill(T)
                    : We(y, k)
                );
              })(null, t, f, d);
            }),
            (de.allocUnsafe = function (t) {
              return Tt(null, t);
            }),
            (de.allocUnsafeSlow = function (t) {
              return Tt(null, t);
            }),
            (de.isBuffer = Mt),
            (de.compare = function (t, f) {
              if (!Et(t) || !Et(f))
                throw new TypeError("Arguments must be Buffers");
              if (t === f) return 0;
              for (
                var d = t.length, y = f.length, k = 0, T = Math.min(d, y);
                k < T;
                ++k
              )
                if (t[k] !== f[k]) {
                  (d = t[k]), (y = f[k]);
                  break;
                }
              return d < y ? -1 : y < d ? 1 : 0;
            }),
            (de.isEncoding = function (t) {
              switch (String(t).toLowerCase()) {
                case "hex":
                case "utf8":
                case "utf-8":
                case "ascii":
                case "latin1":
                case "binary":
                case "base64":
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return !0;
                default:
                  return !1;
              }
            }),
            (de.concat = function (t, f) {
              if (!Ie(t))
                throw new TypeError(
                  '"list" argument must be an Array of Buffers'
                );
              if (t.length === 0) return de.alloc(0);
              var d;
              if (f === void 0)
                for (f = 0, d = 0; d < t.length; ++d) f += t[d].length;
              var y = de.allocUnsafe(f),
                k = 0;
              for (d = 0; d < t.length; ++d) {
                var T = t[d];
                if (!Et(T))
                  throw new TypeError(
                    '"list" argument must be an Array of Buffers'
                  );
                T.copy(y, k), (k += T.length);
              }
              return y;
            }),
            (de.byteLength = Ze),
            (de.prototype._isBuffer = !0),
            (de.prototype.swap16 = function () {
              var t = this.length;
              if (t % 2 != 0)
                throw new RangeError(
                  "Buffer size must be a multiple of 16-bits"
                );
              for (var f = 0; f < t; f += 2) pt(this, f, f + 1);
              return this;
            }),
            (de.prototype.swap32 = function () {
              var t = this.length;
              if (t % 4 != 0)
                throw new RangeError(
                  "Buffer size must be a multiple of 32-bits"
                );
              for (var f = 0; f < t; f += 4)
                pt(this, f, f + 3), pt(this, f + 1, f + 2);
              return this;
            }),
            (de.prototype.swap64 = function () {
              var t = this.length;
              if (t % 8 != 0)
                throw new RangeError(
                  "Buffer size must be a multiple of 64-bits"
                );
              for (var f = 0; f < t; f += 8)
                pt(this, f, f + 7),
                  pt(this, f + 1, f + 6),
                  pt(this, f + 2, f + 5),
                  pt(this, f + 3, f + 4);
              return this;
            }),
            (de.prototype.toString = function () {
              var t = 0 | this.length;
              return t === 0
                ? ""
                : arguments.length === 0
                ? $e(this, 0, t)
                : Vt.apply(this, arguments);
            }),
            (de.prototype.equals = function (t) {
              if (!Et(t)) throw new TypeError("Argument must be a Buffer");
              return this === t || de.compare(this, t) === 0;
            }),
            (de.prototype.inspect = function () {
              var t = "";
              return (
                this.length > 0 &&
                  ((t = this.toString("hex", 0, 50).match(/.{2}/g).join(" ")),
                  this.length > 50 && (t += " ... ")),
                "<Buffer " + t + ">"
              );
            }),
            (de.prototype.compare = function (t, f, d, y, k) {
              if (!Et(t)) throw new TypeError("Argument must be a Buffer");
              if (
                (f === void 0 && (f = 0),
                d === void 0 && (d = t ? t.length : 0),
                y === void 0 && (y = 0),
                k === void 0 && (k = this.length),
                f < 0 || d > t.length || y < 0 || k > this.length)
              )
                throw new RangeError("out of range index");
              if (y >= k && f >= d) return 0;
              if (y >= k) return -1;
              if (f >= d) return 1;
              if (this === t) return 0;
              for (
                var T = (k >>>= 0) - (y >>>= 0),
                  P = (d >>>= 0) - (f >>>= 0),
                  V = Math.min(T, P),
                  j = this.slice(y, k),
                  x = t.slice(f, d),
                  K = 0;
                K < V;
                ++K
              )
                if (j[K] !== x[K]) {
                  (T = j[K]), (P = x[K]);
                  break;
                }
              return T < P ? -1 : P < T ? 1 : 0;
            }),
            (de.prototype.includes = function (t, f, d) {
              return this.indexOf(t, f, d) !== -1;
            }),
            (de.prototype.indexOf = function (t, f, d) {
              return nt(this, t, f, d, !0);
            }),
            (de.prototype.lastIndexOf = function (t, f, d) {
              return nt(this, t, f, d, !1);
            }),
            (de.prototype.write = function (t, f, d, y) {
              if (f === void 0) (y = "utf8"), (d = this.length), (f = 0);
              else if (d === void 0 && typeof f == "string")
                (y = f), (d = this.length), (f = 0);
              else {
                if (!isFinite(f))
                  throw new Error(
                    "Buffer.write(string, encoding, offset[, length]) is no longer supported"
                  );
                (f |= 0),
                  isFinite(d)
                    ? ((d |= 0), y === void 0 && (y = "utf8"))
                    : ((y = d), (d = void 0));
              }
              var k = this.length - f;
              if (
                ((d === void 0 || d > k) && (d = k),
                (t.length > 0 && (d < 0 || f < 0)) || f > this.length)
              )
                throw new RangeError("Attempt to write outside buffer bounds");
              y || (y = "utf8");
              for (var T = !1; ; )
                switch (y) {
                  case "hex":
                    return rt(this, t, f, d);
                  case "utf8":
                  case "utf-8":
                    return jt(this, t, f, d);
                  case "ascii":
                    return ot(this, t, f, d);
                  case "latin1":
                  case "binary":
                    return zt(this, t, f, d);
                  case "base64":
                    return st(this, t, f, d);
                  case "ucs2":
                  case "ucs-2":
                  case "utf16le":
                  case "utf-16le":
                    return ct(this, t, f, d);
                  default:
                    if (T) throw new TypeError("Unknown encoding: " + y);
                    (y = ("" + y).toLowerCase()), (T = !0);
                }
            }),
            (de.prototype.toJSON = function () {
              return {
                type: "Buffer",
                data: Array.prototype.slice.call(this._arr || this, 0),
              };
            });
          var Ke = 4096;
          function Re(t, f, d) {
            var y = "";
            d = Math.min(t.length, d);
            for (var k = f; k < d; ++k) y += String.fromCharCode(127 & t[k]);
            return y;
          }
          function ge(t, f, d) {
            var y = "";
            d = Math.min(t.length, d);
            for (var k = f; k < d; ++k) y += String.fromCharCode(t[k]);
            return y;
          }
          function je(t, f, d) {
            var y = t.length;
            (!f || f < 0) && (f = 0), (!d || d < 0 || d > y) && (d = y);
            for (var k = "", T = f; T < d; ++T) k += dt(t[T]);
            return k;
          }
          function ve(t, f, d) {
            for (var y = t.slice(f, d), k = "", T = 0; T < y.length; T += 2)
              k += String.fromCharCode(y[T] + 256 * y[T + 1]);
            return k;
          }
          function Y(t, f, d) {
            if (t % 1 != 0 || t < 0) throw new RangeError("offset is not uint");
            if (t + f > d)
              throw new RangeError("Trying to access beyond buffer length");
          }
          function ce(t, f, d, y, k, T) {
            if (!Et(t))
              throw new TypeError(
                '"buffer" argument must be a Buffer instance'
              );
            if (f > k || f < T)
              throw new RangeError('"value" argument is out of bounds');
            if (d + y > t.length) throw new RangeError("Index out of range");
          }
          function he(t, f, d, y) {
            f < 0 && (f = 65535 + f + 1);
            for (var k = 0, T = Math.min(t.length - d, 2); k < T; ++k)
              t[d + k] =
                (f & (255 << (8 * (y ? k : 1 - k)))) >>> (8 * (y ? k : 1 - k));
          }
          function me(t, f, d, y) {
            f < 0 && (f = 4294967295 + f + 1);
            for (var k = 0, T = Math.min(t.length - d, 4); k < T; ++k)
              t[d + k] = (f >>> (8 * (y ? k : 3 - k))) & 255;
          }
          function Pe(t, f, d, y, k, T) {
            if (d + y > t.length) throw new RangeError("Index out of range");
            if (d < 0) throw new RangeError("Index out of range");
          }
          function it(t, f, d, y, k) {
            return k || Pe(t, 0, d, 4), ie(t, f, d, y, 23, 4), d + 4;
          }
          function Xe(t, f, d, y, k) {
            return k || Pe(t, 0, d, 8), ie(t, f, d, y, 52, 8), d + 8;
          }
          (de.prototype.slice = function (t, f) {
            var d,
              y = this.length;
            if (
              ((t = ~~t) < 0 ? (t += y) < 0 && (t = 0) : t > y && (t = y),
              (f = f === void 0 ? y : ~~f) < 0
                ? (f += y) < 0 && (f = 0)
                : f > y && (f = y),
              f < t && (f = t),
              de.TYPED_ARRAY_SUPPORT)
            )
              (d = this.subarray(t, f)).__proto__ = de.prototype;
            else {
              var k = f - t;
              d = new de(k, void 0);
              for (var T = 0; T < k; ++T) d[T] = this[T + t];
            }
            return d;
          }),
            (de.prototype.readUIntLE = function (t, f, d) {
              (t |= 0), (f |= 0), d || Y(t, f, this.length);
              for (var y = this[t], k = 1, T = 0; ++T < f && (k *= 256); )
                y += this[t + T] * k;
              return y;
            }),
            (de.prototype.readUIntBE = function (t, f, d) {
              (t |= 0), (f |= 0), d || Y(t, f, this.length);
              for (var y = this[t + --f], k = 1; f > 0 && (k *= 256); )
                y += this[t + --f] * k;
              return y;
            }),
            (de.prototype.readUInt8 = function (t, f) {
              return f || Y(t, 1, this.length), this[t];
            }),
            (de.prototype.readUInt16LE = function (t, f) {
              return f || Y(t, 2, this.length), this[t] | (this[t + 1] << 8);
            }),
            (de.prototype.readUInt16BE = function (t, f) {
              return f || Y(t, 2, this.length), (this[t] << 8) | this[t + 1];
            }),
            (de.prototype.readUInt32LE = function (t, f) {
              return (
                f || Y(t, 4, this.length),
                (this[t] | (this[t + 1] << 8) | (this[t + 2] << 16)) +
                  16777216 * this[t + 3]
              );
            }),
            (de.prototype.readUInt32BE = function (t, f) {
              return (
                f || Y(t, 4, this.length),
                16777216 * this[t] +
                  ((this[t + 1] << 16) | (this[t + 2] << 8) | this[t + 3])
              );
            }),
            (de.prototype.readIntLE = function (t, f, d) {
              (t |= 0), (f |= 0), d || Y(t, f, this.length);
              for (var y = this[t], k = 1, T = 0; ++T < f && (k *= 256); )
                y += this[t + T] * k;
              return y >= (k *= 128) && (y -= Math.pow(2, 8 * f)), y;
            }),
            (de.prototype.readIntBE = function (t, f, d) {
              (t |= 0), (f |= 0), d || Y(t, f, this.length);
              for (var y = f, k = 1, T = this[t + --y]; y > 0 && (k *= 256); )
                T += this[t + --y] * k;
              return T >= (k *= 128) && (T -= Math.pow(2, 8 * f)), T;
            }),
            (de.prototype.readInt8 = function (t, f) {
              return (
                f || Y(t, 1, this.length),
                128 & this[t] ? -1 * (255 - this[t] + 1) : this[t]
              );
            }),
            (de.prototype.readInt16LE = function (t, f) {
              f || Y(t, 2, this.length);
              var d = this[t] | (this[t + 1] << 8);
              return 32768 & d ? 4294901760 | d : d;
            }),
            (de.prototype.readInt16BE = function (t, f) {
              f || Y(t, 2, this.length);
              var d = this[t + 1] | (this[t] << 8);
              return 32768 & d ? 4294901760 | d : d;
            }),
            (de.prototype.readInt32LE = function (t, f) {
              return (
                f || Y(t, 4, this.length),
                this[t] |
                  (this[t + 1] << 8) |
                  (this[t + 2] << 16) |
                  (this[t + 3] << 24)
              );
            }),
            (de.prototype.readInt32BE = function (t, f) {
              return (
                f || Y(t, 4, this.length),
                (this[t] << 24) |
                  (this[t + 1] << 16) |
                  (this[t + 2] << 8) |
                  this[t + 3]
              );
            }),
            (de.prototype.readFloatLE = function (t, f) {
              return f || Y(t, 4, this.length), oe(this, t, !0, 23, 4);
            }),
            (de.prototype.readFloatBE = function (t, f) {
              return f || Y(t, 4, this.length), oe(this, t, !1, 23, 4);
            }),
            (de.prototype.readDoubleLE = function (t, f) {
              return f || Y(t, 8, this.length), oe(this, t, !0, 52, 8);
            }),
            (de.prototype.readDoubleBE = function (t, f) {
              return f || Y(t, 8, this.length), oe(this, t, !1, 52, 8);
            }),
            (de.prototype.writeUIntLE = function (t, f, d, y) {
              (t = +t),
                (f |= 0),
                (d |= 0),
                y || ce(this, t, f, d, Math.pow(2, 8 * d) - 1, 0);
              var k = 1,
                T = 0;
              for (this[f] = 255 & t; ++T < d && (k *= 256); )
                this[f + T] = (t / k) & 255;
              return f + d;
            }),
            (de.prototype.writeUIntBE = function (t, f, d, y) {
              (t = +t),
                (f |= 0),
                (d |= 0),
                y || ce(this, t, f, d, Math.pow(2, 8 * d) - 1, 0);
              var k = d - 1,
                T = 1;
              for (this[f + k] = 255 & t; --k >= 0 && (T *= 256); )
                this[f + k] = (t / T) & 255;
              return f + d;
            }),
            (de.prototype.writeUInt8 = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 1, 255, 0),
                de.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)),
                (this[f] = 255 & t),
                f + 1
              );
            }),
            (de.prototype.writeUInt16LE = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 2, 65535, 0),
                de.TYPED_ARRAY_SUPPORT
                  ? ((this[f] = 255 & t), (this[f + 1] = t >>> 8))
                  : he(this, t, f, !0),
                f + 2
              );
            }),
            (de.prototype.writeUInt16BE = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 2, 65535, 0),
                de.TYPED_ARRAY_SUPPORT
                  ? ((this[f] = t >>> 8), (this[f + 1] = 255 & t))
                  : he(this, t, f, !1),
                f + 2
              );
            }),
            (de.prototype.writeUInt32LE = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 4, 4294967295, 0),
                de.TYPED_ARRAY_SUPPORT
                  ? ((this[f + 3] = t >>> 24),
                    (this[f + 2] = t >>> 16),
                    (this[f + 1] = t >>> 8),
                    (this[f] = 255 & t))
                  : me(this, t, f, !0),
                f + 4
              );
            }),
            (de.prototype.writeUInt32BE = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 4, 4294967295, 0),
                de.TYPED_ARRAY_SUPPORT
                  ? ((this[f] = t >>> 24),
                    (this[f + 1] = t >>> 16),
                    (this[f + 2] = t >>> 8),
                    (this[f + 3] = 255 & t))
                  : me(this, t, f, !1),
                f + 4
              );
            }),
            (de.prototype.writeIntLE = function (t, f, d, y) {
              if (((t = +t), (f |= 0), !y)) {
                var k = Math.pow(2, 8 * d - 1);
                ce(this, t, f, d, k - 1, -k);
              }
              var T = 0,
                P = 1,
                V = 0;
              for (this[f] = 255 & t; ++T < d && (P *= 256); )
                t < 0 && V === 0 && this[f + T - 1] !== 0 && (V = 1),
                  (this[f + T] = (((t / P) >> 0) - V) & 255);
              return f + d;
            }),
            (de.prototype.writeIntBE = function (t, f, d, y) {
              if (((t = +t), (f |= 0), !y)) {
                var k = Math.pow(2, 8 * d - 1);
                ce(this, t, f, d, k - 1, -k);
              }
              var T = d - 1,
                P = 1,
                V = 0;
              for (this[f + T] = 255 & t; --T >= 0 && (P *= 256); )
                t < 0 && V === 0 && this[f + T + 1] !== 0 && (V = 1),
                  (this[f + T] = (((t / P) >> 0) - V) & 255);
              return f + d;
            }),
            (de.prototype.writeInt8 = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 1, 127, -128),
                de.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)),
                t < 0 && (t = 255 + t + 1),
                (this[f] = 255 & t),
                f + 1
              );
            }),
            (de.prototype.writeInt16LE = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 2, 32767, -32768),
                de.TYPED_ARRAY_SUPPORT
                  ? ((this[f] = 255 & t), (this[f + 1] = t >>> 8))
                  : he(this, t, f, !0),
                f + 2
              );
            }),
            (de.prototype.writeInt16BE = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 2, 32767, -32768),
                de.TYPED_ARRAY_SUPPORT
                  ? ((this[f] = t >>> 8), (this[f + 1] = 255 & t))
                  : he(this, t, f, !1),
                f + 2
              );
            }),
            (de.prototype.writeInt32LE = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 4, 2147483647, -2147483648),
                de.TYPED_ARRAY_SUPPORT
                  ? ((this[f] = 255 & t),
                    (this[f + 1] = t >>> 8),
                    (this[f + 2] = t >>> 16),
                    (this[f + 3] = t >>> 24))
                  : me(this, t, f, !0),
                f + 4
              );
            }),
            (de.prototype.writeInt32BE = function (t, f, d) {
              return (
                (t = +t),
                (f |= 0),
                d || ce(this, t, f, 4, 2147483647, -2147483648),
                t < 0 && (t = 4294967295 + t + 1),
                de.TYPED_ARRAY_SUPPORT
                  ? ((this[f] = t >>> 24),
                    (this[f + 1] = t >>> 16),
                    (this[f + 2] = t >>> 8),
                    (this[f + 3] = 255 & t))
                  : me(this, t, f, !1),
                f + 4
              );
            }),
            (de.prototype.writeFloatLE = function (t, f, d) {
              return it(this, t, f, !0, d);
            }),
            (de.prototype.writeFloatBE = function (t, f, d) {
              return it(this, t, f, !1, d);
            }),
            (de.prototype.writeDoubleLE = function (t, f, d) {
              return Xe(this, t, f, !0, d);
            }),
            (de.prototype.writeDoubleBE = function (t, f, d) {
              return Xe(this, t, f, !1, d);
            }),
            (de.prototype.copy = function (t, f, d, y) {
              if (
                (d || (d = 0),
                y || y === 0 || (y = this.length),
                f >= t.length && (f = t.length),
                f || (f = 0),
                y > 0 && y < d && (y = d),
                y === d || t.length === 0 || this.length === 0)
              )
                return 0;
              if (f < 0) throw new RangeError("targetStart out of bounds");
              if (d < 0 || d >= this.length)
                throw new RangeError("sourceStart out of bounds");
              if (y < 0) throw new RangeError("sourceEnd out of bounds");
              y > this.length && (y = this.length),
                t.length - f < y - d && (y = t.length - f + d);
              var k,
                T = y - d;
              if (this === t && d < f && f < y)
                for (k = T - 1; k >= 0; --k) t[k + f] = this[k + d];
              else if (T < 1e3 || !de.TYPED_ARRAY_SUPPORT)
                for (k = 0; k < T; ++k) t[k + f] = this[k + d];
              else Uint8Array.prototype.set.call(t, this.subarray(d, d + T), f);
              return T;
            }),
            (de.prototype.fill = function (t, f, d, y) {
              if (typeof t == "string") {
                if (
                  (typeof f == "string"
                    ? ((y = f), (f = 0), (d = this.length))
                    : typeof d == "string" && ((y = d), (d = this.length)),
                  t.length === 1)
                ) {
                  var k = t.charCodeAt(0);
                  k < 256 && (t = k);
                }
                if (y !== void 0 && typeof y != "string")
                  throw new TypeError("encoding must be a string");
                if (typeof y == "string" && !de.isEncoding(y))
                  throw new TypeError("Unknown encoding: " + y);
              } else typeof t == "number" && (t &= 255);
              if (f < 0 || this.length < f || this.length < d)
                throw new RangeError("Out of range index");
              if (d <= f) return this;
              var T;
              if (
                ((f >>>= 0),
                (d = d === void 0 ? this.length : d >>> 0),
                t || (t = 0),
                typeof t == "number")
              )
                for (T = f; T < d; ++T) this[T] = t;
              else {
                var P = Et(t) ? t : Rt(new de(t, y).toString()),
                  V = P.length;
                for (T = 0; T < d - f; ++T) this[T + f] = P[T % V];
              }
              return this;
            });
          var Pt = /[^+\/0-9A-Za-z-_]/g;
          function dt(t) {
            return t < 16 ? "0" + t.toString(16) : t.toString(16);
          }
          function Rt(t, f) {
            var d;
            f = f || 1 / 0;
            for (var y = t.length, k = null, T = [], P = 0; P < y; ++P) {
              if ((d = t.charCodeAt(P)) > 55295 && d < 57344) {
                if (!k) {
                  if (d > 56319) {
                    (f -= 3) > -1 && T.push(239, 191, 189);
                    continue;
                  }
                  if (P + 1 === y) {
                    (f -= 3) > -1 && T.push(239, 191, 189);
                    continue;
                  }
                  k = d;
                  continue;
                }
                if (d < 56320) {
                  (f -= 3) > -1 && T.push(239, 191, 189), (k = d);
                  continue;
                }
                d = 65536 + (((k - 55296) << 10) | (d - 56320));
              } else k && (f -= 3) > -1 && T.push(239, 191, 189);
              if (((k = null), d < 128)) {
                if ((f -= 1) < 0) break;
                T.push(d);
              } else if (d < 2048) {
                if ((f -= 2) < 0) break;
                T.push((d >> 6) | 192, (63 & d) | 128);
              } else if (d < 65536) {
                if ((f -= 3) < 0) break;
                T.push((d >> 12) | 224, ((d >> 6) & 63) | 128, (63 & d) | 128);
              } else {
                if (!(d < 1114112)) throw new Error("Invalid code point");
                if ((f -= 4) < 0) break;
                T.push(
                  (d >> 18) | 240,
                  ((d >> 12) & 63) | 128,
                  ((d >> 6) & 63) | 128,
                  (63 & d) | 128
                );
              }
            }
            return T;
          }
          function sn(t) {
            return (function (f) {
              var d, y, k, T, P, V;
              O || I();
              var j = f.length;
              if (j % 4 > 0)
                throw new Error(
                  "Invalid string. Length must be a multiple of 4"
                );
              (P = f[j - 2] === "=" ? 2 : f[j - 1] === "=" ? 1 : 0),
                (V = new S((3 * j) / 4 - P)),
                (k = P > 0 ? j - 4 : j);
              var x = 0;
              for (d = 0, y = 0; d < k; d += 4, y += 3)
                (T =
                  (m[f.charCodeAt(d)] << 18) |
                  (m[f.charCodeAt(d + 1)] << 12) |
                  (m[f.charCodeAt(d + 2)] << 6) |
                  m[f.charCodeAt(d + 3)]),
                  (V[x++] = (T >> 16) & 255),
                  (V[x++] = (T >> 8) & 255),
                  (V[x++] = 255 & T);
              return (
                P === 2
                  ? ((T =
                      (m[f.charCodeAt(d)] << 2) |
                      (m[f.charCodeAt(d + 1)] >> 4)),
                    (V[x++] = 255 & T))
                  : P === 1 &&
                    ((T =
                      (m[f.charCodeAt(d)] << 10) |
                      (m[f.charCodeAt(d + 1)] << 4) |
                      (m[f.charCodeAt(d + 2)] >> 2)),
                    (V[x++] = (T >> 8) & 255),
                    (V[x++] = 255 & T)),
                V
              );
            })(
              (function (f) {
                if (
                  (f = (function (d) {
                    return d.trim ? d.trim() : d.replace(/^\s+|\s+$/g, "");
                  })(f).replace(Pt, "")).length < 2
                )
                  return "";
                for (; f.length % 4 != 0; ) f += "=";
                return f;
              })(t)
            );
          }
          function Sn(t, f, d, y) {
            for (var k = 0; k < y && !(k + d >= f.length || k >= t.length); ++k)
              f[k + d] = t[k];
            return k;
          }
          function Mt(t) {
            return (
              t != null &&
              (!!t._isBuffer ||
                Bt(t) ||
                (function (f) {
                  return (
                    typeof f.readFloatLE == "function" &&
                    typeof f.slice == "function" &&
                    Bt(f.slice(0, 0))
                  );
                })(t))
            );
          }
          function Bt(t) {
            return (
              !!t.constructor &&
              typeof t.constructor.isBuffer == "function" &&
              t.constructor.isBuffer(t)
            );
          }
          function at(t, f) {
            return (
              t(
                (f = {
                  exports: {},
                }),
                f.exports
              ),
              f.exports
            );
          }
          var He = at(function (t, f) {
              var d;
              t.exports =
                ((d =
                  d ||
                  (function (y, k) {
                    var T =
                        Object.create ||
                        (function () {
                          function se() {}
                          return function (le) {
                            var fe;
                            return (
                              (se.prototype = le),
                              (fe = new se()),
                              (se.prototype = null),
                              fe
                            );
                          };
                        })(),
                      P = {},
                      V = (P.lib = {}),
                      j = (V.Base = {
                        extend: function (le) {
                          var fe = T(this);
                          return (
                            le && fe.mixIn(le),
                            (fe.hasOwnProperty("init") &&
                              this.init !== fe.init) ||
                              (fe.init = function () {
                                fe.$super.init.apply(this, arguments);
                              }),
                            (fe.init.prototype = fe),
                            (fe.$super = this),
                            fe
                          );
                        },
                        create: function () {
                          var le = this.extend();
                          return le.init.apply(le, arguments), le;
                        },
                        init: function () {},
                        mixIn: function (le) {
                          for (var fe in le)
                            le.hasOwnProperty(fe) && (this[fe] = le[fe]);
                          le.hasOwnProperty("toString") &&
                            (this.toString = le.toString);
                        },
                        clone: function () {
                          return this.init.prototype.extend(this);
                        },
                      }),
                      x = (V.WordArray = j.extend({
                        init: function (le, fe) {
                          (le = this.words = le || []),
                            (this.sigBytes = fe != null ? fe : 4 * le.length);
                        },
                        toString: function (le) {
                          return (le || ae).stringify(this);
                        },
                        concat: function (le) {
                          var fe = this.words,
                            _e = le.words,
                            Se = this.sigBytes,
                            ke = le.sigBytes;
                          if ((this.clamp(), Se % 4))
                            for (var Ae = 0; Ae < ke; Ae++) {
                              var Me =
                                (_e[Ae >>> 2] >>> (24 - (Ae % 4) * 8)) & 255;
                              fe[(Se + Ae) >>> 2] |=
                                Me << (24 - ((Se + Ae) % 4) * 8);
                            }
                          else
                            for (var Ae = 0; Ae < ke; Ae += 4)
                              fe[(Se + Ae) >>> 2] = _e[Ae >>> 2];
                          return (this.sigBytes += ke), this;
                        },
                        clamp: function () {
                          var le = this.words,
                            fe = this.sigBytes;
                          (le[fe >>> 2] &= 4294967295 << (32 - (fe % 4) * 8)),
                            (le.length = y.ceil(fe / 4));
                        },
                        clone: function () {
                          var le = j.clone.call(this);
                          return (le.words = this.words.slice(0)), le;
                        },
                        random: function (le) {
                          for (
                            var fe,
                              _e = [],
                              Se = function (Ue) {
                                var Ue = Ue,
                                  Te = 987654321,
                                  xe = 4294967295;
                                return function () {
                                  var qe =
                                    (((Te =
                                      (36969 * (65535 & Te) + (Te >> 16)) &
                                      xe) <<
                                      16) +
                                      (Ue =
                                        (18e3 * (65535 & Ue) + (Ue >> 16)) &
                                        xe)) &
                                    xe;
                                  return (
                                    (qe /= 4294967296),
                                    (qe += 0.5) * (y.random() > 0.5 ? 1 : -1)
                                  );
                                };
                              },
                              ke = 0;
                            ke < le;
                            ke += 4
                          ) {
                            var Ae = Se(4294967296 * (fe || y.random()));
                            (fe = 987654071 * Ae()),
                              _e.push((4294967296 * Ae()) | 0);
                          }
                          return new x.init(_e, le);
                        },
                      })),
                      K = (P.enc = {}),
                      ae = (K.Hex = {
                        stringify: function (le) {
                          for (
                            var fe = le.words,
                              _e = le.sigBytes,
                              Se = [],
                              ke = 0;
                            ke < _e;
                            ke++
                          ) {
                            var Ae =
                              (fe[ke >>> 2] >>> (24 - (ke % 4) * 8)) & 255;
                            Se.push((Ae >>> 4).toString(16)),
                              Se.push((15 & Ae).toString(16));
                          }
                          return Se.join("");
                        },
                        parse: function (le) {
                          for (
                            var fe = le.length, _e = [], Se = 0;
                            Se < fe;
                            Se += 2
                          )
                            _e[Se >>> 3] |=
                              parseInt(le.substr(Se, 2), 16) <<
                              (24 - (Se % 8) * 4);
                          return new x.init(_e, fe / 2);
                        },
                      }),
                      Z = (K.Latin1 = {
                        stringify: function (le) {
                          for (
                            var fe = le.words,
                              _e = le.sigBytes,
                              Se = [],
                              ke = 0;
                            ke < _e;
                            ke++
                          ) {
                            var Ae =
                              (fe[ke >>> 2] >>> (24 - (ke % 4) * 8)) & 255;
                            Se.push(String.fromCharCode(Ae));
                          }
                          return Se.join("");
                        },
                        parse: function (le) {
                          for (
                            var fe = le.length, _e = [], Se = 0;
                            Se < fe;
                            Se++
                          )
                            _e[Se >>> 2] |=
                              (255 & le.charCodeAt(Se)) << (24 - (Se % 4) * 8);
                          return new x.init(_e, fe);
                        },
                      }),
                      Q = (K.Utf8 = {
                        stringify: function (le) {
                          try {
                            return decodeURIComponent(escape(Z.stringify(le)));
                          } catch (fe) {
                            throw new Error("Malformed UTF-8 data");
                          }
                        },
                        parse: function (le) {
                          return Z.parse(unescape(encodeURIComponent(le)));
                        },
                      }),
                      ue = (V.BufferedBlockAlgorithm = j.extend({
                        reset: function () {
                          (this._data = new x.init()), (this._nDataBytes = 0);
                        },
                        _append: function (le) {
                          typeof le == "string" && (le = Q.parse(le)),
                            this._data.concat(le),
                            (this._nDataBytes += le.sigBytes);
                        },
                        _process: function (le) {
                          var fe = this._data,
                            _e = fe.words,
                            Se = fe.sigBytes,
                            ke = this.blockSize,
                            Ae = 4 * ke,
                            Me = Se / Ae,
                            Le =
                              (Me = le
                                ? y.ceil(Me)
                                : y.max((0 | Me) - this._minBufferSize, 0)) *
                              ke,
                            Ue = y.min(4 * Le, Se);
                          if (Le) {
                            for (var Te = 0; Te < Le; Te += ke)
                              this._doProcessBlock(_e, Te);
                            var xe = _e.splice(0, Le);
                            fe.sigBytes -= Ue;
                          }
                          return new x.init(xe, Ue);
                        },
                        clone: function () {
                          var le = j.clone.call(this);
                          return (le._data = this._data.clone()), le;
                        },
                        _minBufferSize: 0,
                      })),
                      we =
                        ((V.Hasher = ue.extend({
                          cfg: j.extend(),
                          init: function (le) {
                            (this.cfg = this.cfg.extend(le)), this.reset();
                          },
                          reset: function () {
                            ue.reset.call(this), this._doReset();
                          },
                          update: function (le) {
                            return this._append(le), this._process(), this;
                          },
                          finalize: function (le) {
                            le && this._append(le);
                            var fe = this._doFinalize();
                            return fe;
                          },
                          blockSize: 16,
                          _createHelper: function (le) {
                            return function (fe, _e) {
                              return new le.init(_e).finalize(fe);
                            };
                          },
                          _createHmacHelper: function (le) {
                            return function (fe, _e) {
                              return new we.HMAC.init(le, _e).finalize(fe);
                            };
                          },
                        })),
                        (P.algo = {}));
                    return P;
                  })(Math)),
                d);
            }),
            un =
              (at(function (t, f) {
                var d, y, k, T, P, V;
                t.exports =
                  ((k = (y = d = He).lib),
                  (T = k.Base),
                  (P = k.WordArray),
                  ((V = y.x64 = {}).Word = T.extend({
                    init: function (x, K) {
                      (this.high = x), (this.low = K);
                    },
                  })),
                  (V.WordArray = T.extend({
                    init: function (x, K) {
                      (x = this.words = x || []),
                        (this.sigBytes = K != null ? K : 8 * x.length);
                    },
                    toX32: function () {
                      for (
                        var x = this.words, K = x.length, ae = [], Z = 0;
                        Z < K;
                        Z++
                      ) {
                        var Q = x[Z];
                        ae.push(Q.high), ae.push(Q.low);
                      }
                      return P.create(ae, this.sigBytes);
                    },
                    clone: function () {
                      for (
                        var x = T.clone.call(this),
                          K = (x.words = this.words.slice(0)),
                          ae = K.length,
                          Z = 0;
                        Z < ae;
                        Z++
                      )
                        K[Z] = K[Z].clone();
                      return x;
                    },
                  })),
                  d);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function () {
                    if (typeof ArrayBuffer == "function") {
                      var y = d.lib.WordArray,
                        k = y.init;
                      (y.init = function (T) {
                        if (
                          (T instanceof ArrayBuffer && (T = new Uint8Array(T)),
                          (T instanceof Int8Array ||
                            (typeof Uint8ClampedArray != "undefined" &&
                              T instanceof Uint8ClampedArray) ||
                            T instanceof Int16Array ||
                            T instanceof Uint16Array ||
                            T instanceof Int32Array ||
                            T instanceof Uint32Array ||
                            T instanceof Float32Array ||
                            T instanceof Float64Array) &&
                            (T = new Uint8Array(
                              T.buffer,
                              T.byteOffset,
                              T.byteLength
                            )),
                          T instanceof Uint8Array)
                        ) {
                          for (var P = T.byteLength, V = [], j = 0; j < P; j++)
                            V[j >>> 2] |= T[j] << (24 - (j % 4) * 8);
                          k.call(this, V, P);
                        } else k.apply(this, arguments);
                      }).prototype = y;
                    }
                  })(),
                  d.lib.WordArray);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function () {
                    var y = d,
                      k = y.lib.WordArray,
                      T = y.enc;
                    function P(V) {
                      return ((V << 8) & 4278255360) | ((V >>> 8) & 16711935);
                    }
                    (T.Utf16 = T.Utf16BE =
                      {
                        stringify: function (j) {
                          for (
                            var x = j.words, K = j.sigBytes, ae = [], Z = 0;
                            Z < K;
                            Z += 2
                          ) {
                            var Q = (x[Z >>> 2] >>> (16 - (Z % 4) * 8)) & 65535;
                            ae.push(String.fromCharCode(Q));
                          }
                          return ae.join("");
                        },
                        parse: function (j) {
                          for (var x = j.length, K = [], ae = 0; ae < x; ae++)
                            K[ae >>> 1] |=
                              j.charCodeAt(ae) << (16 - (ae % 2) * 16);
                          return k.create(K, 2 * x);
                        },
                      }),
                      (T.Utf16LE = {
                        stringify: function (j) {
                          for (
                            var x = j.words, K = j.sigBytes, ae = [], Z = 0;
                            Z < K;
                            Z += 2
                          ) {
                            var Q = P(
                              (x[Z >>> 2] >>> (16 - (Z % 4) * 8)) & 65535
                            );
                            ae.push(String.fromCharCode(Q));
                          }
                          return ae.join("");
                        },
                        parse: function (j) {
                          for (var x = j.length, K = [], ae = 0; ae < x; ae++)
                            K[ae >>> 1] |= P(
                              j.charCodeAt(ae) << (16 - (ae % 2) * 16)
                            );
                          return k.create(K, 2 * x);
                        },
                      });
                  })(),
                  d.enc.Utf16);
              }),
              at(function (t, f) {
                var d, y, k;
                t.exports =
                  ((k = (y = d = He).lib.WordArray),
                  (y.enc.Base64 = {
                    stringify: function (P) {
                      var V = P.words,
                        j = P.sigBytes,
                        x = this._map;
                      P.clamp();
                      for (var K = [], ae = 0; ae < j; ae += 3)
                        for (
                          var Z =
                              (((V[ae >>> 2] >>> (24 - (ae % 4) * 8)) & 255) <<
                                16) |
                              (((V[(ae + 1) >>> 2] >>>
                                (24 - ((ae + 1) % 4) * 8)) &
                                255) <<
                                8) |
                              ((V[(ae + 2) >>> 2] >>>
                                (24 - ((ae + 2) % 4) * 8)) &
                                255),
                            Q = 0;
                          Q < 4 && ae + 0.75 * Q < j;
                          Q++
                        )
                          K.push(x.charAt((Z >>> (6 * (3 - Q))) & 63));
                      var ue = x.charAt(64);
                      if (ue) for (; K.length % 4; ) K.push(ue);
                      return K.join("");
                    },
                    parse: function (P) {
                      var V = P.length,
                        j = this._map,
                        x = this._reverseMap;
                      if (!x) {
                        x = this._reverseMap = [];
                        for (var K = 0; K < j.length; K++)
                          x[j.charCodeAt(K)] = K;
                      }
                      var ae = j.charAt(64);
                      if (ae) {
                        var Z = P.indexOf(ae);
                        Z !== -1 && (V = Z);
                      }
                      return (function (Q, ue, we) {
                        for (var se = [], le = 0, fe = 0; fe < ue; fe++)
                          if (fe % 4) {
                            var _e = we[Q.charCodeAt(fe - 1)] << ((fe % 4) * 2),
                              Se = we[Q.charCodeAt(fe)] >>> (6 - (fe % 4) * 2);
                            (se[le >>> 2] |= (_e | Se) << (24 - (le % 4) * 8)),
                              le++;
                          }
                        return k.create(se, le);
                      })(P, V, x);
                    },
                    _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                  }),
                  d.enc.Base64);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function (y) {
                    var k = d,
                      T = k.lib,
                      P = T.WordArray,
                      V = T.Hasher,
                      j = k.algo,
                      x = [];
                    (function () {
                      for (var we = 0; we < 64; we++)
                        x[we] = (4294967296 * y.abs(y.sin(we + 1))) | 0;
                    })();
                    var K = (j.MD5 = V.extend({
                      _doReset: function () {
                        this._hash = new P.init([
                          1732584193, 4023233417, 2562383102, 271733878,
                        ]);
                      },
                      _doProcessBlock: function (se, le) {
                        for (var fe = 0; fe < 16; fe++) {
                          var _e = le + fe,
                            Se = se[_e];
                          se[_e] =
                            (16711935 & ((Se << 8) | (Se >>> 24))) |
                            (4278255360 & ((Se << 24) | (Se >>> 8)));
                        }
                        var ke = this._hash.words,
                          Ae = se[le + 0],
                          Me = se[le + 1],
                          Le = se[le + 2],
                          Ue = se[le + 3],
                          Te = se[le + 4],
                          xe = se[le + 5],
                          qe = se[le + 6],
                          ut = se[le + 7],
                          Ge = se[le + 8],
                          mt = se[le + 9],
                          kt = se[le + 10],
                          qt = se[le + 11],
                          xt = se[le + 12],
                          Rn = se[le + 13],
                          fn = se[le + 14],
                          Qn = se[le + 15],
                          Qe = ke[0],
                          tt = ke[1],
                          Ye = ke[2],
                          et = ke[3];
                        (Qe = ae(Qe, tt, Ye, et, Ae, 7, x[0])),
                          (et = ae(et, Qe, tt, Ye, Me, 12, x[1])),
                          (Ye = ae(Ye, et, Qe, tt, Le, 17, x[2])),
                          (tt = ae(tt, Ye, et, Qe, Ue, 22, x[3])),
                          (Qe = ae(Qe, tt, Ye, et, Te, 7, x[4])),
                          (et = ae(et, Qe, tt, Ye, xe, 12, x[5])),
                          (Ye = ae(Ye, et, Qe, tt, qe, 17, x[6])),
                          (tt = ae(tt, Ye, et, Qe, ut, 22, x[7])),
                          (Qe = ae(Qe, tt, Ye, et, Ge, 7, x[8])),
                          (et = ae(et, Qe, tt, Ye, mt, 12, x[9])),
                          (Ye = ae(Ye, et, Qe, tt, kt, 17, x[10])),
                          (tt = ae(tt, Ye, et, Qe, qt, 22, x[11])),
                          (Qe = ae(Qe, tt, Ye, et, xt, 7, x[12])),
                          (et = ae(et, Qe, tt, Ye, Rn, 12, x[13])),
                          (Ye = ae(Ye, et, Qe, tt, fn, 17, x[14])),
                          (Qe = Z(
                            Qe,
                            (tt = ae(tt, Ye, et, Qe, Qn, 22, x[15])),
                            Ye,
                            et,
                            Me,
                            5,
                            x[16]
                          )),
                          (et = Z(et, Qe, tt, Ye, qe, 9, x[17])),
                          (Ye = Z(Ye, et, Qe, tt, qt, 14, x[18])),
                          (tt = Z(tt, Ye, et, Qe, Ae, 20, x[19])),
                          (Qe = Z(Qe, tt, Ye, et, xe, 5, x[20])),
                          (et = Z(et, Qe, tt, Ye, kt, 9, x[21])),
                          (Ye = Z(Ye, et, Qe, tt, Qn, 14, x[22])),
                          (tt = Z(tt, Ye, et, Qe, Te, 20, x[23])),
                          (Qe = Z(Qe, tt, Ye, et, mt, 5, x[24])),
                          (et = Z(et, Qe, tt, Ye, fn, 9, x[25])),
                          (Ye = Z(Ye, et, Qe, tt, Ue, 14, x[26])),
                          (tt = Z(tt, Ye, et, Qe, Ge, 20, x[27])),
                          (Qe = Z(Qe, tt, Ye, et, Rn, 5, x[28])),
                          (et = Z(et, Qe, tt, Ye, Le, 9, x[29])),
                          (Ye = Z(Ye, et, Qe, tt, ut, 14, x[30])),
                          (Qe = Q(
                            Qe,
                            (tt = Z(tt, Ye, et, Qe, xt, 20, x[31])),
                            Ye,
                            et,
                            xe,
                            4,
                            x[32]
                          )),
                          (et = Q(et, Qe, tt, Ye, Ge, 11, x[33])),
                          (Ye = Q(Ye, et, Qe, tt, qt, 16, x[34])),
                          (tt = Q(tt, Ye, et, Qe, fn, 23, x[35])),
                          (Qe = Q(Qe, tt, Ye, et, Me, 4, x[36])),
                          (et = Q(et, Qe, tt, Ye, Te, 11, x[37])),
                          (Ye = Q(Ye, et, Qe, tt, ut, 16, x[38])),
                          (tt = Q(tt, Ye, et, Qe, kt, 23, x[39])),
                          (Qe = Q(Qe, tt, Ye, et, Rn, 4, x[40])),
                          (et = Q(et, Qe, tt, Ye, Ae, 11, x[41])),
                          (Ye = Q(Ye, et, Qe, tt, Ue, 16, x[42])),
                          (tt = Q(tt, Ye, et, Qe, qe, 23, x[43])),
                          (Qe = Q(Qe, tt, Ye, et, mt, 4, x[44])),
                          (et = Q(et, Qe, tt, Ye, xt, 11, x[45])),
                          (Ye = Q(Ye, et, Qe, tt, Qn, 16, x[46])),
                          (Qe = ue(
                            Qe,
                            (tt = Q(tt, Ye, et, Qe, Le, 23, x[47])),
                            Ye,
                            et,
                            Ae,
                            6,
                            x[48]
                          )),
                          (et = ue(et, Qe, tt, Ye, ut, 10, x[49])),
                          (Ye = ue(Ye, et, Qe, tt, fn, 15, x[50])),
                          (tt = ue(tt, Ye, et, Qe, xe, 21, x[51])),
                          (Qe = ue(Qe, tt, Ye, et, xt, 6, x[52])),
                          (et = ue(et, Qe, tt, Ye, Ue, 10, x[53])),
                          (Ye = ue(Ye, et, Qe, tt, kt, 15, x[54])),
                          (tt = ue(tt, Ye, et, Qe, Me, 21, x[55])),
                          (Qe = ue(Qe, tt, Ye, et, Ge, 6, x[56])),
                          (et = ue(et, Qe, tt, Ye, Qn, 10, x[57])),
                          (Ye = ue(Ye, et, Qe, tt, qe, 15, x[58])),
                          (tt = ue(tt, Ye, et, Qe, Rn, 21, x[59])),
                          (Qe = ue(Qe, tt, Ye, et, Te, 6, x[60])),
                          (et = ue(et, Qe, tt, Ye, qt, 10, x[61])),
                          (Ye = ue(Ye, et, Qe, tt, Le, 15, x[62])),
                          (tt = ue(tt, Ye, et, Qe, mt, 21, x[63])),
                          (ke[0] = (ke[0] + Qe) | 0),
                          (ke[1] = (ke[1] + tt) | 0),
                          (ke[2] = (ke[2] + Ye) | 0),
                          (ke[3] = (ke[3] + et) | 0);
                      },
                      _doFinalize: function () {
                        var se = this._data,
                          le = se.words,
                          fe = 8 * this._nDataBytes,
                          _e = 8 * se.sigBytes;
                        le[_e >>> 5] |= 128 << (24 - (_e % 32));
                        var Se = y.floor(fe / 4294967296),
                          ke = fe;
                        (le[15 + (((_e + 64) >>> 9) << 4)] =
                          (16711935 & ((Se << 8) | (Se >>> 24))) |
                          (4278255360 & ((Se << 24) | (Se >>> 8)))),
                          (le[14 + (((_e + 64) >>> 9) << 4)] =
                            (16711935 & ((ke << 8) | (ke >>> 24))) |
                            (4278255360 & ((ke << 24) | (ke >>> 8)))),
                          (se.sigBytes = 4 * (le.length + 1)),
                          this._process();
                        for (
                          var Ae = this._hash, Me = Ae.words, Le = 0;
                          Le < 4;
                          Le++
                        ) {
                          var Ue = Me[Le];
                          Me[Le] =
                            (16711935 & ((Ue << 8) | (Ue >>> 24))) |
                            (4278255360 & ((Ue << 24) | (Ue >>> 8)));
                        }
                        return Ae;
                      },
                      clone: function () {
                        var se = V.clone.call(this);
                        return (se._hash = this._hash.clone()), se;
                      },
                    }));
                    function ae(we, se, le, fe, _e, Se, ke) {
                      var Ae = we + ((se & le) | (~se & fe)) + _e + ke;
                      return ((Ae << Se) | (Ae >>> (32 - Se))) + se;
                    }
                    function Z(we, se, le, fe, _e, Se, ke) {
                      var Ae = we + ((se & fe) | (le & ~fe)) + _e + ke;
                      return ((Ae << Se) | (Ae >>> (32 - Se))) + se;
                    }
                    function Q(we, se, le, fe, _e, Se, ke) {
                      var Ae = we + (se ^ le ^ fe) + _e + ke;
                      return ((Ae << Se) | (Ae >>> (32 - Se))) + se;
                    }
                    function ue(we, se, le, fe, _e, Se, ke) {
                      var Ae = we + (le ^ (se | ~fe)) + _e + ke;
                      return ((Ae << Se) | (Ae >>> (32 - Se))) + se;
                    }
                    (k.MD5 = V._createHelper(K)),
                      (k.HmacMD5 = V._createHmacHelper(K));
                  })(Math),
                  d.MD5);
              }),
              at(function (t, f) {
                var d, y, k, T, P, V, j, x;
                t.exports =
                  ((k = (y = d = He).lib),
                  (T = k.WordArray),
                  (P = k.Hasher),
                  (V = y.algo),
                  (j = []),
                  (x = V.SHA1 =
                    P.extend({
                      _doReset: function () {
                        this._hash = new T.init([
                          1732584193, 4023233417, 2562383102, 271733878,
                          3285377520,
                        ]);
                      },
                      _doProcessBlock: function (ae, Z) {
                        for (
                          var Q = this._hash.words,
                            ue = Q[0],
                            we = Q[1],
                            se = Q[2],
                            le = Q[3],
                            fe = Q[4],
                            _e = 0;
                          _e < 80;
                          _e++
                        ) {
                          if (_e < 16) j[_e] = 0 | ae[Z + _e];
                          else {
                            var Se =
                              j[_e - 3] ^ j[_e - 8] ^ j[_e - 14] ^ j[_e - 16];
                            j[_e] = (Se << 1) | (Se >>> 31);
                          }
                          var ke = ((ue << 5) | (ue >>> 27)) + fe + j[_e];
                          (ke +=
                            _e < 20
                              ? 1518500249 + ((we & se) | (~we & le))
                              : _e < 40
                              ? 1859775393 + (we ^ se ^ le)
                              : _e < 60
                              ? ((we & se) | (we & le) | (se & le)) - 1894007588
                              : (we ^ se ^ le) - 899497514),
                            (fe = le),
                            (le = se),
                            (se = (we << 30) | (we >>> 2)),
                            (we = ue),
                            (ue = ke);
                        }
                        (Q[0] = (Q[0] + ue) | 0),
                          (Q[1] = (Q[1] + we) | 0),
                          (Q[2] = (Q[2] + se) | 0),
                          (Q[3] = (Q[3] + le) | 0),
                          (Q[4] = (Q[4] + fe) | 0);
                      },
                      _doFinalize: function () {
                        var ae = this._data,
                          Z = ae.words,
                          Q = 8 * this._nDataBytes,
                          ue = 8 * ae.sigBytes;
                        return (
                          (Z[ue >>> 5] |= 128 << (24 - (ue % 32))),
                          (Z[14 + (((ue + 64) >>> 9) << 4)] = Math.floor(
                            Q / 4294967296
                          )),
                          (Z[15 + (((ue + 64) >>> 9) << 4)] = Q),
                          (ae.sigBytes = 4 * Z.length),
                          this._process(),
                          this._hash
                        );
                      },
                      clone: function () {
                        var ae = P.clone.call(this);
                        return (ae._hash = this._hash.clone()), ae;
                      },
                    })),
                  (y.SHA1 = P._createHelper(x)),
                  (y.HmacSHA1 = P._createHmacHelper(x)),
                  d.SHA1);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function (y) {
                    var k = d,
                      T = k.lib,
                      P = T.WordArray,
                      V = T.Hasher,
                      j = k.algo,
                      x = [],
                      K = [];
                    (function () {
                      function Q(le) {
                        for (var fe = y.sqrt(le), _e = 2; _e <= fe; _e++)
                          if (!(le % _e)) return !1;
                        return !0;
                      }
                      function ue(le) {
                        return (4294967296 * (le - (0 | le))) | 0;
                      }
                      for (var we = 2, se = 0; se < 64; )
                        Q(we) &&
                          (se < 8 && (x[se] = ue(y.pow(we, 0.5))),
                          (K[se] = ue(y.pow(we, 1 / 3))),
                          se++),
                          we++;
                    })();
                    var ae = [],
                      Z = (j.SHA256 = V.extend({
                        _doReset: function () {
                          this._hash = new P.init(x.slice(0));
                        },
                        _doProcessBlock: function (ue, we) {
                          for (
                            var se = this._hash.words,
                              le = se[0],
                              fe = se[1],
                              _e = se[2],
                              Se = se[3],
                              ke = se[4],
                              Ae = se[5],
                              Me = se[6],
                              Le = se[7],
                              Ue = 0;
                            Ue < 64;
                            Ue++
                          ) {
                            if (Ue < 16) ae[Ue] = 0 | ue[we + Ue];
                            else {
                              var Te = ae[Ue - 15],
                                xe =
                                  ((Te << 25) | (Te >>> 7)) ^
                                  ((Te << 14) | (Te >>> 18)) ^
                                  (Te >>> 3),
                                qe = ae[Ue - 2],
                                ut =
                                  ((qe << 15) | (qe >>> 17)) ^
                                  ((qe << 13) | (qe >>> 19)) ^
                                  (qe >>> 10);
                              ae[Ue] = xe + ae[Ue - 7] + ut + ae[Ue - 16];
                            }
                            var Ge = (le & fe) ^ (le & _e) ^ (fe & _e),
                              mt =
                                ((le << 30) | (le >>> 2)) ^
                                ((le << 19) | (le >>> 13)) ^
                                ((le << 10) | (le >>> 22)),
                              kt =
                                Le +
                                (((ke << 26) | (ke >>> 6)) ^
                                  ((ke << 21) | (ke >>> 11)) ^
                                  ((ke << 7) | (ke >>> 25))) +
                                ((ke & Ae) ^ (~ke & Me)) +
                                K[Ue] +
                                ae[Ue];
                            (Le = Me),
                              (Me = Ae),
                              (Ae = ke),
                              (ke = (Se + kt) | 0),
                              (Se = _e),
                              (_e = fe),
                              (fe = le),
                              (le = (kt + (mt + Ge)) | 0);
                          }
                          (se[0] = (se[0] + le) | 0),
                            (se[1] = (se[1] + fe) | 0),
                            (se[2] = (se[2] + _e) | 0),
                            (se[3] = (se[3] + Se) | 0),
                            (se[4] = (se[4] + ke) | 0),
                            (se[5] = (se[5] + Ae) | 0),
                            (se[6] = (se[6] + Me) | 0),
                            (se[7] = (se[7] + Le) | 0);
                        },
                        _doFinalize: function () {
                          var ue = this._data,
                            we = ue.words,
                            se = 8 * this._nDataBytes,
                            le = 8 * ue.sigBytes;
                          return (
                            (we[le >>> 5] |= 128 << (24 - (le % 32))),
                            (we[14 + (((le + 64) >>> 9) << 4)] = y.floor(
                              se / 4294967296
                            )),
                            (we[15 + (((le + 64) >>> 9) << 4)] = se),
                            (ue.sigBytes = 4 * we.length),
                            this._process(),
                            this._hash
                          );
                        },
                        clone: function () {
                          var ue = V.clone.call(this);
                          return (ue._hash = this._hash.clone()), ue;
                        },
                      }));
                    (k.SHA256 = V._createHelper(Z)),
                      (k.HmacSHA256 = V._createHmacHelper(Z));
                  })(Math),
                  d.SHA256);
              }),
              at(function (t, f) {
                var d, y, k, T, P, V;
                t.exports =
                  ((k = (y = d = He).lib.WordArray),
                  (T = y.algo),
                  (P = T.SHA256),
                  (V = T.SHA224 =
                    P.extend({
                      _doReset: function () {
                        this._hash = new k.init([
                          3238371032, 914150663, 812702999, 4144912697,
                          4290775857, 1750603025, 1694076839, 3204075428,
                        ]);
                      },
                      _doFinalize: function () {
                        var x = P._doFinalize.call(this);
                        return (x.sigBytes -= 4), x;
                      },
                    })),
                  (y.SHA224 = P._createHelper(V)),
                  (y.HmacSHA224 = P._createHmacHelper(V)),
                  d.SHA224);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function () {
                    var y = d,
                      k = y.lib.Hasher,
                      T = y.x64,
                      P = T.Word,
                      V = T.WordArray,
                      j = y.algo;
                    function x() {
                      return P.create.apply(P, arguments);
                    }
                    var K = [
                        x(1116352408, 3609767458),
                        x(1899447441, 602891725),
                        x(3049323471, 3964484399),
                        x(3921009573, 2173295548),
                        x(961987163, 4081628472),
                        x(1508970993, 3053834265),
                        x(2453635748, 2937671579),
                        x(2870763221, 3664609560),
                        x(3624381080, 2734883394),
                        x(310598401, 1164996542),
                        x(607225278, 1323610764),
                        x(1426881987, 3590304994),
                        x(1925078388, 4068182383),
                        x(2162078206, 991336113),
                        x(2614888103, 633803317),
                        x(3248222580, 3479774868),
                        x(3835390401, 2666613458),
                        x(4022224774, 944711139),
                        x(264347078, 2341262773),
                        x(604807628, 2007800933),
                        x(770255983, 1495990901),
                        x(1249150122, 1856431235),
                        x(1555081692, 3175218132),
                        x(1996064986, 2198950837),
                        x(2554220882, 3999719339),
                        x(2821834349, 766784016),
                        x(2952996808, 2566594879),
                        x(3210313671, 3203337956),
                        x(3336571891, 1034457026),
                        x(3584528711, 2466948901),
                        x(113926993, 3758326383),
                        x(338241895, 168717936),
                        x(666307205, 1188179964),
                        x(773529912, 1546045734),
                        x(1294757372, 1522805485),
                        x(1396182291, 2643833823),
                        x(1695183700, 2343527390),
                        x(1986661051, 1014477480),
                        x(2177026350, 1206759142),
                        x(2456956037, 344077627),
                        x(2730485921, 1290863460),
                        x(2820302411, 3158454273),
                        x(3259730800, 3505952657),
                        x(3345764771, 106217008),
                        x(3516065817, 3606008344),
                        x(3600352804, 1432725776),
                        x(4094571909, 1467031594),
                        x(275423344, 851169720),
                        x(430227734, 3100823752),
                        x(506948616, 1363258195),
                        x(659060556, 3750685593),
                        x(883997877, 3785050280),
                        x(958139571, 3318307427),
                        x(1322822218, 3812723403),
                        x(1537002063, 2003034995),
                        x(1747873779, 3602036899),
                        x(1955562222, 1575990012),
                        x(2024104815, 1125592928),
                        x(2227730452, 2716904306),
                        x(2361852424, 442776044),
                        x(2428436474, 593698344),
                        x(2756734187, 3733110249),
                        x(3204031479, 2999351573),
                        x(3329325298, 3815920427),
                        x(3391569614, 3928383900),
                        x(3515267271, 566280711),
                        x(3940187606, 3454069534),
                        x(4118630271, 4000239992),
                        x(116418474, 1914138554),
                        x(174292421, 2731055270),
                        x(289380356, 3203993006),
                        x(460393269, 320620315),
                        x(685471733, 587496836),
                        x(852142971, 1086792851),
                        x(1017036298, 365543100),
                        x(1126000580, 2618297676),
                        x(1288033470, 3409855158),
                        x(1501505948, 4234509866),
                        x(1607167915, 987167468),
                        x(1816402316, 1246189591),
                      ],
                      ae = [];
                    (function () {
                      for (var Q = 0; Q < 80; Q++) ae[Q] = x();
                    })();
                    var Z = (j.SHA512 = k.extend({
                      _doReset: function () {
                        this._hash = new V.init([
                          new P.init(1779033703, 4089235720),
                          new P.init(3144134277, 2227873595),
                          new P.init(1013904242, 4271175723),
                          new P.init(2773480762, 1595750129),
                          new P.init(1359893119, 2917565137),
                          new P.init(2600822924, 725511199),
                          new P.init(528734635, 4215389547),
                          new P.init(1541459225, 327033209),
                        ]);
                      },
                      _doProcessBlock: function (ue, we) {
                        for (
                          var se = this._hash.words,
                            le = se[0],
                            fe = se[1],
                            _e = se[2],
                            Se = se[3],
                            ke = se[4],
                            Ae = se[5],
                            Me = se[6],
                            Le = se[7],
                            Ue = le.high,
                            Te = le.low,
                            xe = fe.high,
                            qe = fe.low,
                            ut = _e.high,
                            Ge = _e.low,
                            mt = Se.high,
                            kt = Se.low,
                            qt = ke.high,
                            xt = ke.low,
                            Rn = Ae.high,
                            fn = Ae.low,
                            Qn = Me.high,
                            Qe = Me.low,
                            tt = Le.high,
                            Ye = Le.low,
                            et = Ue,
                            or = Te,
                            ki = xe,
                            ci = qe,
                            Ea = ut,
                            Xa = Ge,
                            vc = mt,
                            eo = kt,
                            li = qt,
                            Qr = xt,
                            to = Rn,
                            $s = fn,
                            mc = Qn,
                            Ys = Qe,
                            di = tt,
                            Zs = Ye,
                            hi = 0;
                          hi < 80;
                          hi++
                        ) {
                          var Ia = ae[hi];
                          if (hi < 16)
                            var no = (Ia.high = 0 | ue[we + 2 * hi]),
                              Vo = (Ia.low = 0 | ue[we + 2 * hi + 1]);
                          else {
                            var Ff = ae[hi - 15],
                              Fo = Ff.high,
                              Wi = Ff.low,
                              jf =
                                ((Fo >>> 1) | (Wi << 31)) ^
                                ((Fo >>> 8) | (Wi << 24)) ^
                                (Fo >>> 7),
                              Bf =
                                ((Wi >>> 1) | (Fo << 31)) ^
                                ((Wi >>> 8) | (Fo << 24)) ^
                                ((Wi >>> 7) | (Fo << 25)),
                              zf = ae[hi - 2],
                              jo = zf.high,
                              Qs = zf.low,
                              gc =
                                ((jo >>> 19) | (Qs << 13)) ^
                                ((jo << 3) | (Qs >>> 29)) ^
                                (jo >>> 6),
                              Hf =
                                ((Qs >>> 19) | (jo << 13)) ^
                                ((Qs << 3) | (jo >>> 29)) ^
                                ((Qs >>> 6) | (jo << 26)),
                              Wf = ae[hi - 7],
                              Gf = Wf.high,
                              Ng = Wf.low,
                              wd = ae[hi - 16],
                              Lg = wd.high,
                              qf = wd.low;
                            (no =
                              (no =
                                (no =
                                  jf +
                                  Gf +
                                  ((Vo = Bf + Ng) >>> 0 < Bf >>> 0 ? 1 : 0)) +
                                gc +
                                ((Vo += Hf) >>> 0 < Hf >>> 0 ? 1 : 0)) +
                              Lg +
                              ((Vo += qf) >>> 0 < qf >>> 0 ? 1 : 0)),
                              (Ia.high = no),
                              (Ia.low = Vo);
                          }
                          var ro,
                            Mg = (li & to) ^ (~li & mc),
                            kd = (Qr & $s) ^ (~Qr & Ys),
                            _c = (et & ki) ^ (et & Ea) ^ (ki & Ea),
                            Kf = (or & ci) ^ (or & Xa) ^ (ci & Xa),
                            Ug =
                              ((et >>> 28) | (or << 4)) ^
                              ((et << 30) | (or >>> 2)) ^
                              ((et << 25) | (or >>> 7)),
                            Jf =
                              ((or >>> 28) | (et << 4)) ^
                              ((or << 30) | (et >>> 2)) ^
                              ((or << 25) | (et >>> 7)),
                            Vg =
                              ((li >>> 14) | (Qr << 18)) ^
                              ((li >>> 18) | (Qr << 14)) ^
                              ((li << 23) | (Qr >>> 9)),
                            Fg =
                              ((Qr >>> 14) | (li << 18)) ^
                              ((Qr >>> 18) | (li << 14)) ^
                              ((Qr << 23) | (li >>> 9)),
                            $f = K[hi],
                            Td = $f.high,
                            Yf = $f.low,
                            Bo =
                              di +
                              Vg +
                              ((ro = Zs + Fg) >>> 0 < Zs >>> 0 ? 1 : 0),
                            Zf = Jf + Kf;
                          (di = mc),
                            (Zs = Ys),
                            (mc = to),
                            (Ys = $s),
                            (to = li),
                            ($s = Qr),
                            (li =
                              (vc +
                                (Bo =
                                  (Bo =
                                    (Bo =
                                      Bo +
                                      Mg +
                                      ((ro += kd) >>> 0 < kd >>> 0 ? 1 : 0)) +
                                    Td +
                                    ((ro += Yf) >>> 0 < Yf >>> 0 ? 1 : 0)) +
                                  no +
                                  ((ro += Vo) >>> 0 < Vo >>> 0 ? 1 : 0)) +
                                ((Qr = (eo + ro) | 0) >>> 0 < eo >>> 0
                                  ? 1
                                  : 0)) |
                              0),
                            (vc = Ea),
                            (eo = Xa),
                            (Ea = ki),
                            (Xa = ci),
                            (ki = et),
                            (ci = or),
                            (et =
                              (Bo +
                                (Ug + _c + (Zf >>> 0 < Jf >>> 0 ? 1 : 0)) +
                                ((or = (ro + Zf) | 0) >>> 0 < ro >>> 0
                                  ? 1
                                  : 0)) |
                              0);
                        }
                        (Te = le.low = Te + or),
                          (le.high = Ue + et + (Te >>> 0 < or >>> 0 ? 1 : 0)),
                          (qe = fe.low = qe + ci),
                          (fe.high = xe + ki + (qe >>> 0 < ci >>> 0 ? 1 : 0)),
                          (Ge = _e.low = Ge + Xa),
                          (_e.high = ut + Ea + (Ge >>> 0 < Xa >>> 0 ? 1 : 0)),
                          (kt = Se.low = kt + eo),
                          (Se.high = mt + vc + (kt >>> 0 < eo >>> 0 ? 1 : 0)),
                          (xt = ke.low = xt + Qr),
                          (ke.high = qt + li + (xt >>> 0 < Qr >>> 0 ? 1 : 0)),
                          (fn = Ae.low = fn + $s),
                          (Ae.high = Rn + to + (fn >>> 0 < $s >>> 0 ? 1 : 0)),
                          (Qe = Me.low = Qe + Ys),
                          (Me.high = Qn + mc + (Qe >>> 0 < Ys >>> 0 ? 1 : 0)),
                          (Ye = Le.low = Ye + Zs),
                          (Le.high = tt + di + (Ye >>> 0 < Zs >>> 0 ? 1 : 0));
                      },
                      _doFinalize: function () {
                        var ue = this._data,
                          we = ue.words,
                          se = 8 * this._nDataBytes,
                          le = 8 * ue.sigBytes;
                        return (
                          (we[le >>> 5] |= 128 << (24 - (le % 32))),
                          (we[30 + (((le + 128) >>> 10) << 5)] = Math.floor(
                            se / 4294967296
                          )),
                          (we[31 + (((le + 128) >>> 10) << 5)] = se),
                          (ue.sigBytes = 4 * we.length),
                          this._process(),
                          this._hash.toX32()
                        );
                      },
                      clone: function () {
                        var ue = k.clone.call(this);
                        return (ue._hash = this._hash.clone()), ue;
                      },
                      blockSize: 32,
                    }));
                    (y.SHA512 = k._createHelper(Z)),
                      (y.HmacSHA512 = k._createHmacHelper(Z));
                  })(),
                  d.SHA512);
              }),
              at(function (t, f) {
                var d, y, k, T, P, V, j, x;
                t.exports =
                  ((k = (y = d = He).x64),
                  (T = k.Word),
                  (P = k.WordArray),
                  (V = y.algo),
                  (j = V.SHA512),
                  (x = V.SHA384 =
                    j.extend({
                      _doReset: function () {
                        this._hash = new P.init([
                          new T.init(3418070365, 3238371032),
                          new T.init(1654270250, 914150663),
                          new T.init(2438529370, 812702999),
                          new T.init(355462360, 4144912697),
                          new T.init(1731405415, 4290775857),
                          new T.init(2394180231, 1750603025),
                          new T.init(3675008525, 1694076839),
                          new T.init(1203062813, 3204075428),
                        ]);
                      },
                      _doFinalize: function () {
                        var ae = j._doFinalize.call(this);
                        return (ae.sigBytes -= 16), ae;
                      },
                    })),
                  (y.SHA384 = j._createHelper(x)),
                  (y.HmacSHA384 = j._createHmacHelper(x)),
                  d.SHA384);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function (y) {
                    var k = d,
                      T = k.lib,
                      P = T.WordArray,
                      V = T.Hasher,
                      j = k.x64.Word,
                      x = k.algo,
                      K = [],
                      ae = [],
                      Z = [];
                    (function () {
                      for (var we = 1, se = 0, le = 0; le < 24; le++) {
                        K[we + 5 * se] = (((le + 1) * (le + 2)) / 2) % 64;
                        var fe = (2 * we + 3 * se) % 5;
                        (we = se % 5), (se = fe);
                      }
                      for (we = 0; we < 5; we++)
                        for (se = 0; se < 5; se++)
                          ae[we + 5 * se] = se + ((2 * we + 3 * se) % 5) * 5;
                      for (var _e = 1, Se = 0; Se < 24; Se++) {
                        for (var ke = 0, Ae = 0, Me = 0; Me < 7; Me++) {
                          if (1 & _e) {
                            var Le = (1 << Me) - 1;
                            Le < 32 ? (Ae ^= 1 << Le) : (ke ^= 1 << (Le - 32));
                          }
                          128 & _e ? (_e = (_e << 1) ^ 113) : (_e <<= 1);
                        }
                        Z[Se] = j.create(ke, Ae);
                      }
                    })();
                    var Q = [];
                    (function () {
                      for (var we = 0; we < 25; we++) Q[we] = j.create();
                    })();
                    var ue = (x.SHA3 = V.extend({
                      cfg: V.cfg.extend({
                        outputLength: 512,
                      }),
                      _doReset: function () {
                        for (var se = (this._state = []), le = 0; le < 25; le++)
                          se[le] = new j.init();
                        this.blockSize =
                          (1600 - 2 * this.cfg.outputLength) / 32;
                      },
                      _doProcessBlock: function (se, le) {
                        for (
                          var fe = this._state, _e = this.blockSize / 2, Se = 0;
                          Se < _e;
                          Se++
                        ) {
                          var ke = se[le + 2 * Se],
                            Ae = se[le + 2 * Se + 1];
                          (ke =
                            (16711935 & ((ke << 8) | (ke >>> 24))) |
                            (4278255360 & ((ke << 24) | (ke >>> 8)))),
                            (Ae =
                              (16711935 & ((Ae << 8) | (Ae >>> 24))) |
                              (4278255360 & ((Ae << 24) | (Ae >>> 8)))),
                            ((Ye = fe[Se]).high ^= Ae),
                            (Ye.low ^= ke);
                        }
                        for (var Me = 0; Me < 24; Me++) {
                          for (var Le = 0; Le < 5; Le++) {
                            for (var Ue = 0, Te = 0, xe = 0; xe < 5; xe++)
                              (Ue ^= (Ye = fe[Le + 5 * xe]).high),
                                (Te ^= Ye.low);
                            var qe = Q[Le];
                            (qe.high = Ue), (qe.low = Te);
                          }
                          for (Le = 0; Le < 5; Le++) {
                            var ut = Q[(Le + 4) % 5],
                              Ge = Q[(Le + 1) % 5],
                              mt = Ge.high,
                              kt = Ge.low;
                            for (
                              Ue = ut.high ^ ((mt << 1) | (kt >>> 31)),
                                Te = ut.low ^ ((kt << 1) | (mt >>> 31)),
                                xe = 0;
                              xe < 5;
                              xe++
                            )
                              ((Ye = fe[Le + 5 * xe]).high ^= Ue),
                                (Ye.low ^= Te);
                          }
                          for (var qt = 1; qt < 25; qt++) {
                            var xt = (Ye = fe[qt]).high,
                              Rn = Ye.low,
                              fn = K[qt];
                            fn < 32
                              ? ((Ue = (xt << fn) | (Rn >>> (32 - fn))),
                                (Te = (Rn << fn) | (xt >>> (32 - fn))))
                              : ((Ue = (Rn << (fn - 32)) | (xt >>> (64 - fn))),
                                (Te = (xt << (fn - 32)) | (Rn >>> (64 - fn))));
                            var Qn = Q[ae[qt]];
                            (Qn.high = Ue), (Qn.low = Te);
                          }
                          var Qe = Q[0],
                            tt = fe[0];
                          for (
                            Qe.high = tt.high, Qe.low = tt.low, Le = 0;
                            Le < 5;
                            Le++
                          )
                            for (xe = 0; xe < 5; xe++) {
                              var Ye = fe[(qt = Le + 5 * xe)],
                                et = Q[qt],
                                or = Q[((Le + 1) % 5) + 5 * xe],
                                ki = Q[((Le + 2) % 5) + 5 * xe];
                              (Ye.high = et.high ^ (~or.high & ki.high)),
                                (Ye.low = et.low ^ (~or.low & ki.low));
                            }
                          Ye = fe[0];
                          var ci = Z[Me];
                          (Ye.high ^= ci.high), (Ye.low ^= ci.low);
                        }
                      },
                      _doFinalize: function () {
                        var se = this._data,
                          le = se.words,
                          fe = (this._nDataBytes, 8 * se.sigBytes),
                          _e = 32 * this.blockSize;
                        (le[fe >>> 5] |= 1 << (24 - (fe % 32))),
                          (le[((y.ceil((fe + 1) / _e) * _e) >>> 5) - 1] |= 128),
                          (se.sigBytes = 4 * le.length),
                          this._process();
                        for (
                          var Se = this._state,
                            ke = this.cfg.outputLength / 8,
                            Ae = ke / 8,
                            Me = [],
                            Le = 0;
                          Le < Ae;
                          Le++
                        ) {
                          var Ue = Se[Le],
                            Te = Ue.high,
                            xe = Ue.low;
                          (Te =
                            (16711935 & ((Te << 8) | (Te >>> 24))) |
                            (4278255360 & ((Te << 24) | (Te >>> 8)))),
                            (xe =
                              (16711935 & ((xe << 8) | (xe >>> 24))) |
                              (4278255360 & ((xe << 24) | (xe >>> 8)))),
                            Me.push(xe),
                            Me.push(Te);
                        }
                        return new P.init(Me, ke);
                      },
                      clone: function () {
                        for (
                          var se = V.clone.call(this),
                            le = (se._state = this._state.slice(0)),
                            fe = 0;
                          fe < 25;
                          fe++
                        )
                          le[fe] = le[fe].clone();
                        return se;
                      },
                    }));
                    (k.SHA3 = V._createHelper(ue)),
                      (k.HmacSHA3 = V._createHmacHelper(ue));
                  })(Math),
                  d.SHA3);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function (y) {
                    var k = d,
                      T = k.lib,
                      P = T.WordArray,
                      V = T.Hasher,
                      j = k.algo,
                      x = P.create([
                        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7,
                        4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3,
                        10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9,
                        11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5,
                        9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13,
                      ]),
                      K = P.create([
                        5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6,
                        11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15,
                        5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6,
                        4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15,
                        10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11,
                      ]),
                      ae = P.create([
                        11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,
                        7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,
                        11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,
                        11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,
                        9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6,
                      ]),
                      Z = P.create([
                        8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,
                        9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,
                        9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,
                        15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,
                        8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11,
                      ]),
                      Q = P.create([
                        0, 1518500249, 1859775393, 2400959708, 2840853838,
                      ]),
                      ue = P.create([
                        1352829926, 1548603684, 1836072691, 2053994217, 0,
                      ]),
                      we = (j.RIPEMD160 = V.extend({
                        _doReset: function () {
                          this._hash = P.create([
                            1732584193, 4023233417, 2562383102, 271733878,
                            3285377520,
                          ]);
                        },
                        _doProcessBlock: function (Me, Le) {
                          for (var Ue = 0; Ue < 16; Ue++) {
                            var Te = Le + Ue,
                              xe = Me[Te];
                            Me[Te] =
                              (16711935 & ((xe << 8) | (xe >>> 24))) |
                              (4278255360 & ((xe << 24) | (xe >>> 8)));
                          }
                          var qe,
                            ut,
                            Ge,
                            mt,
                            kt,
                            qt,
                            xt,
                            Rn,
                            fn,
                            Qn,
                            Qe,
                            tt = this._hash.words,
                            Ye = Q.words,
                            et = ue.words,
                            or = x.words,
                            ki = K.words,
                            ci = ae.words,
                            Ea = Z.words;
                          for (
                            qt = qe = tt[0],
                              xt = ut = tt[1],
                              Rn = Ge = tt[2],
                              fn = mt = tt[3],
                              Qn = kt = tt[4],
                              Ue = 0;
                            Ue < 80;
                            Ue += 1
                          )
                            (Qe = (qe + Me[Le + or[Ue]]) | 0),
                              (Qe +=
                                Ue < 16
                                  ? se(ut, Ge, mt) + Ye[0]
                                  : Ue < 32
                                  ? le(ut, Ge, mt) + Ye[1]
                                  : Ue < 48
                                  ? fe(ut, Ge, mt) + Ye[2]
                                  : Ue < 64
                                  ? _e(ut, Ge, mt) + Ye[3]
                                  : Se(ut, Ge, mt) + Ye[4]),
                              (Qe = ((Qe = ke((Qe |= 0), ci[Ue])) + kt) | 0),
                              (qe = kt),
                              (kt = mt),
                              (mt = ke(Ge, 10)),
                              (Ge = ut),
                              (ut = Qe),
                              (Qe = (qt + Me[Le + ki[Ue]]) | 0),
                              (Qe +=
                                Ue < 16
                                  ? Se(xt, Rn, fn) + et[0]
                                  : Ue < 32
                                  ? _e(xt, Rn, fn) + et[1]
                                  : Ue < 48
                                  ? fe(xt, Rn, fn) + et[2]
                                  : Ue < 64
                                  ? le(xt, Rn, fn) + et[3]
                                  : se(xt, Rn, fn) + et[4]),
                              (Qe = ((Qe = ke((Qe |= 0), Ea[Ue])) + Qn) | 0),
                              (qt = Qn),
                              (Qn = fn),
                              (fn = ke(Rn, 10)),
                              (Rn = xt),
                              (xt = Qe);
                          (Qe = (tt[1] + Ge + fn) | 0),
                            (tt[1] = (tt[2] + mt + Qn) | 0),
                            (tt[2] = (tt[3] + kt + qt) | 0),
                            (tt[3] = (tt[4] + qe + xt) | 0),
                            (tt[4] = (tt[0] + ut + Rn) | 0),
                            (tt[0] = Qe);
                        },
                        _doFinalize: function () {
                          var Me = this._data,
                            Le = Me.words,
                            Ue = 8 * this._nDataBytes,
                            Te = 8 * Me.sigBytes;
                          (Le[Te >>> 5] |= 128 << (24 - (Te % 32))),
                            (Le[14 + (((Te + 64) >>> 9) << 4)] =
                              (16711935 & ((Ue << 8) | (Ue >>> 24))) |
                              (4278255360 & ((Ue << 24) | (Ue >>> 8)))),
                            (Me.sigBytes = 4 * (Le.length + 1)),
                            this._process();
                          for (
                            var xe = this._hash, qe = xe.words, ut = 0;
                            ut < 5;
                            ut++
                          ) {
                            var Ge = qe[ut];
                            qe[ut] =
                              (16711935 & ((Ge << 8) | (Ge >>> 24))) |
                              (4278255360 & ((Ge << 24) | (Ge >>> 8)));
                          }
                          return xe;
                        },
                        clone: function () {
                          var Me = V.clone.call(this);
                          return (Me._hash = this._hash.clone()), Me;
                        },
                      }));
                    function se(Ae, Me, Le) {
                      return Ae ^ Me ^ Le;
                    }
                    function le(Ae, Me, Le) {
                      return (Ae & Me) | (~Ae & Le);
                    }
                    function fe(Ae, Me, Le) {
                      return (Ae | ~Me) ^ Le;
                    }
                    function _e(Ae, Me, Le) {
                      return (Ae & Le) | (Me & ~Le);
                    }
                    function Se(Ae, Me, Le) {
                      return Ae ^ (Me | ~Le);
                    }
                    function ke(Ae, Me) {
                      return (Ae << Me) | (Ae >>> (32 - Me));
                    }
                    (k.RIPEMD160 = V._createHelper(we)),
                      (k.HmacRIPEMD160 = V._createHmacHelper(we));
                  })(),
                  d.RIPEMD160);
              }),
              at(function (t, f) {
                var d, y, k, T, P, V;
                t.exports =
                  ((y = (d = He).lib),
                  (k = y.Base),
                  (T = d.enc),
                  (P = T.Utf8),
                  (V = d.algo),
                  void (V.HMAC = k.extend({
                    init: function (x, K) {
                      (x = this._hasher = new x.init()),
                        typeof K == "string" && (K = P.parse(K));
                      var ae = x.blockSize,
                        Z = 4 * ae;
                      K.sigBytes > Z && (K = x.finalize(K)), K.clamp();
                      for (
                        var Q = (this._oKey = K.clone()),
                          ue = (this._iKey = K.clone()),
                          we = Q.words,
                          se = ue.words,
                          le = 0;
                        le < ae;
                        le++
                      )
                        (we[le] ^= 1549556828), (se[le] ^= 909522486);
                      (Q.sigBytes = ue.sigBytes = Z), this.reset();
                    },
                    reset: function () {
                      var x = this._hasher;
                      x.reset(), x.update(this._iKey);
                    },
                    update: function (x) {
                      return this._hasher.update(x), this;
                    },
                    finalize: function (x) {
                      var K = this._hasher,
                        ae = K.finalize(x);
                      K.reset();
                      var Z = K.finalize(this._oKey.clone().concat(ae));
                      return Z;
                    },
                  })));
              }),
              at(function (t, f) {
                var d, y, k, T, P, V, j, x, K;
                t.exports =
                  ((k = (y = d = He).lib),
                  (T = k.Base),
                  (P = k.WordArray),
                  (V = y.algo),
                  (j = V.SHA1),
                  (x = V.HMAC),
                  (K = V.PBKDF2 =
                    T.extend({
                      cfg: T.extend({
                        keySize: 4,
                        hasher: j,
                        iterations: 1,
                      }),
                      init: function (Z) {
                        this.cfg = this.cfg.extend(Z);
                      },
                      compute: function (Z, Q) {
                        for (
                          var ue = this.cfg,
                            we = x.create(ue.hasher, Z),
                            se = P.create(),
                            le = P.create([1]),
                            fe = se.words,
                            _e = le.words,
                            Se = ue.keySize,
                            ke = ue.iterations;
                          fe.length < Se;

                        ) {
                          var Ae = we.update(Q).finalize(le);
                          we.reset();
                          for (
                            var Me = Ae.words, Le = Me.length, Ue = Ae, Te = 1;
                            Te < ke;
                            Te++
                          ) {
                            (Ue = we.finalize(Ue)), we.reset();
                            for (var xe = Ue.words, qe = 0; qe < Le; qe++)
                              Me[qe] ^= xe[qe];
                          }
                          se.concat(Ae), _e[0]++;
                        }
                        return (se.sigBytes = 4 * Se), se;
                      },
                    })),
                  (y.PBKDF2 = function (ae, Z, Q) {
                    return K.create(Q).compute(ae, Z);
                  }),
                  d.PBKDF2);
              }),
              at(function (t, f) {
                var d, y, k, T, P, V, j, x;
                t.exports =
                  ((k = (y = d = He).lib),
                  (T = k.Base),
                  (P = k.WordArray),
                  (V = y.algo),
                  (j = V.MD5),
                  (x = V.EvpKDF =
                    T.extend({
                      cfg: T.extend({
                        keySize: 4,
                        hasher: j,
                        iterations: 1,
                      }),
                      init: function (ae) {
                        this.cfg = this.cfg.extend(ae);
                      },
                      compute: function (ae, Z) {
                        for (
                          var Q = this.cfg,
                            ue = Q.hasher.create(),
                            we = P.create(),
                            se = we.words,
                            le = Q.keySize,
                            fe = Q.iterations;
                          se.length < le;

                        ) {
                          _e && ue.update(_e);
                          var _e = ue.update(ae).finalize(Z);
                          ue.reset();
                          for (var Se = 1; Se < fe; Se++)
                            (_e = ue.finalize(_e)), ue.reset();
                          we.concat(_e);
                        }
                        return (we.sigBytes = 4 * le), we;
                      },
                    })),
                  (y.EvpKDF = function (K, ae, Z) {
                    return x.create(Z).compute(K, ae);
                  }),
                  d.EvpKDF);
              }),
              at(function (t, f) {
                var d,
                  y,
                  k,
                  T,
                  P,
                  V,
                  j,
                  x,
                  K,
                  ae,
                  Z,
                  Q,
                  ue,
                  we,
                  se,
                  le,
                  fe,
                  _e,
                  Se,
                  ke,
                  Ae,
                  Me,
                  Le,
                  Ue;
                t.exports = void (
                  (d = He).lib.Cipher ||
                  ((k = d),
                  (T = k.lib),
                  (P = T.Base),
                  (V = T.WordArray),
                  (j = T.BufferedBlockAlgorithm),
                  (x = k.enc),
                  x.Utf8,
                  (K = x.Base64),
                  (ae = k.algo),
                  (Z = ae.EvpKDF),
                  (Q = T.Cipher =
                    j.extend({
                      cfg: P.extend(),
                      createEncryptor: function (xe, qe) {
                        return this.create(this._ENC_XFORM_MODE, xe, qe);
                      },
                      createDecryptor: function (xe, qe) {
                        return this.create(this._DEC_XFORM_MODE, xe, qe);
                      },
                      init: function (xe, qe, ut) {
                        (this.cfg = this.cfg.extend(ut)),
                          (this._xformMode = xe),
                          (this._key = qe),
                          this.reset();
                      },
                      reset: function () {
                        j.reset.call(this), this._doReset();
                      },
                      process: function (xe) {
                        return this._append(xe), this._process();
                      },
                      finalize: function (xe) {
                        xe && this._append(xe);
                        var qe = this._doFinalize();
                        return qe;
                      },
                      keySize: 4,
                      ivSize: 4,
                      _ENC_XFORM_MODE: 1,
                      _DEC_XFORM_MODE: 2,
                      _createHelper: (function () {
                        function Te(xe) {
                          return typeof xe == "string" ? Ue : Ae;
                        }
                        return function (xe) {
                          return {
                            encrypt: function (ut, Ge, mt) {
                              return Te(Ge).encrypt(xe, ut, Ge, mt);
                            },
                            decrypt: function (ut, Ge, mt) {
                              return Te(Ge).decrypt(xe, ut, Ge, mt);
                            },
                          };
                        };
                      })(),
                    })),
                  (T.StreamCipher = Q.extend({
                    _doFinalize: function () {
                      var xe = this._process(!0);
                      return xe;
                    },
                    blockSize: 1,
                  })),
                  (ue = k.mode = {}),
                  (we = T.BlockCipherMode =
                    P.extend({
                      createEncryptor: function (xe, qe) {
                        return this.Encryptor.create(xe, qe);
                      },
                      createDecryptor: function (xe, qe) {
                        return this.Decryptor.create(xe, qe);
                      },
                      init: function (xe, qe) {
                        (this._cipher = xe), (this._iv = qe);
                      },
                    })),
                  (se = ue.CBC =
                    (function () {
                      var Te = we.extend();
                      function xe(qe, ut, Ge) {
                        var mt = this._iv;
                        if (mt) {
                          var kt = mt;
                          this._iv = y;
                        } else var kt = this._prevBlock;
                        for (var qt = 0; qt < Ge; qt++) qe[ut + qt] ^= kt[qt];
                      }
                      return (
                        (Te.Encryptor = Te.extend({
                          processBlock: function (ut, Ge) {
                            var mt = this._cipher,
                              kt = mt.blockSize;
                            xe.call(this, ut, Ge, kt),
                              mt.encryptBlock(ut, Ge),
                              (this._prevBlock = ut.slice(Ge, Ge + kt));
                          },
                        })),
                        (Te.Decryptor = Te.extend({
                          processBlock: function (ut, Ge) {
                            var mt = this._cipher,
                              kt = mt.blockSize,
                              qt = ut.slice(Ge, Ge + kt);
                            mt.decryptBlock(ut, Ge),
                              xe.call(this, ut, Ge, kt),
                              (this._prevBlock = qt);
                          },
                        })),
                        Te
                      );
                    })()),
                  (le = k.pad = {}),
                  (fe = le.Pkcs7 =
                    {
                      pad: function (xe, qe) {
                        for (
                          var ut = 4 * qe,
                            Ge = ut - (xe.sigBytes % ut),
                            mt = (Ge << 24) | (Ge << 16) | (Ge << 8) | Ge,
                            kt = [],
                            qt = 0;
                          qt < Ge;
                          qt += 4
                        )
                          kt.push(mt);
                        var xt = V.create(kt, Ge);
                        xe.concat(xt);
                      },
                      unpad: function (xe) {
                        var qe = 255 & xe.words[(xe.sigBytes - 1) >>> 2];
                        xe.sigBytes -= qe;
                      },
                    }),
                  (T.BlockCipher = Q.extend({
                    cfg: Q.cfg.extend({
                      mode: se,
                      padding: fe,
                    }),
                    reset: function () {
                      Q.reset.call(this);
                      var xe = this.cfg,
                        qe = xe.iv,
                        ut = xe.mode;
                      if (this._xformMode == this._ENC_XFORM_MODE)
                        var Ge = ut.createEncryptor;
                      else {
                        var Ge = ut.createDecryptor;
                        this._minBufferSize = 1;
                      }
                      this._mode && this._mode.__creator == Ge
                        ? this._mode.init(this, qe && qe.words)
                        : ((this._mode = Ge.call(ut, this, qe && qe.words)),
                          (this._mode.__creator = Ge));
                    },
                    _doProcessBlock: function (xe, qe) {
                      this._mode.processBlock(xe, qe);
                    },
                    _doFinalize: function () {
                      var xe = this.cfg.padding;
                      if (this._xformMode == this._ENC_XFORM_MODE) {
                        xe.pad(this._data, this.blockSize);
                        var qe = this._process(!0);
                      } else {
                        var qe = this._process(!0);
                        xe.unpad(qe);
                      }
                      return qe;
                    },
                    blockSize: 4,
                  })),
                  (_e = T.CipherParams =
                    P.extend({
                      init: function (xe) {
                        this.mixIn(xe);
                      },
                      toString: function (xe) {
                        return (xe || this.formatter).stringify(this);
                      },
                    })),
                  (Se = k.format = {}),
                  (ke = Se.OpenSSL =
                    {
                      stringify: function (xe) {
                        var qe = xe.ciphertext,
                          ut = xe.salt;
                        if (ut)
                          var Ge = V.create([1398893684, 1701076831])
                            .concat(ut)
                            .concat(qe);
                        else var Ge = qe;
                        return Ge.toString(K);
                      },
                      parse: function (xe) {
                        var qe = K.parse(xe),
                          ut = qe.words;
                        if (ut[0] == 1398893684 && ut[1] == 1701076831) {
                          var Ge = V.create(ut.slice(2, 4));
                          ut.splice(0, 4), (qe.sigBytes -= 16);
                        }
                        return _e.create({
                          ciphertext: qe,
                          salt: Ge,
                        });
                      },
                    }),
                  (Ae = T.SerializableCipher =
                    P.extend({
                      cfg: P.extend({
                        format: ke,
                      }),
                      encrypt: function (xe, qe, ut, Ge) {
                        Ge = this.cfg.extend(Ge);
                        var mt = xe.createEncryptor(ut, Ge),
                          kt = mt.finalize(qe),
                          qt = mt.cfg;
                        return _e.create({
                          ciphertext: kt,
                          key: ut,
                          iv: qt.iv,
                          algorithm: xe,
                          mode: qt.mode,
                          padding: qt.padding,
                          blockSize: xe.blockSize,
                          formatter: Ge.format,
                        });
                      },
                      decrypt: function (xe, qe, ut, Ge) {
                        (Ge = this.cfg.extend(Ge)),
                          (qe = this._parse(qe, Ge.format));
                        var mt = xe
                          .createDecryptor(ut, Ge)
                          .finalize(qe.ciphertext);
                        return mt;
                      },
                      _parse: function (xe, qe) {
                        return typeof xe == "string" ? qe.parse(xe, this) : xe;
                      },
                    })),
                  (Me = k.kdf = {}),
                  (Le = Me.OpenSSL =
                    {
                      execute: function (xe, qe, ut, Ge) {
                        Ge || (Ge = V.random(8));
                        var mt = Z.create({
                            keySize: qe + ut,
                          }).compute(xe, Ge),
                          kt = V.create(mt.words.slice(qe), 4 * ut);
                        return (
                          (mt.sigBytes = 4 * qe),
                          _e.create({
                            key: mt,
                            iv: kt,
                            salt: Ge,
                          })
                        );
                      },
                    }),
                  (Ue = T.PasswordBasedCipher =
                    Ae.extend({
                      cfg: Ae.cfg.extend({
                        kdf: Le,
                      }),
                      encrypt: function (xe, qe, ut, Ge) {
                        var mt = (Ge = this.cfg.extend(Ge)).kdf.execute(
                          ut,
                          xe.keySize,
                          xe.ivSize
                        );
                        Ge.iv = mt.iv;
                        var kt = Ae.encrypt.call(this, xe, qe, mt.key, Ge);
                        return kt.mixIn(mt), kt;
                      },
                      decrypt: function (xe, qe, ut, Ge) {
                        (Ge = this.cfg.extend(Ge)),
                          (qe = this._parse(qe, Ge.format));
                        var mt = Ge.kdf.execute(
                          ut,
                          xe.keySize,
                          xe.ivSize,
                          qe.salt
                        );
                        Ge.iv = mt.iv;
                        var kt = Ae.decrypt.call(this, xe, qe, mt.key, Ge);
                        return kt;
                      },
                    })))
                );
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  (((d = He).mode.CFB = (function () {
                    var y = d.lib.BlockCipherMode.extend();
                    function k(T, P, V, j) {
                      var x = this._iv;
                      if (x) {
                        var K = x.slice(0);
                        this._iv = void 0;
                      } else K = this._prevBlock;
                      j.encryptBlock(K, 0);
                      for (var ae = 0; ae < V; ae++) T[P + ae] ^= K[ae];
                    }
                    return (
                      (y.Encryptor = y.extend({
                        processBlock: function (P, V) {
                          var j = this._cipher,
                            x = j.blockSize;
                          k.call(this, P, V, x, j),
                            (this._prevBlock = P.slice(V, V + x));
                        },
                      })),
                      (y.Decryptor = y.extend({
                        processBlock: function (P, V) {
                          var j = this._cipher,
                            x = j.blockSize,
                            K = P.slice(V, V + x);
                          k.call(this, P, V, x, j), (this._prevBlock = K);
                        },
                      })),
                      y
                    );
                  })()),
                  d.mode.CFB);
              }),
              at(function (t, f) {
                var d, y, k;
                t.exports =
                  (((d = He).mode.CTR =
                    ((y = d.lib.BlockCipherMode.extend()),
                    (k = y.Encryptor =
                      y.extend({
                        processBlock: function (P, V) {
                          var j = this._cipher,
                            x = j.blockSize,
                            K = this._iv,
                            ae = this._counter;
                          K &&
                            ((ae = this._counter = K.slice(0)),
                            (this._iv = void 0));
                          var Z = ae.slice(0);
                          j.encryptBlock(Z, 0),
                            (ae[x - 1] = (ae[x - 1] + 1) | 0);
                          for (var Q = 0; Q < x; Q++) P[V + Q] ^= Z[Q];
                        },
                      })),
                    (y.Decryptor = k),
                    y)),
                  d.mode.CTR);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  (((d = He).mode.CTRGladman = (function () {
                    var y = d.lib.BlockCipherMode.extend();
                    function k(P) {
                      if (((P >> 24) & 255) == 255) {
                        var V = (P >> 16) & 255,
                          j = (P >> 8) & 255,
                          x = 255 & P;
                        V === 255
                          ? ((V = 0),
                            j === 255
                              ? ((j = 0), x === 255 ? (x = 0) : ++x)
                              : ++j)
                          : ++V,
                          (P = 0),
                          (P += V << 16),
                          (P += j << 8),
                          (P += x);
                      } else P += 1 << 24;
                      return P;
                    }
                    var T = (y.Encryptor = y.extend({
                      processBlock: function (V, j) {
                        var x = this._cipher,
                          K = x.blockSize,
                          ae = this._iv,
                          Z = this._counter;
                        ae &&
                          ((Z = this._counter = ae.slice(0)),
                          (this._iv = void 0)),
                          (function (we) {
                            (we[0] = k(we[0])) === 0 && (we[1] = k(we[1]));
                          })(Z);
                        var Q = Z.slice(0);
                        x.encryptBlock(Q, 0);
                        for (var ue = 0; ue < K; ue++) V[j + ue] ^= Q[ue];
                      },
                    }));
                    return (y.Decryptor = T), y;
                  })()),
                  d.mode.CTRGladman);
              }),
              at(function (t, f) {
                var d, y, k;
                t.exports =
                  (((d = He).mode.OFB =
                    ((y = d.lib.BlockCipherMode.extend()),
                    (k = y.Encryptor =
                      y.extend({
                        processBlock: function (P, V) {
                          var j = this._cipher,
                            x = j.blockSize,
                            K = this._iv,
                            ae = this._keystream;
                          K &&
                            ((ae = this._keystream = K.slice(0)),
                            (this._iv = void 0)),
                            j.encryptBlock(ae, 0);
                          for (var Z = 0; Z < x; Z++) P[V + Z] ^= ae[Z];
                        },
                      })),
                    (y.Decryptor = k),
                    y)),
                  d.mode.OFB);
              }),
              at(function (t, f) {
                var d, y;
                t.exports =
                  (((d = He).mode.ECB =
                    (((y = d.lib.BlockCipherMode.extend()).Encryptor = y.extend(
                      {
                        processBlock: function (T, P) {
                          this._cipher.encryptBlock(T, P);
                        },
                      }
                    )),
                    (y.Decryptor = y.extend({
                      processBlock: function (T, P) {
                        this._cipher.decryptBlock(T, P);
                      },
                    })),
                    y)),
                  d.mode.ECB);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  (((d = He).pad.AnsiX923 = {
                    pad: function (k, T) {
                      var P = k.sigBytes,
                        V = 4 * T,
                        j = V - (P % V),
                        x = P + j - 1;
                      k.clamp(),
                        (k.words[x >>> 2] |= j << (24 - (x % 4) * 8)),
                        (k.sigBytes += j);
                    },
                    unpad: function (k) {
                      var T = 255 & k.words[(k.sigBytes - 1) >>> 2];
                      k.sigBytes -= T;
                    },
                  }),
                  d.pad.Ansix923);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  (((d = He).pad.Iso10126 = {
                    pad: function (k, T) {
                      var P = 4 * T,
                        V = P - (k.sigBytes % P);
                      k.concat(d.lib.WordArray.random(V - 1)).concat(
                        d.lib.WordArray.create([V << 24], 1)
                      );
                    },
                    unpad: function (k) {
                      var T = 255 & k.words[(k.sigBytes - 1) >>> 2];
                      k.sigBytes -= T;
                    },
                  }),
                  d.pad.Iso10126);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  (((d = He).pad.Iso97971 = {
                    pad: function (k, T) {
                      k.concat(d.lib.WordArray.create([2147483648], 1)),
                        d.pad.ZeroPadding.pad(k, T);
                    },
                    unpad: function (k) {
                      d.pad.ZeroPadding.unpad(k), k.sigBytes--;
                    },
                  }),
                  d.pad.Iso97971);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  (((d = He).pad.ZeroPadding = {
                    pad: function (k, T) {
                      var P = 4 * T;
                      k.clamp(), (k.sigBytes += P - (k.sigBytes % P || P));
                    },
                    unpad: function (k) {
                      for (
                        var T = k.words, P = k.sigBytes - 1;
                        !((T[P >>> 2] >>> (24 - (P % 4) * 8)) & 255);

                      )
                        P--;
                      k.sigBytes = P + 1;
                    },
                  }),
                  d.pad.ZeroPadding);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  (((d = He).pad.NoPadding = {
                    pad: function () {},
                    unpad: function () {},
                  }),
                  d.pad.NoPadding);
              }),
              at(function (t, f) {
                var d, y, k, T;
                t.exports =
                  ((k = (y = d = He).lib.CipherParams),
                  (T = y.enc.Hex),
                  (y.format.Hex = {
                    stringify: function (V) {
                      return V.ciphertext.toString(T);
                    },
                    parse: function (V) {
                      var j = T.parse(V);
                      return k.create({
                        ciphertext: j,
                      });
                    },
                  }),
                  d.format.Hex);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function () {
                    var y = d,
                      k = y.lib.BlockCipher,
                      T = y.algo,
                      P = [],
                      V = [],
                      j = [],
                      x = [],
                      K = [],
                      ae = [],
                      Z = [],
                      Q = [],
                      ue = [],
                      we = [];
                    (function () {
                      for (var fe = [], _e = 0; _e < 256; _e++)
                        fe[_e] = _e < 128 ? _e << 1 : (_e << 1) ^ 283;
                      var Se = 0,
                        ke = 0;
                      for (_e = 0; _e < 256; _e++) {
                        var Ae =
                          ke ^ (ke << 1) ^ (ke << 2) ^ (ke << 3) ^ (ke << 4);
                        (Ae = (Ae >>> 8) ^ (255 & Ae) ^ 99),
                          (P[Se] = Ae),
                          (V[Ae] = Se);
                        var Me = fe[Se],
                          Le = fe[Me],
                          Ue = fe[Le],
                          Te = (257 * fe[Ae]) ^ (16843008 * Ae);
                        (j[Se] = (Te << 24) | (Te >>> 8)),
                          (x[Se] = (Te << 16) | (Te >>> 16)),
                          (K[Se] = (Te << 8) | (Te >>> 24)),
                          (ae[Se] = Te),
                          (Te =
                            (16843009 * Ue) ^
                            (65537 * Le) ^
                            (257 * Me) ^
                            (16843008 * Se)),
                          (Z[Ae] = (Te << 24) | (Te >>> 8)),
                          (Q[Ae] = (Te << 16) | (Te >>> 16)),
                          (ue[Ae] = (Te << 8) | (Te >>> 24)),
                          (we[Ae] = Te),
                          Se
                            ? ((Se = Me ^ fe[fe[fe[Ue ^ Me]]]),
                              (ke ^= fe[fe[ke]]))
                            : (Se = ke = 1);
                      }
                    })();
                    var se = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
                      le = (T.AES = k.extend({
                        _doReset: function () {
                          if (
                            !this._nRounds ||
                            this._keyPriorReset !== this._key
                          ) {
                            for (
                              var _e = (this._keyPriorReset = this._key),
                                Se = _e.words,
                                ke = _e.sigBytes / 4,
                                Ae = 4 * ((this._nRounds = ke + 6) + 1),
                                Me = (this._keySchedule = []),
                                Le = 0;
                              Le < Ae;
                              Le++
                            )
                              if (Le < ke) Me[Le] = Se[Le];
                              else {
                                var Ue = Me[Le - 1];
                                Le % ke
                                  ? ke > 6 &&
                                    Le % ke == 4 &&
                                    (Ue =
                                      (P[Ue >>> 24] << 24) |
                                      (P[(Ue >>> 16) & 255] << 16) |
                                      (P[(Ue >>> 8) & 255] << 8) |
                                      P[255 & Ue])
                                  : ((Ue =
                                      (P[
                                        (Ue = (Ue << 8) | (Ue >>> 24)) >>> 24
                                      ] <<
                                        24) |
                                      (P[(Ue >>> 16) & 255] << 16) |
                                      (P[(Ue >>> 8) & 255] << 8) |
                                      P[255 & Ue]),
                                    (Ue ^= se[(Le / ke) | 0] << 24)),
                                  (Me[Le] = Me[Le - ke] ^ Ue);
                              }
                            for (
                              var Te = (this._invKeySchedule = []), xe = 0;
                              xe < Ae;
                              xe++
                            )
                              (Le = Ae - xe),
                                (Ue = xe % 4 ? Me[Le] : Me[Le - 4]),
                                (Te[xe] =
                                  xe < 4 || Le <= 4
                                    ? Ue
                                    : Z[P[Ue >>> 24]] ^
                                      Q[P[(Ue >>> 16) & 255]] ^
                                      ue[P[(Ue >>> 8) & 255]] ^
                                      we[P[255 & Ue]]);
                          }
                        },
                        encryptBlock: function (_e, Se) {
                          this._doCryptBlock(
                            _e,
                            Se,
                            this._keySchedule,
                            j,
                            x,
                            K,
                            ae,
                            P
                          );
                        },
                        decryptBlock: function (_e, Se) {
                          var ke = _e[Se + 1];
                          (_e[Se + 1] = _e[Se + 3]),
                            (_e[Se + 3] = ke),
                            this._doCryptBlock(
                              _e,
                              Se,
                              this._invKeySchedule,
                              Z,
                              Q,
                              ue,
                              we,
                              V
                            ),
                            (ke = _e[Se + 1]),
                            (_e[Se + 1] = _e[Se + 3]),
                            (_e[Se + 3] = ke);
                        },
                        _doCryptBlock: function (
                          _e,
                          Se,
                          ke,
                          Ae,
                          Me,
                          Le,
                          Ue,
                          Te
                        ) {
                          for (
                            var xe = this._nRounds,
                              qe = _e[Se] ^ ke[0],
                              ut = _e[Se + 1] ^ ke[1],
                              Ge = _e[Se + 2] ^ ke[2],
                              mt = _e[Se + 3] ^ ke[3],
                              kt = 4,
                              qt = 1;
                            qt < xe;
                            qt++
                          ) {
                            var xt =
                                Ae[qe >>> 24] ^
                                Me[(ut >>> 16) & 255] ^
                                Le[(Ge >>> 8) & 255] ^
                                Ue[255 & mt] ^
                                ke[kt++],
                              Rn =
                                Ae[ut >>> 24] ^
                                Me[(Ge >>> 16) & 255] ^
                                Le[(mt >>> 8) & 255] ^
                                Ue[255 & qe] ^
                                ke[kt++],
                              fn =
                                Ae[Ge >>> 24] ^
                                Me[(mt >>> 16) & 255] ^
                                Le[(qe >>> 8) & 255] ^
                                Ue[255 & ut] ^
                                ke[kt++],
                              Qn =
                                Ae[mt >>> 24] ^
                                Me[(qe >>> 16) & 255] ^
                                Le[(ut >>> 8) & 255] ^
                                Ue[255 & Ge] ^
                                ke[kt++];
                            (qe = xt), (ut = Rn), (Ge = fn), (mt = Qn);
                          }
                          (xt =
                            ((Te[qe >>> 24] << 24) |
                              (Te[(ut >>> 16) & 255] << 16) |
                              (Te[(Ge >>> 8) & 255] << 8) |
                              Te[255 & mt]) ^
                            ke[kt++]),
                            (Rn =
                              ((Te[ut >>> 24] << 24) |
                                (Te[(Ge >>> 16) & 255] << 16) |
                                (Te[(mt >>> 8) & 255] << 8) |
                                Te[255 & qe]) ^
                              ke[kt++]),
                            (fn =
                              ((Te[Ge >>> 24] << 24) |
                                (Te[(mt >>> 16) & 255] << 16) |
                                (Te[(qe >>> 8) & 255] << 8) |
                                Te[255 & ut]) ^
                              ke[kt++]),
                            (Qn =
                              ((Te[mt >>> 24] << 24) |
                                (Te[(qe >>> 16) & 255] << 16) |
                                (Te[(ut >>> 8) & 255] << 8) |
                                Te[255 & Ge]) ^
                              ke[kt++]),
                            (_e[Se] = xt),
                            (_e[Se + 1] = Rn),
                            (_e[Se + 2] = fn),
                            (_e[Se + 3] = Qn);
                        },
                        keySize: 8,
                      }));
                    y.AES = k._createHelper(le);
                  })(),
                  d.AES);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function () {
                    var y = d,
                      k = y.lib,
                      T = k.WordArray,
                      P = k.BlockCipher,
                      V = y.algo,
                      j = [
                        57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18,
                        10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36,
                        63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22,
                        14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4,
                      ],
                      x = [
                        14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12,
                        4, 26, 8, 16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55,
                        30, 40, 51, 45, 33, 48, 44, 49, 39, 56, 34, 53, 46, 42,
                        50, 36, 29, 32,
                      ],
                      K = [
                        1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27,
                        28,
                      ],
                      ae = [
                        {
                          0: 8421888,
                          268435456: 32768,
                          536870912: 8421378,
                          805306368: 2,
                          1073741824: 512,
                          1342177280: 8421890,
                          1610612736: 8389122,
                          1879048192: 8388608,
                          2147483648: 514,
                          2415919104: 8389120,
                          2684354560: 33280,
                          2952790016: 8421376,
                          3221225472: 32770,
                          3489660928: 8388610,
                          3758096384: 0,
                          4026531840: 33282,
                          134217728: 0,
                          402653184: 8421890,
                          671088640: 33282,
                          939524096: 32768,
                          1207959552: 8421888,
                          1476395008: 512,
                          1744830464: 8421378,
                          2013265920: 2,
                          2281701376: 8389120,
                          2550136832: 33280,
                          2818572288: 8421376,
                          3087007744: 8389122,
                          3355443200: 8388610,
                          3623878656: 32770,
                          3892314112: 514,
                          4160749568: 8388608,
                          1: 32768,
                          268435457: 2,
                          536870913: 8421888,
                          805306369: 8388608,
                          1073741825: 8421378,
                          1342177281: 33280,
                          1610612737: 512,
                          1879048193: 8389122,
                          2147483649: 8421890,
                          2415919105: 8421376,
                          2684354561: 8388610,
                          2952790017: 33282,
                          3221225473: 514,
                          3489660929: 8389120,
                          3758096385: 32770,
                          4026531841: 0,
                          134217729: 8421890,
                          402653185: 8421376,
                          671088641: 8388608,
                          939524097: 512,
                          1207959553: 32768,
                          1476395009: 8388610,
                          1744830465: 2,
                          2013265921: 33282,
                          2281701377: 32770,
                          2550136833: 8389122,
                          2818572289: 514,
                          3087007745: 8421888,
                          3355443201: 8389120,
                          3623878657: 0,
                          3892314113: 33280,
                          4160749569: 8421378,
                        },
                        {
                          0: 1074282512,
                          16777216: 16384,
                          33554432: 524288,
                          50331648: 1074266128,
                          67108864: 1073741840,
                          83886080: 1074282496,
                          100663296: 1073758208,
                          117440512: 16,
                          134217728: 540672,
                          150994944: 1073758224,
                          167772160: 1073741824,
                          184549376: 540688,
                          201326592: 524304,
                          218103808: 0,
                          234881024: 16400,
                          251658240: 1074266112,
                          8388608: 1073758208,
                          25165824: 540688,
                          41943040: 16,
                          58720256: 1073758224,
                          75497472: 1074282512,
                          92274688: 1073741824,
                          109051904: 524288,
                          125829120: 1074266128,
                          142606336: 524304,
                          159383552: 0,
                          176160768: 16384,
                          192937984: 1074266112,
                          209715200: 1073741840,
                          226492416: 540672,
                          243269632: 1074282496,
                          260046848: 16400,
                          268435456: 0,
                          285212672: 1074266128,
                          301989888: 1073758224,
                          318767104: 1074282496,
                          335544320: 1074266112,
                          352321536: 16,
                          369098752: 540688,
                          385875968: 16384,
                          402653184: 16400,
                          419430400: 524288,
                          436207616: 524304,
                          452984832: 1073741840,
                          469762048: 540672,
                          486539264: 1073758208,
                          503316480: 1073741824,
                          520093696: 1074282512,
                          276824064: 540688,
                          293601280: 524288,
                          310378496: 1074266112,
                          327155712: 16384,
                          343932928: 1073758208,
                          360710144: 1074282512,
                          377487360: 16,
                          394264576: 1073741824,
                          411041792: 1074282496,
                          427819008: 1073741840,
                          444596224: 1073758224,
                          461373440: 524304,
                          478150656: 0,
                          494927872: 16400,
                          511705088: 1074266128,
                          528482304: 540672,
                        },
                        {
                          0: 260,
                          1048576: 0,
                          2097152: 67109120,
                          3145728: 65796,
                          4194304: 65540,
                          5242880: 67108868,
                          6291456: 67174660,
                          7340032: 67174400,
                          8388608: 67108864,
                          9437184: 67174656,
                          10485760: 65792,
                          11534336: 67174404,
                          12582912: 67109124,
                          13631488: 65536,
                          14680064: 4,
                          15728640: 256,
                          524288: 67174656,
                          1572864: 67174404,
                          2621440: 0,
                          3670016: 67109120,
                          4718592: 67108868,
                          5767168: 65536,
                          6815744: 65540,
                          7864320: 260,
                          8912896: 4,
                          9961472: 256,
                          11010048: 67174400,
                          12058624: 65796,
                          13107200: 65792,
                          14155776: 67109124,
                          15204352: 67174660,
                          16252928: 67108864,
                          16777216: 67174656,
                          17825792: 65540,
                          18874368: 65536,
                          19922944: 67109120,
                          20971520: 256,
                          22020096: 67174660,
                          23068672: 67108868,
                          24117248: 0,
                          25165824: 67109124,
                          26214400: 67108864,
                          27262976: 4,
                          28311552: 65792,
                          29360128: 67174400,
                          30408704: 260,
                          31457280: 65796,
                          32505856: 67174404,
                          17301504: 67108864,
                          18350080: 260,
                          19398656: 67174656,
                          20447232: 0,
                          21495808: 65540,
                          22544384: 67109120,
                          23592960: 256,
                          24641536: 67174404,
                          25690112: 65536,
                          26738688: 67174660,
                          27787264: 65796,
                          28835840: 67108868,
                          29884416: 67109124,
                          30932992: 67174400,
                          31981568: 4,
                          33030144: 65792,
                        },
                        {
                          0: 2151682048,
                          65536: 2147487808,
                          131072: 4198464,
                          196608: 2151677952,
                          262144: 0,
                          327680: 4198400,
                          393216: 2147483712,
                          458752: 4194368,
                          524288: 2147483648,
                          589824: 4194304,
                          655360: 64,
                          720896: 2147487744,
                          786432: 2151678016,
                          851968: 4160,
                          917504: 4096,
                          983040: 2151682112,
                          32768: 2147487808,
                          98304: 64,
                          163840: 2151678016,
                          229376: 2147487744,
                          294912: 4198400,
                          360448: 2151682112,
                          425984: 0,
                          491520: 2151677952,
                          557056: 4096,
                          622592: 2151682048,
                          688128: 4194304,
                          753664: 4160,
                          819200: 2147483648,
                          884736: 4194368,
                          950272: 4198464,
                          1015808: 2147483712,
                          1048576: 4194368,
                          1114112: 4198400,
                          1179648: 2147483712,
                          1245184: 0,
                          1310720: 4160,
                          1376256: 2151678016,
                          1441792: 2151682048,
                          1507328: 2147487808,
                          1572864: 2151682112,
                          1638400: 2147483648,
                          1703936: 2151677952,
                          1769472: 4198464,
                          1835008: 2147487744,
                          1900544: 4194304,
                          1966080: 64,
                          2031616: 4096,
                          1081344: 2151677952,
                          1146880: 2151682112,
                          1212416: 0,
                          1277952: 4198400,
                          1343488: 4194368,
                          1409024: 2147483648,
                          1474560: 2147487808,
                          1540096: 64,
                          1605632: 2147483712,
                          1671168: 4096,
                          1736704: 2147487744,
                          1802240: 2151678016,
                          1867776: 4160,
                          1933312: 2151682048,
                          1998848: 4194304,
                          2064384: 4198464,
                        },
                        {
                          0: 128,
                          4096: 17039360,
                          8192: 262144,
                          12288: 536870912,
                          16384: 537133184,
                          20480: 16777344,
                          24576: 553648256,
                          28672: 262272,
                          32768: 16777216,
                          36864: 537133056,
                          40960: 536871040,
                          45056: 553910400,
                          49152: 553910272,
                          53248: 0,
                          57344: 17039488,
                          61440: 553648128,
                          2048: 17039488,
                          6144: 553648256,
                          10240: 128,
                          14336: 17039360,
                          18432: 262144,
                          22528: 537133184,
                          26624: 553910272,
                          30720: 536870912,
                          34816: 537133056,
                          38912: 0,
                          43008: 553910400,
                          47104: 16777344,
                          51200: 536871040,
                          55296: 553648128,
                          59392: 16777216,
                          63488: 262272,
                          65536: 262144,
                          69632: 128,
                          73728: 536870912,
                          77824: 553648256,
                          81920: 16777344,
                          86016: 553910272,
                          90112: 537133184,
                          94208: 16777216,
                          98304: 553910400,
                          102400: 553648128,
                          106496: 17039360,
                          110592: 537133056,
                          114688: 262272,
                          118784: 536871040,
                          122880: 0,
                          126976: 17039488,
                          67584: 553648256,
                          71680: 16777216,
                          75776: 17039360,
                          79872: 537133184,
                          83968: 536870912,
                          88064: 17039488,
                          92160: 128,
                          96256: 553910272,
                          100352: 262272,
                          104448: 553910400,
                          108544: 0,
                          112640: 553648128,
                          116736: 16777344,
                          120832: 262144,
                          124928: 537133056,
                          129024: 536871040,
                        },
                        {
                          0: 268435464,
                          256: 8192,
                          512: 270532608,
                          768: 270540808,
                          1024: 268443648,
                          1280: 2097152,
                          1536: 2097160,
                          1792: 268435456,
                          2048: 0,
                          2304: 268443656,
                          2560: 2105344,
                          2816: 8,
                          3072: 270532616,
                          3328: 2105352,
                          3584: 8200,
                          3840: 270540800,
                          128: 270532608,
                          384: 270540808,
                          640: 8,
                          896: 2097152,
                          1152: 2105352,
                          1408: 268435464,
                          1664: 268443648,
                          1920: 8200,
                          2176: 2097160,
                          2432: 8192,
                          2688: 268443656,
                          2944: 270532616,
                          3200: 0,
                          3456: 270540800,
                          3712: 2105344,
                          3968: 268435456,
                          4096: 268443648,
                          4352: 270532616,
                          4608: 270540808,
                          4864: 8200,
                          5120: 2097152,
                          5376: 268435456,
                          5632: 268435464,
                          5888: 2105344,
                          6144: 2105352,
                          6400: 0,
                          6656: 8,
                          6912: 270532608,
                          7168: 8192,
                          7424: 268443656,
                          7680: 270540800,
                          7936: 2097160,
                          4224: 8,
                          4480: 2105344,
                          4736: 2097152,
                          4992: 268435464,
                          5248: 268443648,
                          5504: 8200,
                          5760: 270540808,
                          6016: 270532608,
                          6272: 270540800,
                          6528: 270532616,
                          6784: 8192,
                          7040: 2105352,
                          7296: 2097160,
                          7552: 0,
                          7808: 268435456,
                          8064: 268443656,
                        },
                        {
                          0: 1048576,
                          16: 33555457,
                          32: 1024,
                          48: 1049601,
                          64: 34604033,
                          80: 0,
                          96: 1,
                          112: 34603009,
                          128: 33555456,
                          144: 1048577,
                          160: 33554433,
                          176: 34604032,
                          192: 34603008,
                          208: 1025,
                          224: 1049600,
                          240: 33554432,
                          8: 34603009,
                          24: 0,
                          40: 33555457,
                          56: 34604032,
                          72: 1048576,
                          88: 33554433,
                          104: 33554432,
                          120: 1025,
                          136: 1049601,
                          152: 33555456,
                          168: 34603008,
                          184: 1048577,
                          200: 1024,
                          216: 34604033,
                          232: 1,
                          248: 1049600,
                          256: 33554432,
                          272: 1048576,
                          288: 33555457,
                          304: 34603009,
                          320: 1048577,
                          336: 33555456,
                          352: 34604032,
                          368: 1049601,
                          384: 1025,
                          400: 34604033,
                          416: 1049600,
                          432: 1,
                          448: 0,
                          464: 34603008,
                          480: 33554433,
                          496: 1024,
                          264: 1049600,
                          280: 33555457,
                          296: 34603009,
                          312: 1,
                          328: 33554432,
                          344: 1048576,
                          360: 1025,
                          376: 34604032,
                          392: 33554433,
                          408: 34603008,
                          424: 0,
                          440: 34604033,
                          456: 1049601,
                          472: 1024,
                          488: 33555456,
                          504: 1048577,
                        },
                        {
                          0: 134219808,
                          1: 131072,
                          2: 134217728,
                          3: 32,
                          4: 131104,
                          5: 134350880,
                          6: 134350848,
                          7: 2048,
                          8: 134348800,
                          9: 134219776,
                          10: 133120,
                          11: 134348832,
                          12: 2080,
                          13: 0,
                          14: 134217760,
                          15: 133152,
                          2147483648: 2048,
                          2147483649: 134350880,
                          2147483650: 134219808,
                          2147483651: 134217728,
                          2147483652: 134348800,
                          2147483653: 133120,
                          2147483654: 133152,
                          2147483655: 32,
                          2147483656: 134217760,
                          2147483657: 2080,
                          2147483658: 131104,
                          2147483659: 134350848,
                          2147483660: 0,
                          2147483661: 134348832,
                          2147483662: 134219776,
                          2147483663: 131072,
                          16: 133152,
                          17: 134350848,
                          18: 32,
                          19: 2048,
                          20: 134219776,
                          21: 134217760,
                          22: 134348832,
                          23: 131072,
                          24: 0,
                          25: 131104,
                          26: 134348800,
                          27: 134219808,
                          28: 134350880,
                          29: 133120,
                          30: 2080,
                          31: 134217728,
                          2147483664: 131072,
                          2147483665: 2048,
                          2147483666: 134348832,
                          2147483667: 133152,
                          2147483668: 32,
                          2147483669: 134348800,
                          2147483670: 134217728,
                          2147483671: 134219808,
                          2147483672: 134350880,
                          2147483673: 134217760,
                          2147483674: 134219776,
                          2147483675: 0,
                          2147483676: 133120,
                          2147483677: 2080,
                          2147483678: 131104,
                          2147483679: 134350848,
                        },
                      ],
                      Z = [
                        4160749569, 528482304, 33030144, 2064384, 129024, 8064,
                        504, 2147483679,
                      ],
                      Q = (V.DES = P.extend({
                        _doReset: function () {
                          for (
                            var fe = this._key.words, _e = [], Se = 0;
                            Se < 56;
                            Se++
                          ) {
                            var ke = j[Se] - 1;
                            _e[Se] = (fe[ke >>> 5] >>> (31 - (ke % 32))) & 1;
                          }
                          for (
                            var Ae = (this._subKeys = []), Me = 0;
                            Me < 16;
                            Me++
                          ) {
                            var Le = (Ae[Me] = []),
                              Ue = K[Me];
                            for (Se = 0; Se < 24; Se++)
                              (Le[(Se / 6) | 0] |=
                                _e[(x[Se] - 1 + Ue) % 28] << (31 - (Se % 6))),
                                (Le[4 + ((Se / 6) | 0)] |=
                                  _e[28 + ((x[Se + 24] - 1 + Ue) % 28)] <<
                                  (31 - (Se % 6)));
                            for (
                              Le[0] = (Le[0] << 1) | (Le[0] >>> 31), Se = 1;
                              Se < 7;
                              Se++
                            )
                              Le[Se] = Le[Se] >>> (4 * (Se - 1) + 3);
                            Le[7] = (Le[7] << 5) | (Le[7] >>> 27);
                          }
                          var Te = (this._invSubKeys = []);
                          for (Se = 0; Se < 16; Se++) Te[Se] = Ae[15 - Se];
                        },
                        encryptBlock: function (fe, _e) {
                          this._doCryptBlock(fe, _e, this._subKeys);
                        },
                        decryptBlock: function (fe, _e) {
                          this._doCryptBlock(fe, _e, this._invSubKeys);
                        },
                        _doCryptBlock: function (fe, _e, Se) {
                          (this._lBlock = fe[_e]),
                            (this._rBlock = fe[_e + 1]),
                            ue.call(this, 4, 252645135),
                            ue.call(this, 16, 65535),
                            we.call(this, 2, 858993459),
                            we.call(this, 8, 16711935),
                            ue.call(this, 1, 1431655765);
                          for (var ke = 0; ke < 16; ke++) {
                            for (
                              var Ae = Se[ke],
                                Me = this._lBlock,
                                Le = this._rBlock,
                                Ue = 0,
                                Te = 0;
                              Te < 8;
                              Te++
                            )
                              Ue |= ae[Te][((Le ^ Ae[Te]) & Z[Te]) >>> 0];
                            (this._lBlock = Le), (this._rBlock = Me ^ Ue);
                          }
                          var xe = this._lBlock;
                          (this._lBlock = this._rBlock),
                            (this._rBlock = xe),
                            ue.call(this, 1, 1431655765),
                            we.call(this, 8, 16711935),
                            we.call(this, 2, 858993459),
                            ue.call(this, 16, 65535),
                            ue.call(this, 4, 252645135),
                            (fe[_e] = this._lBlock),
                            (fe[_e + 1] = this._rBlock);
                        },
                        keySize: 2,
                        ivSize: 2,
                        blockSize: 2,
                      }));
                    function ue(le, fe) {
                      var _e = ((this._lBlock >>> le) ^ this._rBlock) & fe;
                      (this._rBlock ^= _e), (this._lBlock ^= _e << le);
                    }
                    function we(le, fe) {
                      var _e = ((this._rBlock >>> le) ^ this._lBlock) & fe;
                      (this._lBlock ^= _e), (this._rBlock ^= _e << le);
                    }
                    y.DES = P._createHelper(Q);
                    var se = (V.TripleDES = P.extend({
                      _doReset: function () {
                        var fe = this._key.words;
                        (this._des1 = Q.createEncryptor(
                          T.create(fe.slice(0, 2))
                        )),
                          (this._des2 = Q.createEncryptor(
                            T.create(fe.slice(2, 4))
                          )),
                          (this._des3 = Q.createEncryptor(
                            T.create(fe.slice(4, 6))
                          ));
                      },
                      encryptBlock: function (fe, _e) {
                        this._des1.encryptBlock(fe, _e),
                          this._des2.decryptBlock(fe, _e),
                          this._des3.encryptBlock(fe, _e);
                      },
                      decryptBlock: function (fe, _e) {
                        this._des3.decryptBlock(fe, _e),
                          this._des2.encryptBlock(fe, _e),
                          this._des1.decryptBlock(fe, _e);
                      },
                      keySize: 6,
                      ivSize: 2,
                      blockSize: 2,
                    }));
                    y.TripleDES = P._createHelper(se);
                  })(),
                  d.TripleDES);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function () {
                    var y = d,
                      k = y.lib.StreamCipher,
                      T = y.algo,
                      P = (T.RC4 = k.extend({
                        _doReset: function () {
                          for (
                            var K = this._key,
                              ae = K.words,
                              Z = K.sigBytes,
                              Q = (this._S = []),
                              ue = 0;
                            ue < 256;
                            ue++
                          )
                            Q[ue] = ue;
                          ue = 0;
                          for (var we = 0; ue < 256; ue++) {
                            var se = ue % Z,
                              le = (ae[se >>> 2] >>> (24 - (se % 4) * 8)) & 255;
                            we = (we + Q[ue] + le) % 256;
                            var fe = Q[ue];
                            (Q[ue] = Q[we]), (Q[we] = fe);
                          }
                          this._i = this._j = 0;
                        },
                        _doProcessBlock: function (K, ae) {
                          K[ae] ^= V.call(this);
                        },
                        keySize: 8,
                        ivSize: 0,
                      }));
                    function V() {
                      for (
                        var x = this._S,
                          K = this._i,
                          ae = this._j,
                          Z = 0,
                          Q = 0;
                        Q < 4;
                        Q++
                      ) {
                        ae = (ae + x[(K = (K + 1) % 256)]) % 256;
                        var ue = x[K];
                        (x[K] = x[ae]),
                          (x[ae] = ue),
                          (Z |= x[(x[K] + x[ae]) % 256] << (24 - 8 * Q));
                      }
                      return (this._i = K), (this._j = ae), Z;
                    }
                    y.RC4 = k._createHelper(P);
                    var j = (T.RC4Drop = P.extend({
                      cfg: P.cfg.extend({
                        drop: 192,
                      }),
                      _doReset: function () {
                        P._doReset.call(this);
                        for (var K = this.cfg.drop; K > 0; K--) V.call(this);
                      },
                    }));
                    y.RC4Drop = k._createHelper(j);
                  })(),
                  d.RC4);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function () {
                    var y = d,
                      k = y.lib.StreamCipher,
                      T = y.algo,
                      P = [],
                      V = [],
                      j = [],
                      x = (T.Rabbit = k.extend({
                        _doReset: function () {
                          for (
                            var Z = this._key.words, Q = this.cfg.iv, ue = 0;
                            ue < 4;
                            ue++
                          )
                            Z[ue] =
                              (16711935 & ((Z[ue] << 8) | (Z[ue] >>> 24))) |
                              (4278255360 & ((Z[ue] << 24) | (Z[ue] >>> 8)));
                          var we = (this._X = [
                              Z[0],
                              (Z[3] << 16) | (Z[2] >>> 16),
                              Z[1],
                              (Z[0] << 16) | (Z[3] >>> 16),
                              Z[2],
                              (Z[1] << 16) | (Z[0] >>> 16),
                              Z[3],
                              (Z[2] << 16) | (Z[1] >>> 16),
                            ]),
                            se = (this._C = [
                              (Z[2] << 16) | (Z[2] >>> 16),
                              (4294901760 & Z[0]) | (65535 & Z[1]),
                              (Z[3] << 16) | (Z[3] >>> 16),
                              (4294901760 & Z[1]) | (65535 & Z[2]),
                              (Z[0] << 16) | (Z[0] >>> 16),
                              (4294901760 & Z[2]) | (65535 & Z[3]),
                              (Z[1] << 16) | (Z[1] >>> 16),
                              (4294901760 & Z[3]) | (65535 & Z[0]),
                            ]);
                          for (this._b = 0, ue = 0; ue < 4; ue++) K.call(this);
                          for (ue = 0; ue < 8; ue++) se[ue] ^= we[(ue + 4) & 7];
                          if (Q) {
                            var le = Q.words,
                              fe = le[0],
                              _e = le[1],
                              Se =
                                (16711935 & ((fe << 8) | (fe >>> 24))) |
                                (4278255360 & ((fe << 24) | (fe >>> 8))),
                              ke =
                                (16711935 & ((_e << 8) | (_e >>> 24))) |
                                (4278255360 & ((_e << 24) | (_e >>> 8))),
                              Ae = (Se >>> 16) | (4294901760 & ke),
                              Me = (ke << 16) | (65535 & Se);
                            for (
                              se[0] ^= Se,
                                se[1] ^= Ae,
                                se[2] ^= ke,
                                se[3] ^= Me,
                                se[4] ^= Se,
                                se[5] ^= Ae,
                                se[6] ^= ke,
                                se[7] ^= Me,
                                ue = 0;
                              ue < 4;
                              ue++
                            )
                              K.call(this);
                          }
                        },
                        _doProcessBlock: function (Z, Q) {
                          var ue = this._X;
                          K.call(this),
                            (P[0] = ue[0] ^ (ue[5] >>> 16) ^ (ue[3] << 16)),
                            (P[1] = ue[2] ^ (ue[7] >>> 16) ^ (ue[5] << 16)),
                            (P[2] = ue[4] ^ (ue[1] >>> 16) ^ (ue[7] << 16)),
                            (P[3] = ue[6] ^ (ue[3] >>> 16) ^ (ue[1] << 16));
                          for (var we = 0; we < 4; we++)
                            (P[we] =
                              (16711935 & ((P[we] << 8) | (P[we] >>> 24))) |
                              (4278255360 & ((P[we] << 24) | (P[we] >>> 8)))),
                              (Z[Q + we] ^= P[we]);
                        },
                        blockSize: 4,
                        ivSize: 2,
                      }));
                    function K() {
                      for (var ae = this._X, Z = this._C, Q = 0; Q < 8; Q++)
                        V[Q] = Z[Q];
                      for (
                        Z[0] = (Z[0] + 1295307597 + this._b) | 0,
                          Z[1] =
                            (Z[1] +
                              3545052371 +
                              (Z[0] >>> 0 < V[0] >>> 0 ? 1 : 0)) |
                            0,
                          Z[2] =
                            (Z[2] +
                              886263092 +
                              (Z[1] >>> 0 < V[1] >>> 0 ? 1 : 0)) |
                            0,
                          Z[3] =
                            (Z[3] +
                              1295307597 +
                              (Z[2] >>> 0 < V[2] >>> 0 ? 1 : 0)) |
                            0,
                          Z[4] =
                            (Z[4] +
                              3545052371 +
                              (Z[3] >>> 0 < V[3] >>> 0 ? 1 : 0)) |
                            0,
                          Z[5] =
                            (Z[5] +
                              886263092 +
                              (Z[4] >>> 0 < V[4] >>> 0 ? 1 : 0)) |
                            0,
                          Z[6] =
                            (Z[6] +
                              1295307597 +
                              (Z[5] >>> 0 < V[5] >>> 0 ? 1 : 0)) |
                            0,
                          Z[7] =
                            (Z[7] +
                              3545052371 +
                              (Z[6] >>> 0 < V[6] >>> 0 ? 1 : 0)) |
                            0,
                          this._b = Z[7] >>> 0 < V[7] >>> 0 ? 1 : 0,
                          Q = 0;
                        Q < 8;
                        Q++
                      ) {
                        var ue = ae[Q] + Z[Q],
                          we = 65535 & ue,
                          se = ue >>> 16,
                          le =
                            ((((we * we) >>> 17) + we * se) >>> 15) + se * se,
                          fe =
                            (((4294901760 & ue) * ue) | 0) +
                            (((65535 & ue) * ue) | 0);
                        j[Q] = le ^ fe;
                      }
                      (ae[0] =
                        (j[0] +
                          ((j[7] << 16) | (j[7] >>> 16)) +
                          ((j[6] << 16) | (j[6] >>> 16))) |
                        0),
                        (ae[1] =
                          (j[1] + ((j[0] << 8) | (j[0] >>> 24)) + j[7]) | 0),
                        (ae[2] =
                          (j[2] +
                            ((j[1] << 16) | (j[1] >>> 16)) +
                            ((j[0] << 16) | (j[0] >>> 16))) |
                          0),
                        (ae[3] =
                          (j[3] + ((j[2] << 8) | (j[2] >>> 24)) + j[1]) | 0),
                        (ae[4] =
                          (j[4] +
                            ((j[3] << 16) | (j[3] >>> 16)) +
                            ((j[2] << 16) | (j[2] >>> 16))) |
                          0),
                        (ae[5] =
                          (j[5] + ((j[4] << 8) | (j[4] >>> 24)) + j[3]) | 0),
                        (ae[6] =
                          (j[6] +
                            ((j[5] << 16) | (j[5] >>> 16)) +
                            ((j[4] << 16) | (j[4] >>> 16))) |
                          0),
                        (ae[7] =
                          (j[7] + ((j[6] << 8) | (j[6] >>> 24)) + j[5]) | 0);
                    }
                    y.Rabbit = k._createHelper(x);
                  })(),
                  d.Rabbit);
              }),
              at(function (t, f) {
                var d;
                t.exports =
                  ((d = He),
                  (function () {
                    var y = d,
                      k = y.lib.StreamCipher,
                      T = y.algo,
                      P = [],
                      V = [],
                      j = [],
                      x = (T.RabbitLegacy = k.extend({
                        _doReset: function () {
                          var Z = this._key.words,
                            Q = this.cfg.iv,
                            ue = (this._X = [
                              Z[0],
                              (Z[3] << 16) | (Z[2] >>> 16),
                              Z[1],
                              (Z[0] << 16) | (Z[3] >>> 16),
                              Z[2],
                              (Z[1] << 16) | (Z[0] >>> 16),
                              Z[3],
                              (Z[2] << 16) | (Z[1] >>> 16),
                            ]),
                            we = (this._C = [
                              (Z[2] << 16) | (Z[2] >>> 16),
                              (4294901760 & Z[0]) | (65535 & Z[1]),
                              (Z[3] << 16) | (Z[3] >>> 16),
                              (4294901760 & Z[1]) | (65535 & Z[2]),
                              (Z[0] << 16) | (Z[0] >>> 16),
                              (4294901760 & Z[2]) | (65535 & Z[3]),
                              (Z[1] << 16) | (Z[1] >>> 16),
                              (4294901760 & Z[3]) | (65535 & Z[0]),
                            ]);
                          this._b = 0;
                          for (var se = 0; se < 4; se++) K.call(this);
                          for (se = 0; se < 8; se++) we[se] ^= ue[(se + 4) & 7];
                          if (Q) {
                            var le = Q.words,
                              fe = le[0],
                              _e = le[1],
                              Se =
                                (16711935 & ((fe << 8) | (fe >>> 24))) |
                                (4278255360 & ((fe << 24) | (fe >>> 8))),
                              ke =
                                (16711935 & ((_e << 8) | (_e >>> 24))) |
                                (4278255360 & ((_e << 24) | (_e >>> 8))),
                              Ae = (Se >>> 16) | (4294901760 & ke),
                              Me = (ke << 16) | (65535 & Se);
                            for (
                              we[0] ^= Se,
                                we[1] ^= Ae,
                                we[2] ^= ke,
                                we[3] ^= Me,
                                we[4] ^= Se,
                                we[5] ^= Ae,
                                we[6] ^= ke,
                                we[7] ^= Me,
                                se = 0;
                              se < 4;
                              se++
                            )
                              K.call(this);
                          }
                        },
                        _doProcessBlock: function (Z, Q) {
                          var ue = this._X;
                          K.call(this),
                            (P[0] = ue[0] ^ (ue[5] >>> 16) ^ (ue[3] << 16)),
                            (P[1] = ue[2] ^ (ue[7] >>> 16) ^ (ue[5] << 16)),
                            (P[2] = ue[4] ^ (ue[1] >>> 16) ^ (ue[7] << 16)),
                            (P[3] = ue[6] ^ (ue[3] >>> 16) ^ (ue[1] << 16));
                          for (var we = 0; we < 4; we++)
                            (P[we] =
                              (16711935 & ((P[we] << 8) | (P[we] >>> 24))) |
                              (4278255360 & ((P[we] << 24) | (P[we] >>> 8)))),
                              (Z[Q + we] ^= P[we]);
                        },
                        blockSize: 4,
                        ivSize: 2,
                      }));
                    function K() {
                      for (var ae = this._X, Z = this._C, Q = 0; Q < 8; Q++)
                        V[Q] = Z[Q];
                      for (
                        Z[0] = (Z[0] + 1295307597 + this._b) | 0,
                          Z[1] =
                            (Z[1] +
                              3545052371 +
                              (Z[0] >>> 0 < V[0] >>> 0 ? 1 : 0)) |
                            0,
                          Z[2] =
                            (Z[2] +
                              886263092 +
                              (Z[1] >>> 0 < V[1] >>> 0 ? 1 : 0)) |
                            0,
                          Z[3] =
                            (Z[3] +
                              1295307597 +
                              (Z[2] >>> 0 < V[2] >>> 0 ? 1 : 0)) |
                            0,
                          Z[4] =
                            (Z[4] +
                              3545052371 +
                              (Z[3] >>> 0 < V[3] >>> 0 ? 1 : 0)) |
                            0,
                          Z[5] =
                            (Z[5] +
                              886263092 +
                              (Z[4] >>> 0 < V[4] >>> 0 ? 1 : 0)) |
                            0,
                          Z[6] =
                            (Z[6] +
                              1295307597 +
                              (Z[5] >>> 0 < V[5] >>> 0 ? 1 : 0)) |
                            0,
                          Z[7] =
                            (Z[7] +
                              3545052371 +
                              (Z[6] >>> 0 < V[6] >>> 0 ? 1 : 0)) |
                            0,
                          this._b = Z[7] >>> 0 < V[7] >>> 0 ? 1 : 0,
                          Q = 0;
                        Q < 8;
                        Q++
                      ) {
                        var ue = ae[Q] + Z[Q],
                          we = 65535 & ue,
                          se = ue >>> 16,
                          le =
                            ((((we * we) >>> 17) + we * se) >>> 15) + se * se,
                          fe =
                            (((4294901760 & ue) * ue) | 0) +
                            (((65535 & ue) * ue) | 0);
                        j[Q] = le ^ fe;
                      }
                      (ae[0] =
                        (j[0] +
                          ((j[7] << 16) | (j[7] >>> 16)) +
                          ((j[6] << 16) | (j[6] >>> 16))) |
                        0),
                        (ae[1] =
                          (j[1] + ((j[0] << 8) | (j[0] >>> 24)) + j[7]) | 0),
                        (ae[2] =
                          (j[2] +
                            ((j[1] << 16) | (j[1] >>> 16)) +
                            ((j[0] << 16) | (j[0] >>> 16))) |
                          0),
                        (ae[3] =
                          (j[3] + ((j[2] << 8) | (j[2] >>> 24)) + j[1]) | 0),
                        (ae[4] =
                          (j[4] +
                            ((j[3] << 16) | (j[3] >>> 16)) +
                            ((j[2] << 16) | (j[2] >>> 16))) |
                          0),
                        (ae[5] =
                          (j[5] + ((j[4] << 8) | (j[4] >>> 24)) + j[3]) | 0),
                        (ae[6] =
                          (j[6] +
                            ((j[5] << 16) | (j[5] >>> 16)) +
                            ((j[4] << 16) | (j[4] >>> 16))) |
                          0),
                        (ae[7] =
                          (j[7] + ((j[6] << 8) | (j[6] >>> 24)) + j[5]) | 0);
                    }
                    y.RabbitLegacy = k._createHelper(x);
                  })(),
                  d.RabbitLegacy);
              }),
              at(function (t, f) {
                t.exports = He;
              }));
          function pn() {
            throw new Error("setTimeout has not been defined");
          }
          function rn() {
            throw new Error("clearTimeout has not been defined");
          }
          var tn = pn,
            St = rn;
          function cn(t) {
            if (tn === setTimeout) return setTimeout(t, 0);
            if ((tn === pn || !tn) && setTimeout)
              return (tn = setTimeout), setTimeout(t, 0);
            try {
              return tn(t, 0);
            } catch (f) {
              try {
                return tn.call(null, t, 0);
              } catch (d) {
                return tn.call(this, t, 0);
              }
            }
          }
          typeof o.setTimeout == "function" && (tn = setTimeout),
            typeof o.clearTimeout == "function" && (St = clearTimeout);
          var Gt,
            $t = [],
            Dt = !1,
            yn = -1;
          function Xt() {
            Dt &&
              Gt &&
              ((Dt = !1),
              Gt.length ? ($t = Gt.concat($t)) : (yn = -1),
              $t.length && on());
          }
          function on() {
            if (!Dt) {
              var t = cn(Xt);
              Dt = !0;
              for (var f = $t.length; f; ) {
                for (Gt = $t, $t = []; ++yn < f; ) Gt && Gt[yn].run();
                (yn = -1), (f = $t.length);
              }
              (Gt = null),
                (Dt = !1),
                (function (d) {
                  if (St === clearTimeout) return clearTimeout(d);
                  if ((St === rn || !St) && clearTimeout)
                    return (St = clearTimeout), clearTimeout(d);
                  try {
                    St(d);
                  } catch (y) {
                    try {
                      return St.call(null, d);
                    } catch (k) {
                      return St.call(this, d);
                    }
                  }
                })(t);
            }
          }
          function Zt(t) {
            var f = new Array(arguments.length - 1);
            if (arguments.length > 1)
              for (var d = 1; d < arguments.length; d++)
                f[d - 1] = arguments[d];
            $t.push(new wn(t, f)), $t.length !== 1 || Dt || cn(on);
          }
          function wn(t, f) {
            (this.fun = t), (this.array = f);
          }
          wn.prototype.run = function () {
            this.fun.apply(null, this.array);
          };
          var mn = o.performance || {};
          mn.now || mn.mozNow || mn.msNow || mn.oNow || mn.webkitNow;
          function Ft() {}
          function At() {
            At.init.call(this);
          }
          function Un(t) {
            return t._maxListeners === void 0
              ? At.defaultMaxListeners
              : t._maxListeners;
          }
          function nn(t, f, d) {
            if (f) t.call(d);
            else
              for (var y = t.length, k = Ua(t, y), T = 0; T < y; ++T)
                k[T].call(d);
          }
          function _i(t, f, d, y) {
            if (f) t.call(d, y);
            else
              for (var k = t.length, T = Ua(t, k), P = 0; P < k; ++P)
                T[P].call(d, y);
          }
          function Or(t, f, d, y, k) {
            if (f) t.call(d, y, k);
            else
              for (var T = t.length, P = Ua(t, T), V = 0; V < T; ++V)
                P[V].call(d, y, k);
          }
          function la(t, f, d, y, k, T) {
            if (f) t.call(d, y, k, T);
            else
              for (var P = t.length, V = Ua(t, P), j = 0; j < P; ++j)
                V[j].call(d, y, k, T);
          }
          function Yn(t, f, d, y) {
            if (f) t.apply(d, y);
            else
              for (var k = t.length, T = Ua(t, k), P = 0; P < k; ++P)
                T[P].apply(d, y);
          }
          function nr(t, f, d, y) {
            var k, T, P, V;
            if (typeof d != "function")
              throw new TypeError('"listener" argument must be a function');
            if (
              ((T = t._events)
                ? (T.newListener &&
                    (t.emit("newListener", f, d.listener ? d.listener : d),
                    (T = t._events)),
                  (P = T[f]))
                : ((T = t._events = new Ft()), (t._eventsCount = 0)),
              P)
            ) {
              if (
                (typeof P == "function"
                  ? (P = T[f] = y ? [d, P] : [P, d])
                  : y
                  ? P.unshift(d)
                  : P.push(d),
                !P.warned && (k = Un(t)) && k > 0 && P.length > k)
              ) {
                P.warned = !0;
                var j = new Error(
                  "Possible EventEmitter memory leak detected. " +
                    P.length +
                    " " +
                    f +
                    " listeners added. Use emitter.setMaxListeners() to increase limit"
                );
                (j.name = "MaxListenersExceededWarning"),
                  (j.emitter = t),
                  (j.type = f),
                  (j.count = P.length),
                  (V = j),
                  typeof console.warn == "function"
                    ? console.warn(V)
                    : console.log(V);
              }
            } else (P = T[f] = d), ++t._eventsCount;
            return t;
          }
          function zn(t, f, d) {
            var y = !1;
            function k() {
              t.removeListener(f, k), y || ((y = !0), d.apply(t, arguments));
            }
            return (k.listener = d), k;
          }
          function ii(t) {
            var f = this._events;
            if (f) {
              var d = f[t];
              if (typeof d == "function") return 1;
              if (d) return d.length;
            }
            return 0;
          }
          function Ua(t, f) {
            for (var d = new Array(f); f--; ) d[f] = t[f];
            return d;
          }
          (Ft.prototype = /* @__PURE__ */ Object.create(null)),
            (At.EventEmitter = At),
            (At.usingDomains = !1),
            (At.prototype.domain = void 0),
            (At.prototype._events = void 0),
            (At.prototype._maxListeners = void 0),
            (At.defaultMaxListeners = 10),
            (At.init = function () {
              (this.domain = null),
                At.usingDomains && (void 0).active && (void 0).Domain,
                (this._events &&
                  this._events !== Object.getPrototypeOf(this)._events) ||
                  ((this._events = new Ft()), (this._eventsCount = 0)),
                (this._maxListeners = this._maxListeners || void 0);
            }),
            (At.prototype.setMaxListeners = function (t) {
              if (typeof t != "number" || t < 0 || isNaN(t))
                throw new TypeError('"n" argument must be a positive number');
              return (this._maxListeners = t), this;
            }),
            (At.prototype.getMaxListeners = function () {
              return Un(this);
            }),
            (At.prototype.emit = function (t) {
              var f,
                d,
                y,
                k,
                T,
                P,
                V,
                j = t === "error";
              if ((P = this._events)) j = j && P.error == null;
              else if (!j) return !1;
              if (((V = this.domain), j)) {
                if (((f = arguments[1]), !V)) {
                  if (f instanceof Error) throw f;
                  var x = new Error(
                    'Uncaught, unspecified "error" event. (' + f + ")"
                  );
                  throw ((x.context = f), x);
                }
                return (
                  f || (f = new Error('Uncaught, unspecified "error" event')),
                  (f.domainEmitter = this),
                  (f.domain = V),
                  (f.domainThrown = !1),
                  V.emit("error", f),
                  !1
                );
              }
              if (!(d = P[t])) return !1;
              var K = typeof d == "function";
              switch ((y = arguments.length)) {
                case 1:
                  nn(d, K, this);
                  break;
                case 2:
                  _i(d, K, this, arguments[1]);
                  break;
                case 3:
                  Or(d, K, this, arguments[1], arguments[2]);
                  break;
                case 4:
                  la(d, K, this, arguments[1], arguments[2], arguments[3]);
                  break;
                default:
                  for (k = new Array(y - 1), T = 1; T < y; T++)
                    k[T - 1] = arguments[T];
                  Yn(d, K, this, k);
              }
              return !0;
            }),
            (At.prototype.addListener = function (t, f) {
              return nr(this, t, f, !1);
            }),
            (At.prototype.on = At.prototype.addListener),
            (At.prototype.prependListener = function (t, f) {
              return nr(this, t, f, !0);
            }),
            (At.prototype.once = function (t, f) {
              if (typeof f != "function")
                throw new TypeError('"listener" argument must be a function');
              return this.on(t, zn(this, t, f)), this;
            }),
            (At.prototype.prependOnceListener = function (t, f) {
              if (typeof f != "function")
                throw new TypeError('"listener" argument must be a function');
              return this.prependListener(t, zn(this, t, f)), this;
            }),
            (At.prototype.removeListener = function (t, f) {
              var d, y, k, T, P;
              if (typeof f != "function")
                throw new TypeError('"listener" argument must be a function');
              if (!(y = this._events)) return this;
              if (!(d = y[t])) return this;
              if (d === f || (d.listener && d.listener === f))
                --this._eventsCount == 0
                  ? (this._events = new Ft())
                  : (delete y[t],
                    y.removeListener &&
                      this.emit("removeListener", t, d.listener || f));
              else if (typeof d != "function") {
                for (k = -1, T = d.length; T-- > 0; )
                  if (d[T] === f || (d[T].listener && d[T].listener === f)) {
                    (P = d[T].listener), (k = T);
                    break;
                  }
                if (k < 0) return this;
                if (d.length === 1) {
                  if (((d[0] = void 0), --this._eventsCount == 0))
                    return (this._events = new Ft()), this;
                  delete y[t];
                } else
                  (function (V, j) {
                    for (
                      var x = j, K = x + 1, ae = V.length;
                      K < ae;
                      x += 1, K += 1
                    )
                      V[x] = V[K];
                    V.pop();
                  })(d, k);
                y.removeListener && this.emit("removeListener", t, P || f);
              }
              return this;
            }),
            (At.prototype.removeAllListeners = function (t) {
              var f, d;
              if (!(d = this._events)) return this;
              if (!d.removeListener)
                return (
                  arguments.length === 0
                    ? ((this._events = new Ft()), (this._eventsCount = 0))
                    : d[t] &&
                      (--this._eventsCount == 0
                        ? (this._events = new Ft())
                        : delete d[t]),
                  this
                );
              if (arguments.length === 0) {
                for (var y, k = Object.keys(d), T = 0; T < k.length; ++T)
                  (y = k[T]) !== "removeListener" && this.removeAllListeners(y);
                return (
                  this.removeAllListeners("removeListener"),
                  (this._events = new Ft()),
                  (this._eventsCount = 0),
                  this
                );
              }
              if (typeof (f = d[t]) == "function") this.removeListener(t, f);
              else if (f)
                do this.removeListener(t, f[f.length - 1]);
                while (f[0]);
              return this;
            }),
            (At.prototype.listeners = function (t) {
              var f,
                d = this._events;
              return d && (f = d[t])
                ? typeof f == "function"
                  ? [f.listener || f]
                  : (function (y) {
                      for (
                        var k = new Array(y.length), T = 0;
                        T < k.length;
                        ++T
                      )
                        k[T] = y[T].listener || y[T];
                      return k;
                    })(f)
                : [];
            }),
            (At.listenerCount = function (t, f) {
              return typeof t.listenerCount == "function"
                ? t.listenerCount(f)
                : ii.call(t, f);
            }),
            (At.prototype.listenerCount = ii),
            (At.prototype.eventNames = function () {
              return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];
            });
          var wr =
              typeof Object.create == "function"
                ? function (t, f) {
                    (t.super_ = f),
                      (t.prototype = Object.create(f.prototype, {
                        constructor: {
                          value: t,
                          enumerable: !1,
                          writable: !0,
                          configurable: !0,
                        },
                      }));
                  }
                : function (t, f) {
                    t.super_ = f;
                    var d = function () {};
                    (d.prototype = f.prototype),
                      (t.prototype = new d()),
                      (t.prototype.constructor = t);
                  },
            Kh = /%[sdj%]/g;
          function Jh(t) {
            if (!Pl(t)) {
              for (var f = [], d = 0; d < arguments.length; d++)
                f.push(ha(arguments[d]));
              return f.join(" ");
            }
            d = 1;
            for (
              var y = arguments,
                k = y.length,
                T = String(t).replace(Kh, function (V) {
                  if (V === "%%") return "%";
                  if (d >= k) return V;
                  switch (V) {
                    case "%s":
                      return String(y[d++]);
                    case "%d":
                      return Number(y[d++]);
                    case "%j":
                      try {
                        return JSON.stringify(y[d++]);
                      } catch (j) {
                        return "[Circular]";
                      }
                    default:
                      return V;
                  }
                }),
                P = y[d];
              d < k;
              P = y[++d]
            )
              Io(P) || !ks(P) ? (T += " " + P) : (T += " " + ha(P));
            return T;
          }
          function Al(t, f) {
            if (Pr(o.process))
              return function () {
                return Al(t, f).apply(this, arguments);
              };
            var d = !1;
            return function () {
              return (
                d || (console.error(f), (d = !0)), t.apply(this, arguments)
              );
            };
          }
          var da,
            ws = {};
          function ha(t, f) {
            var d = {
              seen: [],
              stylize: Yh,
            };
            return (
              arguments.length >= 3 && (d.depth = arguments[2]),
              arguments.length >= 4 && (d.colors = arguments[3]),
              Zh(f)
                ? (d.showHidden = f)
                : f &&
                  (function (y, k) {
                    if (!k || !ks(k)) return y;
                    for (var T = Object.keys(k), P = T.length; P--; )
                      y[T[P]] = k[T[P]];
                  })(d, f),
              Pr(d.showHidden) && (d.showHidden = !1),
              Pr(d.depth) && (d.depth = 2),
              Pr(d.colors) && (d.colors = !1),
              Pr(d.customInspect) && (d.customInspect = !0),
              d.colors && (d.stylize = $h),
              Uu(d, t, d.depth)
            );
          }
          function $h(t, f) {
            var d = ha.styles[f];
            return d
              ? "\x1B[" +
                  ha.colors[d][0] +
                  "m" +
                  t +
                  "\x1B[" +
                  ha.colors[d][1] +
                  "m"
              : t;
          }
          function Yh(t, f) {
            return t;
          }
          function Uu(t, f, d) {
            if (
              t.customInspect &&
              f &&
              Nl(f.inspect) &&
              f.inspect !== ha &&
              (!f.constructor || f.constructor.prototype !== f)
            ) {
              var y = f.inspect(d, t);
              return Pl(y) || (y = Uu(t, y, d)), y;
            }
            var k = (function (Q, ue) {
              if (Pr(ue)) return Q.stylize("undefined", "undefined");
              if (Pl(ue)) {
                var we =
                  "'" +
                  JSON.stringify(ue)
                    .replace(/^"|"$/g, "")
                    .replace(/'/g, "\\'")
                    .replace(/\\"/g, '"') +
                  "'";
                return Q.stylize(we, "string");
              }
              if (((se = ue), typeof se == "number"))
                return Q.stylize("" + ue, "number");
              var se;
              if (Zh(ue)) return Q.stylize("" + ue, "boolean");
              if (Io(ue)) return Q.stylize("null", "null");
            })(t, f);
            if (k) return k;
            var T = Object.keys(f),
              P = (function (Q) {
                var ue = {};
                return (
                  Q.forEach(function (we, se) {
                    ue[we] = !0;
                  }),
                  ue
                );
              })(T);
            if (
              (t.showHidden && (T = Object.getOwnPropertyNames(f)),
              Dr(f) &&
                (T.indexOf("message") >= 0 || T.indexOf("description") >= 0))
            )
              return xl(f);
            if (T.length === 0) {
              if (Nl(f)) {
                var V = f.name ? ": " + f.name : "";
                return t.stylize("[Function" + V + "]", "special");
              }
              if (Dl(f))
                return t.stylize(RegExp.prototype.toString.call(f), "regexp");
              if (Qh(f))
                return t.stylize(Date.prototype.toString.call(f), "date");
              if (Dr(f)) return xl(f);
            }
            var j,
              x,
              K = "",
              ae = !1,
              Z = ["{", "}"];
            return (
              (j = f),
              Array.isArray(j) && ((ae = !0), (Z = ["[", "]"])),
              Nl(f) && (K = " [Function" + (f.name ? ": " + f.name : "") + "]"),
              Dl(f) && (K = " " + RegExp.prototype.toString.call(f)),
              Qh(f) && (K = " " + Date.prototype.toUTCString.call(f)),
              Dr(f) && (K = " " + xl(f)),
              T.length !== 0 || (ae && f.length != 0)
                ? d < 0
                  ? Dl(f)
                    ? t.stylize(RegExp.prototype.toString.call(f), "regexp")
                    : t.stylize("[Object]", "special")
                  : (t.seen.push(f),
                    (x = ae
                      ? (function (Q, ue, we, se, le) {
                          for (
                            var fe = [], _e = 0, Se = ue.length;
                            _e < Se;
                            ++_e
                          )
                            Va(ue, String(_e))
                              ? fe.push(Ol(Q, ue, we, se, String(_e), !0))
                              : fe.push("");
                          return (
                            le.forEach(function (ke) {
                              ke.match(/^\d+$/) ||
                                fe.push(Ol(Q, ue, we, se, ke, !0));
                            }),
                            fe
                          );
                        })(t, f, d, P, T)
                      : T.map(function (Q) {
                          return Ol(t, f, d, P, Q, ae);
                        })),
                    t.seen.pop(),
                    (function (Q, ue, we) {
                      return Q.reduce(function (se, le) {
                        return (
                          le.indexOf(`
`),
                          se + le.replace(/\u001b\[\d\d?m/g, "").length + 1
                        );
                      }, 0) > 60
                        ? we[0] +
                            (ue === ""
                              ? ""
                              : ue +
                                `
 `) +
                            " " +
                            Q.join(`,
  `) +
                            " " +
                            we[1]
                        : we[0] + ue + " " + Q.join(", ") + " " + we[1];
                    })(x, K, Z))
                : Z[0] + K + Z[1]
            );
          }
          function xl(t) {
            return "[" + Error.prototype.toString.call(t) + "]";
          }
          function Ol(t, f, d, y, k, T) {
            var P, V, j;
            if (
              ((j = Object.getOwnPropertyDescriptor(f, k) || {
                value: f[k],
              }).get
                ? (V = j.set
                    ? t.stylize("[Getter/Setter]", "special")
                    : t.stylize("[Getter]", "special"))
                : j.set && (V = t.stylize("[Setter]", "special")),
              Va(y, k) || (P = "[" + k + "]"),
              V ||
                (t.seen.indexOf(j.value) < 0
                  ? (V = Io(d) ? Uu(t, j.value, null) : Uu(t, j.value, d - 1))
                      .indexOf(`
`) > -1 &&
                    (V = T
                      ? V.split(
                          `
`
                        )
                          .map(function (x) {
                            return "  " + x;
                          })
                          .join(
                            `
`
                          )
                          .substr(2)
                      : `
` +
                        V.split(
                          `
`
                        ).map(function (x) {
                          return "   " + x;
                        }).join(`
`))
                  : (V = t.stylize("[Circular]", "special"))),
              Pr(P))
            ) {
              if (T && k.match(/^\d+$/)) return V;
              (P = JSON.stringify("" + k)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)
                ? ((P = P.substr(1, P.length - 2)), (P = t.stylize(P, "name")))
                : ((P = P.replace(/'/g, "\\'")
                    .replace(/\\"/g, '"')
                    .replace(/(^"|"$)/g, "'")),
                  (P = t.stylize(P, "string")));
            }
            return P + ": " + V;
          }
          function Zh(t) {
            return typeof t == "boolean";
          }
          function Io(t) {
            return t === null;
          }
          function Pl(t) {
            return typeof t == "string";
          }
          function Pr(t) {
            return t === void 0;
          }
          function Dl(t) {
            return ks(t) && Ll(t) === "[object RegExp]";
          }
          function ks(t) {
            return vt(t) == "object" && t !== null;
          }
          function Qh(t) {
            return ks(t) && Ll(t) === "[object Date]";
          }
          function Dr(t) {
            return ks(t) && (Ll(t) === "[object Error]" || t instanceof Error);
          }
          function Nl(t) {
            return typeof t == "function";
          }
          function Ll(t) {
            return Object.prototype.toString.call(t);
          }
          function Va(t, f) {
            return Object.prototype.hasOwnProperty.call(t, f);
          }
          function Vi() {
            (this.head = null), (this.tail = null), (this.length = 0);
          }
          (ha.colors = {
            bold: [1, 22],
            italic: [3, 23],
            underline: [4, 24],
            inverse: [7, 27],
            white: [37, 39],
            grey: [90, 39],
            black: [30, 39],
            blue: [34, 39],
            cyan: [36, 39],
            green: [32, 39],
            magenta: [35, 39],
            red: [31, 39],
            yellow: [33, 39],
          }),
            (ha.styles = {
              special: "cyan",
              number: "yellow",
              boolean: "yellow",
              undefined: "grey",
              null: "bold",
              string: "green",
              date: "magenta",
              regexp: "red",
            }),
            (Vi.prototype.push = function (t) {
              var f = {
                data: t,
                next: null,
              };
              this.length > 0 ? (this.tail.next = f) : (this.head = f),
                (this.tail = f),
                ++this.length;
            }),
            (Vi.prototype.unshift = function (t) {
              var f = {
                data: t,
                next: this.head,
              };
              this.length === 0 && (this.tail = f),
                (this.head = f),
                ++this.length;
            }),
            (Vi.prototype.shift = function () {
              if (this.length !== 0) {
                var t = this.head.data;
                return (
                  this.length === 1
                    ? (this.head = this.tail = null)
                    : (this.head = this.head.next),
                  --this.length,
                  t
                );
              }
            }),
            (Vi.prototype.clear = function () {
              (this.head = this.tail = null), (this.length = 0);
            }),
            (Vi.prototype.join = function (t) {
              if (this.length === 0) return "";
              for (var f = this.head, d = "" + f.data; (f = f.next); )
                d += t + f.data;
              return d;
            }),
            (Vi.prototype.concat = function (t) {
              if (this.length === 0) return de.alloc(0);
              if (this.length === 1) return this.head.data;
              for (var f = de.allocUnsafe(t >>> 0), d = this.head, y = 0; d; )
                d.data.copy(f, y), (y += d.data.length), (d = d.next);
              return f;
            });
          var Ml =
            de.isEncoding ||
            function (t) {
              switch (t && t.toLowerCase()) {
                case "hex":
                case "utf8":
                case "utf-8":
                case "ascii":
                case "binary":
                case "base64":
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                case "raw":
                  return !0;
                default:
                  return !1;
              }
            };
          function Fa(t) {
            switch (
              ((this.encoding = (t || "utf8")
                .toLowerCase()
                .replace(/[-_]/, "")),
              (function (f) {
                if (f && !Ml(f)) throw new Error("Unknown encoding: " + f);
              })(t),
              this.encoding)
            ) {
              case "utf8":
                this.surrogateSize = 3;
                break;
              case "ucs2":
              case "utf16le":
                (this.surrogateSize = 2), (this.detectIncompleteChar = Vu);
                break;
              case "base64":
                (this.surrogateSize = 3), (this.detectIncompleteChar = Xh);
                break;
              default:
                return void (this.write = Km);
            }
            (this.charBuffer = new de(6)),
              (this.charReceived = 0),
              (this.charLength = 0);
          }
          function Km(t) {
            return t.toString(this.encoding);
          }
          function Vu(t) {
            (this.charReceived = t.length % 2),
              (this.charLength = this.charReceived ? 2 : 0);
          }
          function Xh(t) {
            (this.charReceived = t.length % 3),
              (this.charLength = this.charReceived ? 3 : 0);
          }
          (Fa.prototype.write = function (t) {
            for (var f = ""; this.charLength; ) {
              var d =
                t.length >= this.charLength - this.charReceived
                  ? this.charLength - this.charReceived
                  : t.length;
              if (
                (t.copy(this.charBuffer, this.charReceived, 0, d),
                (this.charReceived += d),
                this.charReceived < this.charLength)
              )
                return "";
              if (
                ((t = t.slice(d, t.length)),
                !(
                  (k = (f = this.charBuffer
                    .slice(0, this.charLength)
                    .toString(this.encoding)).charCodeAt(f.length - 1)) >=
                    55296 && k <= 56319
                ))
              ) {
                if (((this.charReceived = this.charLength = 0), t.length === 0))
                  return f;
                break;
              }
              (this.charLength += this.surrogateSize), (f = "");
            }
            this.detectIncompleteChar(t);
            var y = t.length;
            this.charLength &&
              (t.copy(this.charBuffer, 0, t.length - this.charReceived, y),
              (y -= this.charReceived));
            var k;
            if (
              ((y = (f += t.toString(this.encoding, 0, y)).length - 1),
              (k = f.charCodeAt(y)) >= 55296 && k <= 56319)
            ) {
              var T = this.surrogateSize;
              return (
                (this.charLength += T),
                (this.charReceived += T),
                this.charBuffer.copy(this.charBuffer, T, 0, T),
                t.copy(this.charBuffer, 0, 0, T),
                f.substring(0, y)
              );
            }
            return f;
          }),
            (Fa.prototype.detectIncompleteChar = function (t) {
              for (var f = t.length >= 3 ? 3 : t.length; f > 0; f--) {
                var d = t[t.length - f];
                if (f == 1 && d >> 5 == 6) {
                  this.charLength = 2;
                  break;
                }
                if (f <= 2 && d >> 4 == 14) {
                  this.charLength = 3;
                  break;
                }
                if (f <= 3 && d >> 3 == 30) {
                  this.charLength = 4;
                  break;
                }
              }
              this.charReceived = f;
            }),
            (Fa.prototype.end = function (t) {
              var f = "";
              if ((t && t.length && (f = this.write(t)), this.charReceived)) {
                var d = this.charReceived,
                  y = this.charBuffer,
                  k = this.encoding;
                f += y.slice(0, d).toString(k);
              }
              return f;
            }),
            (Kn.ReadableState = Fu);
          var Tn = (function (t) {
            return (
              Pr(da) && (da = ""),
              (t = t.toUpperCase()),
              ws[t] ||
                (new RegExp("\\b" + t + "\\b", "i").test(da)
                  ? (ws[t] = function () {
                      var f = Jh.apply(null, arguments);
                      console.error("%s %d: %s", t, 0, f);
                    })
                  : (ws[t] = function () {})),
              ws[t]
            );
          })("stream");
          function Fu(t, f) {
            (t = t || {}),
              (this.objectMode = !!t.objectMode),
              f instanceof Nr &&
                (this.objectMode = this.objectMode || !!t.readableObjectMode);
            var d = t.highWaterMark,
              y = this.objectMode ? 16 : 16384;
            (this.highWaterMark = d || d === 0 ? d : y),
              (this.highWaterMark = ~~this.highWaterMark),
              (this.buffer = new Vi()),
              (this.length = 0),
              (this.pipes = null),
              (this.pipesCount = 0),
              (this.flowing = null),
              (this.ended = !1),
              (this.endEmitted = !1),
              (this.reading = !1),
              (this.sync = !0),
              (this.needReadable = !1),
              (this.emittedReadable = !1),
              (this.readableListening = !1),
              (this.resumeScheduled = !1),
              (this.defaultEncoding = t.defaultEncoding || "utf8"),
              (this.ranOut = !1),
              (this.awaitDrain = 0),
              (this.readingMore = !1),
              (this.decoder = null),
              (this.encoding = null),
              t.encoding &&
                ((this.decoder = new Fa(t.encoding)),
                (this.encoding = t.encoding));
          }
          function Kn(t) {
            if (!(this instanceof Kn)) return new Kn(t);
            (this._readableState = new Fu(t, this)),
              (this.readable = !0),
              t && typeof t.read == "function" && (this._read = t.read),
              At.call(this);
          }
          function Ul(t, f, d, y, k) {
            var T = (function (x, K) {
              var ae = null;
              return (
                Mt(K) ||
                  typeof K == "string" ||
                  K == null ||
                  x.objectMode ||
                  (ae = new TypeError("Invalid non-string/buffer chunk")),
                ae
              );
            })(f, d);
            if (T) t.emit("error", T);
            else if (d === null)
              (f.reading = !1),
                (function (x, K) {
                  if (!K.ended) {
                    if (K.decoder) {
                      var ae = K.decoder.end();
                      ae &&
                        ae.length &&
                        (K.buffer.push(ae),
                        (K.length += K.objectMode ? 1 : ae.length));
                    }
                    (K.ended = !0), Bu(x);
                  }
                })(t, f);
            else if (f.objectMode || (d && d.length > 0))
              if (f.ended && !k) {
                var P = new Error("stream.push() after EOF");
                t.emit("error", P);
              } else if (f.endEmitted && k) {
                var V = new Error("stream.unshift() after end event");
                t.emit("error", V);
              } else {
                var j;
                !f.decoder ||
                  k ||
                  y ||
                  ((d = f.decoder.write(d)),
                  (j = !f.objectMode && d.length === 0)),
                  k || (f.reading = !1),
                  j ||
                    (f.flowing && f.length === 0 && !f.sync
                      ? (t.emit("data", d), t.read(0))
                      : ((f.length += f.objectMode ? 1 : d.length),
                        k ? f.buffer.unshift(d) : f.buffer.push(d),
                        f.needReadable && Bu(t))),
                  (function (x, K) {
                    K.readingMore || ((K.readingMore = !0), Zt(mr, x, K));
                  })(t, f);
              }
            else k || (f.reading = !1);
            return (function (x) {
              return (
                !x.ended &&
                (x.needReadable || x.length < x.highWaterMark || x.length === 0)
              );
            })(f);
          }
          wr(Kn, At),
            (Kn.prototype.push = function (t, f) {
              var d = this._readableState;
              return (
                d.objectMode ||
                  typeof t != "string" ||
                  ((f = f || d.defaultEncoding) !== d.encoding &&
                    ((t = de.from(t, f)), (f = ""))),
                Ul(this, d, t, f, !1)
              );
            }),
            (Kn.prototype.unshift = function (t) {
              return Ul(this, this._readableState, t, "", !0);
            }),
            (Kn.prototype.isPaused = function () {
              return this._readableState.flowing === !1;
            }),
            (Kn.prototype.setEncoding = function (t) {
              return (
                (this._readableState.decoder = new Fa(t)),
                (this._readableState.encoding = t),
                this
              );
            });
          var ju = 8388608;
          function Vl(t, f) {
            return t <= 0 || (f.length === 0 && f.ended)
              ? 0
              : f.objectMode
              ? 1
              : t != t
              ? f.flowing && f.length
                ? f.buffer.head.data.length
                : f.length
              : (t > f.highWaterMark &&
                  (f.highWaterMark = (function (d) {
                    return (
                      d >= ju
                        ? (d = ju)
                        : (d--,
                          (d |= d >>> 1),
                          (d |= d >>> 2),
                          (d |= d >>> 4),
                          (d |= d >>> 8),
                          (d |= d >>> 16),
                          d++),
                      d
                    );
                  })(t)),
                t <= f.length
                  ? t
                  : f.ended
                  ? f.length
                  : ((f.needReadable = !0), 0));
          }
          function Bu(t) {
            var f = t._readableState;
            (f.needReadable = !1),
              f.emittedReadable ||
                (Tn("emitReadable", f.flowing),
                (f.emittedReadable = !0),
                f.sync ? Zt(ef, t) : ef(t));
          }
          function ef(t) {
            Tn("emit readable"), t.emit("readable"), Jn(t);
          }
          function mr(t, f) {
            for (
              var d = f.length;
              !f.reading &&
              !f.flowing &&
              !f.ended &&
              f.length < f.highWaterMark &&
              (Tn("maybeReadMore read 0"), t.read(0), d !== f.length);

            )
              d = f.length;
            f.readingMore = !1;
          }
          function Jm(t) {
            Tn("readable nexttick read 0"), t.read(0);
          }
          function $m(t, f) {
            f.reading || (Tn("resume read 0"), t.read(0)),
              (f.resumeScheduled = !1),
              (f.awaitDrain = 0),
              t.emit("resume"),
              Jn(t),
              f.flowing && !f.reading && t.read(0);
          }
          function Jn(t) {
            var f = t._readableState;
            for (Tn("flow", f.flowing); f.flowing && t.read() !== null; );
          }
          function tf(t, f) {
            return f.length === 0
              ? null
              : (f.objectMode
                  ? (d = f.buffer.shift())
                  : !t || t >= f.length
                  ? ((d = f.decoder
                      ? f.buffer.join("")
                      : f.buffer.length === 1
                      ? f.buffer.head.data
                      : f.buffer.concat(f.length)),
                    f.buffer.clear())
                  : (d = (function (y, k, T) {
                      var P;
                      return (
                        y < k.head.data.length
                          ? ((P = k.head.data.slice(0, y)),
                            (k.head.data = k.head.data.slice(y)))
                          : (P =
                              y === k.head.data.length
                                ? k.shift()
                                : T
                                ? (function (V, j) {
                                    var x = j.head,
                                      K = 1,
                                      ae = x.data;
                                    for (V -= ae.length; (x = x.next); ) {
                                      var Z = x.data,
                                        Q = V > Z.length ? Z.length : V;
                                      if (
                                        (Q === Z.length
                                          ? (ae += Z)
                                          : (ae += Z.slice(0, V)),
                                        (V -= Q) === 0)
                                      ) {
                                        Q === Z.length
                                          ? (++K,
                                            x.next
                                              ? (j.head = x.next)
                                              : (j.head = j.tail = null))
                                          : ((j.head = x),
                                            (x.data = Z.slice(Q)));
                                        break;
                                      }
                                      ++K;
                                    }
                                    return (j.length -= K), ae;
                                  })(y, k)
                                : (function (V, j) {
                                    var x = de.allocUnsafe(V),
                                      K = j.head,
                                      ae = 1;
                                    for (
                                      K.data.copy(x), V -= K.data.length;
                                      (K = K.next);

                                    ) {
                                      var Z = K.data,
                                        Q = V > Z.length ? Z.length : V;
                                      if (
                                        (Z.copy(x, x.length - V, 0, Q),
                                        (V -= Q) === 0)
                                      ) {
                                        Q === Z.length
                                          ? (++ae,
                                            K.next
                                              ? (j.head = K.next)
                                              : (j.head = j.tail = null))
                                          : ((j.head = K),
                                            (K.data = Z.slice(Q)));
                                        break;
                                      }
                                      ++ae;
                                    }
                                    return (j.length -= ae), x;
                                  })(y, k)),
                        P
                      );
                    })(t, f.buffer, f.decoder)),
                d);
            var d;
          }
          function Fl(t) {
            var f = t._readableState;
            if (f.length > 0)
              throw new Error('"endReadable()" called on non-empty stream');
            f.endEmitted || ((f.ended = !0), Zt(Ym, f, t));
          }
          function Ym(t, f) {
            t.endEmitted ||
              t.length !== 0 ||
              ((t.endEmitted = !0), (f.readable = !1), f.emit("end"));
          }
          function nf(t, f) {
            for (var d = 0, y = t.length; d < y; d++) if (t[d] === f) return d;
            return -1;
          }
          function zu() {}
          function Zm(t, f, d) {
            (this.chunk = t),
              (this.encoding = f),
              (this.callback = d),
              (this.next = null);
          }
          function jl(t, f) {
            Object.defineProperty(this, "buffer", {
              get: Al(function () {
                return this.getBuffer();
              }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead."),
            }),
              (t = t || {}),
              (this.objectMode = !!t.objectMode),
              f instanceof Nr &&
                (this.objectMode = this.objectMode || !!t.writableObjectMode);
            var d = t.highWaterMark,
              y = this.objectMode ? 16 : 16384;
            (this.highWaterMark = d || d === 0 ? d : y),
              (this.highWaterMark = ~~this.highWaterMark),
              (this.needDrain = !1),
              (this.ending = !1),
              (this.ended = !1),
              (this.finished = !1);
            var k = t.decodeStrings === !1;
            (this.decodeStrings = !k),
              (this.defaultEncoding = t.defaultEncoding || "utf8"),
              (this.length = 0),
              (this.writing = !1),
              (this.corked = 0),
              (this.sync = !0),
              (this.bufferProcessing = !1),
              (this.onwrite = function (T) {
                (function (P, V) {
                  var j = P._writableState,
                    x = j.sync,
                    K = j.writecb;
                  if (
                    ((function (Z) {
                      (Z.writing = !1),
                        (Z.writecb = null),
                        (Z.length -= Z.writelen),
                        (Z.writelen = 0);
                    })(j),
                    V)
                  )
                    (function (Z, Q, ue, we, se) {
                      --Q.pendingcb,
                        ue ? Zt(se, we) : se(we),
                        (Z._writableState.errorEmitted = !0),
                        Z.emit("error", we);
                    })(P, j, x, V, K);
                  else {
                    var ae = Ro(j);
                    ae ||
                      j.corked ||
                      j.bufferProcessing ||
                      !j.bufferedRequest ||
                      Hl(P, j),
                      x ? Zt(zl, P, j, ae, K) : zl(P, j, ae, K);
                  }
                })(f, T);
              }),
              (this.writecb = null),
              (this.writelen = 0),
              (this.bufferedRequest = null),
              (this.lastBufferedRequest = null),
              (this.pendingcb = 0),
              (this.prefinished = !1),
              (this.errorEmitted = !1),
              (this.bufferedRequestCount = 0),
              (this.corkedRequestsFree = new rf(this));
          }
          function dr(t) {
            if (!(this instanceof dr || this instanceof Nr)) return new dr(t);
            (this._writableState = new jl(t, this)),
              (this.writable = !0),
              t &&
                (typeof t.write == "function" && (this._write = t.write),
                typeof t.writev == "function" && (this._writev = t.writev)),
              At.call(this);
          }
          function Bl(t, f, d, y, k, T, P) {
            (f.writelen = y),
              (f.writecb = P),
              (f.writing = !0),
              (f.sync = !0),
              d ? t._writev(k, f.onwrite) : t._write(k, T, f.onwrite),
              (f.sync = !1);
          }
          function zl(t, f, d, y) {
            d ||
              (function (k, T) {
                T.length === 0 &&
                  T.needDrain &&
                  ((T.needDrain = !1), k.emit("drain"));
              })(t, f),
              f.pendingcb--,
              y(),
              Wl(t, f);
          }
          function Hl(t, f) {
            f.bufferProcessing = !0;
            var d = f.bufferedRequest;
            if (t._writev && d && d.next) {
              var y = f.bufferedRequestCount,
                k = new Array(y),
                T = f.corkedRequestsFree;
              T.entry = d;
              for (var P = 0; d; ) (k[P] = d), (d = d.next), (P += 1);
              Bl(t, f, !0, f.length, k, "", T.finish),
                f.pendingcb++,
                (f.lastBufferedRequest = null),
                T.next
                  ? ((f.corkedRequestsFree = T.next), (T.next = null))
                  : (f.corkedRequestsFree = new rf(f));
            } else {
              for (; d; ) {
                var V = d.chunk,
                  j = d.encoding,
                  x = d.callback;
                if (
                  (Bl(t, f, !1, f.objectMode ? 1 : V.length, V, j, x),
                  (d = d.next),
                  f.writing)
                )
                  break;
              }
              d === null && (f.lastBufferedRequest = null);
            }
            (f.bufferedRequestCount = 0),
              (f.bufferedRequest = d),
              (f.bufferProcessing = !1);
          }
          function Ro(t) {
            return (
              t.ending &&
              t.length === 0 &&
              t.bufferedRequest === null &&
              !t.finished &&
              !t.writing
            );
          }
          function fa(t, f) {
            f.prefinished || ((f.prefinished = !0), t.emit("prefinish"));
          }
          function Wl(t, f) {
            var d = Ro(f);
            return (
              d &&
                (f.pendingcb === 0
                  ? (fa(t, f), (f.finished = !0), t.emit("finish"))
                  : fa(t, f)),
              d
            );
          }
          function rf(t) {
            var f = this;
            (this.next = null),
              (this.entry = null),
              (this.finish = function (d) {
                var y = f.entry;
                for (f.entry = null; y; ) {
                  var k = y.callback;
                  t.pendingcb--, k(d), (y = y.next);
                }
                t.corkedRequestsFree
                  ? (t.corkedRequestsFree.next = f)
                  : (t.corkedRequestsFree = f);
              });
          }
          (Kn.prototype.read = function (t) {
            Tn("read", t), (t = parseInt(t, 10));
            var f = this._readableState,
              d = t;
            if (
              (t !== 0 && (f.emittedReadable = !1),
              t === 0 &&
                f.needReadable &&
                (f.length >= f.highWaterMark || f.ended))
            )
              return (
                Tn("read: emitReadable", f.length, f.ended),
                f.length === 0 && f.ended ? Fl(this) : Bu(this),
                null
              );
            if ((t = Vl(t, f)) === 0 && f.ended)
              return f.length === 0 && Fl(this), null;
            var y,
              k = f.needReadable;
            return (
              Tn("need readable", k),
              (f.length === 0 || f.length - t < f.highWaterMark) &&
                Tn("length less than watermark", (k = !0)),
              f.ended || f.reading
                ? Tn("reading or ended", (k = !1))
                : k &&
                  (Tn("do read"),
                  (f.reading = !0),
                  (f.sync = !0),
                  f.length === 0 && (f.needReadable = !0),
                  this._read(f.highWaterMark),
                  (f.sync = !1),
                  f.reading || (t = Vl(d, f))),
              (y = t > 0 ? tf(t, f) : null) === null
                ? ((f.needReadable = !0), (t = 0))
                : (f.length -= t),
              f.length === 0 &&
                (f.ended || (f.needReadable = !0),
                d !== t && f.ended && Fl(this)),
              y !== null && this.emit("data", y),
              y
            );
          }),
            (Kn.prototype._read = function (t) {
              this.emit("error", new Error("not implemented"));
            }),
            (Kn.prototype.pipe = function (t, f) {
              var d = this,
                y = this._readableState;
              switch (y.pipesCount) {
                case 0:
                  y.pipes = t;
                  break;
                case 1:
                  y.pipes = [y.pipes, t];
                  break;
                default:
                  y.pipes.push(t);
              }
              (y.pipesCount += 1), Tn("pipe count=%d opts=%j", y.pipesCount, f);
              var k = !f || f.end !== !1 ? P : x;
              function T(se) {
                Tn("onunpipe"), se === d && x();
              }
              function P() {
                Tn("onend"), t.end();
              }
              y.endEmitted ? Zt(k) : d.once("end", k), t.on("unpipe", T);
              var V = (function (se) {
                return function () {
                  var le = se._readableState;
                  Tn("pipeOnDrain", le.awaitDrain),
                    le.awaitDrain && le.awaitDrain--,
                    le.awaitDrain === 0 &&
                      se.listeners("data").length &&
                      ((le.flowing = !0), Jn(se));
                };
              })(d);
              t.on("drain", V);
              var j = !1;
              function x() {
                Tn("cleanup"),
                  t.removeListener("close", Q),
                  t.removeListener("finish", ue),
                  t.removeListener("drain", V),
                  t.removeListener("error", Z),
                  t.removeListener("unpipe", T),
                  d.removeListener("end", P),
                  d.removeListener("end", x),
                  d.removeListener("data", ae),
                  (j = !0),
                  !y.awaitDrain ||
                    (t._writableState && !t._writableState.needDrain) ||
                    V();
              }
              var K = !1;
              function ae(se) {
                Tn("ondata"),
                  (K = !1),
                  t.write(se) !== !1 ||
                    K ||
                    (((y.pipesCount === 1 && y.pipes === t) ||
                      (y.pipesCount > 1 && nf(y.pipes, t) !== -1)) &&
                      !j &&
                      (Tn(
                        "false write response, pause",
                        d._readableState.awaitDrain
                      ),
                      d._readableState.awaitDrain++,
                      (K = !0)),
                    d.pause());
              }
              function Z(se) {
                var le;
                Tn("onerror", se),
                  we(),
                  t.removeListener("error", Z),
                  (le = "error"),
                  t.listeners(le).length === 0 && t.emit("error", se);
              }
              function Q() {
                t.removeListener("finish", ue), we();
              }
              function ue() {
                Tn("onfinish"), t.removeListener("close", Q), we();
              }
              function we() {
                Tn("unpipe"), d.unpipe(t);
              }
              return (
                d.on("data", ae),
                (function (se, le, fe) {
                  if (typeof se.prependListener == "function")
                    return se.prependListener(le, fe);
                  se._events && se._events[le]
                    ? Array.isArray(se._events[le])
                      ? se._events[le].unshift(fe)
                      : (se._events[le] = [fe, se._events[le]])
                    : se.on(le, fe);
                })(t, "error", Z),
                t.once("close", Q),
                t.once("finish", ue),
                t.emit("pipe", d),
                y.flowing || (Tn("pipe resume"), d.resume()),
                t
              );
            }),
            (Kn.prototype.unpipe = function (t) {
              var f = this._readableState;
              if (f.pipesCount === 0) return this;
              if (f.pipesCount === 1)
                return t && t !== f.pipes
                  ? this
                  : (t || (t = f.pipes),
                    (f.pipes = null),
                    (f.pipesCount = 0),
                    (f.flowing = !1),
                    t && t.emit("unpipe", this),
                    this);
              if (!t) {
                var d = f.pipes,
                  y = f.pipesCount;
                (f.pipes = null), (f.pipesCount = 0), (f.flowing = !1);
                for (var k = 0; k < y; k++) d[k].emit("unpipe", this);
                return this;
              }
              var T = nf(f.pipes, t);
              return T === -1
                ? this
                : (f.pipes.splice(T, 1),
                  (f.pipesCount -= 1),
                  f.pipesCount === 1 && (f.pipes = f.pipes[0]),
                  t.emit("unpipe", this),
                  this);
            }),
            (Kn.prototype.on = function (t, f) {
              var d = At.prototype.on.call(this, t, f);
              if (t === "data")
                this._readableState.flowing !== !1 && this.resume();
              else if (t === "readable") {
                var y = this._readableState;
                y.endEmitted ||
                  y.readableListening ||
                  ((y.readableListening = y.needReadable = !0),
                  (y.emittedReadable = !1),
                  y.reading ? y.length && Bu(this) : Zt(Jm, this));
              }
              return d;
            }),
            (Kn.prototype.addListener = Kn.prototype.on),
            (Kn.prototype.resume = function () {
              var t = this._readableState;
              return (
                t.flowing ||
                  (Tn("resume"),
                  (t.flowing = !0),
                  (function (f, d) {
                    d.resumeScheduled ||
                      ((d.resumeScheduled = !0), Zt($m, f, d));
                  })(this, t)),
                this
              );
            }),
            (Kn.prototype.pause = function () {
              return (
                Tn("call pause flowing=%j", this._readableState.flowing),
                this._readableState.flowing !== !1 &&
                  (Tn("pause"),
                  (this._readableState.flowing = !1),
                  this.emit("pause")),
                this
              );
            }),
            (Kn.prototype.wrap = function (t) {
              var f = this._readableState,
                d = !1,
                y = this;
              for (var k in (t.on("end", function () {
                if ((Tn("wrapped end"), f.decoder && !f.ended)) {
                  var T = f.decoder.end();
                  T && T.length && y.push(T);
                }
                y.push(null);
              }),
              t.on("data", function (T) {
                Tn("wrapped data"),
                  f.decoder && (T = f.decoder.write(T)),
                  (f.objectMode && T == null) ||
                    ((f.objectMode || (T && T.length)) &&
                      (y.push(T) || ((d = !0), t.pause())));
              }),
              t))
                this[k] === void 0 &&
                  typeof t[k] == "function" &&
                  (this[k] = (function (T) {
                    return function () {
                      return t[T].apply(t, arguments);
                    };
                  })(k));
              return (
                (function (T, P) {
                  for (var V = 0, j = T.length; V < j; V++) P(T[V], V);
                })(
                  ["error", "close", "destroy", "pause", "resume"],
                  function (T) {
                    t.on(T, y.emit.bind(y, T));
                  }
                ),
                (y._read = function (T) {
                  Tn("wrapped _read", T), d && ((d = !1), t.resume());
                }),
                y
              );
            }),
            (Kn._fromList = tf),
            (dr.WritableState = jl),
            wr(dr, At),
            (jl.prototype.getBuffer = function () {
              for (var t = this.bufferedRequest, f = []; t; )
                f.push(t), (t = t.next);
              return f;
            }),
            (dr.prototype.pipe = function () {
              this.emit("error", new Error("Cannot pipe, not readable"));
            }),
            (dr.prototype.write = function (t, f, d) {
              var y = this._writableState,
                k = !1;
              return (
                typeof f == "function" && ((d = f), (f = null)),
                de.isBuffer(t) ? (f = "buffer") : f || (f = y.defaultEncoding),
                typeof d != "function" && (d = zu),
                y.ended
                  ? (function (T, P) {
                      var V = new Error("write after end");
                      T.emit("error", V), Zt(P, V);
                    })(this, d)
                  : (function (T, P, V, j) {
                      var x = !0,
                        K = !1;
                      return (
                        V === null
                          ? (K = new TypeError(
                              "May not write null values to stream"
                            ))
                          : de.isBuffer(V) ||
                            typeof V == "string" ||
                            V === void 0 ||
                            P.objectMode ||
                            (K = new TypeError(
                              "Invalid non-string/buffer chunk"
                            )),
                        K && (T.emit("error", K), Zt(j, K), (x = !1)),
                        x
                      );
                    })(this, y, t, d) &&
                    (y.pendingcb++,
                    (k = (function (T, P, V, j, x) {
                      (V = (function (Q, ue, we) {
                        return (
                          Q.objectMode ||
                            Q.decodeStrings === !1 ||
                            typeof ue != "string" ||
                            (ue = de.from(ue, we)),
                          ue
                        );
                      })(P, V, j)),
                        de.isBuffer(V) && (j = "buffer");
                      var K = P.objectMode ? 1 : V.length;
                      P.length += K;
                      var ae = P.length < P.highWaterMark;
                      if ((ae || (P.needDrain = !0), P.writing || P.corked)) {
                        var Z = P.lastBufferedRequest;
                        (P.lastBufferedRequest = new Zm(V, j, x)),
                          Z
                            ? (Z.next = P.lastBufferedRequest)
                            : (P.bufferedRequest = P.lastBufferedRequest),
                          (P.bufferedRequestCount += 1);
                      } else Bl(T, P, !1, K, V, j, x);
                      return ae;
                    })(this, y, t, f, d))),
                k
              );
            }),
            (dr.prototype.cork = function () {
              this._writableState.corked++;
            }),
            (dr.prototype.uncork = function () {
              var t = this._writableState;
              t.corked &&
                (t.corked--,
                t.writing ||
                  t.corked ||
                  t.finished ||
                  t.bufferProcessing ||
                  !t.bufferedRequest ||
                  Hl(this, t));
            }),
            (dr.prototype.setDefaultEncoding = function (t) {
              if (
                (typeof t == "string" && (t = t.toLowerCase()),
                !(
                  [
                    "hex",
                    "utf8",
                    "utf-8",
                    "ascii",
                    "binary",
                    "base64",
                    "ucs2",
                    "ucs-2",
                    "utf16le",
                    "utf-16le",
                    "raw",
                  ].indexOf((t + "").toLowerCase()) > -1
                ))
              )
                throw new TypeError("Unknown encoding: " + t);
              return (this._writableState.defaultEncoding = t), this;
            }),
            (dr.prototype._write = function (t, f, d) {
              d(new Error("not implemented"));
            }),
            (dr.prototype._writev = null),
            (dr.prototype.end = function (t, f, d) {
              var y = this._writableState;
              typeof t == "function"
                ? ((d = t), (t = null), (f = null))
                : typeof f == "function" && ((d = f), (f = null)),
                t != null && this.write(t, f),
                y.corked && ((y.corked = 1), this.uncork()),
                y.ending ||
                  y.finished ||
                  (function (k, T, P) {
                    (T.ending = !0),
                      Wl(k, T),
                      P && (T.finished ? Zt(P) : k.once("finish", P)),
                      (T.ended = !0),
                      (k.writable = !1);
                  })(this, y, d);
            }),
            wr(Nr, Kn);
          for (
            var In = Object.keys(dr.prototype), Gl = 0;
            Gl < In.length;
            Gl++
          ) {
            var Hu = In[Gl];
            Nr.prototype[Hu] || (Nr.prototype[Hu] = dr.prototype[Hu]);
          }
          function Nr(t) {
            if (!(this instanceof Nr)) return new Nr(t);
            Kn.call(this, t),
              dr.call(this, t),
              t && t.readable === !1 && (this.readable = !1),
              t && t.writable === !1 && (this.writable = !1),
              (this.allowHalfOpen = !0),
              t && t.allowHalfOpen === !1 && (this.allowHalfOpen = !1),
              this.once("end", Qm);
          }
          function Qm() {
            this.allowHalfOpen || this._writableState.ended || Zt(Xm, this);
          }
          function Xm(t) {
            t.end();
          }
          function eg(t) {
            (this.afterTransform = function (f, d) {
              return (function (y, k, T) {
                var P = y._transformState;
                P.transforming = !1;
                var V = P.writecb;
                if (!V)
                  return y.emit(
                    "error",
                    new Error("no writecb in Transform class")
                  );
                (P.writechunk = null),
                  (P.writecb = null),
                  T != null && y.push(T),
                  V(k);
                var j = y._readableState;
                (j.reading = !1),
                  (j.needReadable || j.length < j.highWaterMark) &&
                    y._read(j.highWaterMark);
              })(t, f, d);
            }),
              (this.needTransform = !1),
              (this.transforming = !1),
              (this.writecb = null),
              (this.writechunk = null),
              (this.writeencoding = null);
          }
          function Yr(t) {
            if (!(this instanceof Yr)) return new Yr(t);
            Nr.call(this, t), (this._transformState = new eg(this));
            var f = this;
            (this._readableState.needReadable = !0),
              (this._readableState.sync = !1),
              t &&
                (typeof t.transform == "function" &&
                  (this._transform = t.transform),
                typeof t.flush == "function" && (this._flush = t.flush)),
              this.once("prefinish", function () {
                typeof this._flush == "function"
                  ? this._flush(function (d) {
                      Ts(f, d);
                    })
                  : Ts(f);
              });
          }
          function Ts(t, f) {
            if (f) return t.emit("error", f);
            var d = t._writableState,
              y = t._transformState;
            if (d.length)
              throw new Error("Calling transform done when ws.length != 0");
            if (y.transforming)
              throw new Error("Calling transform done when still transforming");
            return t.push(null);
          }
          function Es(t) {
            if (!(this instanceof Es)) return new Es(t);
            Yr.call(this, t);
          }
          function Fi() {
            At.call(this);
          }
          wr(Yr, Nr),
            (Yr.prototype.push = function (t, f) {
              return (
                (this._transformState.needTransform = !1),
                Nr.prototype.push.call(this, t, f)
              );
            }),
            (Yr.prototype._transform = function (t, f, d) {
              throw new Error("Not implemented");
            }),
            (Yr.prototype._write = function (t, f, d) {
              var y = this._transformState;
              if (
                ((y.writecb = d),
                (y.writechunk = t),
                (y.writeencoding = f),
                !y.transforming)
              ) {
                var k = this._readableState;
                (y.needTransform ||
                  k.needReadable ||
                  k.length < k.highWaterMark) &&
                  this._read(k.highWaterMark);
              }
            }),
            (Yr.prototype._read = function (t) {
              var f = this._transformState;
              f.writechunk !== null && f.writecb && !f.transforming
                ? ((f.transforming = !0),
                  this._transform(
                    f.writechunk,
                    f.writeencoding,
                    f.afterTransform
                  ))
                : (f.needTransform = !0);
            }),
            wr(Es, Yr),
            (Es.prototype._transform = function (t, f, d) {
              d(null, t);
            }),
            wr(Fi, At),
            (Fi.Readable = Kn),
            (Fi.Writable = dr),
            (Fi.Duplex = Nr),
            (Fi.Transform = Yr),
            (Fi.PassThrough = Es),
            (Fi.Stream = Fi),
            (Fi.prototype.pipe = function (t, f) {
              var d = this;
              function y(K) {
                t.writable && t.write(K) === !1 && d.pause && d.pause();
              }
              function k() {
                d.readable && d.resume && d.resume();
              }
              d.on("data", y),
                t.on("drain", k),
                t._isStdio ||
                  (f && f.end === !1) ||
                  (d.on("end", P), d.on("close", V));
              var T = !1;
              function P() {
                T || ((T = !0), t.end());
              }
              function V() {
                T || ((T = !0), typeof t.destroy == "function" && t.destroy());
              }
              function j(K) {
                if ((x(), At.listenerCount(this, "error") === 0)) throw K;
              }
              function x() {
                d.removeListener("data", y),
                  t.removeListener("drain", k),
                  d.removeListener("end", P),
                  d.removeListener("close", V),
                  d.removeListener("error", j),
                  t.removeListener("error", j),
                  d.removeListener("end", x),
                  d.removeListener("close", x),
                  t.removeListener("close", x);
              }
              return (
                d.on("error", j),
                t.on("error", j),
                d.on("end", x),
                d.on("close", x),
                t.on("close", x),
                t.emit("pipe", d),
                t
              );
            });
          var Is = {
            2: "need dictionary",
            1: "stream end",
            0: "",
            "-1": "file error",
            "-2": "stream error",
            "-3": "data error",
            "-4": "insufficient memory",
            "-5": "buffer error",
            "-6": "incompatible version",
          };
          function af() {
            (this.input = null),
              (this.next_in = 0),
              (this.avail_in = 0),
              (this.total_in = 0),
              (this.output = null),
              (this.next_out = 0),
              (this.avail_out = 0),
              (this.total_out = 0),
              (this.msg = ""),
              (this.state = null),
              (this.data_type = 2),
              (this.adler = 0);
          }
          function ai(t, f, d, y, k) {
            if (f.subarray && t.subarray) t.set(f.subarray(d, d + y), k);
            else for (var T = 0; T < y; T++) t[k + T] = f[d + T];
          }
          var Wu = Uint8Array,
            kr = Uint16Array,
            Gu = Int32Array,
            of = 4,
            sf = 0,
            uf = 1,
            tg = 2;
          function Co(t) {
            for (var f = t.length; --f >= 0; ) t[f] = 0;
          }
          var ng = 0,
            cf = 1,
            rg = 2,
            ql = 29,
            Ao = 256,
            Hn = Ao + 1 + ql,
            ja = 30,
            Kl = 19,
            lf = 2 * Hn + 1,
            Ba = 15,
            Wn = 16,
            ig = 7,
            Jl = 256,
            df = 16,
            Rs = 17,
            $l = 18,
            Yl = [
              0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4,
              4, 4, 5, 5, 5, 5, 0,
            ],
            xo = [
              0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9,
              10, 10, 11, 11, 12, 12, 13, 13,
            ],
            ag = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7],
            hf = [
              16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15,
            ],
            ji = new Array(2 * (Hn + 2));
          Co(ji);
          var Cs = new Array(2 * ja);
          Co(Cs);
          var As = new Array(512);
          Co(As);
          var xs = new Array(256);
          Co(xs);
          var Zr = new Array(ql);
          Co(Zr);
          var qu,
            Ku,
            ff,
            Os = new Array(ja);
          function Zl(t, f, d, y, k) {
            (this.static_tree = t),
              (this.extra_bits = f),
              (this.extra_base = d),
              (this.elems = y),
              (this.max_length = k),
              (this.has_stree = t && t.length);
          }
          function Ps(t, f) {
            (this.dyn_tree = t), (this.max_code = 0), (this.stat_desc = f);
          }
          function pa(t) {
            return t < 256 ? As[t] : As[256 + (t >>> 7)];
          }
          function Ds(t, f) {
            (t.pending_buf[t.pending++] = 255 & f),
              (t.pending_buf[t.pending++] = (f >>> 8) & 255);
          }
          function gr(t, f, d) {
            t.bi_valid > Wn - d
              ? ((t.bi_buf |= (f << t.bi_valid) & 65535),
                Ds(t, t.bi_buf),
                (t.bi_buf = f >> (Wn - t.bi_valid)),
                (t.bi_valid += d - Wn))
              : ((t.bi_buf |= (f << t.bi_valid) & 65535), (t.bi_valid += d));
          }
          function yi(t, f, d) {
            gr(t, d[2 * f], d[2 * f + 1]);
          }
          function Ns(t, f) {
            var d = 0;
            do (d |= 1 & t), (t >>>= 1), (d <<= 1);
            while (--f > 0);
            return d >>> 1;
          }
          function Oo(t, f, d) {
            var y,
              k,
              T = new Array(Ba + 1),
              P = 0;
            for (y = 1; y <= Ba; y++) T[y] = P = (P + d[y - 1]) << 1;
            for (k = 0; k <= f; k++) {
              var V = t[2 * k + 1];
              V !== 0 && (t[2 * k] = Ns(T[V]++, V));
            }
          }
          function Ls(t) {
            var f;
            for (f = 0; f < Hn; f++) t.dyn_ltree[2 * f] = 0;
            for (f = 0; f < ja; f++) t.dyn_dtree[2 * f] = 0;
            for (f = 0; f < Kl; f++) t.bl_tree[2 * f] = 0;
            (t.dyn_ltree[2 * Jl] = 1),
              (t.opt_len = t.static_len = 0),
              (t.last_lit = t.matches = 0);
          }
          function Ju(t) {
            t.bi_valid > 8
              ? Ds(t, t.bi_buf)
              : t.bi_valid > 0 && (t.pending_buf[t.pending++] = t.bi_buf),
              (t.bi_buf = 0),
              (t.bi_valid = 0);
          }
          function pf(t, f, d, y) {
            var k = 2 * f,
              T = 2 * d;
            return t[k] < t[T] || (t[k] === t[T] && y[f] <= y[d]);
          }
          function $u(t, f, d) {
            for (
              var y = t.heap[d], k = d << 1;
              k <= t.heap_len &&
              (k < t.heap_len &&
                pf(f, t.heap[k + 1], t.heap[k], t.depth) &&
                k++,
              !pf(f, y, t.heap[k], t.depth));

            )
              (t.heap[d] = t.heap[k]), (d = k), (k <<= 1);
            t.heap[d] = y;
          }
          function Ql(t, f, d) {
            var y,
              k,
              T,
              P,
              V = 0;
            if (t.last_lit !== 0)
              do
                (y =
                  (t.pending_buf[t.d_buf + 2 * V] << 8) |
                  t.pending_buf[t.d_buf + 2 * V + 1]),
                  (k = t.pending_buf[t.l_buf + V]),
                  V++,
                  y === 0
                    ? yi(t, k, f)
                    : (yi(t, (T = xs[k]) + Ao + 1, f),
                      (P = Yl[T]) !== 0 && gr(t, (k -= Zr[T]), P),
                      yi(t, (T = pa(--y)), d),
                      (P = xo[T]) !== 0 && gr(t, (y -= Os[T]), P));
              while (V < t.last_lit);
            yi(t, Jl, f);
          }
          function Xl(t, f) {
            var d,
              y,
              k,
              T = f.dyn_tree,
              P = f.stat_desc.static_tree,
              V = f.stat_desc.has_stree,
              j = f.stat_desc.elems,
              x = -1;
            for (t.heap_len = 0, t.heap_max = lf, d = 0; d < j; d++)
              T[2 * d] !== 0
                ? ((t.heap[++t.heap_len] = x = d), (t.depth[d] = 0))
                : (T[2 * d + 1] = 0);
            for (; t.heap_len < 2; )
              (T[2 * (k = t.heap[++t.heap_len] = x < 2 ? ++x : 0)] = 1),
                (t.depth[k] = 0),
                t.opt_len--,
                V && (t.static_len -= P[2 * k + 1]);
            for (f.max_code = x, d = t.heap_len >> 1; d >= 1; d--) $u(t, T, d);
            k = j;
            do
              (d = t.heap[1]),
                (t.heap[1] = t.heap[t.heap_len--]),
                $u(t, T, 1),
                (y = t.heap[1]),
                (t.heap[--t.heap_max] = d),
                (t.heap[--t.heap_max] = y),
                (T[2 * k] = T[2 * d] + T[2 * y]),
                (t.depth[k] =
                  (t.depth[d] >= t.depth[y] ? t.depth[d] : t.depth[y]) + 1),
                (T[2 * d + 1] = T[2 * y + 1] = k),
                (t.heap[1] = k++),
                $u(t, T, 1);
            while (t.heap_len >= 2);
            (t.heap[--t.heap_max] = t.heap[1]),
              (function (K, ae) {
                var Z,
                  Q,
                  ue,
                  we,
                  se,
                  le,
                  fe = ae.dyn_tree,
                  _e = ae.max_code,
                  Se = ae.stat_desc.static_tree,
                  ke = ae.stat_desc.has_stree,
                  Ae = ae.stat_desc.extra_bits,
                  Me = ae.stat_desc.extra_base,
                  Le = ae.stat_desc.max_length,
                  Ue = 0;
                for (we = 0; we <= Ba; we++) K.bl_count[we] = 0;
                for (
                  fe[2 * K.heap[K.heap_max] + 1] = 0, Z = K.heap_max + 1;
                  Z < lf;
                  Z++
                )
                  (we = fe[2 * fe[2 * (Q = K.heap[Z]) + 1] + 1] + 1) > Le &&
                    ((we = Le), Ue++),
                    (fe[2 * Q + 1] = we),
                    Q > _e ||
                      (K.bl_count[we]++,
                      (se = 0),
                      Q >= Me && (se = Ae[Q - Me]),
                      (le = fe[2 * Q]),
                      (K.opt_len += le * (we + se)),
                      ke && (K.static_len += le * (Se[2 * Q + 1] + se)));
                if (Ue !== 0) {
                  do {
                    for (we = Le - 1; K.bl_count[we] === 0; ) we--;
                    K.bl_count[we]--,
                      (K.bl_count[we + 1] += 2),
                      K.bl_count[Le]--,
                      (Ue -= 2);
                  } while (Ue > 0);
                  for (we = Le; we !== 0; we--)
                    for (Q = K.bl_count[we]; Q !== 0; )
                      (ue = K.heap[--Z]) > _e ||
                        (fe[2 * ue + 1] !== we &&
                          ((K.opt_len += (we - fe[2 * ue + 1]) * fe[2 * ue]),
                          (fe[2 * ue + 1] = we)),
                        Q--);
                }
              })(t, f),
              Oo(T, x, t.bl_count);
          }
          function vf(t, f, d) {
            var y,
              k,
              T = -1,
              P = f[1],
              V = 0,
              j = 7,
              x = 4;
            for (
              P === 0 && ((j = 138), (x = 3)),
                f[2 * (d + 1) + 1] = 65535,
                y = 0;
              y <= d;
              y++
            )
              (k = P),
                (P = f[2 * (y + 1) + 1]),
                (++V < j && k === P) ||
                  (V < x
                    ? (t.bl_tree[2 * k] += V)
                    : k !== 0
                    ? (k !== T && t.bl_tree[2 * k]++, t.bl_tree[2 * df]++)
                    : V <= 10
                    ? t.bl_tree[2 * Rs]++
                    : t.bl_tree[2 * $l]++,
                  (V = 0),
                  (T = k),
                  P === 0
                    ? ((j = 138), (x = 3))
                    : k === P
                    ? ((j = 6), (x = 3))
                    : ((j = 7), (x = 4)));
          }
          function ed(t, f, d) {
            var y,
              k,
              T = -1,
              P = f[1],
              V = 0,
              j = 7,
              x = 4;
            for (P === 0 && ((j = 138), (x = 3)), y = 0; y <= d; y++)
              if (((k = P), (P = f[2 * (y + 1) + 1]), !(++V < j && k === P))) {
                if (V < x)
                  do yi(t, k, t.bl_tree);
                  while (--V != 0);
                else
                  k !== 0
                    ? (k !== T && (yi(t, k, t.bl_tree), V--),
                      yi(t, df, t.bl_tree),
                      gr(t, V - 3, 2))
                    : V <= 10
                    ? (yi(t, Rs, t.bl_tree), gr(t, V - 3, 3))
                    : (yi(t, $l, t.bl_tree), gr(t, V - 11, 7));
                (V = 0),
                  (T = k),
                  P === 0
                    ? ((j = 138), (x = 3))
                    : k === P
                    ? ((j = 6), (x = 3))
                    : ((j = 7), (x = 4));
              }
          }
          Co(Os);
          var Yu = !1;
          function Zu(t) {
            Yu ||
              ((function () {
                var f,
                  d,
                  y,
                  k,
                  T,
                  P = new Array(Ba + 1);
                for (y = 0, k = 0; k < ql - 1; k++)
                  for (Zr[k] = y, f = 0; f < 1 << Yl[k]; f++) xs[y++] = k;
                for (xs[y - 1] = k, T = 0, k = 0; k < 16; k++)
                  for (Os[k] = T, f = 0; f < 1 << xo[k]; f++) As[T++] = k;
                for (T >>= 7; k < ja; k++)
                  for (Os[k] = T << 7, f = 0; f < 1 << (xo[k] - 7); f++)
                    As[256 + T++] = k;
                for (d = 0; d <= Ba; d++) P[d] = 0;
                for (f = 0; f <= 143; ) (ji[2 * f + 1] = 8), f++, P[8]++;
                for (; f <= 255; ) (ji[2 * f + 1] = 9), f++, P[9]++;
                for (; f <= 279; ) (ji[2 * f + 1] = 7), f++, P[7]++;
                for (; f <= 287; ) (ji[2 * f + 1] = 8), f++, P[8]++;
                for (Oo(ji, Hn + 1, P), f = 0; f < ja; f++)
                  (Cs[2 * f + 1] = 5), (Cs[2 * f] = Ns(f, 5));
                (qu = new Zl(ji, Yl, Ao + 1, Hn, Ba)),
                  (Ku = new Zl(Cs, xo, 0, ja, Ba)),
                  (ff = new Zl(new Array(0), ag, 0, Kl, ig));
              })(),
              (Yu = !0)),
              (t.l_desc = new Ps(t.dyn_ltree, qu)),
              (t.d_desc = new Ps(t.dyn_dtree, Ku)),
              (t.bl_desc = new Ps(t.bl_tree, ff)),
              (t.bi_buf = 0),
              (t.bi_valid = 0),
              Ls(t);
          }
          function mf(t, f, d, y) {
            gr(t, (ng << 1) + (y ? 1 : 0), 3),
              (function (k, T, P, V) {
                Ju(k),
                  Ds(k, P),
                  Ds(k, ~P),
                  ai(k.pending_buf, k.window, T, P, k.pending),
                  (k.pending += P);
              })(t, f, d);
          }
          function gf(t) {
            gr(t, cf << 1, 3),
              yi(t, Jl, ji),
              (function (f) {
                f.bi_valid === 16
                  ? (Ds(f, f.bi_buf), (f.bi_buf = 0), (f.bi_valid = 0))
                  : f.bi_valid >= 8 &&
                    ((f.pending_buf[f.pending++] = 255 & f.bi_buf),
                    (f.bi_buf >>= 8),
                    (f.bi_valid -= 8));
              })(t);
          }
          function og(t, f, d, y) {
            var k,
              T,
              P = 0;
            t.level > 0
              ? (t.strm.data_type === tg &&
                  (t.strm.data_type = (function (V) {
                    var j,
                      x = 4093624447;
                    for (j = 0; j <= 31; j++, x >>>= 1)
                      if (1 & x && V.dyn_ltree[2 * j] !== 0) return sf;
                    if (
                      V.dyn_ltree[18] !== 0 ||
                      V.dyn_ltree[20] !== 0 ||
                      V.dyn_ltree[26] !== 0
                    )
                      return uf;
                    for (j = 32; j < Ao; j++)
                      if (V.dyn_ltree[2 * j] !== 0) return uf;
                    return sf;
                  })(t)),
                Xl(t, t.l_desc),
                Xl(t, t.d_desc),
                (P = (function (V) {
                  var j;
                  for (
                    vf(V, V.dyn_ltree, V.l_desc.max_code),
                      vf(V, V.dyn_dtree, V.d_desc.max_code),
                      Xl(V, V.bl_desc),
                      j = Kl - 1;
                    j >= 3 && V.bl_tree[2 * hf[j] + 1] === 0;
                    j--
                  );
                  return (V.opt_len += 3 * (j + 1) + 5 + 5 + 4), j;
                })(t)),
                (k = (t.opt_len + 3 + 7) >>> 3),
                (T = (t.static_len + 3 + 7) >>> 3) <= k && (k = T))
              : (k = T = d + 5),
              d + 4 <= k && f !== -1
                ? mf(t, f, d, y)
                : t.strategy === of || T === k
                ? (gr(t, (cf << 1) + (y ? 1 : 0), 3), Ql(t, ji, Cs))
                : (gr(t, (rg << 1) + (y ? 1 : 0), 3),
                  (function (V, j, x, K) {
                    var ae;
                    for (
                      gr(V, j - 257, 5),
                        gr(V, x - 1, 5),
                        gr(V, K - 4, 4),
                        ae = 0;
                      ae < K;
                      ae++
                    )
                      gr(V, V.bl_tree[2 * hf[ae] + 1], 3);
                    ed(V, V.dyn_ltree, j - 1), ed(V, V.dyn_dtree, x - 1);
                  })(t, t.l_desc.max_code + 1, t.d_desc.max_code + 1, P + 1),
                  Ql(t, t.dyn_ltree, t.dyn_dtree)),
              Ls(t),
              y && Ju(t);
          }
          function va(t, f, d) {
            return (
              (t.pending_buf[t.d_buf + 2 * t.last_lit] = (f >>> 8) & 255),
              (t.pending_buf[t.d_buf + 2 * t.last_lit + 1] = 255 & f),
              (t.pending_buf[t.l_buf + t.last_lit] = 255 & d),
              t.last_lit++,
              f === 0
                ? t.dyn_ltree[2 * d]++
                : (t.matches++,
                  f--,
                  t.dyn_ltree[2 * (xs[d] + Ao + 1)]++,
                  t.dyn_dtree[2 * pa(f)]++),
              t.last_lit === t.lit_bufsize - 1
            );
          }
          function Ms(t, f, d, y) {
            for (
              var k = (65535 & t) | 0, T = ((t >>> 16) & 65535) | 0, P = 0;
              d !== 0;

            ) {
              d -= P = d > 2e3 ? 2e3 : d;
              do T = (T + (k = (k + f[y++]) | 0)) | 0;
              while (--P);
              (k %= 65521), (T %= 65521);
            }
            return k | (T << 16) | 0;
          }
          var td = (function () {
            for (var t, f = [], d = 0; d < 256; d++) {
              t = d;
              for (var y = 0; y < 8; y++)
                t = 1 & t ? 3988292384 ^ (t >>> 1) : t >>> 1;
              f[d] = t;
            }
            return f;
          })();
          function ar(t, f, d, y) {
            var k = td,
              T = y + d;
            t ^= -1;
            for (var P = y; P < T; P++) t = (t >>> 8) ^ k[255 & (t ^ f[P])];
            return -1 ^ t;
          }
          var Po,
            ma = 0,
            nd = 1,
            sg = 3,
            hr = 4,
            za = 5,
            On = 0,
            _f = 1,
            Ha = -2,
            Qu = -3,
            Us = -5,
            ug = -1,
            cg = 1,
            Xu = 2,
            lg = 3,
            ec = 4,
            dg = 2,
            rd = 8,
            hg = 9,
            id = 286,
            fg = 30,
            pg = 19,
            vg = 2 * id + 1,
            fr = 15,
            dn = 3,
            ga = 258,
            oi = ga + dn + 1,
            mg = 32,
            Lr = 42,
            ad = 69,
            tc = 73,
            nc = 91,
            si = 103,
            Wa = 113,
            Vs = 666,
            Pn = 1,
            Fs = 2,
            Zn = 3,
            Do = 4,
            gg = 3;
          function _a(t, f) {
            return (t.msg = Is[f]), f;
          }
          function od(t) {
            return (t << 1) - (t > 4 ? 9 : 0);
          }
          function ui(t) {
            for (var f = t.length; --f >= 0; ) t[f] = 0;
          }
          function bi(t) {
            var f = t.state,
              d = f.pending;
            d > t.avail_out && (d = t.avail_out),
              d !== 0 &&
                (ai(t.output, f.pending_buf, f.pending_out, d, t.next_out),
                (t.next_out += d),
                (f.pending_out += d),
                (t.total_out += d),
                (t.avail_out -= d),
                (f.pending -= d),
                f.pending === 0 && (f.pending_out = 0));
          }
          function pr(t, f) {
            og(
              t,
              t.block_start >= 0 ? t.block_start : -1,
              t.strstart - t.block_start,
              f
            ),
              (t.block_start = t.strstart),
              bi(t.strm);
          }
          function gn(t, f) {
            t.pending_buf[t.pending++] = f;
          }
          function js(t, f) {
            (t.pending_buf[t.pending++] = (f >>> 8) & 255),
              (t.pending_buf[t.pending++] = 255 & f);
          }
          function sd(t, f) {
            var d,
              y,
              k = t.max_chain_length,
              T = t.strstart,
              P = t.prev_length,
              V = t.nice_match,
              j = t.strstart > t.w_size - oi ? t.strstart - (t.w_size - oi) : 0,
              x = t.window,
              K = t.w_mask,
              ae = t.prev,
              Z = t.strstart + ga,
              Q = x[T + P - 1],
              ue = x[T + P];
            t.prev_length >= t.good_match && (k >>= 2),
              V > t.lookahead && (V = t.lookahead);
            do
              if (
                x[(d = f) + P] === ue &&
                x[d + P - 1] === Q &&
                x[d] === x[T] &&
                x[++d] === x[T + 1]
              ) {
                (T += 2), d++;
                do;
                while (
                  x[++T] === x[++d] &&
                  x[++T] === x[++d] &&
                  x[++T] === x[++d] &&
                  x[++T] === x[++d] &&
                  x[++T] === x[++d] &&
                  x[++T] === x[++d] &&
                  x[++T] === x[++d] &&
                  x[++T] === x[++d] &&
                  T < Z
                );
                if (((y = ga - (Z - T)), (T = Z - ga), y > P)) {
                  if (((t.match_start = f), (P = y), y >= V)) break;
                  (Q = x[T + P - 1]), (ue = x[T + P]);
                }
              }
            while ((f = ae[f & K]) > j && --k != 0);
            return P <= t.lookahead ? P : t.lookahead;
          }
          function No(t) {
            var f,
              d,
              y,
              k,
              T,
              P,
              V,
              j,
              x,
              K,
              ae = t.w_size;
            do {
              if (
                ((k = t.window_size - t.lookahead - t.strstart),
                t.strstart >= ae + (ae - oi))
              ) {
                ai(t.window, t.window, ae, ae, 0),
                  (t.match_start -= ae),
                  (t.strstart -= ae),
                  (t.block_start -= ae),
                  (f = d = t.hash_size);
                do (y = t.head[--f]), (t.head[f] = y >= ae ? y - ae : 0);
                while (--d);
                f = d = ae;
                do (y = t.prev[--f]), (t.prev[f] = y >= ae ? y - ae : 0);
                while (--d);
                k += ae;
              }
              if (t.strm.avail_in === 0) break;
              if (
                ((P = t.strm),
                (V = t.window),
                (j = t.strstart + t.lookahead),
                (x = k),
                (K = void 0),
                (K = P.avail_in) > x && (K = x),
                (d =
                  K === 0
                    ? 0
                    : ((P.avail_in -= K),
                      ai(V, P.input, P.next_in, K, j),
                      P.state.wrap === 1
                        ? (P.adler = Ms(P.adler, V, K, j))
                        : P.state.wrap === 2 &&
                          (P.adler = ar(P.adler, V, K, j)),
                      (P.next_in += K),
                      (P.total_in += K),
                      K)),
                (t.lookahead += d),
                t.lookahead + t.insert >= dn)
              )
                for (
                  T = t.strstart - t.insert,
                    t.ins_h = t.window[T],
                    t.ins_h =
                      ((t.ins_h << t.hash_shift) ^ t.window[T + 1]) &
                      t.hash_mask;
                  t.insert &&
                  ((t.ins_h =
                    ((t.ins_h << t.hash_shift) ^ t.window[T + dn - 1]) &
                    t.hash_mask),
                  (t.prev[T & t.w_mask] = t.head[t.ins_h]),
                  (t.head[t.ins_h] = T),
                  T++,
                  t.insert--,
                  !(t.lookahead + t.insert < dn));

                );
            } while (t.lookahead < oi && t.strm.avail_in !== 0);
          }
          function Bs(t, f) {
            for (var d, y; ; ) {
              if (t.lookahead < oi) {
                if ((No(t), t.lookahead < oi && f === ma)) return Pn;
                if (t.lookahead === 0) break;
              }
              if (
                ((d = 0),
                t.lookahead >= dn &&
                  ((t.ins_h =
                    ((t.ins_h << t.hash_shift) ^
                      t.window[t.strstart + dn - 1]) &
                    t.hash_mask),
                  (d = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),
                  (t.head[t.ins_h] = t.strstart)),
                d !== 0 &&
                  t.strstart - d <= t.w_size - oi &&
                  (t.match_length = sd(t, d)),
                t.match_length >= dn)
              )
                if (
                  ((y = va(t, t.strstart - t.match_start, t.match_length - dn)),
                  (t.lookahead -= t.match_length),
                  t.match_length <= t.max_lazy_match && t.lookahead >= dn)
                ) {
                  t.match_length--;
                  do
                    t.strstart++,
                      (t.ins_h =
                        ((t.ins_h << t.hash_shift) ^
                          t.window[t.strstart + dn - 1]) &
                        t.hash_mask),
                      (d = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),
                      (t.head[t.ins_h] = t.strstart);
                  while (--t.match_length != 0);
                  t.strstart++;
                } else
                  (t.strstart += t.match_length),
                    (t.match_length = 0),
                    (t.ins_h = t.window[t.strstart]),
                    (t.ins_h =
                      ((t.ins_h << t.hash_shift) ^ t.window[t.strstart + 1]) &
                      t.hash_mask);
              else
                (y = va(t, 0, t.window[t.strstart])),
                  t.lookahead--,
                  t.strstart++;
              if (y && (pr(t, !1), t.strm.avail_out === 0)) return Pn;
            }
            return (
              (t.insert = t.strstart < dn - 1 ? t.strstart : dn - 1),
              f === hr
                ? (pr(t, !0), t.strm.avail_out === 0 ? Zn : Do)
                : t.last_lit && (pr(t, !1), t.strm.avail_out === 0)
                ? Pn
                : Fs
            );
          }
          function Lo(t, f) {
            for (var d, y, k; ; ) {
              if (t.lookahead < oi) {
                if ((No(t), t.lookahead < oi && f === ma)) return Pn;
                if (t.lookahead === 0) break;
              }
              if (
                ((d = 0),
                t.lookahead >= dn &&
                  ((t.ins_h =
                    ((t.ins_h << t.hash_shift) ^
                      t.window[t.strstart + dn - 1]) &
                    t.hash_mask),
                  (d = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),
                  (t.head[t.ins_h] = t.strstart)),
                (t.prev_length = t.match_length),
                (t.prev_match = t.match_start),
                (t.match_length = dn - 1),
                d !== 0 &&
                  t.prev_length < t.max_lazy_match &&
                  t.strstart - d <= t.w_size - oi &&
                  ((t.match_length = sd(t, d)),
                  t.match_length <= 5 &&
                    (t.strategy === cg ||
                      (t.match_length === dn &&
                        t.strstart - t.match_start > 4096)) &&
                    (t.match_length = dn - 1)),
                t.prev_length >= dn && t.match_length <= t.prev_length)
              ) {
                (k = t.strstart + t.lookahead - dn),
                  (y = va(
                    t,
                    t.strstart - 1 - t.prev_match,
                    t.prev_length - dn
                  )),
                  (t.lookahead -= t.prev_length - 1),
                  (t.prev_length -= 2);
                do
                  ++t.strstart <= k &&
                    ((t.ins_h =
                      ((t.ins_h << t.hash_shift) ^
                        t.window[t.strstart + dn - 1]) &
                      t.hash_mask),
                    (d = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h]),
                    (t.head[t.ins_h] = t.strstart));
                while (--t.prev_length != 0);
                if (
                  ((t.match_available = 0),
                  (t.match_length = dn - 1),
                  t.strstart++,
                  y && (pr(t, !1), t.strm.avail_out === 0))
                )
                  return Pn;
              } else if (t.match_available) {
                if (
                  ((y = va(t, 0, t.window[t.strstart - 1])) && pr(t, !1),
                  t.strstart++,
                  t.lookahead--,
                  t.strm.avail_out === 0)
                )
                  return Pn;
              } else (t.match_available = 1), t.strstart++, t.lookahead--;
            }
            return (
              t.match_available &&
                ((y = va(t, 0, t.window[t.strstart - 1])),
                (t.match_available = 0)),
              (t.insert = t.strstart < dn - 1 ? t.strstart : dn - 1),
              f === hr
                ? (pr(t, !0), t.strm.avail_out === 0 ? Zn : Do)
                : t.last_lit && (pr(t, !1), t.strm.avail_out === 0)
                ? Pn
                : Fs
            );
          }
          function Si(t, f, d, y, k) {
            (this.good_length = t),
              (this.max_lazy = f),
              (this.nice_length = d),
              (this.max_chain = y),
              (this.func = k);
          }
          function ud() {
            (this.strm = null),
              (this.status = 0),
              (this.pending_buf = null),
              (this.pending_buf_size = 0),
              (this.pending_out = 0),
              (this.pending = 0),
              (this.wrap = 0),
              (this.gzhead = null),
              (this.gzindex = 0),
              (this.method = rd),
              (this.last_flush = -1),
              (this.w_size = 0),
              (this.w_bits = 0),
              (this.w_mask = 0),
              (this.window = null),
              (this.window_size = 0),
              (this.prev = null),
              (this.head = null),
              (this.ins_h = 0),
              (this.hash_size = 0),
              (this.hash_bits = 0),
              (this.hash_mask = 0),
              (this.hash_shift = 0),
              (this.block_start = 0),
              (this.match_length = 0),
              (this.prev_match = 0),
              (this.match_available = 0),
              (this.strstart = 0),
              (this.match_start = 0),
              (this.lookahead = 0),
              (this.prev_length = 0),
              (this.max_chain_length = 0),
              (this.max_lazy_match = 0),
              (this.level = 0),
              (this.strategy = 0),
              (this.good_match = 0),
              (this.nice_match = 0),
              (this.dyn_ltree = new kr(2 * vg)),
              (this.dyn_dtree = new kr(2 * (2 * fg + 1))),
              (this.bl_tree = new kr(2 * (2 * pg + 1))),
              ui(this.dyn_ltree),
              ui(this.dyn_dtree),
              ui(this.bl_tree),
              (this.l_desc = null),
              (this.d_desc = null),
              (this.bl_desc = null),
              (this.bl_count = new kr(fr + 1)),
              (this.heap = new kr(2 * id + 1)),
              ui(this.heap),
              (this.heap_len = 0),
              (this.heap_max = 0),
              (this.depth = new kr(2 * id + 1)),
              ui(this.depth),
              (this.l_buf = 0),
              (this.lit_bufsize = 0),
              (this.last_lit = 0),
              (this.d_buf = 0),
              (this.opt_len = 0),
              (this.static_len = 0),
              (this.matches = 0),
              (this.insert = 0),
              (this.bi_buf = 0),
              (this.bi_valid = 0);
          }
          function yf(t) {
            var f,
              d = (function (y) {
                var k;
                return y && y.state
                  ? ((y.total_in = y.total_out = 0),
                    (y.data_type = dg),
                    ((k = y.state).pending = 0),
                    (k.pending_out = 0),
                    k.wrap < 0 && (k.wrap = -k.wrap),
                    (k.status = k.wrap ? Lr : Wa),
                    (y.adler = k.wrap === 2 ? 0 : 1),
                    (k.last_flush = ma),
                    Zu(k),
                    On)
                  : _a(y, Ha);
              })(t);
            return (
              d === On &&
                (((f = t.state).window_size = 2 * f.w_size),
                ui(f.head),
                (f.max_lazy_match = Po[f.level].max_lazy),
                (f.good_match = Po[f.level].good_length),
                (f.nice_match = Po[f.level].nice_length),
                (f.max_chain_length = Po[f.level].max_chain),
                (f.strstart = 0),
                (f.block_start = 0),
                (f.lookahead = 0),
                (f.insert = 0),
                (f.match_length = f.prev_length = dn - 1),
                (f.match_available = 0),
                (f.ins_h = 0)),
              d
            );
          }
          function _g(t, f) {
            var d, y, k, T;
            if (!t || !t.state || f > za || f < 0) return t ? _a(t, Ha) : Ha;
            if (
              ((y = t.state),
              !t.output ||
                (!t.input && t.avail_in !== 0) ||
                (y.status === Vs && f !== hr))
            )
              return _a(t, t.avail_out === 0 ? Us : Ha);
            if (
              ((y.strm = t),
              (d = y.last_flush),
              (y.last_flush = f),
              y.status === Lr)
            )
              if (y.wrap === 2)
                (t.adler = 0),
                  gn(y, 31),
                  gn(y, 139),
                  gn(y, 8),
                  y.gzhead
                    ? (gn(
                        y,
                        (y.gzhead.text ? 1 : 0) +
                          (y.gzhead.hcrc ? 2 : 0) +
                          (y.gzhead.extra ? 4 : 0) +
                          (y.gzhead.name ? 8 : 0) +
                          (y.gzhead.comment ? 16 : 0)
                      ),
                      gn(y, 255 & y.gzhead.time),
                      gn(y, (y.gzhead.time >> 8) & 255),
                      gn(y, (y.gzhead.time >> 16) & 255),
                      gn(y, (y.gzhead.time >> 24) & 255),
                      gn(
                        y,
                        y.level === 9
                          ? 2
                          : y.strategy >= Xu || y.level < 2
                          ? 4
                          : 0
                      ),
                      gn(y, 255 & y.gzhead.os),
                      y.gzhead.extra &&
                        y.gzhead.extra.length &&
                        (gn(y, 255 & y.gzhead.extra.length),
                        gn(y, (y.gzhead.extra.length >> 8) & 255)),
                      y.gzhead.hcrc &&
                        (t.adler = ar(t.adler, y.pending_buf, y.pending, 0)),
                      (y.gzindex = 0),
                      (y.status = ad))
                    : (gn(y, 0),
                      gn(y, 0),
                      gn(y, 0),
                      gn(y, 0),
                      gn(y, 0),
                      gn(
                        y,
                        y.level === 9
                          ? 2
                          : y.strategy >= Xu || y.level < 2
                          ? 4
                          : 0
                      ),
                      gn(y, gg),
                      (y.status = Wa));
              else {
                var P = (rd + ((y.w_bits - 8) << 4)) << 8;
                (P |=
                  (y.strategy >= Xu || y.level < 2
                    ? 0
                    : y.level < 6
                    ? 1
                    : y.level === 6
                    ? 2
                    : 3) << 6),
                  y.strstart !== 0 && (P |= mg),
                  (P += 31 - (P % 31)),
                  (y.status = Wa),
                  js(y, P),
                  y.strstart !== 0 &&
                    (js(y, t.adler >>> 16), js(y, 65535 & t.adler)),
                  (t.adler = 1);
              }
            if (y.status === ad)
              if (y.gzhead.extra) {
                for (
                  k = y.pending;
                  y.gzindex < (65535 & y.gzhead.extra.length) &&
                  (y.pending !== y.pending_buf_size ||
                    (y.gzhead.hcrc &&
                      y.pending > k &&
                      (t.adler = ar(t.adler, y.pending_buf, y.pending - k, k)),
                    bi(t),
                    (k = y.pending),
                    y.pending !== y.pending_buf_size));

                )
                  gn(y, 255 & y.gzhead.extra[y.gzindex]), y.gzindex++;
                y.gzhead.hcrc &&
                  y.pending > k &&
                  (t.adler = ar(t.adler, y.pending_buf, y.pending - k, k)),
                  y.gzindex === y.gzhead.extra.length &&
                    ((y.gzindex = 0), (y.status = tc));
              } else y.status = tc;
            if (y.status === tc)
              if (y.gzhead.name) {
                k = y.pending;
                do {
                  if (
                    y.pending === y.pending_buf_size &&
                    (y.gzhead.hcrc &&
                      y.pending > k &&
                      (t.adler = ar(t.adler, y.pending_buf, y.pending - k, k)),
                    bi(t),
                    (k = y.pending),
                    y.pending === y.pending_buf_size)
                  ) {
                    T = 1;
                    break;
                  }
                  (T =
                    y.gzindex < y.gzhead.name.length
                      ? 255 & y.gzhead.name.charCodeAt(y.gzindex++)
                      : 0),
                    gn(y, T);
                } while (T !== 0);
                y.gzhead.hcrc &&
                  y.pending > k &&
                  (t.adler = ar(t.adler, y.pending_buf, y.pending - k, k)),
                  T === 0 && ((y.gzindex = 0), (y.status = nc));
              } else y.status = nc;
            if (y.status === nc)
              if (y.gzhead.comment) {
                k = y.pending;
                do {
                  if (
                    y.pending === y.pending_buf_size &&
                    (y.gzhead.hcrc &&
                      y.pending > k &&
                      (t.adler = ar(t.adler, y.pending_buf, y.pending - k, k)),
                    bi(t),
                    (k = y.pending),
                    y.pending === y.pending_buf_size)
                  ) {
                    T = 1;
                    break;
                  }
                  (T =
                    y.gzindex < y.gzhead.comment.length
                      ? 255 & y.gzhead.comment.charCodeAt(y.gzindex++)
                      : 0),
                    gn(y, T);
                } while (T !== 0);
                y.gzhead.hcrc &&
                  y.pending > k &&
                  (t.adler = ar(t.adler, y.pending_buf, y.pending - k, k)),
                  T === 0 && (y.status = si);
              } else y.status = si;
            if (
              (y.status === si &&
                (y.gzhead.hcrc
                  ? (y.pending + 2 > y.pending_buf_size && bi(t),
                    y.pending + 2 <= y.pending_buf_size &&
                      (gn(y, 255 & t.adler),
                      gn(y, (t.adler >> 8) & 255),
                      (t.adler = 0),
                      (y.status = Wa)))
                  : (y.status = Wa)),
              y.pending !== 0)
            ) {
              if ((bi(t), t.avail_out === 0)) return (y.last_flush = -1), On;
            } else if (t.avail_in === 0 && od(f) <= od(d) && f !== hr) return _a(t, Us);
            if (y.status === Vs && t.avail_in !== 0) return _a(t, Us);
            if (
              t.avail_in !== 0 ||
              y.lookahead !== 0 ||
              (f !== ma && y.status !== Vs)
            ) {
              var V =
                y.strategy === Xu
                  ? (function (j, x) {
                      for (var K; ; ) {
                        if (j.lookahead === 0 && (No(j), j.lookahead === 0)) {
                          if (x === ma) return Pn;
                          break;
                        }
                        if (
                          ((j.match_length = 0),
                          (K = va(j, 0, j.window[j.strstart])),
                          j.lookahead--,
                          j.strstart++,
                          K && (pr(j, !1), j.strm.avail_out === 0))
                        )
                          return Pn;
                      }
                      return (
                        (j.insert = 0),
                        x === hr
                          ? (pr(j, !0), j.strm.avail_out === 0 ? Zn : Do)
                          : j.last_lit && (pr(j, !1), j.strm.avail_out === 0)
                          ? Pn
                          : Fs
                      );
                    })(y, f)
                  : y.strategy === lg
                  ? (function (j, x) {
                      for (var K, ae, Z, Q, ue = j.window; ; ) {
                        if (j.lookahead <= ga) {
                          if ((No(j), j.lookahead <= ga && x === ma)) return Pn;
                          if (j.lookahead === 0) break;
                        }
                        if (
                          ((j.match_length = 0),
                          j.lookahead >= dn &&
                            j.strstart > 0 &&
                            (ae = ue[(Z = j.strstart - 1)]) === ue[++Z] &&
                            ae === ue[++Z] &&
                            ae === ue[++Z])
                        ) {
                          Q = j.strstart + ga;
                          do;
                          while (
                            ae === ue[++Z] &&
                            ae === ue[++Z] &&
                            ae === ue[++Z] &&
                            ae === ue[++Z] &&
                            ae === ue[++Z] &&
                            ae === ue[++Z] &&
                            ae === ue[++Z] &&
                            ae === ue[++Z] &&
                            Z < Q
                          );
                          (j.match_length = ga - (Q - Z)),
                            j.match_length > j.lookahead &&
                              (j.match_length = j.lookahead);
                        }
                        if (
                          (j.match_length >= dn
                            ? ((K = va(j, 1, j.match_length - dn)),
                              (j.lookahead -= j.match_length),
                              (j.strstart += j.match_length),
                              (j.match_length = 0))
                            : ((K = va(j, 0, j.window[j.strstart])),
                              j.lookahead--,
                              j.strstart++),
                          K && (pr(j, !1), j.strm.avail_out === 0))
                        )
                          return Pn;
                      }
                      return (
                        (j.insert = 0),
                        x === hr
                          ? (pr(j, !0), j.strm.avail_out === 0 ? Zn : Do)
                          : j.last_lit && (pr(j, !1), j.strm.avail_out === 0)
                          ? Pn
                          : Fs
                      );
                    })(y, f)
                  : Po[y.level].func(y, f);
              if (
                ((V !== Zn && V !== Do) || (y.status = Vs),
                V === Pn || V === Zn)
              )
                return t.avail_out === 0 && (y.last_flush = -1), On;
              if (
                V === Fs &&
                (f === nd
                  ? gf(y)
                  : f !== za &&
                    (mf(y, 0, 0, !1),
                    f === sg &&
                      (ui(y.head),
                      y.lookahead === 0 &&
                        ((y.strstart = 0),
                        (y.block_start = 0),
                        (y.insert = 0)))),
                bi(t),
                t.avail_out === 0)
              )
                return (y.last_flush = -1), On;
            }
            return f !== hr
              ? On
              : y.wrap <= 0
              ? _f
              : (y.wrap === 2
                  ? (gn(y, 255 & t.adler),
                    gn(y, (t.adler >> 8) & 255),
                    gn(y, (t.adler >> 16) & 255),
                    gn(y, (t.adler >> 24) & 255),
                    gn(y, 255 & t.total_in),
                    gn(y, (t.total_in >> 8) & 255),
                    gn(y, (t.total_in >> 16) & 255),
                    gn(y, (t.total_in >> 24) & 255))
                  : (js(y, t.adler >>> 16), js(y, 65535 & t.adler)),
                bi(t),
                y.wrap > 0 && (y.wrap = -y.wrap),
                y.pending !== 0 ? On : _f);
          }
          Po = [
            new Si(0, 0, 0, 0, function (t, f) {
              var d = 65535;
              for (
                d > t.pending_buf_size - 5 && (d = t.pending_buf_size - 5);
                ;

              ) {
                if (t.lookahead <= 1) {
                  if ((No(t), t.lookahead === 0 && f === ma)) return Pn;
                  if (t.lookahead === 0) break;
                }
                (t.strstart += t.lookahead), (t.lookahead = 0);
                var y = t.block_start + d;
                if (
                  ((t.strstart === 0 || t.strstart >= y) &&
                    ((t.lookahead = t.strstart - y),
                    (t.strstart = y),
                    pr(t, !1),
                    t.strm.avail_out === 0)) ||
                  (t.strstart - t.block_start >= t.w_size - oi &&
                    (pr(t, !1), t.strm.avail_out === 0))
                )
                  return Pn;
              }
              return (
                (t.insert = 0),
                f === hr
                  ? (pr(t, !0), t.strm.avail_out === 0 ? Zn : Do)
                  : (t.strstart > t.block_start &&
                      (pr(t, !1), t.strm.avail_out),
                    Pn)
              );
            }),
            new Si(4, 4, 8, 4, Bs),
            new Si(4, 5, 16, 8, Bs),
            new Si(4, 6, 32, 32, Bs),
            new Si(4, 4, 16, 16, Lo),
            new Si(8, 16, 32, 32, Lo),
            new Si(8, 16, 128, 128, Lo),
            new Si(8, 32, 128, 256, Lo),
            new Si(32, 128, 258, 1024, Lo),
            new Si(32, 258, 258, 4096, Lo),
          ];
          var rc = 30,
            yg = 12;
          function bg(t, f) {
            var d,
              y,
              k,
              T,
              P,
              V,
              j,
              x,
              K,
              ae,
              Z,
              Q,
              ue,
              we,
              se,
              le,
              fe,
              _e,
              Se,
              ke,
              Ae,
              Me,
              Le,
              Ue,
              Te;
            (d = t.state),
              (y = t.next_in),
              (Ue = t.input),
              (k = y + (t.avail_in - 5)),
              (T = t.next_out),
              (Te = t.output),
              (P = T - (f - t.avail_out)),
              (V = T + (t.avail_out - 257)),
              (j = d.dmax),
              (x = d.wsize),
              (K = d.whave),
              (ae = d.wnext),
              (Z = d.window),
              (Q = d.hold),
              (ue = d.bits),
              (we = d.lencode),
              (se = d.distcode),
              (le = (1 << d.lenbits) - 1),
              (fe = (1 << d.distbits) - 1);
            e: do {
              ue < 15 &&
                ((Q += Ue[y++] << ue),
                (ue += 8),
                (Q += Ue[y++] << ue),
                (ue += 8)),
                (_e = we[Q & le]);
              t: for (;;) {
                if (
                  ((Q >>>= Se = _e >>> 24),
                  (ue -= Se),
                  (Se = (_e >>> 16) & 255) === 0)
                )
                  Te[T++] = 65535 & _e;
                else {
                  if (!(16 & Se)) {
                    if (!(64 & Se)) {
                      _e = we[(65535 & _e) + (Q & ((1 << Se) - 1))];
                      continue t;
                    }
                    if (32 & Se) {
                      d.mode = yg;
                      break e;
                    }
                    (t.msg = "invalid literal/length code"), (d.mode = rc);
                    break e;
                  }
                  (ke = 65535 & _e),
                    (Se &= 15) &&
                      (ue < Se && ((Q += Ue[y++] << ue), (ue += 8)),
                      (ke += Q & ((1 << Se) - 1)),
                      (Q >>>= Se),
                      (ue -= Se)),
                    ue < 15 &&
                      ((Q += Ue[y++] << ue),
                      (ue += 8),
                      (Q += Ue[y++] << ue),
                      (ue += 8)),
                    (_e = se[Q & fe]);
                  n: for (;;) {
                    if (
                      ((Q >>>= Se = _e >>> 24),
                      (ue -= Se),
                      !(16 & (Se = (_e >>> 16) & 255)))
                    ) {
                      if (!(64 & Se)) {
                        _e = se[(65535 & _e) + (Q & ((1 << Se) - 1))];
                        continue n;
                      }
                      (t.msg = "invalid distance code"), (d.mode = rc);
                      break e;
                    }
                    if (
                      ((Ae = 65535 & _e),
                      ue < (Se &= 15) &&
                        ((Q += Ue[y++] << ue),
                        (ue += 8) < Se && ((Q += Ue[y++] << ue), (ue += 8))),
                      (Ae += Q & ((1 << Se) - 1)) > j)
                    ) {
                      (t.msg = "invalid distance too far back"), (d.mode = rc);
                      break e;
                    }
                    if (((Q >>>= Se), (ue -= Se), Ae > (Se = T - P))) {
                      if ((Se = Ae - Se) > K && d.sane) {
                        (t.msg = "invalid distance too far back"),
                          (d.mode = rc);
                        break e;
                      }
                      if (((Me = 0), (Le = Z), ae === 0)) {
                        if (((Me += x - Se), Se < ke)) {
                          ke -= Se;
                          do Te[T++] = Z[Me++];
                          while (--Se);
                          (Me = T - Ae), (Le = Te);
                        }
                      } else if (ae < Se) {
                        if (((Me += x + ae - Se), (Se -= ae) < ke)) {
                          ke -= Se;
                          do Te[T++] = Z[Me++];
                          while (--Se);
                          if (((Me = 0), ae < ke)) {
                            ke -= Se = ae;
                            do Te[T++] = Z[Me++];
                            while (--Se);
                            (Me = T - Ae), (Le = Te);
                          }
                        }
                      } else if (((Me += ae - Se), Se < ke)) {
                        ke -= Se;
                        do Te[T++] = Z[Me++];
                        while (--Se);
                        (Me = T - Ae), (Le = Te);
                      }
                      for (; ke > 2; )
                        (Te[T++] = Le[Me++]),
                          (Te[T++] = Le[Me++]),
                          (Te[T++] = Le[Me++]),
                          (ke -= 3);
                      ke &&
                        ((Te[T++] = Le[Me++]), ke > 1 && (Te[T++] = Le[Me++]));
                    } else {
                      Me = T - Ae;
                      do
                        (Te[T++] = Te[Me++]),
                          (Te[T++] = Te[Me++]),
                          (Te[T++] = Te[Me++]),
                          (ke -= 3);
                      while (ke > 2);
                      ke &&
                        ((Te[T++] = Te[Me++]), ke > 1 && (Te[T++] = Te[Me++]));
                    }
                    break;
                  }
                }
                break;
              }
            } while (y < k && T < V);
            (y -= ke = ue >> 3),
              (Q &= (1 << (ue -= ke << 3)) - 1),
              (t.next_in = y),
              (t.next_out = T),
              (t.avail_in = y < k ? k - y + 5 : 5 - (y - k)),
              (t.avail_out = T < V ? V - T + 257 : 257 - (T - V)),
              (d.hold = Q),
              (d.bits = ue);
          }
          var Mo = 15,
            cd = 852,
            bf = 592,
            Sf = 0,
            ld = 1,
            wf = 2,
            Sg = [
              3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43,
              51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0,
            ],
            wg = [
              16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,
              19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78,
            ],
            zs = [
              1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257,
              385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289,
              16385, 24577, 0, 0,
            ],
            kg = [
              16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,
              23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64,
            ];
          function Hs(t, f, d, y, k, T, P, V) {
            var j,
              x,
              K,
              ae,
              Z,
              Q,
              ue,
              we,
              se,
              le = V.bits,
              fe = 0,
              _e = 0,
              Se = 0,
              ke = 0,
              Ae = 0,
              Me = 0,
              Le = 0,
              Ue = 0,
              Te = 0,
              xe = 0,
              qe = null,
              ut = 0,
              Ge = new kr(Mo + 1),
              mt = new kr(Mo + 1),
              kt = null,
              qt = 0;
            for (fe = 0; fe <= Mo; fe++) Ge[fe] = 0;
            for (_e = 0; _e < y; _e++) Ge[f[d + _e]]++;
            for (Ae = le, ke = Mo; ke >= 1 && Ge[ke] === 0; ke--);
            if ((Ae > ke && (Ae = ke), ke === 0))
              return (k[T++] = 20971520), (k[T++] = 20971520), (V.bits = 1), 0;
            for (Se = 1; Se < ke && Ge[Se] === 0; Se++);
            for (Ae < Se && (Ae = Se), Ue = 1, fe = 1; fe <= Mo; fe++)
              if (((Ue <<= 1), (Ue -= Ge[fe]) < 0)) return -1;
            if (Ue > 0 && (t === Sf || ke !== 1)) return -1;
            for (mt[1] = 0, fe = 1; fe < Mo; fe++) mt[fe + 1] = mt[fe] + Ge[fe];
            for (_e = 0; _e < y; _e++)
              f[d + _e] !== 0 && (P[mt[f[d + _e]]++] = _e);
            if (
              (t === Sf
                ? ((qe = kt = P), (Q = 19))
                : t === ld
                ? ((qe = Sg), (ut -= 257), (kt = wg), (qt -= 257), (Q = 256))
                : ((qe = zs), (kt = kg), (Q = -1)),
              (xe = 0),
              (_e = 0),
              (fe = Se),
              (Z = T),
              (Me = Ae),
              (Le = 0),
              (K = -1),
              (ae = (Te = 1 << Ae) - 1),
              (t === ld && Te > cd) || (t === wf && Te > bf))
            )
              return 1;
            for (;;) {
              (ue = fe - Le),
                P[_e] < Q
                  ? ((we = 0), (se = P[_e]))
                  : P[_e] > Q
                  ? ((we = kt[qt + P[_e]]), (se = qe[ut + P[_e]]))
                  : ((we = 96), (se = 0)),
                (j = 1 << (fe - Le)),
                (Se = x = 1 << Me);
              do
                k[Z + (xe >> Le) + (x -= j)] = (ue << 24) | (we << 16) | se | 0;
              while (x !== 0);
              for (j = 1 << (fe - 1); xe & j; ) j >>= 1;
              if (
                (j !== 0 ? ((xe &= j - 1), (xe += j)) : (xe = 0),
                _e++,
                --Ge[fe] == 0)
              ) {
                if (fe === ke) break;
                fe = f[d + P[_e]];
              }
              if (fe > Ae && (xe & ae) !== K) {
                for (
                  Le === 0 && (Le = Ae), Z += Se, Ue = 1 << (Me = fe - Le);
                  Me + Le < ke && !((Ue -= Ge[Me + Le]) <= 0);

                )
                  Me++, (Ue <<= 1);
                if (
                  ((Te += 1 << Me),
                  (t === ld && Te > cd) || (t === wf && Te > bf))
                )
                  return 1;
                k[(K = xe & ae)] = (Ae << 24) | (Me << 16) | (Z - T) | 0;
              }
            }
            return (
              xe !== 0 && (k[Z + xe] = ((fe - Le) << 24) | (64 << 16) | 0),
              (V.bits = Ae),
              0
            );
          }
          var Tg = 0,
            kf = 1,
            Uo = 2,
            ic = 4,
            Eg = 5,
            ac = 6,
            oc = 0,
            Ig = 1,
            Rg = 2,
            ya = -2,
            Ut = -3,
            Cg = -4,
            Ag = -5,
            Tf = 8,
            dd = 1,
            hd = 2,
            Ef = 3,
            sc = 4,
            ba = 5,
            fd = 6,
            If = 7,
            Rf = 8,
            Ws = 9,
            Cf = 10,
            Af = 11,
            Bi = 12,
            pd = 13,
            xf = 14,
            vd = 15,
            Gs = 16,
            md = 17,
            Of = 18,
            Pf = 19,
            qs = 20,
            uc = 21,
            Df = 22,
            Nf = 23,
            gd = 24,
            cc = 25,
            _d = 26,
            lc = 27,
            Ks = 28,
            Ga = 29,
            jn = 30,
            xg = 31,
            Og = 32,
            yd = 852,
            bd = 592;
          function Sa(t) {
            return (
              ((t >>> 24) & 255) +
              ((t >>> 8) & 65280) +
              ((65280 & t) << 8) +
              ((255 & t) << 24)
            );
          }
          function Lf() {
            (this.mode = 0),
              (this.last = !1),
              (this.wrap = 0),
              (this.havedict = !1),
              (this.flags = 0),
              (this.dmax = 0),
              (this.check = 0),
              (this.total = 0),
              (this.head = null),
              (this.wbits = 0),
              (this.wsize = 0),
              (this.whave = 0),
              (this.wnext = 0),
              (this.window = null),
              (this.hold = 0),
              (this.bits = 0),
              (this.length = 0),
              (this.offset = 0),
              (this.extra = 0),
              (this.lencode = null),
              (this.distcode = null),
              (this.lenbits = 0),
              (this.distbits = 0),
              (this.ncode = 0),
              (this.nlen = 0),
              (this.ndist = 0),
              (this.have = 0),
              (this.next = null),
              (this.lens = new kr(320)),
              (this.work = new kr(288)),
              (this.lendyn = null),
              (this.distdyn = null),
              (this.sane = 0),
              (this.back = 0),
              (this.was = 0);
          }
          function Sd(t) {
            var f;
            return t && t.state
              ? (((f = t.state).wsize = 0),
                (f.whave = 0),
                (f.wnext = 0),
                (function (d) {
                  var y;
                  return d && d.state
                    ? ((y = d.state),
                      (d.total_in = d.total_out = y.total = 0),
                      (d.msg = ""),
                      y.wrap && (d.adler = 1 & y.wrap),
                      (y.mode = dd),
                      (y.last = 0),
                      (y.havedict = 0),
                      (y.dmax = 32768),
                      (y.head = null),
                      (y.hold = 0),
                      (y.bits = 0),
                      (y.lencode = y.lendyn = new Gu(yd)),
                      (y.distcode = y.distdyn = new Gu(bd)),
                      (y.sane = 1),
                      (y.back = -1),
                      oc)
                    : ya;
                })(t))
              : ya;
          }
          function dc(t, f) {
            var d, y;
            return t
              ? ((y = new Lf()),
                (t.state = y),
                (y.window = null),
                (d = (function (k, T) {
                  var P, V;
                  return k && k.state
                    ? ((V = k.state),
                      T < 0
                        ? ((P = 0), (T = -T))
                        : ((P = 1 + (T >> 4)), T < 48 && (T &= 15)),
                      T && (T < 8 || T > 15)
                        ? ya
                        : (V.window !== null &&
                            V.wbits !== T &&
                            (V.window = null),
                          (V.wrap = P),
                          (V.wbits = T),
                          Sd(k)))
                    : ya;
                })(t, f)) !== oc && (t.state = null),
                d)
              : ya;
          }
          var qa,
            hc,
            Mf = !0;
          function Pg(t) {
            if (Mf) {
              var f;
              for (qa = new Gu(512), hc = new Gu(32), f = 0; f < 144; )
                t.lens[f++] = 8;
              for (; f < 256; ) t.lens[f++] = 9;
              for (; f < 280; ) t.lens[f++] = 7;
              for (; f < 288; ) t.lens[f++] = 8;
              for (
                Hs(kf, t.lens, 0, 288, qa, 0, t.work, {
                  bits: 9,
                }),
                  f = 0;
                f < 32;

              )
                t.lens[f++] = 5;
              Hs(Uo, t.lens, 0, 32, hc, 0, t.work, {
                bits: 5,
              }),
                (Mf = !1);
            }
            (t.lencode = qa),
              (t.lenbits = 9),
              (t.distcode = hc),
              (t.distbits = 5);
          }
          function Dg(t, f) {
            var d,
              y,
              k,
              T,
              P,
              V,
              j,
              x,
              K,
              ae,
              Z,
              Q,
              ue,
              we,
              se,
              le,
              fe,
              _e,
              Se,
              ke,
              Ae,
              Me,
              Le,
              Ue,
              Te = 0,
              xe = new Wu(4),
              qe = [
                16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1,
                15,
              ];
            if (!t || !t.state || !t.output || (!t.input && t.avail_in !== 0))
              return ya;
            (d = t.state).mode === Bi && (d.mode = pd),
              (P = t.next_out),
              (k = t.output),
              (j = t.avail_out),
              (T = t.next_in),
              (y = t.input),
              (V = t.avail_in),
              (x = d.hold),
              (K = d.bits),
              (ae = V),
              (Z = j),
              (Me = oc);
            e: for (;;)
              switch (d.mode) {
                case dd:
                  if (d.wrap === 0) {
                    d.mode = pd;
                    break;
                  }
                  for (; K < 16; ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  if (2 & d.wrap && x === 35615) {
                    (d.check = 0),
                      (xe[0] = 255 & x),
                      (xe[1] = (x >>> 8) & 255),
                      (d.check = ar(d.check, xe, 2, 0)),
                      (x = 0),
                      (K = 0),
                      (d.mode = hd);
                    break;
                  }
                  if (
                    ((d.flags = 0),
                    d.head && (d.head.done = !1),
                    !(1 & d.wrap) || (((255 & x) << 8) + (x >> 8)) % 31)
                  ) {
                    (t.msg = "incorrect header check"), (d.mode = jn);
                    break;
                  }
                  if ((15 & x) !== Tf) {
                    (t.msg = "unknown compression method"), (d.mode = jn);
                    break;
                  }
                  if (((K -= 4), (Ae = 8 + (15 & (x >>>= 4))), d.wbits === 0))
                    d.wbits = Ae;
                  else if (Ae > d.wbits) {
                    (t.msg = "invalid window size"), (d.mode = jn);
                    break;
                  }
                  (d.dmax = 1 << Ae),
                    (t.adler = d.check = 1),
                    (d.mode = 512 & x ? Cf : Bi),
                    (x = 0),
                    (K = 0);
                  break;
                case hd:
                  for (; K < 16; ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  if (((d.flags = x), (255 & d.flags) !== Tf)) {
                    (t.msg = "unknown compression method"), (d.mode = jn);
                    break;
                  }
                  if (57344 & d.flags) {
                    (t.msg = "unknown header flags set"), (d.mode = jn);
                    break;
                  }
                  d.head && (d.head.text = (x >> 8) & 1),
                    512 & d.flags &&
                      ((xe[0] = 255 & x),
                      (xe[1] = (x >>> 8) & 255),
                      (d.check = ar(d.check, xe, 2, 0))),
                    (x = 0),
                    (K = 0),
                    (d.mode = Ef);
                case Ef:
                  for (; K < 32; ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  d.head && (d.head.time = x),
                    512 & d.flags &&
                      ((xe[0] = 255 & x),
                      (xe[1] = (x >>> 8) & 255),
                      (xe[2] = (x >>> 16) & 255),
                      (xe[3] = (x >>> 24) & 255),
                      (d.check = ar(d.check, xe, 4, 0))),
                    (x = 0),
                    (K = 0),
                    (d.mode = sc);
                case sc:
                  for (; K < 16; ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  d.head && ((d.head.xflags = 255 & x), (d.head.os = x >> 8)),
                    512 & d.flags &&
                      ((xe[0] = 255 & x),
                      (xe[1] = (x >>> 8) & 255),
                      (d.check = ar(d.check, xe, 2, 0))),
                    (x = 0),
                    (K = 0),
                    (d.mode = ba);
                case ba:
                  if (1024 & d.flags) {
                    for (; K < 16; ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    (d.length = x),
                      d.head && (d.head.extra_len = x),
                      512 & d.flags &&
                        ((xe[0] = 255 & x),
                        (xe[1] = (x >>> 8) & 255),
                        (d.check = ar(d.check, xe, 2, 0))),
                      (x = 0),
                      (K = 0);
                  } else d.head && (d.head.extra = null);
                  d.mode = fd;
                case fd:
                  if (
                    1024 & d.flags &&
                    ((Q = d.length) > V && (Q = V),
                    Q &&
                      (d.head &&
                        ((Ae = d.head.extra_len - d.length),
                        d.head.extra ||
                          (d.head.extra = new Array(d.head.extra_len)),
                        ai(d.head.extra, y, T, Q, Ae)),
                      512 & d.flags && (d.check = ar(d.check, y, Q, T)),
                      (V -= Q),
                      (T += Q),
                      (d.length -= Q)),
                    d.length)
                  )
                    break e;
                  (d.length = 0), (d.mode = If);
                case If:
                  if (2048 & d.flags) {
                    if (V === 0) break e;
                    Q = 0;
                    do
                      (Ae = y[T + Q++]),
                        d.head &&
                          Ae &&
                          d.length < 65536 &&
                          (d.head.name += String.fromCharCode(Ae));
                    while (Ae && Q < V);
                    if (
                      (512 & d.flags && (d.check = ar(d.check, y, Q, T)),
                      (V -= Q),
                      (T += Q),
                      Ae)
                    )
                      break e;
                  } else d.head && (d.head.name = null);
                  (d.length = 0), (d.mode = Rf);
                case Rf:
                  if (4096 & d.flags) {
                    if (V === 0) break e;
                    Q = 0;
                    do
                      (Ae = y[T + Q++]),
                        d.head &&
                          Ae &&
                          d.length < 65536 &&
                          (d.head.comment += String.fromCharCode(Ae));
                    while (Ae && Q < V);
                    if (
                      (512 & d.flags && (d.check = ar(d.check, y, Q, T)),
                      (V -= Q),
                      (T += Q),
                      Ae)
                    )
                      break e;
                  } else d.head && (d.head.comment = null);
                  d.mode = Ws;
                case Ws:
                  if (512 & d.flags) {
                    for (; K < 16; ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    if (x !== (65535 & d.check)) {
                      (t.msg = "header crc mismatch"), (d.mode = jn);
                      break;
                    }
                    (x = 0), (K = 0);
                  }
                  d.head &&
                    ((d.head.hcrc = (d.flags >> 9) & 1), (d.head.done = !0)),
                    (t.adler = d.check = 0),
                    (d.mode = Bi);
                  break;
                case Cf:
                  for (; K < 32; ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  (t.adler = d.check = Sa(x)), (x = 0), (K = 0), (d.mode = Af);
                case Af:
                  if (d.havedict === 0)
                    return (
                      (t.next_out = P),
                      (t.avail_out = j),
                      (t.next_in = T),
                      (t.avail_in = V),
                      (d.hold = x),
                      (d.bits = K),
                      Rg
                    );
                  (t.adler = d.check = 1), (d.mode = Bi);
                case Bi:
                  if (f === Eg || f === ac) break e;
                case pd:
                  if (d.last) {
                    (x >>>= 7 & K), (K -= 7 & K), (d.mode = lc);
                    break;
                  }
                  for (; K < 3; ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  switch (((d.last = 1 & x), (K -= 1), 3 & (x >>>= 1))) {
                    case 0:
                      d.mode = xf;
                      break;
                    case 1:
                      if ((Pg(d), (d.mode = qs), f === ac)) {
                        (x >>>= 2), (K -= 2);
                        break e;
                      }
                      break;
                    case 2:
                      d.mode = md;
                      break;
                    case 3:
                      (t.msg = "invalid block type"), (d.mode = jn);
                  }
                  (x >>>= 2), (K -= 2);
                  break;
                case xf:
                  for (x >>>= 7 & K, K -= 7 & K; K < 32; ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  if ((65535 & x) != ((x >>> 16) ^ 65535)) {
                    (t.msg = "invalid stored block lengths"), (d.mode = jn);
                    break;
                  }
                  if (
                    ((d.length = 65535 & x),
                    (x = 0),
                    (K = 0),
                    (d.mode = vd),
                    f === ac)
                  )
                    break e;
                case vd:
                  d.mode = Gs;
                case Gs:
                  if ((Q = d.length)) {
                    if ((Q > V && (Q = V), Q > j && (Q = j), Q === 0)) break e;
                    ai(k, y, T, Q, P),
                      (V -= Q),
                      (T += Q),
                      (j -= Q),
                      (P += Q),
                      (d.length -= Q);
                    break;
                  }
                  d.mode = Bi;
                  break;
                case md:
                  for (; K < 14; ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  if (
                    ((d.nlen = 257 + (31 & x)),
                    (x >>>= 5),
                    (K -= 5),
                    (d.ndist = 1 + (31 & x)),
                    (x >>>= 5),
                    (K -= 5),
                    (d.ncode = 4 + (15 & x)),
                    (x >>>= 4),
                    (K -= 4),
                    d.nlen > 286 || d.ndist > 30)
                  ) {
                    (t.msg = "too many length or distance symbols"),
                      (d.mode = jn);
                    break;
                  }
                  (d.have = 0), (d.mode = Of);
                case Of:
                  for (; d.have < d.ncode; ) {
                    for (; K < 3; ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    (d.lens[qe[d.have++]] = 7 & x), (x >>>= 3), (K -= 3);
                  }
                  for (; d.have < 19; ) d.lens[qe[d.have++]] = 0;
                  if (
                    ((d.lencode = d.lendyn),
                    (d.lenbits = 7),
                    (Le = {
                      bits: d.lenbits,
                    }),
                    (Me = Hs(Tg, d.lens, 0, 19, d.lencode, 0, d.work, Le)),
                    (d.lenbits = Le.bits),
                    Me)
                  ) {
                    (t.msg = "invalid code lengths set"), (d.mode = jn);
                    break;
                  }
                  (d.have = 0), (d.mode = Pf);
                case Pf:
                  for (; d.have < d.nlen + d.ndist; ) {
                    for (
                      ;
                      (le =
                        ((Te = d.lencode[x & ((1 << d.lenbits) - 1)]) >>> 16) &
                        255),
                        (fe = 65535 & Te),
                        !((se = Te >>> 24) <= K);

                    ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    if (fe < 16)
                      (x >>>= se), (K -= se), (d.lens[d.have++] = fe);
                    else {
                      if (fe === 16) {
                        for (Ue = se + 2; K < Ue; ) {
                          if (V === 0) break e;
                          V--, (x += y[T++] << K), (K += 8);
                        }
                        if (((x >>>= se), (K -= se), d.have === 0)) {
                          (t.msg = "invalid bit length repeat"), (d.mode = jn);
                          break;
                        }
                        (Ae = d.lens[d.have - 1]),
                          (Q = 3 + (3 & x)),
                          (x >>>= 2),
                          (K -= 2);
                      } else if (fe === 17) {
                        for (Ue = se + 3; K < Ue; ) {
                          if (V === 0) break e;
                          V--, (x += y[T++] << K), (K += 8);
                        }
                        (K -= se),
                          (Ae = 0),
                          (Q = 3 + (7 & (x >>>= se))),
                          (x >>>= 3),
                          (K -= 3);
                      } else {
                        for (Ue = se + 7; K < Ue; ) {
                          if (V === 0) break e;
                          V--, (x += y[T++] << K), (K += 8);
                        }
                        (K -= se),
                          (Ae = 0),
                          (Q = 11 + (127 & (x >>>= se))),
                          (x >>>= 7),
                          (K -= 7);
                      }
                      if (d.have + Q > d.nlen + d.ndist) {
                        (t.msg = "invalid bit length repeat"), (d.mode = jn);
                        break;
                      }
                      for (; Q--; ) d.lens[d.have++] = Ae;
                    }
                  }
                  if (d.mode === jn) break;
                  if (d.lens[256] === 0) {
                    (t.msg = "invalid code -- missing end-of-block"),
                      (d.mode = jn);
                    break;
                  }
                  if (
                    ((d.lenbits = 9),
                    (Le = {
                      bits: d.lenbits,
                    }),
                    (Me = Hs(kf, d.lens, 0, d.nlen, d.lencode, 0, d.work, Le)),
                    (d.lenbits = Le.bits),
                    Me)
                  ) {
                    (t.msg = "invalid literal/lengths set"), (d.mode = jn);
                    break;
                  }
                  if (
                    ((d.distbits = 6),
                    (d.distcode = d.distdyn),
                    (Le = {
                      bits: d.distbits,
                    }),
                    (Me = Hs(
                      Uo,
                      d.lens,
                      d.nlen,
                      d.ndist,
                      d.distcode,
                      0,
                      d.work,
                      Le
                    )),
                    (d.distbits = Le.bits),
                    Me)
                  ) {
                    (t.msg = "invalid distances set"), (d.mode = jn);
                    break;
                  }
                  if (((d.mode = qs), f === ac)) break e;
                case qs:
                  d.mode = uc;
                case uc:
                  if (V >= 6 && j >= 258) {
                    (t.next_out = P),
                      (t.avail_out = j),
                      (t.next_in = T),
                      (t.avail_in = V),
                      (d.hold = x),
                      (d.bits = K),
                      bg(t, Z),
                      (P = t.next_out),
                      (k = t.output),
                      (j = t.avail_out),
                      (T = t.next_in),
                      (y = t.input),
                      (V = t.avail_in),
                      (x = d.hold),
                      (K = d.bits),
                      d.mode === Bi && (d.back = -1);
                    break;
                  }
                  for (
                    d.back = 0;
                    (le =
                      ((Te = d.lencode[x & ((1 << d.lenbits) - 1)]) >>> 16) &
                      255),
                      (fe = 65535 & Te),
                      !((se = Te >>> 24) <= K);

                  ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  if (le && !(240 & le)) {
                    for (
                      _e = se, Se = le, ke = fe;
                      (le =
                        ((Te =
                          d.lencode[
                            ke + ((x & ((1 << (_e + Se)) - 1)) >> _e)
                          ]) >>>
                          16) &
                        255),
                        (fe = 65535 & Te),
                        !(_e + (se = Te >>> 24) <= K);

                    ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    (x >>>= _e), (K -= _e), (d.back += _e);
                  }
                  if (
                    ((x >>>= se),
                    (K -= se),
                    (d.back += se),
                    (d.length = fe),
                    le === 0)
                  ) {
                    d.mode = _d;
                    break;
                  }
                  if (32 & le) {
                    (d.back = -1), (d.mode = Bi);
                    break;
                  }
                  if (64 & le) {
                    (t.msg = "invalid literal/length code"), (d.mode = jn);
                    break;
                  }
                  (d.extra = 15 & le), (d.mode = Df);
                case Df:
                  if (d.extra) {
                    for (Ue = d.extra; K < Ue; ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    (d.length += x & ((1 << d.extra) - 1)),
                      (x >>>= d.extra),
                      (K -= d.extra),
                      (d.back += d.extra);
                  }
                  (d.was = d.length), (d.mode = Nf);
                case Nf:
                  for (
                    ;
                    (le =
                      ((Te = d.distcode[x & ((1 << d.distbits) - 1)]) >>> 16) &
                      255),
                      (fe = 65535 & Te),
                      !((se = Te >>> 24) <= K);

                  ) {
                    if (V === 0) break e;
                    V--, (x += y[T++] << K), (K += 8);
                  }
                  if (!(240 & le)) {
                    for (
                      _e = se, Se = le, ke = fe;
                      (le =
                        ((Te =
                          d.distcode[
                            ke + ((x & ((1 << (_e + Se)) - 1)) >> _e)
                          ]) >>>
                          16) &
                        255),
                        (fe = 65535 & Te),
                        !(_e + (se = Te >>> 24) <= K);

                    ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    (x >>>= _e), (K -= _e), (d.back += _e);
                  }
                  if (((x >>>= se), (K -= se), (d.back += se), 64 & le)) {
                    (t.msg = "invalid distance code"), (d.mode = jn);
                    break;
                  }
                  (d.offset = fe), (d.extra = 15 & le), (d.mode = gd);
                case gd:
                  if (d.extra) {
                    for (Ue = d.extra; K < Ue; ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    (d.offset += x & ((1 << d.extra) - 1)),
                      (x >>>= d.extra),
                      (K -= d.extra),
                      (d.back += d.extra);
                  }
                  if (d.offset > d.dmax) {
                    (t.msg = "invalid distance too far back"), (d.mode = jn);
                    break;
                  }
                  d.mode = cc;
                case cc:
                  if (j === 0) break e;
                  if (((Q = Z - j), d.offset > Q)) {
                    if ((Q = d.offset - Q) > d.whave && d.sane) {
                      (t.msg = "invalid distance too far back"), (d.mode = jn);
                      break;
                    }
                    Q > d.wnext
                      ? ((Q -= d.wnext), (ue = d.wsize - Q))
                      : (ue = d.wnext - Q),
                      Q > d.length && (Q = d.length),
                      (we = d.window);
                  } else (we = k), (ue = P - d.offset), (Q = d.length);
                  Q > j && (Q = j), (j -= Q), (d.length -= Q);
                  do k[P++] = we[ue++];
                  while (--Q);
                  d.length === 0 && (d.mode = uc);
                  break;
                case _d:
                  if (j === 0) break e;
                  (k[P++] = d.length), j--, (d.mode = uc);
                  break;
                case lc:
                  if (d.wrap) {
                    for (; K < 32; ) {
                      if (V === 0) break e;
                      V--, (x |= y[T++] << K), (K += 8);
                    }
                    if (
                      ((Z -= j),
                      (t.total_out += Z),
                      (d.total += Z),
                      Z &&
                        (t.adler = d.check =
                          d.flags
                            ? ar(d.check, k, Z, P - Z)
                            : Ms(d.check, k, Z, P - Z)),
                      (Z = j),
                      (d.flags ? x : Sa(x)) !== d.check)
                    ) {
                      (t.msg = "incorrect data check"), (d.mode = jn);
                      break;
                    }
                    (x = 0), (K = 0);
                  }
                  d.mode = Ks;
                case Ks:
                  if (d.wrap && d.flags) {
                    for (; K < 32; ) {
                      if (V === 0) break e;
                      V--, (x += y[T++] << K), (K += 8);
                    }
                    if (x !== (4294967295 & d.total)) {
                      (t.msg = "incorrect length check"), (d.mode = jn);
                      break;
                    }
                    (x = 0), (K = 0);
                  }
                  d.mode = Ga;
                case Ga:
                  Me = Ig;
                  break e;
                case jn:
                  Me = Ut;
                  break e;
                case xg:
                  return Cg;
                case Og:
                default:
                  return ya;
              }
            return (
              (t.next_out = P),
              (t.avail_out = j),
              (t.next_in = T),
              (t.avail_in = V),
              (d.hold = x),
              (d.bits = K),
              (d.wsize ||
                (Z !== t.avail_out &&
                  d.mode < jn &&
                  (d.mode < lc || f !== ic))) &&
                (function (ut, Ge, mt, kt) {
                  var qt,
                    xt = ut.state;
                  xt.window === null &&
                    ((xt.wsize = 1 << xt.wbits),
                    (xt.wnext = 0),
                    (xt.whave = 0),
                    (xt.window = new Wu(xt.wsize))),
                    kt >= xt.wsize
                      ? (ai(xt.window, Ge, mt - xt.wsize, xt.wsize, 0),
                        (xt.wnext = 0),
                        (xt.whave = xt.wsize))
                      : ((qt = xt.wsize - xt.wnext) > kt && (qt = kt),
                        ai(xt.window, Ge, mt - kt, qt, xt.wnext),
                        (kt -= qt)
                          ? (ai(xt.window, Ge, mt - kt, kt, 0),
                            (xt.wnext = kt),
                            (xt.whave = xt.wsize))
                          : ((xt.wnext += qt),
                            xt.wnext === xt.wsize && (xt.wnext = 0),
                            xt.whave < xt.wsize && (xt.whave += qt)));
                })(t, t.output, t.next_out, Z - t.avail_out),
              (ae -= t.avail_in),
              (Z -= t.avail_out),
              (t.total_in += ae),
              (t.total_out += Z),
              (d.total += Z),
              d.wrap &&
                Z &&
                (t.adler = d.check =
                  d.flags
                    ? ar(d.check, k, Z, t.next_out - Z)
                    : Ms(d.check, k, Z, t.next_out - Z)),
              (t.data_type =
                d.bits +
                (d.last ? 64 : 0) +
                (d.mode === Bi ? 128 : 0) +
                (d.mode === qs || d.mode === vd ? 256 : 0)),
              ((ae === 0 && Z === 0) || f === ic) && Me === oc && (Me = Ag),
              Me
            );
          }
          var fc,
            Ka = 1,
            Ja = 7;
          function wi(t) {
            if (t < Ka || t > Ja) throw new TypeError("Bad argument");
            (this.mode = t),
              (this.init_done = !1),
              (this.write_in_progress = !1),
              (this.pending_close = !1),
              (this.windowBits = 0),
              (this.level = 0),
              (this.memLevel = 0),
              (this.strategy = 0),
              (this.dictionary = null);
          }
          function Js(t, f) {
            for (var d = 0; d < t.length; d++) this[f + d] = t[d];
          }
          (wi.prototype.init = function (t, f, d, y, k) {
            var T;
            switch (
              ((this.windowBits = t),
              (this.level = f),
              (this.memLevel = d),
              (this.strategy = y),
              (this.mode !== 3 && this.mode !== 4) || (this.windowBits += 16),
              this.mode === Ja && (this.windowBits += 32),
              (this.mode !== 5 && this.mode !== 6) ||
                (this.windowBits = -this.windowBits),
              (this.strm = new af()),
              this.mode)
            ) {
              case Ka:
              case 3:
              case 5:
                T = (function (P, V, j, x, K, ae) {
                  if (!P) return Ha;
                  var Z = 1;
                  if (
                    (V === ug && (V = 6),
                    x < 0
                      ? ((Z = 0), (x = -x))
                      : x > 15 && ((Z = 2), (x -= 16)),
                    K < 1 ||
                      K > hg ||
                      j !== rd ||
                      x < 8 ||
                      x > 15 ||
                      V < 0 ||
                      V > 9 ||
                      ae < 0 ||
                      ae > ec)
                  )
                    return _a(P, Ha);
                  x === 8 && (x = 9);
                  var Q = new ud();
                  return (
                    (P.state = Q),
                    (Q.strm = P),
                    (Q.wrap = Z),
                    (Q.gzhead = null),
                    (Q.w_bits = x),
                    (Q.w_size = 1 << Q.w_bits),
                    (Q.w_mask = Q.w_size - 1),
                    (Q.hash_bits = K + 7),
                    (Q.hash_size = 1 << Q.hash_bits),
                    (Q.hash_mask = Q.hash_size - 1),
                    (Q.hash_shift = ~~((Q.hash_bits + dn - 1) / dn)),
                    (Q.window = new Wu(2 * Q.w_size)),
                    (Q.head = new kr(Q.hash_size)),
                    (Q.prev = new kr(Q.w_size)),
                    (Q.lit_bufsize = 1 << (K + 6)),
                    (Q.pending_buf_size = 4 * Q.lit_bufsize),
                    (Q.pending_buf = new Wu(Q.pending_buf_size)),
                    (Q.d_buf = 1 * Q.lit_bufsize),
                    (Q.l_buf = 3 * Q.lit_bufsize),
                    (Q.level = V),
                    (Q.strategy = ae),
                    (Q.method = j),
                    yf(P)
                  );
                })(
                  this.strm,
                  this.level,
                  8,
                  this.windowBits,
                  this.memLevel,
                  this.strategy
                );
                break;
              case 2:
              case 4:
              case 6:
              case Ja:
                T = dc(this.strm, this.windowBits);
                break;
              default:
                throw new Error("Unknown mode " + this.mode);
            }
            T === 0
              ? ((this.write_in_progress = !1), (this.init_done = !0))
              : this._error(T);
          }),
            (wi.prototype.params = function () {
              throw new Error("deflateParams Not supported");
            }),
            (wi.prototype._writeCheck = function () {
              if (!this.init_done) throw new Error("write before init");
              if (this.mode === 0) throw new Error("already finalized");
              if (this.write_in_progress)
                throw new Error("write already in progress");
              if (this.pending_close) throw new Error("close is pending");
            }),
            (wi.prototype.write = function (t, f, d, y, k, T, P) {
              this._writeCheck(), (this.write_in_progress = !0);
              var V = this;
              return (
                Zt(function () {
                  V.write_in_progress = !1;
                  var j = V._write(t, f, d, y, k, T, P);
                  V.callback(j[0], j[1]), V.pending_close && V.close();
                }),
                this
              );
            }),
            (wi.prototype.writeSync = function (t, f, d, y, k, T, P) {
              return this._writeCheck(), this._write(t, f, d, y, k, T, P);
            }),
            (wi.prototype._write = function (t, f, d, y, k, T, P) {
              if (
                ((this.write_in_progress = !0),
                t !== 0 && t !== 1 && t !== 2 && t !== 3 && t !== 4 && t !== 5)
              )
                throw new Error("Invalid flush value");
              f == null && ((f = new de(0)), (y = 0), (d = 0)),
                k._set ? (k.set = k._set) : (k.set = Js);
              var V,
                j = this.strm;
              switch (
                ((j.avail_in = y),
                (j.input = f),
                (j.next_in = d),
                (j.avail_out = P),
                (j.output = k),
                (j.next_out = T),
                this.mode)
              ) {
                case Ka:
                case 3:
                case 5:
                  V = _g(j, t);
                  break;
                case Ja:
                case 2:
                case 4:
                case 6:
                  V = Dg(j, t);
                  break;
                default:
                  throw new Error("Unknown mode " + this.mode);
              }
              return (
                V !== 1 && V !== 0 && this._error(V),
                (this.write_in_progress = !1),
                [j.avail_in, j.avail_out]
              );
            }),
            (wi.prototype.close = function () {
              this.write_in_progress
                ? (this.pending_close = !0)
                : ((this.pending_close = !1),
                  this.mode === Ka || this.mode === 3 || this.mode === 5
                    ? (function (t) {
                        var f;
                        t &&
                          t.state &&
                          ((f = t.state.status) !== Lr &&
                          f !== ad &&
                          f !== tc &&
                          f !== nc &&
                          f !== si &&
                          f !== Wa &&
                          f !== Vs
                            ? _a(t, Ha)
                            : ((t.state = null), f === Wa && _a(t, Qu)));
                      })(this.strm)
                    : (function (t) {
                        if (!t || !t.state) return ya;
                        var f = t.state;
                        f.window && (f.window = null), (t.state = null);
                      })(this.strm),
                  (this.mode = 0));
            }),
            (wi.prototype.reset = function () {
              switch (this.mode) {
                case Ka:
                case 5:
                  fc = yf(this.strm);
                  break;
                case 2:
                case 6:
                  fc = Sd(this.strm);
              }
              fc !== 0 && this._error(fc);
            }),
            (wi.prototype._error = function (t) {
              this.onerror(Is[t] + ": " + this.strm.msg, t),
                (this.write_in_progress = !1),
                this.pending_close && this.close();
            });
          var Uf = Object.freeze({
              NONE: 0,
              DEFLATE: Ka,
              INFLATE: 2,
              GZIP: 3,
              GUNZIP: 4,
              DEFLATERAW: 5,
              INFLATERAW: 6,
              UNZIP: Ja,
              Z_NO_FLUSH: 0,
              Z_PARTIAL_FLUSH: 1,
              Z_SYNC_FLUSH: 2,
              Z_FULL_FLUSH: 3,
              Z_FINISH: 4,
              Z_BLOCK: 5,
              Z_TREES: 6,
              Z_OK: 0,
              Z_STREAM_END: 1,
              Z_NEED_DICT: 2,
              Z_ERRNO: -1,
              Z_STREAM_ERROR: -2,
              Z_DATA_ERROR: -3,
              Z_BUF_ERROR: -5,
              Z_NO_COMPRESSION: 0,
              Z_BEST_SPEED: 1,
              Z_BEST_COMPRESSION: 9,
              Z_DEFAULT_COMPRESSION: -1,
              Z_FILTERED: 1,
              Z_HUFFMAN_ONLY: 2,
              Z_RLE: 3,
              Z_FIXED: 4,
              Z_DEFAULT_STRATEGY: 0,
              Z_BINARY: 0,
              Z_TEXT: 1,
              Z_UNKNOWN: 2,
              Z_DEFLATED: 8,
              Zlib: wi,
            }),
            bt = {};
          Object.keys(Uf).forEach(function (t) {
            bt[t] = Uf[t];
          }),
            (bt.Z_MIN_WINDOWBITS = 8),
            (bt.Z_MAX_WINDOWBITS = 15),
            (bt.Z_DEFAULT_WINDOWBITS = 15),
            (bt.Z_MIN_CHUNK = 64),
            (bt.Z_MAX_CHUNK = 1 / 0),
            (bt.Z_DEFAULT_CHUNK = 16384),
            (bt.Z_MIN_MEMLEVEL = 1),
            (bt.Z_MAX_MEMLEVEL = 9),
            (bt.Z_DEFAULT_MEMLEVEL = 8),
            (bt.Z_MIN_LEVEL = -1),
            (bt.Z_MAX_LEVEL = 9),
            (bt.Z_DEFAULT_LEVEL = bt.Z_DEFAULT_COMPRESSION);
          var pc = {
            Z_OK: bt.Z_OK,
            Z_STREAM_END: bt.Z_STREAM_END,
            Z_NEED_DICT: bt.Z_NEED_DICT,
            Z_ERRNO: bt.Z_ERRNO,
            Z_STREAM_ERROR: bt.Z_STREAM_ERROR,
            Z_DATA_ERROR: bt.Z_DATA_ERROR,
            Z_MEM_ERROR: bt.Z_MEM_ERROR,
            Z_BUF_ERROR: bt.Z_BUF_ERROR,
            Z_VERSION_ERROR: bt.Z_VERSION_ERROR,
          };
          function wa(t, f, d) {
            var y = [],
              k = 0;
            function T() {
              for (var V; (V = t.read()) !== null; ) y.push(V), (k += V.length);
              t.once("readable", T);
            }
            function P() {
              var V = de.concat(y, k);
              (y = []), d(null, V), t.close();
            }
            t.on("error", function (V) {
              t.removeListener("end", P), t.removeListener("readable", T), d(V);
            }),
              t.on("end", P),
              t.end(f),
              T();
          }
          function $a(t, f) {
            if ((typeof f == "string" && (f = new de(f)), !Mt(f)))
              throw new TypeError("Not a string or buffer");
            var d = bt.Z_FINISH;
            return t._processChunk(f, d);
          }
          function zi(t) {
            if (!(this instanceof zi)) return new zi(t);
            En.call(this, t, bt.DEFLATE);
          }
          function ka(t) {
            if (!(this instanceof ka)) return new ka(t);
            En.call(this, t, bt.INFLATE);
          }
          function Ya(t) {
            if (!(this instanceof Ya)) return new Ya(t);
            En.call(this, t, bt.GZIP);
          }
          function Hi(t) {
            if (!(this instanceof Hi)) return new Hi(t);
            En.call(this, t, bt.GUNZIP);
          }
          function Za(t) {
            if (!(this instanceof Za)) return new Za(t);
            En.call(this, t, bt.DEFLATERAW);
          }
          function Qa(t) {
            if (!(this instanceof Qa)) return new Qa(t);
            En.call(this, t, bt.INFLATERAW);
          }
          function Ta(t) {
            if (!(this instanceof Ta)) return new Ta(t);
            En.call(this, t, bt.UNZIP);
          }
          function En(t, f) {
            if (
              ((this._opts = t = t || {}),
              (this._chunkSize = t.chunkSize || bt.Z_DEFAULT_CHUNK),
              Yr.call(this, t),
              t.flush &&
                t.flush !== bt.Z_NO_FLUSH &&
                t.flush !== bt.Z_PARTIAL_FLUSH &&
                t.flush !== bt.Z_SYNC_FLUSH &&
                t.flush !== bt.Z_FULL_FLUSH &&
                t.flush !== bt.Z_FINISH &&
                t.flush !== bt.Z_BLOCK)
            )
              throw new Error("Invalid flush flag: " + t.flush);
            if (
              ((this._flushFlag = t.flush || bt.Z_NO_FLUSH),
              t.chunkSize &&
                (t.chunkSize < bt.Z_MIN_CHUNK || t.chunkSize > bt.Z_MAX_CHUNK))
            )
              throw new Error("Invalid chunk size: " + t.chunkSize);
            if (
              t.windowBits &&
              (t.windowBits < bt.Z_MIN_WINDOWBITS ||
                t.windowBits > bt.Z_MAX_WINDOWBITS)
            )
              throw new Error("Invalid windowBits: " + t.windowBits);
            if (
              t.level &&
              (t.level < bt.Z_MIN_LEVEL || t.level > bt.Z_MAX_LEVEL)
            )
              throw new Error("Invalid compression level: " + t.level);
            if (
              t.memLevel &&
              (t.memLevel < bt.Z_MIN_MEMLEVEL || t.memLevel > bt.Z_MAX_MEMLEVEL)
            )
              throw new Error("Invalid memLevel: " + t.memLevel);
            if (
              t.strategy &&
              t.strategy != bt.Z_FILTERED &&
              t.strategy != bt.Z_HUFFMAN_ONLY &&
              t.strategy != bt.Z_RLE &&
              t.strategy != bt.Z_FIXED &&
              t.strategy != bt.Z_DEFAULT_STRATEGY
            )
              throw new Error("Invalid strategy: " + t.strategy);
            if (t.dictionary && !Mt(t.dictionary))
              throw new Error(
                "Invalid dictionary: it should be a Buffer instance"
              );
            this._binding = new bt.Zlib(f);
            var d = this;
            (this._hadError = !1),
              (this._binding.onerror = function (T, P) {
                (d._binding = null), (d._hadError = !0);
                var V = new Error(T);
                (V.errno = P), (V.code = bt.codes[P]), d.emit("error", V);
              });
            var y = bt.Z_DEFAULT_COMPRESSION;
            typeof t.level == "number" && (y = t.level);
            var k = bt.Z_DEFAULT_STRATEGY;
            typeof t.strategy == "number" && (k = t.strategy),
              this._binding.init(
                t.windowBits || bt.Z_DEFAULT_WINDOWBITS,
                y,
                t.memLevel || bt.Z_DEFAULT_MEMLEVEL,
                k,
                t.dictionary
              ),
              (this._buffer = new de(this._chunkSize)),
              (this._offset = 0),
              (this._closed = !1),
              (this._level = y),
              (this._strategy = k),
              this.once("end", this.close);
          }
          Object.keys(pc).forEach(function (t) {
            pc[pc[t]] = t;
          }),
            wr(En, Yr),
            (En.prototype.params = function (t, f, d) {
              if (t < bt.Z_MIN_LEVEL || t > bt.Z_MAX_LEVEL)
                throw new RangeError("Invalid compression level: " + t);
              if (
                f != bt.Z_FILTERED &&
                f != bt.Z_HUFFMAN_ONLY &&
                f != bt.Z_RLE &&
                f != bt.Z_FIXED &&
                f != bt.Z_DEFAULT_STRATEGY
              )
                throw new TypeError("Invalid strategy: " + f);
              if (this._level !== t || this._strategy !== f) {
                var y = this;
                this.flush(bt.Z_SYNC_FLUSH, function () {
                  y._binding.params(t, f),
                    y._hadError ||
                      ((y._level = t), (y._strategy = f), d && d());
                });
              } else Zt(d);
            }),
            (En.prototype.reset = function () {
              return this._binding.reset();
            }),
            (En.prototype._flush = function (t) {
              this._transform(new de(0), "", t);
            }),
            (En.prototype.flush = function (t, f) {
              var d = this._writableState;
              if (
                ((typeof t == "function" || (t === void 0 && !f)) &&
                  ((f = t), (t = bt.Z_FULL_FLUSH)),
                d.ended)
              )
                f && Zt(f);
              else if (d.ending) f && this.once("end", f);
              else if (d.needDrain) {
                var y = this;
                this.once("drain", function () {
                  y.flush(f);
                });
              } else (this._flushFlag = t), this.write(new de(0), "", f);
            }),
            (En.prototype.close = function (t) {
              if ((t && Zt(t), !this._closed)) {
                (this._closed = !0), this._binding.close();
                var f = this;
                Zt(function () {
                  f.emit("close");
                });
              }
            }),
            (En.prototype._transform = function (t, f, d) {
              var y,
                k = this._writableState,
                T = (k.ending || k.ended) && (!t || k.length === t.length);
              if (!t === null && !Mt(t)) return d(new Error("invalid input"));
              T
                ? (y = bt.Z_FINISH)
                : ((y = this._flushFlag),
                  t.length >= k.length &&
                    (this._flushFlag = this._opts.flush || bt.Z_NO_FLUSH)),
                this._processChunk(t, y, d);
            }),
            (En.prototype._processChunk = function (t, f, d) {
              var y = t && t.length,
                k = this._chunkSize - this._offset,
                T = 0,
                P = this,
                V = typeof d == "function";
              if (!V) {
                var j,
                  x = [],
                  K = 0;
                this.on("error", function (we) {
                  j = we;
                });
                do
                  var ae = this._binding.writeSync(
                    f,
                    t,
                    T,
                    y,
                    this._buffer,
                    this._offset,
                    k
                  );
                while (!this._hadError && ue(ae[0], ae[1]));
                if (this._hadError) throw j;
                var Z = de.concat(x, K);
                return this.close(), Z;
              }
              var Q = this._binding.write(
                f,
                t,
                T,
                y,
                this._buffer,
                this._offset,
                k
              );
              function ue(we, se) {
                if (!P._hadError) {
                  var le = k - se;
                  if (
                    ((function (Se, ke) {
                      if (!Se) throw new Error(ke);
                    })(le >= 0, "have should not go down"),
                    le > 0)
                  ) {
                    var fe = P._buffer.slice(P._offset, P._offset + le);
                    (P._offset += le),
                      V ? P.push(fe) : (x.push(fe), (K += fe.length));
                  }
                  if (
                    ((se === 0 || P._offset >= P._chunkSize) &&
                      ((k = P._chunkSize),
                      (P._offset = 0),
                      (P._buffer = new de(P._chunkSize))),
                    se === 0)
                  ) {
                    if (((T += y - we), (y = we), !V)) return !0;
                    var _e = P._binding.write(
                      f,
                      t,
                      T,
                      y,
                      P._buffer,
                      P._offset,
                      P._chunkSize
                    );
                    return (_e.callback = ue), void (_e.buffer = t);
                  }
                  if (!V) return !1;
                  d();
                }
              }
              (Q.buffer = t), (Q.callback = ue);
            }),
            wr(zi, En),
            wr(ka, En),
            wr(Ya, En),
            wr(Hi, En),
            wr(Za, En),
            wr(Qa, En),
            wr(Ta, En);
          var Vf = {
            codes: pc,
            createDeflate: function (f) {
              return new zi(f);
            },
            createInflate: function (f) {
              return new ka(f);
            },
            createDeflateRaw: function (f) {
              return new Za(f);
            },
            createInflateRaw: function (f) {
              return new Qa(f);
            },
            createGzip: function (f) {
              return new Ya(f);
            },
            createGunzip: function (f) {
              return new Hi(f);
            },
            createUnzip: function (f) {
              return new Ta(f);
            },
            deflate: function (f, d, y) {
              return (
                typeof d == "function" && ((y = d), (d = {})),
                wa(new zi(d), f, y)
              );
            },
            deflateSync: function (f, d) {
              return $a(new zi(d), f);
            },
            gzip: function (f, d, y) {
              return (
                typeof d == "function" && ((y = d), (d = {})),
                wa(new Ya(d), f, y)
              );
            },
            gzipSync: function (f, d) {
              return $a(new Ya(d), f);
            },
            deflateRaw: function (f, d, y) {
              return (
                typeof d == "function" && ((y = d), (d = {})),
                wa(new Za(d), f, y)
              );
            },
            deflateRawSync: function (f, d) {
              return $a(new Za(d), f);
            },
            unzip: function (f, d, y) {
              return (
                typeof d == "function" && ((y = d), (d = {})),
                wa(new Ta(d), f, y)
              );
            },
            unzipSync: function (f, d) {
              return $a(new Ta(d), f);
            },
            inflate: function (f, d, y) {
              return (
                typeof d == "function" && ((y = d), (d = {})),
                wa(new ka(d), f, y)
              );
            },
            inflateSync: function (f, d) {
              return $a(new ka(d), f);
            },
            gunzip: function (f, d, y) {
              return (
                typeof d == "function" && ((y = d), (d = {})),
                wa(new Hi(d), f, y)
              );
            },
            gunzipSync: function (f, d) {
              return $a(new Hi(d), f);
            },
            inflateRaw: function (f, d, y) {
              return (
                typeof d == "function" && ((y = d), (d = {})),
                wa(new Qa(d), f, y)
              );
            },
            inflateRawSync: function (f, d) {
              return $a(new Qa(d), f);
            },
            Deflate: zi,
            Inflate: ka,
            Gzip: Ya,
            Gunzip: Hi,
            DeflateRaw: Za,
            InflateRaw: Qa,
            Unzip: Ta,
            Zlib: En,
          };
          return /* @__PURE__ */ (function () {
            function t(f, d, y) {
              Ir(this, t),
                (this.SDKAPPID = f),
                (this.EXPIRETIME = y),
                (this.PRIVATEKEY = d);
            }
            return Rr(t, [
              {
                key: "genTestUserSig",
                value: function (d) {
                  return this._isNumber(this.SDKAPPID)
                    ? this._isString(this.PRIVATEKEY)
                      ? this._isString(d)
                        ? this._isNumber(this.EXPIRETIME)
                          ? (console.log(
                              "sdkAppID=" +
                                this.SDKAPPID +
                                " key=" +
                                this.PRIVATEKEY +
                                " userID=" +
                                d +
                                " expire=" +
                                this.EXPIRETIME
                            ),
                            this.genSigWithUserbuf(d, this.EXPIRETIME, null))
                          : (console.error("expireTime must be a number"), "")
                        : (console.error("userID must be a string"), "")
                      : (console.error("privateKey must be a string"), "")
                    : (console.error("sdkAppID must be a number"), "");
                },
              },
              {
                key: "newBuffer",
                value: function (d, y) {
                  return de.from ? de.from(d, y) : new de(d, y);
                },
              },
              {
                key: "unescape",
                value: function (d) {
                  return d
                    .replace(/_/g, "=")
                    .replace(/\-/g, "/")
                    .replace(/\*/g, "+");
                },
              },
              {
                key: "escape",
                value: function (d) {
                  return d
                    .replace(/\+/g, "*")
                    .replace(/\//g, "-")
                    .replace(/=/g, "_");
                },
              },
              {
                key: "encode",
                value: function (d) {
                  return this.escape(this.newBuffer(d).toString("base64"));
                },
              },
              {
                key: "decode",
                value: function (d) {
                  return this.newBuffer(this.unescape(d), "base64");
                },
              },
              {
                key: "base64encode",
                value: function (d) {
                  return this.newBuffer(d).toString("base64");
                },
              },
              {
                key: "base64decode",
                value: function (d) {
                  return this.newBuffer(d, "base64").toString();
                },
              },
              {
                key: "_hmacsha256",
                value: function (d, y, k, T) {
                  var P =
                    "TLS.identifier:" +
                    d +
                    `
`;
                  (P +=
                    "TLS.sdkappid:" +
                    this.SDKAPPID +
                    `
`),
                    (P +=
                      "TLS.time:" +
                      y +
                      `
`),
                    (P +=
                      "TLS.expire:" +
                      k +
                      `
`),
                    T != null &&
                      (P +=
                        "TLS.userbuf:" +
                        T +
                        `
`);
                  var V = un.HmacSHA256(P, this.PRIVATEKEY);
                  return un.enc.Base64.stringify(V);
                },
              },
              {
                key: "_utc",
                value: function () {
                  return Math.round(Date.now() / 1e3);
                },
              },
              {
                key: "_isNumber",
                value: function (d) {
                  return (
                    d !== null &&
                    ((typeof d == "number" && !isNaN(d - 0)) ||
                      (vt(d) == "object" && d.constructor === Number))
                  );
                },
              },
              {
                key: "_isString",
                value: function (d) {
                  return typeof d == "string";
                },
              },
              {
                key: "genSigWithUserbuf",
                value: function (d, y, k) {
                  var T = this._utc(),
                    P = {
                      "TLS.ver": "2.0",
                      "TLS.identifier": d,
                      "TLS.sdkappid": this.SDKAPPID,
                      "TLS.time": T,
                      "TLS.expire": y,
                    },
                    V = "";
                  if (k != null) {
                    var j = this.base64encode(k);
                    (P["TLS.userbuf"] = j), (V = this._hmacsha256(d, T, y, j));
                  } else V = this._hmacsha256(d, T, y, null);
                  P["TLS.sig"] = V;
                  var x = JSON.stringify(P),
                    K = Vf.deflateSync(this.newBuffer(x)).toString("base64"),
                    ae = this.escape(K);
                  return console.log("ret=" + ae), ae;
                },
              },
              {
                key: "validate",
                value: function (d) {
                  var y = this.decode(d),
                    k = Vf.inflateSync(y);
                  console.log("validate ret=" + k);
                },
              },
            ]);
          })();
        });
      })(_m)),
    _m.exports
  );
}
var nZ = tZ(),
  rZ = /* @__PURE__ */ XY(nZ);
function iZ(r) {
  var i = r.sdkAppId,
    o = r.userId,
    p = r.secretKey,
    m = i,
    S = 604800,
    O = p;
  (m == null || O === "") &&
    alert(`请先配置好您的账号信息： SDKAPPID 及 SECRETKEY \r
\r
Please configure your SDKAPPID/SECRETKEY in js/debug/GenerateTestUserSig.js`);
  var I = new rZ(m, O, S),
    B = I.genTestUserSig(o);
  return {
    sdkAppId: m,
    userSig: B,
  };
}
var vn,
  Ln,
  Oh,
  sm,
  W4 = To(null),
  UO = qh(),
  gl = UO.emit,
  um = UO.off,
  aZ = function () {
    var i = function (ge) {
        return ge.some(function (je) {
          return je.deviceId.length > 0;
        });
      },
      o = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            var je, ve, Y, ce;
            return Je.wrap(
              function (me) {
                for (;;)
                  switch ((me.prev = me.next)) {
                    case 0:
                      return (
                        (me.prev = 0),
                        (me.next = 3),
                        Promise.all([Cu.getCameras(), Cu.getMicrophones()])
                      );
                    case 3:
                      return (
                        (je = me.sent),
                        (ve = sa(je, 2)),
                        (Y = ve[0]),
                        (ce = ve[1]),
                        me.abrupt("return", i(Y) && i(ce))
                      );
                    case 10:
                      return (
                        (me.prev = 10),
                        (me.t0 = me.catch(0)),
                        console.error("Error checking devices:", me.t0),
                        me.abrupt("return", !1)
                      );
                    case 14:
                    case "end":
                      return me.stop();
                  }
              },
              ge,
              null,
              [[0, 10]]
            );
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      p = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            var je;
            return Je.wrap(function (Y) {
              for (;;)
                switch ((Y.prev = Y.next)) {
                  case 0:
                    return (Y.next = 2), Cu.checkSystemRequirements();
                  case 2:
                    if (
                      ((je = Y.sent),
                      console.log(
                        "当前环境".concat(je.result ? "" : "不", "支持TRTC"),
                        "支持情况明细：",
                        je.detail
                      ),
                      je.result)
                    ) {
                      Y.next = 7;
                      break;
                    }
                    return (
                      console.error("当前环境不支持TRTC!"),
                      Y.abrupt("return", !1)
                    );
                  case 7:
                    return Y.abrupt("return", !0);
                  case 8:
                  case "end":
                    return Y.stop();
                }
            }, ge);
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      m = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            var ve, Y, ce;
            return Je.wrap(
              function (me) {
                for (;;)
                  switch ((me.prev = me.next)) {
                    case 0:
                      return (
                        (ve = je.sdkAppId),
                        (Y = je.userId),
                        (ce = je.secretKey),
                        (me.prev = 1),
                        (W4.value = je),
                        Cu.Logger.setLogLevel(2),
                        p(),
                        (vn = Cu.createClient({
                          mode: "rtc",
                          sdkAppId: ve,
                          userId: Y,
                          userSig: B({
                            sdkAppId: ve,
                            userId: Y,
                            secretKey: ce,
                          }),
                        })),
                        console.log("TRTC初始化", ve, Y, ce),
                        $e(),
                        je.proxy && vn.setProxyServer(je.proxy),
                        me.abrupt("return", !0)
                      );
                    case 12:
                      return (
                        (me.prev = 12),
                        (me.t0 = me.catch(1)),
                        console.error("TRTC初始化失败", me.t0),
                        me.abrupt("return", !1)
                      );
                    case 16:
                    case "end":
                      return me.stop();
                  }
              },
              ge,
              null,
              [[1, 12]]
            );
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      S = function () {
        vn && (vn.destroy(), Ke(), (vn = null), (Ln = null));
      },
      O = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            return Je.wrap(function (Y) {
              for (;;)
                switch ((Y.prev = Y.next)) {
                  case 0:
                    if (!je) {
                      Y.next = 6;
                      break;
                    }
                    if (!vn) {
                      Y.next = 6;
                      break;
                    }
                    return (
                      console.log("roomId", je),
                      (Y.next = 5),
                      vn.join({
                        roomId: Number(je),
                      })
                    );
                  case 5:
                    console.log("TRTC 加入房间:".concat(je, "成功"));
                  case 6:
                  case "end":
                    return Y.stop();
                }
            }, ge);
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      I = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            var ve, Y, ce;
            return Je.wrap(
              function (me) {
                for (;;)
                  switch ((me.prev = me.next)) {
                    case 0:
                      if (((Y = je.view), Y)) {
                        me.next = 3;
                        break;
                      }
                      return me.abrupt("return");
                    case 3:
                      return (
                        (ce =
                          (ve = W4.value) === null || ve === void 0
                            ? void 0
                            : ve.userId),
                        (me.prev = 4),
                        (Ln = Cu.createStream({
                          userId: ce,
                          audio: !0,
                          // 是否从麦克风采集音频
                          video: !0,
                          // 是否从摄像头采集视频
                        })),
                        Ln.setVideoProfile("480p"),
                        (me.next = 9),
                        Ln.initialize()
                      );
                    case 9:
                      console.log(
                        " TRTC LocalStream [".concat(ce, "] initialized")
                      ),
                        Ln.play(Y)
                          .then(function () {
                            console.log(
                              " TRTC LocalStream [".concat(ce, "] playing")
                            );
                          })
                          .catch(function (Pe) {
                            console.log(
                              "TRTC LocalStream ["
                                .concat(ce, "] failed to play. Error: ")
                                .concat(Pe.message_)
                            );
                          }),
                        (me.next = 16);
                      break;
                    case 13:
                      (me.prev = 13),
                        (me.t0 = me.catch(4)),
                        console.error(
                          "TRTC LocalStream failed to initialize. Error: ".concat(
                            me.t0.message_
                          )
                        );
                    case 16:
                    case "end":
                      return me.stop();
                  }
              },
              ge,
              null,
              [[4, 13]]
            );
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      B = function (ge) {
        var je = ge.sdkAppId,
          ve = ge.userId,
          Y = ge.secretKey;
        return iZ({
          sdkAppId: je,
          userId: ve,
          secretKey: Y,
        }).userSig;
      },
      ee = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            return Je.wrap(
              function (ve) {
                for (;;)
                  switch ((ve.prev = ve.next)) {
                    case 0:
                      if (!(!vn || !Ln)) {
                        ve.next = 2;
                        break;
                      }
                      return ve.abrupt("return");
                    case 2:
                      return (ve.prev = 2), (ve.next = 5), vn.publish(Ln);
                    case 5:
                      console.log("TRTC LocalStream is published successfully"),
                        (ve.next = 11);
                      break;
                    case 8:
                      (ve.prev = 8),
                        (ve.t0 = ve.catch(2)),
                        console.log(
                          "TRTC LocalStream is failed to publish. Error: ".concat(
                            ve.t0.message_
                          )
                        );
                    case 11:
                    case "end":
                      return ve.stop();
                  }
              },
              ge,
              null,
              [[2, 8]]
            );
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      oe = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            var je, ve, Y;
            return Je.wrap(function (he) {
              for (;;)
                switch ((he.prev = he.next)) {
                  case 0:
                    if (!vn) {
                      he.next = 15;
                      break;
                    }
                    return (he.next = 3), vn.leave();
                  case 3:
                    if (!Ln) {
                      he.next = 15;
                      break;
                    }
                    return (he.next = 6), Ie();
                  case 6:
                    return (
                      (he.next = 8),
                      (je = Ln) === null ||
                      je === void 0 ||
                      (je = je.getAudioTrack()) === null ||
                      je === void 0
                        ? void 0
                        : je.stop()
                    );
                  case 8:
                    return (
                      (he.next = 10),
                      (ve = Ln) === null || ve === void 0 ? void 0 : ve.stop()
                    );
                  case 10:
                    return (
                      (he.next = 12),
                      (Y = Ln) === null || Y === void 0 ? void 0 : Y.close()
                    );
                  case 12:
                    return (he.next = 14), st();
                  case 14:
                    Ln = null;
                  case 15:
                  case "end":
                    return he.stop();
                }
            }, ge);
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      ie = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            return Je.wrap(function (Y) {
              for (;;)
                switch ((Y.prev = Y.next)) {
                  case 0:
                    if (!vn) {
                      Y.next = 6;
                      break;
                    }
                    return (
                      console.log("TRTC播放本地视频", je), (Y.next = 4), I(je)
                    );
                  case 4:
                    return (Y.next = 6), ee();
                  case 6:
                  case "end":
                    return Y.stop();
                }
            }, ge);
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      be = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            return Je.wrap(function (Y) {
              for (;;)
                switch ((Y.prev = Y.next)) {
                  case 0:
                    return (Y.next = 2), ie(je);
                  case 2:
                  case "end":
                    return Y.stop();
                }
            }, ge);
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      Ie = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            return Je.wrap(function (ve) {
              for (;;)
                switch ((ve.prev = ve.next)) {
                  case 0:
                    vn && Ln && (Ln.stop(), Ln.close());
                  case 1:
                  case "end":
                    return ve.stop();
                }
            }, ge);
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      Ce = function (ge) {
        vn && (console.log("remoteVideoInfo", ge), sm.play(ge.view));
      },
      We = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            return Je.wrap(function (ve) {
              for (;;)
                switch ((ve.prev = ve.next)) {
                  case 0:
                    if (!vn) {
                      ve.next = 3;
                      break;
                    }
                    return (ve.next = 3), sm.stop();
                  case 3:
                  case "end":
                    return ve.stop();
                }
            }, ge);
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      de = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            return Je.wrap(function (Y) {
              for (;;)
                switch ((Y.prev = Y.next)) {
                  case 0:
                    vn && Ln && (je && Ln.muteAudio(), je || Ln.unmuteAudio());
                  case 1:
                  case "end":
                    return Y.stop();
                }
            }, ge);
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      _t = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            return Je.wrap(function (Y) {
              for (;;)
                switch ((Y.prev = Y.next)) {
                  case 0:
                    vn && Ln && (je && Ln.muteVideo(), je || Ln.unmuteVideo());
                  case 1:
                  case "end":
                    return Y.stop();
                }
            }, ge);
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      It = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            var ve, Y;
            return Je.wrap(function (he) {
              for (;;)
                switch ((he.prev = he.next)) {
                  case 0:
                    if ((console.log("截图的参数", je), !(vn && Ln))) {
                      he.next = 8;
                      break;
                    }
                    if (
                      ((ve = Ln.getVideoFrame()),
                      !(ve && (je == null ? void 0 : je.frameType) == "local"))
                    ) {
                      he.next = 5;
                      break;
                    }
                    return he.abrupt("return", ve);
                  case 5:
                    if (
                      ((Y = sm.getVideoFrame()),
                      !(Y && (je == null ? void 0 : je.frameType) == "remote"))
                    ) {
                      he.next = 8;
                      break;
                    }
                    return he.abrupt("return", ve);
                  case 8:
                  case "end":
                    return he.stop();
                }
            }, ge);
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      Tt = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            var ve;
            return Je.wrap(
              function (ce) {
                for (;;)
                  switch ((ce.prev = ce.next)) {
                    case 0:
                      if (vn) {
                        ce.next = 3;
                        break;
                      }
                      return (
                        console.error("Local client is not defined."),
                        ce.abrupt("return")
                      );
                    case 3:
                      if (Ln) {
                        ce.next = 6;
                        break;
                      }
                      return (
                        console.error("Local stream is not defined."),
                        ce.abrupt("return")
                      );
                    case 6:
                      return (
                        (ce.prev = 6),
                        console.log("切换摄像头"),
                        (ce.next = 10),
                        Cu.getCameras()
                      );
                    case 10:
                      if (((ve = ce.sent), !(ve.length < 2))) {
                        ce.next = 14;
                        break;
                      }
                      return (
                        console.warn(
                          "TRTC Not enough cameras available to switch."
                        ),
                        ce.abrupt("return")
                      );
                    case 14:
                      return (ce.next = 16), Ln.switchDevice("video", je);
                    case 16:
                      console.log("TRTC switch camera success"), (ce.next = 22);
                      break;
                    case 19:
                      (ce.prev = 19),
                        (ce.t0 = ce.catch(6)),
                        console.error(" TRTC Failed to switch camera:", ce.t0);
                    case 22:
                    case "end":
                      return ce.stop();
                  }
              },
              ge,
              null,
              [[6, 19]]
            );
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      Jt = function (ge, je) {
        vn && vn.enableAudioVolumeEvaluation(ge, je);
      },
      yt = null,
      Et = null,
      Ze = null,
      Vt = null,
      pt = null,
      nt = null,
      Be = null,
      rt = null,
      jt = null,
      ot = null,
      zt = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            var ve, Y, ce;
            return Je.wrap(
              function (me) {
                for (;;)
                  switch ((me.prev = me.next)) {
                    case 0:
                      return (me.next = 2), st();
                    case 2:
                      if (!(!vn || !Ln)) {
                        me.next = 4;
                        break;
                      }
                      return me.abrupt("return");
                    case 4:
                      if (
                        ((Et = null), (ve = document.getElementById(je)), ve)
                      ) {
                        me.next = 9;
                        break;
                      }
                      return (
                        console.error("视频元素未找到"), me.abrupt("return", !1)
                      );
                    case 9:
                      return (
                        (yt = new (window.AudioContext ||
                          window.webkitAudioContext)()),
                        (Ze = yt.createMediaElementSource(ve)),
                        (me.next = 13),
                        navigator.mediaDevices.getUserMedia({
                          audio: {
                            echoCancellation: !0,
                            // 启用回音消除
                            noiseSuppression: !0,
                            // 启用噪声抑制
                            autoGainControl: !0,
                            // 启用自动增益控制
                          },
                          video: !1,
                        })
                      );
                    case 13:
                      if (
                        ((Et = me.sent),
                        (Vt = yt.createMediaStreamSource(Et)),
                        (pt = yt.createGain()),
                        (pt.gain.value = 0.5),
                        (nt = yt.createGain()),
                        (nt.gain.value = 1),
                        (Be = yt.createMediaStreamDestination()),
                        (rt = yt.createMediaStreamDestination()),
                        Ze.connect(pt).connect(Be),
                        Ze.connect(pt).connect(rt),
                        Vt.connect(nt).connect(Be),
                        (ot = Be.stream.getAudioTracks()[0]),
                        ot)
                      ) {
                        me.next = 31;
                        break;
                      }
                      return (
                        Ze.disconnect(),
                        pt.disconnect(),
                        nt.disconnect(),
                        yt.close().catch(function (Pe) {
                          return console.error("关闭 AudioContext 时出错:", Pe);
                        }),
                        me.abrupt("return")
                      );
                    case 31:
                      return (
                        (me.prev = 31),
                        (me.next = 34),
                        (Y = Ln.getAudioTrack()) === null || Y === void 0
                          ? void 0
                          : Y.stop()
                      );
                    case 34:
                      return (me.next = 36), Ln.replaceTrack(ot);
                    case 36:
                      console.log("音频轨道替换成功"), (me.next = 42);
                      break;
                    case 39:
                      (me.prev = 39),
                        (me.t0 = me.catch(31)),
                        console.error("替换音频轨道时出错:", me.t0);
                    case 42:
                      return (me.next = 44), ve.play();
                    case 44:
                      (ce = rt.stream),
                        (jt = new Audio()),
                        (jt.srcObject = ce),
                        jt.play().catch(function (Pe) {
                          console.error("播放音频时出错:", Pe);
                        });
                    case 48:
                    case "end":
                      return me.stop();
                  }
              },
              ge,
              null,
              [[31, 39]]
            );
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      st = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            return Je.wrap(
              function (ve) {
                for (;;)
                  switch ((ve.prev = ve.next)) {
                    case 0:
                      if (
                        (console.log("停止混合音频流，开始清理资源"),
                        jt &&
                          (jt.pause(),
                          (jt.srcObject = null),
                          (jt = null),
                          console.log("停止播放的 Audio 元素")),
                        ot &&
                          (ot.stop(),
                          (ot = null),
                          console.log("停止混合后的音频轨道")),
                        Ze &&
                          (Ze.disconnect(),
                          (Ze = null),
                          console.log("断开视频源的连接")),
                        Vt &&
                          (Vt.disconnect(),
                          (Vt = null),
                          console.log("断开麦克风源的连接")),
                        pt &&
                          (pt.disconnect(),
                          (pt = null),
                          console.log("断开视频增益节点的连接")),
                        nt &&
                          (nt.disconnect(),
                          (nt = null),
                          console.log("断开麦克风增益节点的连接")),
                        Be &&
                          (Be.stream.getTracks().forEach(function (Y) {
                            Y.stop(),
                              console.log(
                                "发送路径轨道 ".concat(Y.id, " 已停止")
                              );
                          }),
                          (Be = null),
                          console.log("停止发送路径的所有轨道")),
                        rt &&
                          (rt.stream.getTracks().forEach(function (Y) {
                            Y.stop(),
                              console.log(
                                "播放路径轨道 ".concat(Y.id, " 已停止")
                              );
                          }),
                          (rt = null),
                          console.log("停止播放路径的所有轨道")),
                        Et &&
                          (Et.getTracks().forEach(function (Y) {
                            Y.stop(),
                              console.log(
                                "麦克风轨道 ".concat(Y.id, " 已停止")
                              );
                          }),
                          (Et = null),
                          console.log("停止麦克风流的所有轨道")),
                        !yt)
                      ) {
                        ve.next = 21;
                        break;
                      }
                      return (ve.prev = 11), (ve.next = 14), yt.close();
                    case 14:
                      console.log("关闭 AudioContext"), (ve.next = 20);
                      break;
                    case 17:
                      (ve.prev = 17),
                        (ve.t0 = ve.catch(11)),
                        console.error("关闭 AudioContext 时出错:", ve.t0);
                    case 20:
                      yt = null;
                    case 21:
                      console.log("所有音频混流资源已清理");
                    case 22:
                    case "end":
                      return ve.stop();
                  }
              },
              ge,
              null,
              [[11, 17]]
            );
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      ct = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge(je) {
            var ve;
            return Je.wrap(function (ce) {
              for (;;)
                switch ((ce.prev = ce.next)) {
                  case 0:
                    return (
                      (ce.next = 2),
                      (ve = vn) === null || ve === void 0
                        ? void 0
                        : ve.subscribe(Oh).catch(function (he) {
                            console.log(
                              "TRTC subscribe failed: ".concat(he.message_)
                            );
                          })
                    );
                  case 2:
                    return (
                      console.log("TRTC 订阅屏幕共享流成功"),
                      (ce.next = 5),
                      Oh.play(je.view)
                    );
                  case 5:
                  case "end":
                    return ce.stop();
                }
            }, ge);
          })
        );
        return function (je) {
          return Re.apply(this, arguments);
        };
      })(),
      Lt = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            var je;
            return Je.wrap(function (Y) {
              for (;;)
                switch ((Y.prev = Y.next)) {
                  case 0:
                    return (
                      (Y.next = 2),
                      (je = vn) === null || je === void 0
                        ? void 0
                        : je.unsubscribe(Oh).catch(function (ce) {
                            console.log(
                              "TRTC unsubscribe failed: ".concat(ce.message_)
                            );
                          })
                    );
                  case 2:
                    console.log("TRTC 取消订阅屏幕共享流成功");
                  case 3:
                  case "end":
                    return Y.stop();
                }
            }, ge);
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      $e = /* @__PURE__ */ (function () {
        var Re = Wt(
          /* @__PURE__ */ Je.mark(function ge() {
            return Je.wrap(function (ve) {
              for (;;)
                switch ((ve.prev = ve.next)) {
                  case 0:
                    if (vn) {
                      ve.next = 2;
                      break;
                    }
                    return ve.abrupt("return");
                  case 2:
                    vn.on("error", function (Y) {
                      console.error(
                        "TRTC ERROR: " +
                          Y +
                          ",error.code: " +
                          Y.getCode() +
                          ",error.message: " +
                          Y.message
                      );
                    }),
                      vn.on("peer-join", function (Y) {
                        gl("remoteUserJoined", Y);
                      }),
                      vn.on("peer-leave", function (Y) {
                        gl("remoteUserLeft", Y);
                      }),
                      vn.on("stream-added", function (Y) {
                        console.log("stream-added", Y);
                        var ce = Y.stream,
                          he = ce.getId(),
                          me = ce.getUserId(),
                          Pe = ce.getType();
                        if (
                          (console.log(
                            "TRTC remote stream added: ["
                              .concat(me, "] ID: ")
                              .concat(he, " type: ")
                              .concat(ce.getType())
                          ),
                          Pe == "main")
                        ) {
                          var it;
                          (sm = ce),
                            (it = vn) === null ||
                              it === void 0 ||
                              it.subscribe(ce).catch(function (Xe) {
                                console.log(
                                  "TRTC subscribe failed: ".concat(Xe.message_)
                                );
                              }),
                            console.log(
                              "TRTC 通过监听‘stream-added’事件获得远端流对象 主流",
                              Y
                            ),
                            gl("remoteUserPublished", {
                              userId: me,
                              streamType: Pe,
                              isPublished: !0,
                            });
                        } else Pe == "auxiliary" && ((Oh = ce), console.log("TRTC 通过监听‘stream-added’事件获得远端流对象 辅流", Y));
                        Pe == "auxiliary" && (Oh = ce);
                      }),
                      vn.on("stream-removed", function (Y) {
                        var ce = Y.stream,
                          he = ce.getUserId(),
                          me = ce.getType();
                        gl("remoteUserPublished", {
                          userId: he,
                          streamType: me == "auxiliary" ? "sub" : me,
                          isPublished: !1,
                        });
                      }),
                      vn.on("audio-volume", function (Y) {
                        var ce = Y.result.map(function (he) {
                          return {
                            userId: he.userId,
                            volume: he.audioVolume,
                          };
                        });
                        gl("trtcAudioVolume", ce);
                      }),
                      vn.on("network-quality", function (Y) {
                        gl("trtcNetworkQuality", Y);
                      });
                  case 9:
                  case "end":
                    return ve.stop();
                }
            }, ge);
          })
        );
        return function () {
          return Re.apply(this, arguments);
        };
      })(),
      Ke = function () {
        vn &&
          (vn.off("*"),
          um("trtcError"),
          um("remoteUserJoined"),
          um("remoteUserLeft"),
          um("trtcNetworkQuality"));
      };
    return {
      isSupportedWebRTC: p,
      //检测 TRTC Web SDK 是否支持当前浏览器
      createSDK: m,
      // 创建SDK
      destroySDK: S,
      // 销毁SDK
      enterRoom: O,
      // 进入房间
      leaveRoom: oe,
      // 离开房间
      playLocalMedia: be,
      // 播放本地音视频
      stopLocalMedia: Ie,
      // 停止播放本地音视频
      playRemoteVideo: Ce,
      // 播放远程视频
      stopRemoteVideo: We,
      // 停止播放远程视频
      playScreenVideo: ct,
      // 开始屏幕分享
      stopPlayScreenVideo: Lt,
      // 停止屏幕分享
      enableAudioVolumeEvaluation: Jt,
      // 开启或关闭音量大小回调
      muteLocalVideo: _t,
      // 暂停本地视频
      muteLocalAudio: de,
      // 静音本地音频
      getVideoSnapshot: It,
      // 截图
      switchCamera: Tt,
      // 切换摄像头
      checkCameraDevice: o,
      // 摄像头麦克风检测
      mixAudioStreams: zt,
      stopMixAudioStreams: st,
    };
  };
const oZ = /* @__PURE__ */ Object.freeze(
  /* @__PURE__ */ Object.defineProperty(
    {
      __proto__: null,
      useTRTCWebSDK: aZ,
    },
    Symbol.toStringTag,
    { value: "Module" }
  )
);
export { om as getTRTCWebSDK };
